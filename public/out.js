(function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return false}}(),i=n&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(e){return false}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,o,a,s,l,u;if(e.split(",")[0].indexOf("base64")>=0){t=atob(e.split(",")[1])}else{t=decodeURIComponent(e.split(",")[1])}o=new ArrayBuffer(t.length);a=new Uint8Array(o);for(s=0;s<t.length;s+=1){a[s]=t.charCodeAt(s)}l=e.split(",")[0].split(":")[1].split(";")[0];if(n){return new Blob([i?a:o],{type:l})}u=new r;u.append(o);return u.getBlob(l)};if(e.HTMLCanvasElement&&!t.toBlob){if(t.mozGetAsFile){t.toBlob=function(e,n,i){if(i&&t.toDataURL&&o){e(o(this.toDataURL(n,i)))}else{e(this.mozGetAsFile("blob",n))}}}else if(t.toDataURL&&o){t.toBlob=function(e,t,n){e(o(this.toDataURL(t,n)))}}}if(typeof define==="function"&&define.amd){define(function(){return o})}else{e.dataURLtoBlob=o}})(window);(function(e,t,n,i){var r="slotMachine",o={active:0,delay:200,auto:false,spins:5,randomize:null,complete:null,stopHidden:true,direction:"up"};var a="slotMachineBlurFast",s="slotMachineBlurMedium",l="slotMachineBlurSlow",u="slotMachineGradient",c=u;e(n).ready(function(){var t='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterFast">'+'<feGaussianBlur stdDeviation="5" />'+"</filter>"+"</svg>#slotMachineBlurFilterFast";var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterMedium">'+'<feGaussianBlur stdDeviation="3" />'+"</filter>"+"</svg>#slotMachineBlurFilterMedium";var i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterSlow">'+'<feGaussianBlur stdDeviation="1" />'+"</filter>"+"</svg>#slotMachineBlurFilterSlow";var r='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox">'+'<linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0">'+'<stop stop-color="white" stop-opacity="0" offset="0"></stop>'+'<stop stop-color="white" stop-opacity="1" offset="0.25"></stop>'+'<stop stop-color="white" stop-opacity="1" offset="0.75"></stop>'+'<stop stop-color="white" stop-opacity="0" offset="1"></stop>'+"</linearGradient>"+'<rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect>'+"</mask>"+"</svg>#slotMachineFadeMask";e("body").append("<style>"+"."+a+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url("data:image/svg+xml;utf8,'+t+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}'+"."+s+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url("data:image/svg+xml;utf8,'+n+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}'+"."+l+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url("data:image/svg+xml;utf8,'+i+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}'+"."+u+"{"+"-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );"+'mask: url("data:image/svg+xml;utf8,'+r+'");'+"}"+"</style>")});if(typeof e.easing.easeOutBounce!=="function"){e.extend(e.easing,{easeOutBounce:function(e,t,n,i,r){if((t/=r)<1/2.75){return i*(7.5625*t*t)+n}else if(t<2/2.75){return i*(7.5625*(t-=1.5/2.75)*t+.75)+n}else if(t<2.5/2.75){return i*(7.5625*(t-=2.25/2.75)*t+.9375)+n}else{return i*(7.5625*(t-=2.625/2.75)*t+.984375)+n}}})}function d(e,t){var n,i=this,r,o=e,a=arguments,s=t;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(r)};this.pause=function(){if(this.running){t-=(new Date).getTime()-n;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;n=(new Date).getTime();r=setTimeout(function(){o.apply(i,Array.prototype.slice.call(a,2,a.length))},t);this.onresume()}};this.reset=function(){this.cancel();this.running=true;t=s;r=setTimeout(function(){o.apply(i,Array.prototype.slice.call(a,2,a.length))},s)};this.add=function(e){this.pause();t+=e;this.resume()};this.resume()}function h(t,n){this.element=t;this.settings=e.extend({},o,n);this.defaults=o;this.name=r;this.$slot=e(t);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.isStopping=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$container=this.$tiles.wrapAll('<div class="slotMachineContainer" />').parent();this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this._direction={selected:this.settings.direction==="down"?"down":"up",up:{initial:this.getTileOffset(this.active),first:0,last:this.getTileOffset(this.$tiles.length),to:this._maxTop,firstToLast:this.getTileOffset(this.$tiles.length),lastToFirst:0},down:{initial:this.getTileOffset(this.active),first:this.getTileOffset(this.$tiles.length),last:0,to:this._minTop,firstToLast:this.getTileOffset(this.$tiles.length),lastToFirst:0},get:function(e){return this[this.selected][e]}};this.$container.css("margin-top",this._direction.get("initial"));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}h.prototype.getTileOffset=function(e){var t=0;for(var n=0;n<e;n++){t+=this.$tiles.eq(n).outerHeight()}return-t+this._minTop};h.prototype.getVisibleTile=function(){var e=this.$tiles.first().height(),t=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(t/e))-1};h.prototype.setRandomize=function(e){if(typeof e==="number"){this.settings.randomize=function(){return e}}else{this.settings.randomize=e}};h.prototype.getRandom=function(e){var t,n=e||false;do{t=Math.floor(Math.random()*this.$tiles.length)}while(n&&t===this.active&&t>=0);return t};h.prototype.getCustom=function(){var e;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var t=this.settings.randomize.apply(this,[this.active]);if(t<0||t>=this.$tiles.length){t=0}e=t}else{e=this.getRandom()}return e};h.prototype._getPrev=function(){var e=this.active-1<0?this.$tiles.length-1:this.active-1;return e};h.prototype._getNext=function(){var e=this.active+1<this.$tiles.length?this.active+1:0;return e};h.prototype.getPrev=function(){return this._direction.selected==="up"?this._getPrev():this._getNext()};h.prototype.getNext=function(){return this._direction.selected==="up"?this._getNext():this._getPrev()};h.prototype.setDirection=function(e){if(this.isRunning){return}this._direction.selected=e==="down"?"down":"up";return this._direction[this._direction.selected]};h.prototype._setAnimationFX=function(e,t){var n=this;setTimeout(function(){n.$tiles.removeClass([a,s,l].join(" ")).addClass(e);if(t!==true||e===c){n.$slot.add(n.$tiles).removeClass(u)}else{n.$slot.add(n.$tiles).addClass(u)}},this.settings.delay/4)};h.prototype._resetPosition=function(){this.$container.css("margin-top",this._direction.get("initial"))};h.prototype.isVisible=function(){var n=this.$slot.offset().top>e(t).scrollTop()+e(t).height(),i=e(t).scrollTop()>this.$slot.height()+this.$slot.offset().top;return!n&&!i};h.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};h.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};h.prototype.shuffle=function(e,t){var n=this;if(t!==i){this._oncompleteStack[1]=t}this.isRunning=true;var r=this.settings.delay;if(this.futureActive===null){var o=this.getCustom();this.futureActive=o}if(typeof e==="number"){switch(e){case 1:case 2:this._setAnimationFX(l,true);break;case 3:case 4:this._setAnimationFX(s,true);r/=1.5;break;default:this._setAnimationFX(a,true);r/=2}}else{this._setAnimationFX(a,true);r/=2}if(!this.isVisible()&&this.settings.stopHidden===true){e=0;n.stop()}else{this.$container.animate({marginTop:-this.$container.height()},r,"linear",function(){n.$container.css("margin-top",n._direction.get("first"));if(e-1<=0){n.stop()}else{n.shuffle(e-1)}})}return this.futureActive};h.prototype.stop=function(e){if(!this.isRunning){return}else if(this.isStopping){return this.futureActive}var t=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(l,e===i?true:e);this.isRunning=true;this.isStopping=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this._direction.get("firstToLast"))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",this._direction.get("lastToFirst"))}}this.active=this.futureActive;var n=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},n,"easeOutBounce",function(){t.isStopping=false;t.isRunning=false;t.futureActive=null;if(typeof t._oncompleteStack[0]==="function"){t._oncompleteStack[0].apply(t,[t.active])}if(typeof t._oncompleteStack[1]==="function"){t._oncompleteStack[1].apply(t,[t.active])}});setTimeout(function(){t._setAnimationFX(c,false)},n/1.75);return this.active};h.prototype.auto=function(){var e=this;this._timer=new d(function(){if(typeof e.settings.randomize!=="function"){e.futureActive=e.getNext()}e.isRunning=true;if(!e.isVisible()&&e.settings.stopHidden===true){setTimeout(function(){e._timer.reset()},500)}else{e.shuffle(e.settings.spins,function(){e._timer.reset()})}},this.settings.auto)};function f(t,n){var i;if(!e.data(t[0],"plugin_"+r)){i=new h(t,n);e.data(t[0],"plugin_"+r,i)}else{i=e.data(t[0],"plugin_"+r)}return i}e.fn[r]=function(t){if(this.length===1){return f(this,t)}else{var n=this;return e.map(n,function(e,i){var r=n.eq(i);return f(r,t)})}}})(jQuery,window,document);(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,i){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap='#"+o+"']")[0],!!a&&n(a)):!1):(/^(input|select|textarea|button|object)$/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function i(e){for(var t,n;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function r(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",a)}function a(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function s(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}function l(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&t(n,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}};var u=0,c=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,a,s,l={},u=t.split(".")[0];return t=t.split(".")[1],r=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},o=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}(),void 0):(l[t]=i,void 0)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,i,r=c.call(arguments,1),o=0,a=r.length;a>o;o++)for(n in r[o])i=r[o][n],r[o].hasOwnProperty(n)&&void 0!==i&&(t[n]=e.isPlainObject(i)?e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(r){var o="string"==typeof r,a=c.call(arguments,1),s=this;return o?this.each(function(){var n,o=e.data(this,i);return"instance"===r?(s=o,!1):o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,a),n!==o&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+r+"'")}):(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each(function(){var t=e.data(this,i);t?(t.option(r||{}),t._init&&t._init()):e.data(this,i,new n(r,this))})),s}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=u++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,s):n.bind(u,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,r="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!r&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,n){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var r,o,a=Math.max,s=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),t=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||r?n.width():n.outerWidth(),height:i||r?n.height():n.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return p.apply(this,arguments);r=e.extend({},r);var f,m,g,v,y,b,w=e(r.of),_=e.position.getWithinInfo(r.within),x=e.position.getScrollInfo(_),C=(r.collision||"flip").split(" "),k={};return b=i(w),w[0].preventDefault&&(r.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,n=(r[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=d.exec(n[0]),t=d.exec(n[1]),k[this]=[e?e[0]:0,t?t[0]:0],r[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===r.at[0]?y.left+=m:"center"===r.at[0]&&(y.left+=m/2),"bottom"===r.at[1]?y.top+=g:"center"===r.at[1]&&(y.top+=g/2),f=t(k.at,m,g),y.left+=f[0],y.top+=f[1],this.each(function(){var i,u,c=e(this),d=c.outerWidth(),h=c.outerHeight(),p=n(this,"marginLeft"),b=n(this,"marginTop"),S=d+p+n(this,"marginRight")+x.width,T=h+b+n(this,"marginBottom")+x.height,N=e.extend({},y),D=t(k.my,c.outerWidth(),c.outerHeight());"right"===r.my[0]?N.left-=d:"center"===r.my[0]&&(N.left-=d/2),"bottom"===r.my[1]?N.top-=h:"center"===r.my[1]&&(N.top-=h/2),N.left+=D[0],N.top+=D[1],o||(N.left=l(N.left),N.top=l(N.top)),i={marginLeft:p,marginTop:b},e.each(["left","top"],function(t,n){e.ui.position[C[t]]&&e.ui.position[C[t]][n](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:h,collisionPosition:i,collisionWidth:S,collisionHeight:T,offset:[f[0]+D[0],f[1]+D[1]],my:r.my,at:r.at,within:_,elem:c})}),r.using&&(u=function(e){var t=v.left-N.left,n=t+m-d,i=v.top-N.top,o=i+g-h,l={target:{element:w,left:v.left,top:v.top,width:m,height:g},element:{element:c,left:N.left,top:N.top,width:d,height:h},horizontal:0>n?"left":t>0?"right":"center",vertical:0>o?"top":i>0?"bottom":"middle"};d>m&&m>s(t+n)&&(l.horizontal="center"),h>g&&g>s(i+o)&&(l.vertical="middle"),l.important=a(s(t),s(n))>a(s(i),s(o))?"horizontal":"vertical",r.using.call(this,e,l)}),c.offset(e.extend(N,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,u=s+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&0>=u?(n=e.left+l+t.collisionWidth-o-r,e.left+=l-n):e.left=u>0&&0>=l?r:l>u?r+o-t.collisionWidth:r:l>0?e.left+=l:u>0?e.left-=u:e.left=a(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,u=s+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&0>=u?(n=e.top+l+t.collisionHeight-o-r,e.top+=l-n):e.top=u>0&&0>=l?r:l>u?r+o-t.collisionHeight:r:l>0?e.top+=l:u>0?e.top-=u:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];
0>c?(n=e.left+h+f+p+t.collisionWidth-a-o,(0>n||s(c)>n)&&(e.left+=h+f+p)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+f+p-l,(i>0||d>s(i))&&(e.left+=h+f+p))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-a-l,h="top"===t.my[1],f=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>c?(i=e.top+f+p+m+t.collisionHeight-a-o,(0>i||s(c)>i)&&(e.top+=f+p+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+f+p+m-l,(n>0||d>s(n))&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,a,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in i)t.style[a]=i[a];t.appendChild(l),n=s||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",r=e(l).offset().left,o=r>10&&11>r,t.innerHTML="",n.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(i){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,n,i){e.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",t),i.dropped=o.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(s).scrollTop()<r.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<r.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(s).scrollLeft()<r.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<r.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+r.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,o,a,s,l,u,c,d,h,f,p=i.options,m=p.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)l=i.snapElements[h].left-i.margins.left,u=l+i.snapElements[h].width,c=i.snapElements[h].top-i.margins.top,d=c+i.snapElements[h].height,l-m>v||g>u+m||c-m>b||y>d+m||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(r=m>=Math.abs(c-b),o=m>=Math.abs(d-y),a=m>=Math.abs(l-v),s=m>=Math.abs(u-g),r&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left)),f=r||o||a||s,"outer"!==p.snapMode&&(r=m>=Math.abs(c-y),o=m>=Math.abs(d-b),a=m>=Math.abs(l-g),s=m>=Math.abs(u-v),r&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(r||o||a||s||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=r||o||a||s||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,a=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,i,r){if(!n.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,l=a+t.helperProportions.height,u=n.offset.left,c=n.offset.top,d=u+n.proportions().width,h=c+n.proportions().height;switch(i){case"fit":return o>=u&&d>=s&&a>=c&&h>=l;case"intersect":return o+t.helperProportions.width/2>u&&d>s-t.helperProportions.width/2&&a+t.helperProportions.height/2>c&&h>l-t.helperProportions.height/2;case"pointer":return e(r.pageY,c,n.proportions().height)&&e(r.pageX,u,n.proportions().width);case"touch":return(a>=c&&h>=a||l>=c&&h>=l||c>a&&l>h)&&(o>=u&&d>=o||s>=u&&d>=s||u>o&&s>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;o.length>i;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(r=0;s.length>r;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=e.ui.intersect(t,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===r}),o.length&&(i=e(o[0]).droppable("instance"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},_create:function(){var t,n,i,r,o,a=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)i=e.trim(t[n]),o="ui-resizable-"+i,r=e("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:s.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,o;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){s.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,i,r,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,r=this.originalMousePosition,o=this.axis,a=t.pageX-r.left||0,s=t.pageY-r.top||0,l=this._change[o];return this._updatePrevProperties(),l?(n=l.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),
e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,a,s,l,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&this._hasScroll(n[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-r},s=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(a,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),o.maxWidth>n&&(o.maxWidth=n),o.maxHeight>r&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),o&&u&&(e.left=s-t.minWidth),i&&u&&(e.left=s-t.maxWidth),a&&c&&(e.top=l-t.minHeight),r&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(i[t],10)||0,n[t]+=parseInt(r[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,r,o,a,s,l=e(this).resizable("instance"),u=l.options,c=l.element,d=u.containment,h=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,r=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(h,"left")?h.scrollWidth:o,s=l._hasScroll(h)?h.scrollHeight:r,l.parentData={element:h,left:i.left,top:i.top,width:a,height:s}))},resize:function(t){var n,i,r,o,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,u=a.position,c=a._aspectRatio||t.shiftKey,d={top:0,left:0},h=a.containerElement,f=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),u.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),c&&(a.size.height=a.size.width/a.aspectRatio,f=!1),a.position.left=s.helper?l.left:0),u.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,f=!1),a.position.top=a._helper?l.top:0),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio,f=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,c&&(a.size.width=a.size.height*a.aspectRatio,f=!1)),f||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,u=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};e(r.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(s[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,r=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,u=l[0]||1,c=l[1]||1,d=Math.round((r.width-o.width)/u)*u,h=Math.round((r.height-o.height)/c)*c,f=o.width+d,p=o.height+h,m=i.maxWidth&&f>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,v=i.minWidth&&i.minWidth>f,y=i.minHeight&&i.minHeight>p;i.grid=l,v&&(f+=u),y&&(p+=c),m&&(f-=u),g&&(p-=c),/^(se|s|e)$/.test(s)?(n.size.width=f,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=f,n.size.height=p,n.position.top=a.top-h):/^(sw)$/.test(s)?(n.size.width=f,n.size.height=p,n.position.left=a.left-d):((0>=p-c||0>=f-u)&&(t=n._getPaddingPlusBorderDimensions(this)),p-c>0?(n.size.height=p,n.position.top=a.top-h):(p=c-t.height,n.size.height=p,n.position.top=a.top+o.height-p),f-u>0?(n.size.width=f,n.position.left=a.left-d):(f=u-t.width,n.size.width=f,n.position.left=a.left+o.width-f))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");return r?(i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;return o>s&&(n=s,s=o,o=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),u=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?u=!(n.left>s||o>n.right||n.top>l||a>n.bottom):"fit"===r.tolerance&&(u=n.left>o&&s>n.right&&n.top>a&&l>n.bottom),u?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i?!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||i+u>s&&l>i+u,h="y"===this.options.axis||t+c>o&&a>t+c,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:t+this.helperProportions.width/2>o&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>s&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var i,r,o,a,s=[],l=[],u=this._connectWith();if(u&&t)for(i=u.length-1;i>=0;i--)for(o=e(u[i],this.document[0]),r=o.length-1;r>=0;r--)a=e.data(o[r],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,l,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(r=e(h[n],this.document[0]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],s=d[n][0],i=0,u=s.length;u>i;i++)l=e(s[i]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r)):"tr"===i?t._createTrPlaceholder(t.currentItem,r):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,r,o,a,s,l,u,c,d,h=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(r=1e4,o=null,c=h.floating||this._isFloating(this.currentItem),a=c?"left":"top",s=c?"width":"height",d=c?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[a],u=!1,t[d]-l>this.items[i][s]/2&&(u=!0),r>Math.abs(t[d]-l)&&(r=Math.abs(t[d]-l),o=this.items[i],this.direction=u?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),
i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;r.length>i;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,i=n.heightStyle,r=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),i=t.next(),r=i.uniqueId().attr("id");t.attr("aria-controls",r),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(t=r.height(),this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r[0]===i[0],a=o&&n.collapsible,s=a?e():r.next(),l=i.next(),u={oldHeader:i,oldPanel:l,newHeader:a?e():r,newPanel:s};t.preventDefault(),o&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=a?!1:this.headers.index(r),this.active=o?e():r,this._toggle(u),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),o||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var i,r,o,a=this,s=0,l=e.css("box-sizing"),u=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},d=u&&c.down||c,h=function(){a._toggleComplete(n)};return"number"==typeof d&&(o=d),"string"==typeof d&&(r=d),r=r||d.easing||c.easing,o=o||d.duration||c.duration,t.length?e.length?(i=e.show().outerHeight(),t.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:o,easing:r,complete:h,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===l&&(s+=n.now):"content"!==a.options.heightStyle&&(n.now=Math.round(i-t.outerHeight()-s),s=0)}}),void 0):t.animate(this.hideProps,o,r,h):e.animate(this.showProps,o,r,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,i,r,o,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,i=this.previousFilter||"",r=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),r===i?o=!0:r=i+r,n=this._filterMenuItems(r),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,i=this,r=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),i=e("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),t=o.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);i._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),0>r?this.activeMenu.scrollTop(o+r):r+s>a&&this.activeMenu.scrollTop(o+r-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-i-r}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,a="input"===r;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,n=!0,void 0;t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault(),void 0;if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){var i,r;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(r=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:r})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value),i=n.item.attr("aria-label")||r.value,i&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!i)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),
n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete;var h,f="ui-button ui-widget ui-state-default ui-corner-all",p="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var n=t.name,i=t.form,r=e([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?e(i).find("[name='"+n+"'][type=radio]"):e("[name='"+n+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,i="checkbox"===this.type||"radio"===this.type,r=i?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===h&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||e(this).removeClass(r)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),i&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return n.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];g(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return n.disabled?!1:(e(this).addClass("ui-state-active"),h=this,t.document.one("mouseup",function(){h=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return n.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return n.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" ui-state-active "+p).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(p),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),n=this.element.find(this.options.items),i=n.filter(":ui-button");n.not(":ui-button").button(),i.button("refresh"),this.buttons=n.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,o;i=t.nodeName.toLowerCase(),r="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),r),o.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,n){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(r=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[s?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;e.length>r;r++)e[r].length>n&&(n=e[r].length,i=r);return i},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,r,o){var a,l,u,c,d,h=this._dialogInst;return h||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),s(h.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty(),v===r&&(v=null))},_enableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var r,o,a,l,u=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=i),u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),s(u.settings,r),null!==a&&void 0!==r.dateFormat&&void 0===r.minDate&&(u.settings.minDate=this._formatDate(u,a)),null!==l&&void 0!==r.dateFormat&&void 0===r.maxDate&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u)),void 0)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,o=e.datepicker._getInst(t.target),a=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),r[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),n=e.datepicker._get(o,"onSelect"),n?(i=e.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[i,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);return e.datepicker._get(r,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),n&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,r,o,a,l,u,c;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),o=r?r.apply(t,[t,n]):{},o!==!1&&(s(n.settings,o),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),l=e.datepicker._checkOffset(n,l,a),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(u=e.datepicker._get(n,"showAnim"),c=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",i(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?n.dpDiv.show(u,e.datepicker._get(n,"showOptions"),c):n.dpDiv[u||"show"](u?c:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),r=i[1],o=17,s=t.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&a.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+o>u&&u>o?Math.abs(o+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,r,o,a=this._curInst;!a||t&&a!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,n,i,r){var o,a=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),i=this._get(o,"onSelect"),i?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,o=this._get(t,"altField");o&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(o).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var r,o,a,s,l=0,u=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,f=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,w=function(e){var n=t.length>r+1&&t.charAt(r+1)===e;return n&&r++,n},_=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r="y"===e?i:1,o=RegExp("^\\d{"+r+","+i+"}"),a=n.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(t,i,r){var o=-1,a=e.map(w(t)?r:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var i=t[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(o=t[0],l+=i.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;t.length>r;r++)if(b)"'"!==t.charAt(r)||w("'")?C():b=!1;else switch(t.charAt(r)){case"d":v=_("d");break;case"D":x("D",d,h);break;case"o":y=_("o");break;case"m":g=_("m");break;case"M":g=x("M",f,p);break;case"y":m=_("y");break;case"@":s=new Date(_("@")),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((_("!")-this._ticksTo1970)/1e4),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":w("'")?C():b=!0;break;default:C()}if(n.length>l&&(a=n.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),y>-1)for(g=1,v=y;;){if(o=this._getDaysInMonth(m,g-1),o>=v)break;g++,v-=o}if(s=this._daylightSavingAdjust(new Date(m,g-1,v)),s.getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=e.length>i+1&&e.charAt(i+1)===t;return n&&i++,n},u=function(e,t,n){var i=""+t;if(l(e))for(;n>i.length;)i="0"+i;return i},c=function(e,t,n,i){return l(e)?i[t]:n[t]},d="",h=!1;if(t)for(i=0;e.length>i;i++)if(h)"'"!==e.charAt(i)||l("'")?d+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":d+=u("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),r,o);break;case"o":d+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),a,s);break;case"y":d+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(i)}return d},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=e.length>t+1&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;e.length>t;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(n,i,a)||r}catch(s){i=t?"":i}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=i?o.getDate():0,e.currentMonth=i?o.getMonth():0,e.currentYear=i?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=r.getFullYear(),a=r.getMonth(),s=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=7*parseInt(u[1],10);break;case"m":case"M":a+=parseInt(u[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(u[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(o,a))}u=l.exec(n)}return new Date(o,a,s)},a=null==n||""===n?i:"string"==typeof n?o(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return a=a&&"Invalid Date"==""+a?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),r===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y,b,w,_,x,C,k,S,T,N,D,M,E,R,A,P,I,B,H,z,O,W,F=new Date,L=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),$=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),j=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),K=1!==Y[0]||1!==Y[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-q,ee=e.drawYear;
if(0>Z&&(Z+=12,ee--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-Y[0]*Y[1]+1,Q.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,0>Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,n=this._get(e,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-G,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=V?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+G,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+r+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+r+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?X:L,a=V?this.formatDate(a,s,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+($?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",x=0;Y[0]>x;x++){for(C="",this.maxRows=4,k=0;Y[1]>k;k++){if(S=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),T=" ui-corner-all",N="",K){if(N+="<div class='ui-datepicker-group",Y[1]>1)switch(k){case 0:N+=" ui-datepicker-group-first",T=" ui-corner-"+($?"right":"left");break;case Y[1]-1:N+=" ui-datepicker-group-last",T=" ui-corner-"+($?"left":"right");break;default:N+=" ui-datepicker-group-middle",T=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?$?o:i:"")+(/all|right/.test(T)&&0===x?$?i:o:"")+this._generateMonthYearHeader(e,Z,ee,J,Q,x>0||k>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",D=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)M=(_+c)%7,D+="<th scope='col'"+((_+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[M]+"'>"+f[M]+"</span></th>";for(N+=D+"</tr></thead><tbody>",E=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,E)),R=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,A=Math.ceil((R+E)/7),P=K?this.maxRows>A?this.maxRows:A:A,this.maxRows=P,I=this._daylightSavingAdjust(new Date(ee,Z,1-R)),B=0;P>B;B++){for(N+="<tr>",H=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(I)+"</td>":"",_=0;7>_;_++)z=g?g.apply(e.input?e.input[0]:null,[I]):[!0,""],O=I.getMonth()!==Z,W=O&&!y||!z[0]||J&&J>I||Q&&I>Q,H+="<td class='"+((_+c+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(I.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===I.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+z[1]+(I.getTime()===X.getTime()?" "+this._currentClass:"")+(I.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===L.getTime()?" ui-state-highlight":"")+(I.getTime()===X.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);N+=H+"</tr>"}Z++,Z>11&&(Z=0,ee++),N+="</tbody></table>"+(K?"</div>"+(Y[0]>0&&k===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=N}w+=C}return w+=u,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,i,r,o,a,s){var l,u,c,d,h,f,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=i.getMonth())&&(!u||r.getMonth()>=c)&&(w+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");w+="</select>"}if(y||(b+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},p=f(d[0]),m=Math.max(p,f(d[1]||"")),p=i?Math.max(p,i.getFullYear()):p,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!o&&g&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),r=e.drawMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||s>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new r,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,i=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&"body"!==n.nodeName.toLowerCase()&&e(n).blur()}catch(r){}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){r.focus()}),t.preventDefault()):(this._delay(function(){i.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(n,function(n,i){var r,o;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(t.element[0],arguments)},o={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,o){var a=o.offset.left-n.document.scrollLeft(),s=o.offset.top-n.document.scrollTop();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(s>=0?"+":"")+s,of:n.window},e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,r=i.resizable,o=this.uiDialog.css("position"),a="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,r){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(r))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(r,o){var a=n.uiDialog.offset(),s=a.left-n.document.scrollLeft(),l=a.top-n.document.scrollTop();i.height=n.uiDialog.height(),i.width=n.uiDialog.width(),i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" "+"top"+(l>=0?"+":"")+l,of:n.window},e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,t(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(r[e]=t)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var n,i,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=r.is(":data(ui-draggable)"),n&&!t&&r.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=r.is(":data(ui-resizable)"),i&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&i.index!==t.focusIndex&&(t._trigger("focus",e,{item:i}),t.isOpen||t._select(i,e)),t.focusIndex=i.index,t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,n){var i=this,r="";e.each(n,function(n,o){o.optgroup!==r&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:o.optgroup}).appendTo(t),r=o.optgroup),i._renderItemData(t,o)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>");return n.disabled&&i.addClass("ui-state-disabled"),this._setText(i,n.label),i.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),r+=":not(.ui-state-disabled)"),i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](r).eq(-1):n[e+"All"](r).eq(0),i.length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var n=[];t.each(function(t,i){var r=e(i),o=r.parent("optgroup");n.push({element:r,index:t,value:r.val(),label:r.text(),optgroup:o.attr("label")||"",disabled:o.prop("disabled")||r.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",a=[];
for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;n>t;t++)a.push(o);this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,a,s,l,u,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-c.values(t));(r>n||r===n&&(t===c._lastChangedValue||c.values(t)===d.min))&&(r=n,o=e(this),a=t)}),s=this._start(t,a),s===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),o!==!1&&this.values(t,n))):n!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:n}),o!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,i=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=i+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,i,r,o,a=this.options.range,s=this.options,l=this,u=this._animateOff?!1:s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?100*((i-r)/(o-r)):0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var n,i,r,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(o=this.options.step,i=r=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;r=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;r=this._trimAlignValue(i-o)}this._slide(t,a,r)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var r=n.attr(i);void 0!==r&&r.length&&(t[i]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&i.min>e?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:l(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:l(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:l(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:l(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:l(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(l(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;t=t.cloneNode(!1),n=t.href.replace(e,""),i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(r){}try{i=decodeURIComponent(i)}catch(r){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,r){return e(r).attr("aria-controls")===i?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(i),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var r,o,a,s=e(i).uniqueId().attr("id"),l=e(i).closest("li"),u=l.attr("aria-controls");t._isLocal(i)?(r=i.hash,a=r.substring(1),o=t.element.find(t._sanitizeSelector(r))):(a=l.attr("aria-controls")||e({}).uniqueId()[0].id,r="#"+a,o=t.element.find(r),o.length||(o=t._createPanel(a),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":a,"aria-labelledby":s}),o.attr("aria-labelledby",s)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r.closest("li"),a=o[0]===i[0],s=a&&n.collapsible,l=s?e():this._getPanelForTab(o),u=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:u,newTab:s?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=s?!1:this.tabs.index(o),this.active=a?e():o,this.xhr&&this.xhr.abort(),u.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,n){function i(){o.running=!1,o._trigger("activate",t,n)}function r(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,i):(a.show(),i())}var o=this,a=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),r()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},l=function(e,t){"abort"===t&&i.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(e,t,r){setTimeout(function(){a.html(e),i._trigger("load",n,s),l(r,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i.element[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,o=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){r._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=o),this._open(t,e,n))})}),n&&this._open(t,e,n),void 0)},_open:function(t,n,i){function r(e){u.of=e,a.is(":hidden")||a.position(u)}var o,a,s,l,u=e.extend({},this.options.position);if(i){if(o=this._find(n))return o.tooltip.find(".ui-tooltip-content").html(i),void 0;n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),a=o.tooltip,this._addDescribedBy(n,a.attr("id")),a.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),i.clone?(l=i.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=i,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):a.position(e.extend({of:n},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){a.is(":visible")&&(r(u.of),clearInterval(s))},e.fx.interval)),this._trigger("open",t,{tooltip:a})}},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)},close:function(t){var n,i=this,r=e(t?t.currentTarget:this.element),o=this._find(r);
return o?(n=o.tooltip,o.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),o.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),o.closing=!0,this._trigger("close",t,{tooltip:n}),o.hiding||(o.closing=!1)),void 0):(r.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),i=n.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur"),o=i.element;r.target=r.currentTarget=o[0],t.close(r,!0),e("#"+n).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:e>i.max?i.max:e)}function i(n){var i=u(),r=i._rgba=[];return n=n.toLowerCase(),p(l,function(e,o){var a,s=o.re.exec(n),l=s&&o.parse(s),u=o.space||"rgba";return l?(a=i[u](l),i[c[u].cache]=a[c[u].cache],r=i._rgba=a._rgba,!1):t}),r.length?("0,0,0,0"===r.join()&&e.extend(r,o.transparent),i):o[n]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=u.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(r,a,s,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var d=this,h=e.type(r),f=this._rgba=[];return a!==t&&(r=[r,a,s,l],h="array"),"string"===h?this.parse(i(r)||o._default):"array"===h?(p(c.rgba.props,function(e,t){f[t.idx]=n(r[t.idx],t)}),this):"object"===h?(r instanceof u?p(c,function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}):p(c,function(t,i){var o=i.cache;p(i.props,function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==r[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(r[e],t,!0)}),d[o]&&0>e.inArray(null,d[o].slice(0,3))&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):t},is:function(e){var n=u(e),i=!0,r=this;return p(c,function(e,o){var a,s=n[o.cache];return s&&(a=r[o.cache]||o.to&&o.to(r._rgba)||[],p(o.props,function(e,n){return null!=s[n.idx]?i=s[n.idx]===a[n.idx]:t})),i}),i},_space:function(){var e=[],t=this;return p(c,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=u(e),r=i._space(),o=c[r],a=0===this.alpha()?u("transparent"):this,s=a[o.cache]||o.to(a._rgba),l=s.slice();return i=i[o.cache],p(o.props,function(e,r){var o=r.idx,a=s[o],u=i[o],c=d[r.type]||{};null!==u&&(null===a?l[o]=u:(c.mod&&(u-a>c.mod/2?a+=c.mod:a-u>c.mod/2&&(a-=c.mod)),l[o]=n((u-a)*t+a,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=u(t)._rgba;return u(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),l=Math.min(i,r,o),u=s-l,c=s+l,d=.5*c;return t=l===s?0:i===s?60*(r-o)/u+360:r===s?60*(o-i)/u+120:60*(i-r)/u+240,n=0===u?0:.5>=d?u/c:u/(2-c),[Math.round(t)%360,n,d,null==a?1:a]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},p(c,function(i,r){var o=r.props,a=r.cache,l=r.to,c=r.from;u.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var r,s=e.type(i),d="array"===s||"object"===s?i:arguments,h=this[a].slice();return p(o,function(e,t){var i=d["object"===s?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),c?(r=u(c(h)),r[a]=h,r):u(h)},p(o,function(t,n){u.fn[t]||(u.fn[t]=function(r){var o,a=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[n.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),u[n.idx]=r,this[l](u)))})})}),u.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=u(o||r),!h.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=u(t.elem,n),t.end=u(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},u.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function n(t,n){var i,o,a={};for(i in n)o=n[i],t[i]!==o&&(r[i]||(e.fx.step[i]||!isNaN(parseFloat(o)))&&(a[i]=o));return a}var i=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(r,o,a,s){var l=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",u=l.children?a.find("*").addBack():a;u=u.map(function(){var n=e(this);return{el:n,start:t(this)}}),o=function(){e.each(i,function(e,t){r[t]&&a[t+"Class"](r[t])})},o(),u=u.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",s),u=u.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,u.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,r,o,a){return"boolean"==typeof i||void 0===i?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,r,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function t(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(y+t[n],e[0].style[t[n]])},restore:function(e,t){var n,i;for(i=0;t.length>i;i++)null!==t[i]&&(n=e.data(y+t[i]),void 0===n&&(n=""),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=i.complete,s=i.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),n()):a.call(r[0],i,n)}var i=t.apply(this,arguments),r=i.mode,o=i.queue,a=e.effects.effect[i.effect];return e.fx.off||!a?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(n):this.queue(o||"fx",n)},show:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(e.fn.show),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"==typeof i)return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,n){var i,r,o,a=e(this),s=/up|down|vertical/,l=/up|left|vertical|horizontal/,u=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(a,t.mode||"hide"),d=t.direction||"up",h=s.test(d),f=h?"height":"width",p=h?"top":"left",m=l.test(d),g={},v="show"===c;a.parent().is(".ui-effects-wrapper")?e.effects.save(a.parent(),u):e.effects.save(a,u),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),r=i[f](),o=parseFloat(i.css(p))||0,g[f]=v?r:0,m||(a.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[p]=v?o:r+o),v&&(i.css(f,0),m||i.css(p,o+r)),i.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&a.hide(),e.effects.restore(a,u),e.effects.removeWrapper(a),n()}})},e.effects.effect.bounce=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),u="hide"===l,c="show"===l,d=t.direction||"up",h=t.distance,f=t.times||5,p=2*f+(c||u?1:0),m=t.duration/p,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=a.queue(),w=b.length;for((c||u)&&s.push("opacity"),e.effects.save(a,s),a.show(),e.effects.createWrapper(a),h||(h=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,y?2*-h:2*h).animate(o,m,g)),u&&(h/=Math.pow(2,f-1)),o={},o[v]=0,i=0;f>i;i++)r={},r[v]=(y?"-=":"+=")+h,a.animate(r,m,g).animate(o,m,g),h=u?2*h:h/2;u&&(r={opacity:0},r[v]=(y?"-=":"+=")+h,a.animate(r,m,g)),a.queue(function(){u&&a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),a.dequeue()},e.effects.effect.clip=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),u="show"===l,c=t.direction||"vertical",d="vertical"===c,h=d?"height":"width",f=d?"top":"left",p={};e.effects.save(a,s),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),r="IMG"===a[0].tagName?i:a,o=r[h](),u&&(r.css(h,0),r.css(f,o/2)),p[h]=u?o:0,p[f]=u?0:o/2,r.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){u||a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}})},e.effects.effect.drop=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),s="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",d={opacity:s?1:0};e.effects.save(r,o),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(u,"pos"===c?-i:i),d[u]=(s?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})},e.effects.effect.explode=function(t,n){function i(){b.push(this),b.length===d*h&&r()}function r(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),n()}var o,a,s,l,u,c,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/h),y=Math.ceil(f.outerHeight()/d),b=[];for(o=0;d>o;o++)for(l=g.top+o*y,c=o-(d-1)/2,a=0;h>a;a++)s=g.left+a*v,u=a-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:s+(m?u*v:0),top:l+(m?c*y:0),opacity:m?0:1}).animate({left:s+(m?0:u*v),top:l+(m?0:c*y),opacity:m?1:0},t.duration||500,t.easing,i)},e.effects.effect.fade=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},e.effects.effect.fold=function(t,n){var i,r,o=e(this),a=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"hide"),l="show"===s,u="hide"===s,c=t.size||15,d=/([0-9]+)%/.exec(c),h=!!t.horizFirst,f=l!==h,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,a),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),r=f?[i.width(),i.height()]:[i.height(),i.width()],d&&(c=parseInt(d[1],10)/100*r[u?0:1]),l&&i.css(h?{height:0,width:c}:{height:c,width:0}),g[p[0]]=l?r[0]:c,v[p[1]]=l?r[1]:0,i.animate(g,m,t.easing).animate(v,m,t.easing,function(){u&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),n()})},e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,r),n()}})},e.effects.effect.size=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],u=["width","height","overflow"],c=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(a,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=a.css("position"),y=p?s:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===f?(a.from=t.to||b,a.to=t.from||i):(a.from=t.from||("show"===f?b:i),a.to=t.to||("hide"===f?b:i)),o={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(y=y.concat(d),a.from=e.effects.setTransition(a,d,o.from.y,a.from),a.to=e.effects.setTransition(a,d,o.to.y,a.to)),o.from.x!==o.to.x&&(y=y.concat(h),a.from=e.effects.setTransition(a,h,o.from.x,a.from),a.to=e.effects.setTransition(a,h,o.to.x,a.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(c).concat(u),a.from=e.effects.setTransition(a,c,o.from.y,a.from),a.to=e.effects.setTransition(a,c,o.to.y,a.to)),e.effects.save(a,y),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(r=e.effects.getBaseline(g,i),a.from.top=(i.outerHeight-a.outerHeight())*r.y,a.from.left=(i.outerWidth-a.outerWidth())*r.x,a.to.top=(i.outerHeight-a.to.outerHeight)*r.y,a.to.left=(i.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),u=s.concat(d).concat(h),a.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};p&&e.effects.save(n,u),n.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},n.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(n.from=e.effects.setTransition(n,d,o.from.y,n.from),n.to=e.effects.setTransition(n,d,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=e.effects.setTransition(n,h,o.from.x,n.from),n.to=e.effects.setTransition(n,h,o.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){p&&e.effects.restore(n,u)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),e.effects.restore(a,y),p||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,n){var i=parseInt(n,10),r=e?a.to.left:a.to.top;return"auto"===n?r+"px":i+r+"px"})})),e.effects.removeWrapper(a),n()}})},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),o=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),s=t.direction||"both",l=t.origin,u={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==s?a/100:1,x:"vertical"!==s?a/100:1};r.effect="size",r.queue=!1,r.complete=n,"effect"!==o&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:u),r.to={height:u.height*c.y,width:u.width*c.x,outerHeight:u.outerHeight*c.y,outerWidth:u.outerWidth*c.x},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),o="hide"===r,a=parseInt(t.percent,10)||150,s=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:o?a:100,from:o?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),i.effect(t)},e.effects.effect.pulsate=function(t,n){var i,r=e(this),o=e.effects.setMode(r,t.mode||"show"),a="show"===o,s="hide"===o,l=a||"hide"===o,u=2*(t.times||5)+(l?1:0),c=t.duration/u,d=0,h=r.queue(),f=h.length;for((a||!r.is(":visible"))&&(r.css("opacity",0).show(),d=1),i=1;u>i;i++)r.animate({opacity:d},c,t.easing),d=1-d;r.animate({opacity:d},c,t.easing),r.queue(function(){s&&r.hide(),n()}),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,u+1))),r.dequeue()},e.effects.effect.shake=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,u=t.times||3,c=2*u+1,d=Math.round(t.duration/c),h="up"===s||"down"===s?"top":"left",f="up"===s||"left"===s,p={},m={},g={},v=r.queue(),y=v.length;for(e.effects.save(r,o),r.show(),e.effects.createWrapper(r),p[h]=(f?"-=":"+=")+l,m[h]=(f?"+=":"-=")+2*l,g[h]=(f?"-=":"+=")+2*l,r.animate(p,d,t.easing),i=1;u>i;i++)r.animate(m,d,t.easing).animate(g,d,t.easing);r.animate(m,d,t.easing).animate(p,d/2,t.easing).queue(function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),r.dequeue()},e.effects.effect.slide=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),s="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,d={};e.effects.save(r,o),r.show(),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(u,c?isNaN(i)?"-"+i:-i:i),d[u]=(s?c?"+=":"-=":c?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})},e.effects.effect.transfer=function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),a=e("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,u=r.offset(),c={top:u.top-s,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},d=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-s,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),n()})}});if(!window.localStorage){Object.defineProperty(window,"localStorage",new function(){var e=[],t={};Object.defineProperty(t,"getItem",{value:function(e){return e?this[e]:null},writable:false,configurable:false,enumerable:false});Object.defineProperty(t,"key",{value:function(t){return e[t]},writable:false,configurable:false,enumerable:false});Object.defineProperty(t,"setItem",{value:function(e,t){if(!e){return}document.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},writable:false,configurable:false,enumerable:false});Object.defineProperty(t,"length",{get:function(){return e.length},configurable:false,enumerable:false});Object.defineProperty(t,"removeItem",{value:function(e){if(!e){return}document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},writable:false,configurable:false,enumerable:false});this.get=function(){var n;for(var i in t){n=e.indexOf(i);if(n===-1){t.setItem(i,t[i])}else{e.splice(n,1)}delete t[i]}for(e;e.length>0;e.splice(0,1)){t.removeItem(e[0])}for(var r,o,a=0,s=document.cookie.split(/\s*;\s*/);a<s.length;a++){r=s[a].split(/\s*=\s*/);if(r.length>1){t[o=unescape(r[0])]=unescape(r[1]);e.push(o)}}return t};this.configurable=false;this.enumerable=true})}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return In.apply(null,arguments)}function t(e){In=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function s(e,t,n,i){return De(e,t,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){return null==e._pf&&(e._pf=l()),e._pf}function c(e){if(null==e._isValid){var t=u(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=s(NaN);return null!=e?a(u(t),e):u(t).userInvalidated=!0,t}function h(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=u(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Hn.length>0)for(n in Hn)i=Hn[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function f(t){h(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),zn===!1&&(zn=!0,e.updateOffset(this),zn=!1)}function p(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=m(t)),n}function v(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&a++;return a+o}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,i,r,o=0;o<e.length;){for(r=b(e[o]).split("-"),t=r.length,n=b(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=_(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(r,n,!0)>=t-1)break;t--}o++}return null}function _(e){var t=null;if(!On[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Bn._abbr,require("./locale/"+e),x(t)}catch(n){}return On[e]}function x(e,t){var n;return e&&(n="undefined"==typeof t?k(e):C(e,t),n&&(Bn=n)),Bn._abbr}function C(e,t){return null!==t?(t.abbr=e,On[e]=On[e]||new y,On[e].set(t),x(e),On[e]):(delete On[e],null)}function k(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Bn;if(!n(e)){if(t=_(e))return t;e=[e]}return w(e)}function S(e,t){var n=e.toLowerCase();Wn[n]=Wn[n+"s"]=Wn[t]=e}function T(e){return"string"==typeof e?Wn[e]||Wn[e.toLowerCase()]:void 0}function N(e){var t,n,i={};for(n in e)o(e,n)&&(t=T(n),t&&(i[t]=e[n]));return i}function D(t,n){return function(i){return null!=i?(E(this,t,i),e.updateOffset(this,n),this):M(this,t)}}function M(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function E(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function R(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),"function"==typeof this[e])return this[e](t);return this}function A(e,t,n){var i=""+Math.abs(e),r=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function P(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(Un[e]=r),t&&(Un[t[0]]=function(){return A(r.apply(this,arguments),t[1],t[2])}),n&&(Un[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function I(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,i=e.match(Fn);for(t=0,n=i.length;n>t;t++)Un[i[t]]?i[t]=Un[i[t]]:i[t]=I(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function H(e,t){return e.isValid()?(t=z(t,e.localeData()),$n[t]=$n[t]||B(t),$n[t](e)):e.localeData().invalidDate()}function z(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ln.lastIndex=0;i>=0&&Ln.test(e);)e=e.replace(Ln,n),Ln.lastIndex=0,i-=1;return e}function O(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function W(e,t,n){ri[e]=O(t)?t:function(e){return e&&n?n:t}}function F(e,t){return o(ri,e)?ri[e](t._strict,t._locale):new RegExp(L(e));
}function L(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)oi[e[n]]=i}function U(e,t){$(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function j(e,t,n){null!=t&&o(oi,e)&&oi[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function Y(e){return this._months[e.month()]}function q(e){return this._monthsShort[e.month()]}function G(e,t,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=s([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function K(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function X(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):M(this,"Month")}function J(){return V(this.year(),this.month())}function Q(e){var t,n=e._a;return n&&-2===u(e).overflow&&(t=n[si]<0||n[si]>11?si:n[li]<1||n[li]>V(n[ai],n[si])?li:n[ui]<0||n[ui]>24||24===n[ui]&&(0!==n[ci]||0!==n[di]||0!==n[hi])?ui:n[ci]<0||n[ci]>59?ci:n[di]<0||n[di]>59?di:n[hi]<0||n[hi]>999?hi:-1,u(e)._overflowDayOfYear&&(ai>t||t>li)&&(t=li),u(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var n=!0;return a(function(){return n&&(Z(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function te(e,t){mi[e]||(Z(t),mi[e]=!0)}function ne(e){var t,n,i=e._i,r=gi.exec(i);if(r){for(u(e).iso=!0,t=0,n=vi.length;n>t;t++)if(vi[t][1].exec(i)){e._f=vi[t][0];break}for(t=0,n=yi.length;n>t;t++)if(yi[t][1].exec(i)){e._f+=(r[6]||" ")+yi[t][0];break}i.match(ti)&&(e._f+="Z"),_e(e)}else e._isValid=!1}function ie(t){var n=bi.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function re(e,t,n,i,r,o,a){var s=new Date(e,t,n,i,r,o,a);return 1970>e&&s.setFullYear(e),s}function oe(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ae(e){return se(e)?366:365}function se(e){return e%4===0&&e%100!==0||e%400===0}function le(){return se(this.year())}function ue(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=Me(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ce(e){return ue(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function he(){return this._week.doy}function fe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function pe(e){var t=ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function me(e,t,n,i,r){var o,a=6+r-i,s=oe(e,0,1+a),l=s.getUTCDay();return r>l&&(l+=7),n=null!=n?1*n:r,o=1+a+7*(t-1)-l+n,{year:o>0?e:e-1,dayOfYear:o>0?o:ae(e-1)+o}}function ge(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ve(e,t,n){return null!=e?e:null!=t?t:n}function ye(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,i,r,o=[];if(!e._d){for(i=ye(e),e._w&&null==e._a[li]&&null==e._a[si]&&we(e),e._dayOfYear&&(r=ve(e._a[ai],i[ai]),e._dayOfYear>ae(r)&&(u(e)._overflowDayOfYear=!0),n=oe(r,0,e._dayOfYear),e._a[si]=n.getUTCMonth(),e._a[li]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ui]&&0===e._a[ci]&&0===e._a[di]&&0===e._a[hi]&&(e._nextDay=!0,e._a[ui]=0),e._d=(e._useUTC?oe:re).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ui]=24)}}function we(e){var t,n,i,r,o,a,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=ve(t.GG,e._a[ai],ue(Me(),1,4).year),i=ve(t.W,1),r=ve(t.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=ve(t.gg,e._a[ai],ue(Me(),o,a).year),i=ve(t.w,1),null!=t.d?(r=t.d,o>r&&++i):r=null!=t.e?t.e+o:o),s=me(n,i,r,a,o),e._a[ai]=s.year,e._dayOfYear=s.dayOfYear}function _e(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],u(t).empty=!0;var n,i,r,o,a,s=""+t._i,l=s.length,c=0;for(r=z(t._f,t._locale).match(Fn)||[],n=0;n<r.length;n++)o=r[n],i=(s.match(F(o,t))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&u(t).unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),c+=i.length),Un[o]?(i?u(t).empty=!1:u(t).unusedTokens.push(o),j(o,i,t)):t._strict&&!i&&u(t).unusedTokens.push(o);u(t).charsLeftOver=l-c,s.length>0&&u(t).unusedInput.push(s),u(t).bigHour===!0&&t._a[ui]<=12&&t._a[ui]>0&&(u(t).bigHour=void 0),t._a[ui]=xe(t._locale,t._a[ui],t._meridiem),be(t),Q(t)}function xe(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function Ce(e){var t,n,i,r,o;if(0===e._f.length)return u(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],_e(t),c(t)&&(o+=u(t).charsLeftOver,o+=10*u(t).unusedTokens.length,u(t).score=o,(null==i||i>o)&&(i=o,n=t));a(e,n||t)}function ke(e){if(!e._d){var t=N(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function Se(e){var t=new f(Q(Te(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Te(e){var t=e._i,r=e._f;return e._locale=e._locale||k(e._l),null===t||void 0===r&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),p(t)?new f(Q(t)):(n(r)?Ce(e):r?_e(e):i(t)?e._d=t:Ne(e),e))}function Ne(t){var o=t._i;void 0===o?t._d=new Date:i(o)?t._d=new Date(+o):"string"==typeof o?ie(t):n(o)?(t._a=r(o.slice(0),function(e){return parseInt(e,10)}),be(t)):"object"==typeof o?ke(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function De(e,t,n,i,r){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=e,o._f=t,o._strict=i,Se(o)}function Me(e,t,n,i){return De(e,t,n,i,!1)}function Ee(e,t){var i,r;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Me();for(i=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](i))&&(i=t[r]);return i}function Re(){var e=[].slice.call(arguments,0);return Ee("isBefore",e)}function Ae(){var e=[].slice.call(arguments,0);return Ee("isAfter",e)}function Pe(e){var t=N(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=k(),this._bubble()}function Ie(e){return e instanceof Pe}function Be(e,t){P(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+A(~~(e/60),2)+t+A(~~e%60,2)})}function He(e){var t=(e||"").match(ti)||[],n=t[t.length-1]||[],i=(n+"").match(ki)||["-",0,0],r=+(60*i[1])+g(i[2]);return"+"===i[0]?r:-r}function ze(t,n){var r,o;return n._isUTC?(r=n.clone(),o=(p(t)||i(t)?+t:+Me(t))-+r,r._d.setTime(+r._d+o),e.updateOffset(r,!1),r):Me(t).local()}function Oe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function We(t,n){var i,r=this._offset||0;return null!=t?("string"==typeof t&&(t=He(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=Oe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?tt(this,Xe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Oe(this)}function Fe(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Le(e){return this.utcOffset(0,e)}function $e(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Oe(this),"m")),this}function Ue(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(He(this._i)),this}function je(e){return e=e?Me(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ye(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(h(e,this),e=Te(e),e._a){var t=e._isUTC?s(e._a):Me(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return!this._isUTC}function Ge(){return this._isUTC}function Ke(){return this._isUTC&&0===this._offset}function Xe(e,t){var n,i,r,a=e,s=null;return Ie(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(s=Si.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:g(s[li])*n,h:g(s[ui])*n,m:g(s[ci])*n,s:g(s[di])*n,ms:g(s[hi])*n}):(s=Ti.exec(e))?(n="-"===s[1]?-1:1,a={y:Je(s[2],n),M:Je(s[3],n),d:Je(s[4],n),h:Je(s[5],n),m:Je(s[6],n),s:Je(s[7],n),w:Je(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=Ze(Me(a.from),Me(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),i=new Pe(a),Ie(e)&&o(e,"_locale")&&(i._locale=e._locale),i}function Je(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ze(e,t){var n;return t=ze(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function et(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Xe(n,i),tt(this,r,e),this}}function tt(t,n,i,r){var o=n._milliseconds,a=n._days,s=n._months;r=null==r?!0:r,o&&t._d.setTime(+t._d+o*i),a&&E(t,"Date",M(t,"Date")+a*i),s&&K(t,M(t,"Month")+s*i),r&&e.updateOffset(t,a||s)}function nt(e,t){var n=e||Me(),i=ze(n,this).startOf("day"),r=this.diff(i,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,Me(n)))}function it(){return new f(this)}function rt(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:Me(e),+this>+e):(n=p(e)?+e:+Me(e),n<+this.clone().startOf(t))}function ot(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:Me(e),+e>+this):(n=p(e)?+e:+Me(e),+this.clone().endOf(t)<n)}function at(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function st(e,t){var n;return t=T(t||"millisecond"),"millisecond"===t?(e=p(e)?e:Me(e),+this===+e):(n=+Me(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function lt(e,t,n){var i,r,o=ze(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(r=ut(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:m(r)}function ut(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return 0>t-o?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ht(t){var n=H(this,t||e.defaultFormat);return this.localeData().postformat(n)}function ft(e,t){return this.isValid()?Xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(Me(),e)}function mt(e,t){return this.isValid()?Xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.to(Me(),e)}function vt(e){var t;return void 0===e?this._locale._abbr:(t=k(e),null!=t&&(this._locale=t),this)}function yt(){return this._locale}function bt(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function _t(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function Ct(){return this._offset?new Date(+this):this._d}function kt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Tt(){return c(this)}function Nt(){return a({},u(this))}function Dt(){return u(this).overflow}function Mt(e,t){P(0,[e,e.length],0,t)}function Et(e,t,n){return ue(Me([e,11,31+t-n]),t,n).week}function Rt(e){var t=ue(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function At(e){var t=ue(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Pt(){return Et(this.year(),1,4)}function It(){var e=this.localeData()._week;return Et(this.year(),e.dow,e.doy)}function Bt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ht(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function zt(e){return this._weekdays[e.day()]}function Ot(e){return this._weekdaysShort[e.day()]}function Wt(e){return this._weekdaysMin[e.day()]}function Ft(e){var t,n,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Me([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Lt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ht(e,this.localeData()),this.add(e-t,"d")):t}function $t(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ut(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function jt(e,t){P(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vt(e,t){return t._meridiemParse}function Yt(e){return"p"===(e+"").toLowerCase().charAt(0)}function qt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Gt(e,t){t[hi]=g(1e3*("0."+e))}function Kt(){return this._isUTC?"UTC":""}function Xt(){return this._isUTC?"Coordinated Universal Time":""}function Jt(e){return Me(1e3*e)}function Qt(){return Me.apply(null,arguments).parseZone()}function Zt(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function en(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function tn(){return this._invalidDate}function nn(e){return this._ordinal.replace("%d",e)}function rn(e){return e}function on(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)}function an(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function sn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ln(e,t,n,i){var r=k(),o=s().set(i,t);return r[n](o,e)}function un(e,t,n,i,r){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ln(e,t,n,r);var o,a=[];for(o=0;i>o;o++)a[o]=ln(e,o,n,r);return a}function cn(e,t){return un(e,t,"months",12,"month")}function dn(e,t){return un(e,t,"monthsShort",12,"month")}function hn(e,t){return un(e,t,"weekdays",7,"day")}function fn(e,t){return un(e,t,"weekdaysShort",7,"day")}function pn(e,t){return un(e,t,"weekdaysMin",7,"day")}function mn(){var e=this._data;return this._milliseconds=Ki(this._milliseconds),this._days=Ki(this._days),this._months=Ki(this._months),e.milliseconds=Ki(e.milliseconds),e.seconds=Ki(e.seconds),e.minutes=Ki(e.minutes),e.hours=Ki(e.hours),e.months=Ki(e.months),e.years=Ki(e.years),this}function gn(e,t,n,i){var r=Xe(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function vn(e,t){return gn(this,e,t,1)}function yn(e,t){return gn(this,e,t,-1)}function bn(e){return 0>e?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||0>=o&&0>=a&&0>=s||(o+=864e5*bn(xn(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=m(o/1e3),l.seconds=e%60,t=m(e/60),l.minutes=t%60,n=m(t/60),l.hours=n%24,a+=m(n/24),r=m(_n(a)),s+=r,a-=bn(xn(r)),i=m(s/12),s%=12,l.days=a,l.months=s,l.years=i,this}function _n(e){return 4800*e/146097}function xn(e){return 146097*e/4800}function Cn(e){var t,n,i=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+_n(t),"month"===e?n:n/12;switch(t=this._days+Math.round(xn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function kn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function Sn(e){return function(){return this.as(e)}}function Tn(e){return e=T(e),this[e+"s"]()}function Nn(e){return function(){return this._data[e]}}function Dn(){return m(this.days()/7)}function Mn(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function En(e,t,n){var i=Xe(e).abs(),r=dr(i.as("s")),o=dr(i.as("m")),a=dr(i.as("h")),s=dr(i.as("d")),l=dr(i.as("M")),u=dr(i.as("y")),c=r<hr.s&&["s",r]||1===o&&["m"]||o<hr.m&&["mm",o]||1===a&&["h"]||a<hr.h&&["hh",a]||1===s&&["d"]||s<hr.d&&["dd",s]||1===l&&["M"]||l<hr.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,Mn.apply(null,c)}function Rn(e,t){return void 0===hr[e]?!1:void 0===t?hr[e]:(hr[e]=t,!0)}function An(e){var t=this.localeData(),n=En(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Pn(){var e,t,n,i=fr(this._milliseconds)/1e3,r=fr(this._days),o=fr(this._months);e=m(i/60),t=m(e/60),i%=60,e%=60,n=m(o/12),o%=12;var a=n,s=o,l=r,u=t,c=e,d=i,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(u||c||d?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var In,Bn,Hn=e.momentProperties=[],zn=!1,On={},Wn={},Fn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ln=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$n={},Un={},jn=/\d/,Vn=/\d\d/,Yn=/\d{3}/,qn=/\d{4}/,Gn=/[+-]?\d{6}/,Kn=/\d\d?/,Xn=/\d{1,3}/,Jn=/\d{1,4}/,Qn=/[+-]?\d{1,6}/,Zn=/\d+/,ei=/[+-]?\d+/,ti=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ri={},oi={},ai=0,si=1,li=2,ui=3,ci=4,di=5,hi=6;P("M",["MM",2],"Mo",function(){return this.month()+1}),P("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),P("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),W("M",Kn),W("MM",Kn,Vn),W("MMM",ii),W("MMMM",ii),$(["M","MM"],function(e,t){t[si]=g(e)-1}),$(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[si]=r:u(n).invalidMonth=e});var fi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mi={};e.suppressDeprecationWarnings=!1;var gi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),P(0,["YY",2],0,function(){return this.year()%100}),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),S("year","y"),W("Y",ei),W("YY",Kn,Vn),W("YYYY",Jn,qn),W("YYYYY",Qn,Gn),W("YYYYYY",Qn,Gn),$(["YYYYY","YYYYYY"],ai),$("YYYY",function(t,n){n[ai]=2===t.length?e.parseTwoDigitYear(t):g(t)}),$("YY",function(t,n){n[ai]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var wi=D("FullYear",!1);P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),W("w",Kn),W("ww",Kn,Vn),W("W",Kn),W("WW",Kn,Vn),U(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=g(e)});var _i={dow:0,doy:6};P("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),W("DDD",Xn),W("DDDD",Yn),$(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),e.ISO_8601=function(){};var xi=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Me.apply(null,arguments);return this>e?this:e}),Ci=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Me.apply(null,arguments);return e>this?this:e});Be("Z",":"),Be("ZZ",""),W("Z",ti),W("ZZ",ti),$(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=He(e)});var ki=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Si=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ti=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xe.fn=Pe.prototype;var Ni=et(1,"add"),Di=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Mi=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});P(0,["gg",2],0,function(){return this.weekYear()%100}),P(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Mt("gggg","weekYear"),Mt("ggggg","weekYear"),Mt("GGGG","isoWeekYear"),Mt("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),W("G",ei),W("g",ei),W("GG",Kn,Vn),W("gg",Kn,Vn),W("GGGG",Jn,qn),W("gggg",Jn,qn),W("GGGGG",Qn,Gn),W("ggggg",Qn,Gn),U(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=g(e)}),U(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),P("Q",0,0,"quarter"),S("quarter","Q"),W("Q",jn),$("Q",function(e,t){t[si]=3*(g(e)-1)}),P("D",["DD",2],"Do","date"),S("date","D"),W("D",Kn),W("DD",Kn,Vn),W("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),$(["D","DD"],li),$("Do",function(e,t){t[li]=g(e.match(Kn)[0],10)});var Ei=D("Date",!0);P("d",0,"do","day"),P("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),P("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),P("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),W("d",Kn),W("e",Kn),W("E",Kn),W("dd",ii),W("ddd",ii),W("dddd",ii),U(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:u(n).invalidWeekday=e}),U(["d","e","E"],function(e,t,n,i){t[i]=g(e)});var Ri="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ai="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");P("H",["HH",2],0,"hour"),P("h",["hh",2],0,function(){return this.hours()%12||12}),jt("a",!0),jt("A",!1),S("hour","h"),W("a",Vt),W("A",Vt),W("H",Kn),W("h",Kn),W("HH",Kn,Vn),W("hh",Kn,Vn),$(["H","HH"],ui),$(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),$(["h","hh"],function(e,t,n){t[ui]=g(e),u(n).bigHour=!0});var Ii=/[ap]\.?m?\.?/i,Bi=D("Hours",!0);P("m",["mm",2],0,"minute"),S("minute","m"),W("m",Kn),W("mm",Kn,Vn),$(["m","mm"],ci);var Hi=D("Minutes",!1);P("s",["ss",2],0,"second"),S("second","s"),W("s",Kn),W("ss",Kn,Vn),$(["s","ss"],di);var zi=D("Seconds",!1);P("S",0,0,function(){return~~(this.millisecond()/100)}),P(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,function(){return 10*this.millisecond()}),P(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),P(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),P(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),P(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),P(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),W("S",Xn,jn),W("SS",Xn,Vn),W("SSS",Xn,Yn);var Oi;for(Oi="SSSS";Oi.length<=9;Oi+="S")W(Oi,Zn);for(Oi="S";Oi.length<=9;Oi+="S")$(Oi,Gt);var Wi=D("Milliseconds",!1);P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var Fi=f.prototype;Fi.add=Ni,Fi.calendar=nt,Fi.clone=it,Fi.diff=lt,Fi.endOf=wt,Fi.format=ht,Fi.from=ft,Fi.fromNow=pt,Fi.to=mt,Fi.toNow=gt,Fi.get=R,Fi.invalidAt=Dt,Fi.isAfter=rt,Fi.isBefore=ot,Fi.isBetween=at,Fi.isSame=st,Fi.isValid=Tt,Fi.lang=Mi,Fi.locale=vt,Fi.localeData=yt,Fi.max=Ci,Fi.min=xi,Fi.parsingFlags=Nt,Fi.set=R,Fi.startOf=bt,Fi.subtract=Di,Fi.toArray=kt,Fi.toObject=St,Fi.toDate=Ct,Fi.toISOString=dt,Fi.toJSON=dt,Fi.toString=ct,Fi.unix=xt,Fi.valueOf=_t,Fi.year=wi,Fi.isLeapYear=le,Fi.weekYear=Rt,Fi.isoWeekYear=At,Fi.quarter=Fi.quarters=Bt,Fi.month=X,Fi.daysInMonth=J,Fi.week=Fi.weeks=fe,Fi.isoWeek=Fi.isoWeeks=pe,Fi.weeksInYear=It,Fi.isoWeeksInYear=Pt,Fi.date=Ei,Fi.day=Fi.days=Lt,Fi.weekday=$t,Fi.isoWeekday=Ut,Fi.dayOfYear=ge,Fi.hour=Fi.hours=Bi,Fi.minute=Fi.minutes=Hi,Fi.second=Fi.seconds=zi,Fi.millisecond=Fi.milliseconds=Wi,Fi.utcOffset=We,Fi.utc=Le,Fi.local=$e,Fi.parseZone=Ue,Fi.hasAlignedHourOffset=je,Fi.isDST=Ve,Fi.isDSTShifted=Ye,Fi.isLocal=qe,Fi.isUtcOffset=Ge,Fi.isUtc=Ke,Fi.isUTC=Ke,Fi.zoneAbbr=Kt,Fi.zoneName=Xt,Fi.dates=ee("dates accessor is deprecated. Use date instead.",Ei),Fi.months=ee("months accessor is deprecated. Use month instead",X),Fi.years=ee("years accessor is deprecated. Use year instead",wi),Fi.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Fe);var Li=Fi,$i={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ui={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ji="Invalid date",Vi="%d",Yi=/\d{1,2}/,qi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gi=y.prototype;Gi._calendar=$i,Gi.calendar=Zt,Gi._longDateFormat=Ui,Gi.longDateFormat=en,Gi._invalidDate=ji,Gi.invalidDate=tn,Gi._ordinal=Vi,Gi.ordinal=nn,Gi._ordinalParse=Yi,Gi.preparse=rn,Gi.postformat=rn,Gi._relativeTime=qi,Gi.relativeTime=on,Gi.pastFuture=an,Gi.set=sn,Gi.months=Y,Gi._months=fi,Gi.monthsShort=q,Gi._monthsShort=pi,Gi.monthsParse=G,Gi.week=ce,Gi._week=_i,Gi.firstDayOfYear=he,Gi.firstDayOfWeek=de,Gi.weekdays=zt,Gi._weekdays=Ri,Gi.weekdaysMin=Wt,Gi._weekdaysMin=Pi,Gi.weekdaysShort=Ot,Gi._weekdaysShort=Ai,Gi.weekdaysParse=Ft,Gi.isPM=Yt,Gi._meridiemParse=Ii,Gi.meridiem=qt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",k);var Ki=Math.abs,Xi=Sn("ms"),Ji=Sn("s"),Qi=Sn("m"),Zi=Sn("h"),er=Sn("d"),tr=Sn("w"),nr=Sn("M"),ir=Sn("y"),rr=Nn("milliseconds"),or=Nn("seconds"),ar=Nn("minutes"),sr=Nn("hours"),lr=Nn("days"),ur=Nn("months"),cr=Nn("years"),dr=Math.round,hr={s:45,m:45,h:22,d:26,M:11},fr=Math.abs,pr=Pe.prototype;pr.abs=mn,pr.add=vn,pr.subtract=yn,pr.as=Cn,pr.asMilliseconds=Xi,pr.asSeconds=Ji,pr.asMinutes=Qi,pr.asHours=Zi,pr.asDays=er,pr.asWeeks=tr,pr.asMonths=nr,pr.asYears=ir,pr.valueOf=kn,pr._bubble=wn,pr.get=Tn,pr.milliseconds=rr,pr.seconds=or,pr.minutes=ar,pr.hours=sr,pr.days=lr,pr.weeks=Dn,pr.months=ur,pr.years=cr,pr.humanize=An,pr.toISOString=Pn,pr.toString=Pn,pr.toJSON=Pn,pr.locale=vt,pr.localeData=yt,pr.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pn),pr.lang=Mi,P("X",0,0,"unix"),P("x",0,0,"valueOf"),W("x",ei),W("X",ni),$("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),$("x",function(e,t,n){n._d=new Date(g(e))}),e.version="2.10.6",t(Me),e.fn=Li,e.min=Re,e.max=Ae,e.utc=s,e.unix=Jt,e.months=cn,e.isDate=i,e.locale=x,e.invalid=d,e.duration=Xe,e.isMoment=p,e.weekdays=hn,e.parseZone=Qt,e.localeData=k,e.isDuration=Ie,e.monthsShort=dn,e.weekdaysMin=pn,e.defineLocale=C,e.weekdaysShort=fn,e.normalizeUnits=T,e.relativeTimeThreshold=Rn;var mr=e;return mr});(function(e){"use strict";if(typeof bootstrap==="function"){bootstrap("promise",e)}else if(typeof exports==="object"&&typeof module==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=e}}else if(typeof window!=="undefined"||typeof self!=="undefined"){var t=typeof window!=="undefined"?window:self;var n=t.Q;t.Q=e();t.Q.noConflict=function(){t.Q=n;return this}}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}})(function(){"use strict";var e=false;try{throw new Error}catch(t){e=!!t.stack}var n=S();var i;var r=function(){};var o=function(){var e={task:void 0,next:null};var t=e;var n=false;var i=void 0;var r=false;var a=[];function s(){var t,i;while(e.next){e=e.next;t=e.task;e.task=void 0;i=e.domain;if(i){e.domain=void 0;i.enter()}l(t,i)}while(a.length){t=a.pop();l(t)}n=false}function l(e,t){try{e()}catch(n){if(r){if(t){t.exit()}setTimeout(s,0);if(t){t.enter()}throw n}else{setTimeout(function(){throw n},0)}}if(t){t.exit()}}o=function(e){t=t.next={task:e,domain:r&&process.domain,next:null};if(!n){n=true;i()}};if(typeof process==="object"&&process.toString()==="[object process]"&&process.nextTick){r=true;i=function(){process.nextTick(s)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){i=setImmediate.bind(window,s)}else{i=function(){setImmediate(s)}}}else if(typeof MessageChannel!=="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){i=c;u.port1.onmessage=s;s()};var c=function(){u.port2.postMessage(0)};i=function(){setTimeout(s,0);c()}}else{i=function(){
setTimeout(s,0)}}o.runAfter=function(e){a.push(e);if(!n){n=true;i()}};return o}();var a=Function.call;function s(e){return function(){return a.apply(e,arguments)}}var l=s(Array.prototype.slice);var u=s(Array.prototype.reduce||function(e,t){var n=0,i=this.length;if(arguments.length===1){do{if(n in this){t=this[n++];break}if(++n>=i){throw new TypeError}}while(1)}for(;n<i;n++){if(n in this){t=e(t,this[n],n)}}return t});var c=s(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1});var d=s(Array.prototype.map||function(e,t){var n=this;var i=[];u(n,function(r,o,a){i.push(e.call(t,o,a,n))},void 0);return i});var h=Object.create||function(e){function t(){}t.prototype=e;return new t};var f=s(Object.prototype.hasOwnProperty);var p=Object.keys||function(e){var t=[];for(var n in e){if(f(e,n)){t.push(n)}}return t};var m=s(Object.prototype.toString);function g(e){return e===Object(e)}function v(e){return m(e)==="[object StopIteration]"||e instanceof y}var y;if(typeof ReturnValue!=="undefined"){y=ReturnValue}else{y=function(e){this.value=e}}var b="From previous event:";function w(t,n){if(e&&n.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(b)===-1){var i=[];for(var r=n;!!r;r=r.source){if(r.stack){i.unshift(r.stack)}}i.unshift(t.stack);var o=i.join("\n"+b+"\n");t.stack=_(o)}}function _(e){var t=e.split("\n");var n=[];for(var i=0;i<t.length;++i){var r=t[i];if(!k(r)&&!x(r)&&r){n.push(r)}}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function C(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t){return[t[1],Number(t[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n){return[n[1],Number(n[2])]}var i=/.*@(.+):(\d+)$/.exec(e);if(i){return[i[1],Number(i[2])]}}function k(e){var t=C(e);if(!t){return false}var r=t[0];var o=t[1];return r===i&&o>=n&&o<=le}function S(){if(!e){return}try{throw new Error}catch(t){var n=t.stack.split("\n");var r=n[0].indexOf("@")>0?n[1]:n[2];var o=C(r);if(!o){return}i=o[0];return o[1]}}function T(e,t,n){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack)}return e.apply(e,arguments)}}function N(e){if(e instanceof R){return e}if(B(e)){return G(e)}else{return q(e)}}N.resolve=N;N.nextTick=o;N.longStackSupport=false;if(typeof process==="object"&&process&&process.env&&process.env.Q_DEBUG){N.longStackSupport=true}N.defer=D;function D(){var t=[],n=[],i;var r=h(D.prototype);var o=h(R.prototype);o.promiseDispatch=function(e,r,o){var a=l(arguments);if(t){t.push(a);if(r==="when"&&o[1]){n.push(o[1])}}else{N.nextTick(function(){i.promiseDispatch.apply(i,a)})}};o.valueOf=function(){if(t){return o}var e=P(i);if(I(e)){i=e}return e};o.inspect=function(){if(!i){return{state:"pending"}}return i.inspect()};if(N.longStackSupport&&e){try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}}function s(e){i=e;o.source=e;u(t,function(t,n){N.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0);t=void 0;n=void 0}r.promise=o;r.resolve=function(e){if(i){return}s(N(e))};r.fulfill=function(e){if(i){return}s(q(e))};r.reject=function(e){if(i){return}s(Y(e))};r.notify=function(e){if(i){return}u(n,function(t,n){N.nextTick(function(){n(e)})},void 0)};return r}D.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(l(arguments,1))}else{e.resolve(n)}}};N.Promise=M;N.promise=M;function M(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function.")}var t=D();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}M.race=E;M.all=ne;M.reject=Y;M.resolve=N;N.passByCopy=function(e){return e};R.prototype.passByCopy=function(){return this};N.join=function(e,t){return N(e).join(t)};R.prototype.join=function(e){return N([this,e]).spread(function(e,t){if(e===t){return e}else{throw new Error("Can't join: not the same: "+e+" "+t)}})};N.race=E;function E(e){return M(function(t,n){for(var i=0,r=e.length;i<r;i++){N(e[i]).then(t,n)}})}R.prototype.race=function(){return this.then(N.race)};N.makePromise=R;function R(e,t,n){if(t===void 0){t=function(e){return Y(new Error("Promise does not support operation: "+e))}}if(n===void 0){n=function(){return{state:"unknown"}}}var i=h(R.prototype);i.promiseDispatch=function(n,r,o){var a;try{if(e[r]){a=e[r].apply(i,o)}else{a=t.call(i,r,o)}}catch(s){a=Y(s)}if(n){n(a)}};i.inspect=n;if(n){var r=n();if(r.state==="rejected"){i.exception=r.reason}i.valueOf=function(){var e=n();if(e.state==="pending"||e.state==="rejected"){return i}return e.value}}return i}R.prototype.toString=function(){return"[object Promise]"};R.prototype.then=function(e,t,n){var i=this;var r=D();var o=false;function a(t){try{return typeof e==="function"?e(t):t}catch(n){return Y(n)}}function s(e){if(typeof t==="function"){w(e,i);try{return t(e)}catch(n){return Y(n)}}return Y(e)}function l(e){return typeof n==="function"?n(e):e}N.nextTick(function(){i.promiseDispatch(function(e){if(o){return}o=true;r.resolve(a(e))},"when",[function(e){if(o){return}o=true;r.resolve(s(e))}])});i.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=l(e)}catch(i){n=true;if(N.onerror){N.onerror(i)}else{throw i}}if(!n){r.notify(t)}}]);return r.promise};N.tap=function(e,t){return N(e).tap(t)};R.prototype.tap=function(e){e=N(e);return this.then(function(t){return e.fcall(t).thenResolve(t)})};N.when=A;function A(e,t,n,i){return N(e).then(t,n,i)}R.prototype.thenResolve=function(e){return this.then(function(){return e})};N.thenResolve=function(e,t){return N(e).thenResolve(t)};R.prototype.thenReject=function(e){return this.then(function(){throw e})};N.thenReject=function(e,t){return N(e).thenReject(t)};N.nearer=P;function P(e){if(I(e)){var t=e.inspect();if(t.state==="fulfilled"){return t.value}}return e}N.isPromise=I;function I(e){return e instanceof R}N.isPromiseAlike=B;function B(e){return g(e)&&typeof e.then==="function"}N.isPending=H;function H(e){return I(e)&&e.inspect().state==="pending"}R.prototype.isPending=function(){return this.inspect().state==="pending"};N.isFulfilled=z;function z(e){return!I(e)||e.inspect().state==="fulfilled"}R.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};N.isRejected=O;function O(e){return I(e)&&e.inspect().state==="rejected"}R.prototype.isRejected=function(){return this.inspect().state==="rejected"};var W=[];var F=[];var L=[];var $=true;function U(){W.length=0;F.length=0;if(!$){$=true}}function j(e,t){if(!$){return}if(typeof process==="object"&&typeof process.emit==="function"){N.nextTick.runAfter(function(){if(c(F,e)!==-1){process.emit("unhandledRejection",t,e);L.push(e)}})}F.push(e);if(t&&typeof t.stack!=="undefined"){W.push(t.stack)}else{W.push("(no stack) "+t)}}function V(e){if(!$){return}var t=c(F,e);if(t!==-1){if(typeof process==="object"&&typeof process.emit==="function"){N.nextTick.runAfter(function(){var n=c(L,e);if(n!==-1){process.emit("rejectionHandled",W[t],e);L.splice(n,1)}})}F.splice(t,1);W.splice(t,1)}}N.resetUnhandledRejections=U;N.getUnhandledReasons=function(){return W.slice()};N.stopUnhandledRejectionTracking=function(){U();$=false};U();N.reject=Y;function Y(e){var t=R({when:function(t){if(t){V(this)}return t?t(e):this}},function n(){return this},function i(){return{state:"rejected",reason:e}});j(t,e);return t}N.fulfill=q;function q(e){return R({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return p(e)}},void 0,function t(){return{state:"fulfilled",value:e}})}function G(e){var t=D();N.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}});return t.promise}N.master=K;function K(e){return R({isDef:function(){}},function t(n,i){return te(e,n,i)},function(){return N(e).inspect()})}N.spread=X;function X(e,t,n){return N(e).spread(t,n)}R.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)};N.async=J;function J(e){return function(){function t(e,t){var o;if(typeof StopIteration==="undefined"){try{o=n[e](t)}catch(a){return Y(a)}if(o.done){return N(o.value)}else{return A(o.value,i,r)}}else{try{o=n[e](t)}catch(a){if(v(a)){return N(a.value)}else{return Y(a)}}return A(o,i,r)}}var n=e.apply(this,arguments);var i=t.bind(t,"next");var r=t.bind(t,"throw");return i()}}N.spawn=Q;function Q(e){N.done(N.async(e)())}N["return"]=Z;function Z(e){throw new y(e)}N.promised=ee;function ee(e){return function(){return X([this,ne(arguments)],function(t,n){return e.apply(t,n)})}}N.dispatch=te;function te(e,t,n){return N(e).dispatch(t,n)}R.prototype.dispatch=function(e,t){var n=this;var i=D();N.nextTick(function(){n.promiseDispatch(i.resolve,e,t)});return i.promise};N.get=function(e,t){return N(e).dispatch("get",[t])};R.prototype.get=function(e){return this.dispatch("get",[e])};N.set=function(e,t,n){return N(e).dispatch("set",[t,n])};R.prototype.set=function(e,t){return this.dispatch("set",[e,t])};N.del=N["delete"]=function(e,t){return N(e).dispatch("delete",[t])};R.prototype.del=R.prototype["delete"]=function(e){return this.dispatch("delete",[e])};N.mapply=N.post=function(e,t,n){return N(e).dispatch("post",[t,n])};R.prototype.mapply=R.prototype.post=function(e,t){return this.dispatch("post",[e,t])};N.send=N.mcall=N.invoke=function(e,t){return N(e).dispatch("post",[t,l(arguments,2)])};R.prototype.send=R.prototype.mcall=R.prototype.invoke=function(e){return this.dispatch("post",[e,l(arguments,1)])};N.fapply=function(e,t){return N(e).dispatch("apply",[void 0,t])};R.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};N["try"]=N.fcall=function(e){return N(e).dispatch("apply",[void 0,l(arguments,1)])};R.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])};N.fbind=function(e){var t=N(e);var n=l(arguments,1);return function i(){return t.dispatch("apply",[this,n.concat(l(arguments))])}};R.prototype.fbind=function(){var e=this;var t=l(arguments);return function n(){return e.dispatch("apply",[this,t.concat(l(arguments))])}};N.keys=function(e){return N(e).dispatch("keys",[])};R.prototype.keys=function(){return this.dispatch("keys",[])};N.all=ne;function ne(e){var t=new Error;return A(e,function(e){var t=0;var n=D();u(e,function(i,r,o){var a;if(I(r)&&(a=r.inspect()).state==="fulfilled"){e[o]=a.value}else{++t;A(r,function(i){e[o]=i;if(--t===0){n.resolve(e)}},n.reject,function(e){n.notify({index:o,value:e})})}},void 0);if(t===0){n.resolve(e)}return n.promise})}R.prototype.all=function(){return ne(this)};N.any=ie;function ie(e){if(e.length===0){return N.resolve()}var t=N.defer();var n=0;u(e,function(i,r,o){var a=e[o];n++;A(a,s,l,u);function s(e){t.resolve(e)}function l(){n--;if(n===0){t.reject(new Error("Can't get fulfillment value from any promise, all "+"promises were rejected."))}}function u(e){t.notify({index:o,value:e})}},undefined);return t.promise}R.prototype.any=function(){return ie(this)};N.allResolved=T(re,"allResolved","allSettled");function re(e){return A(e,function(e){e=d(e,N);return A(ne(d(e,function(e){return A(e,r,r)})),function(){return e})})}R.prototype.allResolved=function(){return re(this)};N.allSettled=oe;function oe(e){return N(e).allSettled()}R.prototype.allSettled=function(){return this.then(function(e){return ne(d(e,function(e){e=N(e);function t(){return e.inspect()}return e.then(t,t)}))})};N.fail=N["catch"]=function(e,t){return N(e).then(void 0,t)};R.prototype.fail=R.prototype["catch"]=function(e){return this.then(void 0,e)};N.progress=ae;function ae(e,t){return N(e).then(void 0,void 0,t)}R.prototype.progress=function(e){return this.then(void 0,void 0,e)};N.fin=N["finally"]=function(e,t){return N(e)["finally"](t)};R.prototype.fin=R.prototype["finally"]=function(e){if(!e||typeof e.apply!=="function"){throw new Error("Can't apply finally callback")}e=N(e);return this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})};N.done=function(e,t,n,i){return N(e).done(t,n,i)};R.prototype.done=function(e,t,n){var i=function(e){N.nextTick(function(){w(e,r);if(N.onerror){N.onerror(e)}else{throw e}})};var r=e||t||n?this.then(e,t,n):this;if(typeof process==="object"&&process&&process.domain){i=process.domain.bind(i)}r.then(void 0,i)};N.timeout=function(e,t,n){return N(e).timeout(t,n)};R.prototype.timeout=function(e,t){var n=D();var i=setTimeout(function(){if(!t||"string"===typeof t){t=new Error(t||"Timed out after "+e+" ms");t.code="ETIMEDOUT"}n.reject(t)},e);this.then(function(e){clearTimeout(i);n.resolve(e)},function(e){clearTimeout(i);n.reject(e)},n.notify);return n.promise};N.delay=function(e,t){if(t===void 0){t=e;e=void 0}return N(e).delay(t)};R.prototype.delay=function(e){return this.then(function(t){var n=D();setTimeout(function(){n.resolve(t)},e);return n.promise})};N.nfapply=function(e,t){return N(e).nfapply(t)};R.prototype.nfapply=function(e){var t=D();var n=l(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};N.nfcall=function(e){var t=l(arguments,1);return N(e).nfapply(t)};R.prototype.nfcall=function(){var e=l(arguments);var t=D();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};N.nfbind=N.denodeify=function(e){var t=l(arguments,1);return function(){var n=t.concat(l(arguments));var i=D();n.push(i.makeNodeResolver());N(e).fapply(n).fail(i.reject);return i.promise}};R.prototype.nfbind=R.prototype.denodeify=function(){var e=l(arguments);e.unshift(this);return N.denodeify.apply(void 0,e)};N.nbind=function(e,t){var n=l(arguments,2);return function(){var i=n.concat(l(arguments));var r=D();i.push(r.makeNodeResolver());function o(){return e.apply(t,arguments)}N(o).fapply(i).fail(r.reject);return r.promise}};R.prototype.nbind=function(){var e=l(arguments,0);e.unshift(this);return N.nbind.apply(void 0,e)};N.nmapply=N.npost=function(e,t,n){return N(e).npost(t,n)};R.prototype.nmapply=R.prototype.npost=function(e,t){var n=l(t||[]);var i=D();n.push(i.makeNodeResolver());this.dispatch("post",[e,n]).fail(i.reject);return i.promise};N.nsend=N.nmcall=N.ninvoke=function(e,t){var n=l(arguments,2);var i=D();n.push(i.makeNodeResolver());N(e).dispatch("post",[t,n]).fail(i.reject);return i.promise};R.prototype.nsend=R.prototype.nmcall=R.prototype.ninvoke=function(e){var t=l(arguments,1);var n=D();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};N.nodeify=se;function se(e,t){return N(e).nodeify(t)}R.prototype.nodeify=function(e){if(e){this.then(function(t){N.nextTick(function(){e(null,t)})},function(t){N.nextTick(function(){e(t)})})}else{return this}};N.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var le=S();return N});var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function n(e,n){return t(e,n)&&e[n]}function A(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,r){n&&A(n,function(n,o){if(i||!t(e,o))r&&"object"===typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[o]||(e[o]={}),U(e[o],n,i,r)):e[o]=n});return e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;v(e.split("."),function(e){t=t[e]});return t}function B(e,t,n,i){t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);t.requireType=e;t.requireModules=i;n&&(t.originalError=n);return t}function ga(i){function r(e,t,i){var r,o,a,s,l,u,c,d,t=t&&t.split("/"),h=D.map,f=h&&h["*"];if(e){e=e.split("/");o=e.length-1;D.nodeIdCompat&&Q.test(e[o])&&(e[o]=e[o].replace(Q,""));"."===e[0].charAt(0)&&t&&(o=t.slice(0,t.length-1),e=o.concat(e));o=e;for(a=0;a<o.length;a++)if(s=o[a],"."===s)o.splice(a,1),a-=1;else if(".."===s&&!(0===a||1===a&&".."===o[2]||".."===o[a-1])&&0<a)o.splice(a-1,2),a-=2;e=e.join("/")}if(i&&h&&(t||f)){o=e.split("/");a=o.length;e:for(;0<a;a-=1){l=o.slice(0,a).join("/");if(t)for(s=t.length;0<s;s-=1)if(i=n(h,t.slice(0,s).join("/")))if(i=n(i,l)){r=i;u=a;break e}!c&&(f&&n(f,l))&&(c=n(f,l),d=a)}!r&&c&&(r=c,u=d);r&&(o.splice(0,u,r),e=o.join("/"))}return(r=n(D.pkgs,e))?r:e}function o(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===C.contextName)return t.parentNode.removeChild(t),!0})}function a(e){var t=n(D.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),C.require.undef(e),C.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length));return[t,e]}function l(e,t,i,o){var a,l,u=null,c=t?t.name:null,d=e,h=!0,f="";e||(h=!1,e="_@r"+($+=1));e=s(e);u=e[0];e=e[1];u&&(u=r(u,c,o),l=n(W,u));e&&(u?f=l&&l.normalize?l.normalize(e,function(e){return r(e,c,o)}):-1===e.indexOf("!")?r(e,c,o):e:(f=r(e,c,o),e=s(f),u=e[0],f=e[1],i=!0,a=C.nameToUrl(f)));i=u&&!l&&!i?"_unnormalized"+(j+=1):"";return{prefix:u,name:f,parentMap:t,unnormalized:!!i,url:a,originalName:d,isDefine:h,id:(u?u+"!"+f:f)+i}}function c(e){var t=e.id,i=n(E,t);i||(i=E[t]=new C.Module(e));return i}function d(e,i,r){var o=e.id,a=n(E,o);if(t(W,o)&&(!a||a.defineEmitComplete))"defined"===i&&r(W[o]);else if(a=c(e),a.error&&"error"===i)r(a.error);else a.on(i,r)}function h(t,i){var r=t.requireModules,o=!1;if(i)i(t);else if(v(r,function(e){if(e=n(E,e))e.error=t,e.events.error&&(o=!0,e.emit("error",t))}),!o)e.onError(t)}function f(){R.length&&(v(R,function(e){var t=e[0];"string"===typeof t&&(C.defQueueMap[t]=!0);O.push(e)}),R=[])}function p(e){delete E[e];delete P[e]}function m(e,t,i){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,o){var a=r.id,s=n(E,a);s&&(!e.depMatched[o]&&!i[a])&&(n(t,a)?(e.defineDep(o,W[a]),e.check()):m(s,t,i))}),i[r]=!0)}function g(){var e,t,n=(e=1e3*D.waitSeconds)&&C.startTime+e<(new Date).getTime(),i=[],r=[],s=!1,l=!0;if(!_){_=!0;A(P,function(e){var u=e.map,c=u.id;if(e.enabled&&(u.isDefine||r.push(e),!e.error))if(!e.inited&&n)a(c)?s=t=!0:(i.push(c),o(c));else if(!e.inited&&(e.fetched&&u.isDefine)&&(s=!0,!u.prefix))return l=!1});if(n&&i.length)return e=B("timeout","Load timeout for modules: "+i,null,i),e.contextName=C.contextName,h(e);l&&v(r,function(e){m(e,{},{})});if((!n||t)&&s)if((z||ea)&&!S)S=setTimeout(function(){S=0;g()},50);_=!1}}function y(e){t(W,e[0])||c(l(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=C.onScriptLoad;e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1);t=C.onScriptError;(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1);return{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(f();O.length;){e=O.shift();if(null===e[0])return h(B("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}C.defQueueMap={}}var _,x,C,k,S,D={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},E={},P={},I={},O=[],W={},F={},L={},$=1,j=1;k={require:function(e){return e.require?e.require:e.require=C.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?W[e.map.id]=e.exports:e.exports=W[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return n(D.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}};x=function(e){this.events=n(I,e.id)||{};this.map=e;this.shim=n(D.shim,e.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};x.prototype={init:function(e,t,n,i){i=i||{};if(!this.inited){this.factory=t;if(n)this.on("error",n);else this.events.error&&(n=u(this,function(e){this.emit("error",e)}));this.depMaps=e&&e.slice(0);this.errback=n;this.inited=!0;this.ignore=i.ignore;i.enabled||this.enabled?this.enable():this.check()}},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0;C.startTime=(new Date).getTime();var e=this.map;if(this.shim)C.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}));else return e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,C.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var n,i,r=this.map.id;i=this.depExports;var o=this.exports,a=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(a)){if(this.events.error&&this.map.isDefine||e.onError!==ca)try{o=C.execCb(r,a,i,o)}catch(s){n=s}else o=C.execCb(r,a,i,o);this.map.isDefine&&void 0===o&&((i=this.module)?o=i.exports:this.usingExports&&(o=this.exports));if(n)return n.requireMap=this.map,n.requireModules=this.map.isDefine?[this.map.id]:null,n.requireType=this.map.isDefine?"define":"require",h(this.error=n)}else o=a;this.exports=o;if(this.map.isDefine&&!this.ignore&&(W[r]=o,e.onResourceLoad))e.onResourceLoad(C,this.map,this.depMaps);p(r);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else t(C.defQueueMap,r)||this.fetch()}},callPlugin:function(){var i=this.map,o=i.id,a=l(i.prefix);this.depMaps.push(a);d(a,"defined",u(this,function(a){var s,f;f=n(L,this.map.id);var m=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,v=C.makeRequire(i.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(a.normalize&&(m=a.normalize(m,function(e){return r(e,g,!0)})||""),a=l(i.prefix+"!"+m,this.map.parentMap),d(a,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),f=n(E,a.id)){this.depMaps.push(a);if(this.events.error)f.on("error",u(this,function(e){this.emit("error",e)}));f.enable()}}else f?(this.map.url=C.nameToUrl(f),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0;this.error=e;e.requireModules=[o];A(E,function(e){0===e.map.id.indexOf(o+"_unnormalized")&&p(e.map.id)});h(e)}),s.fromText=u(this,function(n,r){var a=i.name,u=l(a),d=M;r&&(n=r);d&&(M=!1);c(u);t(D.config,o)&&(D.config[a]=D.config[o]);try{e.exec(n)}catch(f){return h(B("fromtexteval","fromText eval for "+o+" failed: "+f,f,[o]))}d&&(M=!0);this.depMaps.push(u);C.completeLoad(a);v([a],s)}),a.load(i.name,v,s,D))}));C.enable(a,this);this.pluginMaps[a.id]=a},enable:function(){P[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,u(this,function(e,i){var r,o;if("string"===typeof e){e=l(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[i]=e;if(r=n(k,e.id)){this.depExports[i]=r(this);return}this.depCount+=1;d(e,"defined",u(this,function(e){this.undefed||(this.defineDep(i,e),this.check())}));this.errback?d(e,"error",u(this,this.errback)):this.events.error&&d(e,"error",u(this,function(e){this.emit("error",e)}))}r=e.id;o=E[r];!t(k,r)&&(o&&!o.enabled)&&C.enable(e,this)}));A(this.pluginMaps,u(this,function(e){var t=n(E,e.id);t&&!t.enabled&&C.enable(e,this)}));this.enabling=!1;this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]);n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)});"error"===e&&delete this.events[e]}};C={config:D,contextName:i,registry:E,defined:W,urlFetched:F,defQueue:O,defQueueMap:{},Module:x,makeModuleMap:l,nextTick:e.nextTick,onError:h,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=D.shim,n={paths:!0,bundles:!0,config:!0,map:!0};A(e,function(e,t){n[t]?(D[t]||(D[t]={}),U(D[t],e,!0,!0)):D[t]=e});e.bundles&&A(e.bundles,function(e,t){v(e,function(e){e!==t&&(L[e]=t)})});e.shim&&(A(e.shim,function(e,n){H(e)&&(e={deps:e});if((e.exports||e.init)&&!e.exportsFn)e.exportsFn=C.makeShimExports(e);t[n]=e}),D.shim=t);e.packages&&v(e.packages,function(e){var t,e="string"===typeof e?{name:e}:e;t=e.name;e.location&&(D.paths[t]=e.location);D.pkgs[t]=e.name+"/"+(e.main||"main").replace(ha,"").replace(Q,"")});A(E,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=l(t,null,!0))});if(e.deps||e.callback)C.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;e.init&&(t=e.init.apply(ba,arguments));return t||e.exports&&da(e.exports)}},makeRequire:function(a,s){function u(n,r,o){var d,f;s.enableBuildCallback&&(r&&G(r))&&(r.__requireJsBuild=!0);if("string"===typeof n){if(G(r))return h(B("requireargs","Invalid require call"),o);if(a&&t(k,n))return k[n](E[a.id]);if(e.get)return e.get(C,n,a,u);d=l(n,a,!1,!0);d=d.id;return!t(W,d)?h(B("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+i+(a?"":". Use require([])"))):W[d]}w();C.nextTick(function(){w();f=c(l(null,a));f.skipMap=s.skipMap;f.init(n,r,o,{enabled:!0});g()});return u}s=s||{};U(u,{isBrowser:z,toUrl:function(e){var t,n=e.lastIndexOf("."),i=e.split("/")[0];if(-1!==n&&(!("."===i||".."===i)||1<n))t=e.substring(n,e.length),e=e.substring(0,n);return C.nameToUrl(r(e,a&&a.id,!0),t,!0)},defined:function(e){return t(W,l(e,a,!1,!0).id)},specified:function(e){e=l(e,a,!1,!0).id;return t(W,e)||t(E,e)}});a||(u.undef=function(e){f();var t=l(e,a,!0),i=n(E,e);i.undefed=!0;o(e);delete W[e];delete F[t.url];delete I[e];T(O,function(t,n){t[0]===e&&O.splice(n,1)});delete C.defQueueMap[e];i&&(i.events.defined&&(I[e]=i.events),p(e))});return u},enable:function(e){n(E,e.id)&&c(e).enable()},completeLoad:function(e){var i,r,o=n(D.shim,e)||{},s=o.exports;for(f();O.length;){r=O.shift();if(null===r[0]){r[0]=e;if(i)break;i=!0}else r[0]===e&&(i=!0);y(r)}C.defQueueMap={};r=n(E,e);if(!i&&!t(W,e)&&r&&!r.inited){if(D.enforceDefine&&(!s||!da(s)))return a(e)?void 0:h(B("nodefine","No define call for "+e,null,[e]));y([e,o.deps||[],o.exportsFn])}g()},nameToUrl:function(t,i,r){var o,a,s;(o=n(D.pkgs,t))&&(t=o);if(o=n(L,t))return C.nameToUrl(o,i,r);if(e.jsExtRegExp.test(t))o=t+(i||"");else{o=D.paths;t=t.split("/");for(a=t.length;0<a;a-=1)if(s=t.slice(0,a).join("/"),s=n(o,s)){H(s)&&(s=s[0]);t.splice(0,a,s);break}o=t.join("/");o+=i||(/^data\:|\?/.test(o)||r?"":".js");o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":D.baseUrl)+o}return D.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+D.urlArgs):o},load:function(t,n){e.load(C,t,n)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||ia.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),C.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!a(t.id))return h(B("scripterror","Script error for: "+t.id,e,[t.id]))}};C.require=C.makeRequire();return C}var e,x,y,D,I,E,N,J,r,O,ja=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ka=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ha=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ea=!z&&"undefined"!==typeof importScripts,ia=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},s={},R=[],M=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs))return;s=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(s=require,require=void 0);e=requirejs=function(t,i,r,o){var a,s="_";!H(t)&&"string"!==typeof t&&(a=t,H(i)?(t=i,i=r,r=o):t=[]);a&&a.context&&(s=a.context);(o=n(F,s))||(o=F[s]=e.s.newContext(s));a&&o.configure(a);return o.require(t,i,r)};e.config=function(t){return e(t)};e.nextTick="undefined"!==typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()};require||(require=e);e.version="2.1.20";e.jsExtRegExp=/^\/|:|\?|\.js$/;e.isBrowser=z;x=e.s={contexts:F,newContext:ga};e({});v(["toUrl","undef","defined","specified"],function(t){e[t]=function(){var e=F._;return e.require[t].apply(e,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0]))y=x.head=D.parentNode;e.onError=ca;e.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");t.type=e.scriptType||"text/javascript";t.charset="utf-8";t.async=!0;return t};e.load=function(t,n,i){var r=t&&t.config||{},o;if(z){o=e.createNode(r,n,i);if(r.onNodeCreated)r.onNodeCreated(o,r,n,i);o.setAttribute("data-requirecontext",t.contextName);o.setAttribute("data-requiremodule",n);o.attachEvent&&!(o.attachEvent.toString&&0>o.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,o.attachEvent("onreadystatechange",t.onScriptLoad)):(o.addEventListener("load",t.onScriptLoad,!1),o.addEventListener("error",t.onScriptError,!1));o.src=i;J=o;D?y.insertBefore(o,D):y.appendChild(o);J=null;return o}if(ea)try{importScripts(i),t.completeLoad(n)}catch(a){t.onError(B("importscripts","importScripts failed for "+n+" at "+i,a,[n]))}};z&&!s.skipDataMain&&T(document.getElementsByTagName("script"),function(t){y||(y=t.parentNode);if(I=t.getAttribute("data-main"))return r=I,s.baseUrl||(E=r.split("/"),r=E.pop(),O=E.length?E.join("/")+"/":"./",s.baseUrl=O),r=r.replace(Q,""),e.jsExtRegExp.test(r)&&(r=I),s.deps=s.deps?s.deps.concat(r):[r],!0});define=function(e,t,n){var i,r;"string"!==typeof e&&(n=t,t=e,e=null);H(t)||(n=t,t=null);!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ja,"").replace(ka,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)));if(M){if(!(i=J))N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),i=N;i&&(e||(e=i.getAttribute("data-requiremodule")),r=F[i.getAttribute("data-requirecontext")])}r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):R.push([e,t,n])};define.amd={jQuery:!0};e.exec=function(b){return eval(b)};e(s)}})(this);!function(e,t){"use strict";function n(e,t){for(var n,i=[],r=0;r<e.length;++r){if(n=s[e[r]]||o(e[r]),!n)throw"module definition dependecy not found: "+e[r];i.push(n)}t.apply(null,i)}function i(e,i,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(i,function(){s[e]=r.apply(null,arguments)})}function r(e){return!!s[e]}function o(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function a(n){var i,r,o,a,l;for(i=0;i<n.length;i++){r=e,o=n[i],a=o.split(/[.\/]/);for(var u=0;u<a.length-1;++u)r[a[u]]===t&&(r[a[u]]={}),r=r[a[u]];r[a[a.length-1]]=s[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in s)l[o]=s[o];for(i=0;i<n.length;i++)delete l[n[i]];e.privateModules=l}}var s={},l="tinymce/geom/Rect",u="tinymce/util/Promise",c="tinymce/util/Delay",d="tinymce/dom/EventUtils",h="tinymce/dom/Sizzle",f="tinymce/Env",p="tinymce/util/Arr",m="tinymce/util/Tools",g="tinymce/dom/DomQuery",v="tinymce/html/Styles",y="tinymce/dom/TreeWalker",b="tinymce/dom/Range",w="tinymce/html/Entities",_="tinymce/dom/StyleSheetLoader",x="tinymce/dom/DOMUtils",C="tinymce/dom/ScriptLoader",k="tinymce/AddOnManager",S="tinymce/dom/NodeType",T="tinymce/text/Zwsp",N="tinymce/caret/CaretContainer",D="tinymce/dom/RangeUtils",M="tinymce/NodeChange",E="tinymce/html/Node",R="tinymce/html/Schema",A="tinymce/html/SaxParser",P="tinymce/html/DomParser",I="tinymce/html/Writer",B="tinymce/html/Serializer",H="tinymce/dom/Serializer",z="tinymce/dom/TridentSelection",O="tinymce/util/VK",W="tinymce/dom/ControlSelection",F="tinymce/util/Fun",L="tinymce/caret/CaretCandidate",$="tinymce/geom/ClientRect",U="tinymce/text/ExtendingChar",j="tinymce/caret/CaretPosition",V="tinymce/caret/CaretBookmark",Y="tinymce/dom/BookmarkManager",q="tinymce/dom/Selection",G="tinymce/dom/ElementUtils",K="tinymce/fmt/Preview",X="tinymce/Formatter",J="tinymce/UndoManager",Q="tinymce/EnterKey",Z="tinymce/ForceBlocks",ee="tinymce/EditorCommands",te="tinymce/util/URI",ne="tinymce/util/Class",ie="tinymce/util/EventDispatcher",re="tinymce/data/Binding",oe="tinymce/util/Observable",ae="tinymce/data/ObservableObject",se="tinymce/ui/Selector",le="tinymce/ui/Collection",ue="tinymce/ui/DomUtils",ce="tinymce/ui/BoxUtils",de="tinymce/ui/ClassList",he="tinymce/ui/ReflowQueue",fe="tinymce/ui/Control",pe="tinymce/ui/Factory",me="tinymce/ui/KeyboardNavigation",ge="tinymce/ui/Container",ve="tinymce/ui/DragHelper",ye="tinymce/ui/Scrollable",be="tinymce/ui/Panel",we="tinymce/ui/Movable",_e="tinymce/ui/Resizable",xe="tinymce/ui/FloatPanel",Ce="tinymce/ui/Window",ke="tinymce/ui/MessageBox",Se="tinymce/WindowManager",Te="tinymce/ui/Tooltip",Ne="tinymce/ui/Widget",De="tinymce/ui/Progress",Me="tinymce/ui/Notification",Ee="tinymce/NotificationManager",Re="tinymce/dom/NodePath",Ae="tinymce/util/Quirks",Pe="tinymce/EditorObservable",Ie="tinymce/Mode",Be="tinymce/Shortcuts",He="tinymce/file/Uploader",ze="tinymce/file/Conversions",Oe="tinymce/file/ImageScanner",We="tinymce/file/BlobCache",Fe="tinymce/EditorUpload",Le="tinymce/caret/CaretUtils",$e="tinymce/caret/CaretWalker",Ue="tinymce/caret/FakeCaret",je="tinymce/dom/Dimensions",Ve="tinymce/caret/LineWalker",Ye="tinymce/caret/LineUtils",qe="tinymce/DragDropOverrides",Ge="tinymce/SelectionOverrides",Ke="tinymce/Editor",Xe="tinymce/util/I18n",Je="tinymce/FocusManager",Qe="tinymce/EditorManager",Ze="tinymce/LegacyInput",et="tinymce/util/XHR",tt="tinymce/util/JSON",nt="tinymce/util/JSONRequest",it="tinymce/util/JSONP",rt="tinymce/util/LocalStorage",ot="tinymce/Compat",at="tinymce/ui/Layout",st="tinymce/ui/AbsoluteLayout",lt="tinymce/ui/Button",ut="tinymce/ui/ButtonGroup",ct="tinymce/ui/Checkbox",dt="tinymce/ui/ComboBox",ht="tinymce/ui/ColorBox",ft="tinymce/ui/PanelButton",pt="tinymce/ui/ColorButton",mt="tinymce/util/Color",gt="tinymce/ui/ColorPicker",vt="tinymce/ui/Path",yt="tinymce/ui/ElementPath",bt="tinymce/ui/FormItem",wt="tinymce/ui/Form",_t="tinymce/ui/FieldSet",xt="tinymce/ui/FilePicker",Ct="tinymce/ui/FitLayout",kt="tinymce/ui/FlexLayout",St="tinymce/ui/FlowLayout",Tt="tinymce/ui/FormatControls",Nt="tinymce/ui/GridLayout",Dt="tinymce/ui/Iframe",Mt="tinymce/ui/Label",Et="tinymce/ui/Toolbar",Rt="tinymce/ui/MenuBar",At="tinymce/ui/MenuButton",Pt="tinymce/ui/MenuItem",It="tinymce/ui/Menu",Bt="tinymce/ui/ListBox",Ht="tinymce/ui/Radio",zt="tinymce/ui/ResizeHandle",Ot="tinymce/ui/SelectBox",Wt="tinymce/ui/Slider",Ft="tinymce/ui/Spacer",Lt="tinymce/ui/SplitButton",$t="tinymce/ui/StackLayout",Ut="tinymce/ui/TabPanel",jt="tinymce/ui/TextBox",Vt="tinymce/ui/Throbber";
i(l,[],function(){function e(e,t,n){var i,r,a,s,l,c;return i=t.x,r=t.y,a=e.w,s=e.h,l=t.w,c=t.h,n=(n||"").split(""),"b"===n[0]&&(r+=c),"r"===n[1]&&(i+=l),"c"===n[0]&&(r+=u(c/2)),"c"===n[1]&&(i+=u(l/2)),"b"===n[3]&&(r-=s),"r"===n[4]&&(i-=a),"c"===n[3]&&(r-=u(s/2)),"c"===n[4]&&(i-=u(a/2)),o(i,r,a,s)}function t(t,n,i,r){var o,a;for(a=0;a<r.length;a++)if(o=e(t,n,r[a]),o.x>=i.x&&o.x+o.w<=i.w+i.x&&o.y>=i.y&&o.y+o.h<=i.h+i.y)return r[a];return null}function n(e,t,n){return o(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function i(e,t){var n,i,r,a;return n=l(e.x,t.x),i=l(e.y,t.y),r=s(e.x+e.w,t.x+t.w),a=s(e.y+e.h,t.y+t.h),0>r-n||0>a-i?null:o(n,i,r-n,a-i)}function r(e,t,n){var i,r,a,s,u,c,d,h,f,p;return u=e.x,c=e.y,d=e.x+e.w,h=e.y+e.h,f=t.x+t.w,p=t.y+t.h,i=l(0,t.x-u),r=l(0,t.y-c),a=l(0,d-f),s=l(0,h-p),u+=i,c+=r,n&&(d+=i,h+=r,u-=a,c-=s),d-=a,h-=s,o(u,c,d-u,h-c)}function o(e,t,n,i){return{x:e,y:t,w:n,h:i}}function a(e){return o(e.left,e.top,e.width,e.height)}var s=Math.min,l=Math.max,u=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:i,clamp:r,create:o,fromClientRect:a}}),i(u,[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,e(i,this),e(r,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void l(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var i;try{i=n(t._value)}catch(r){return void e.reject(r)}e.resolve(i)})}function i(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void s(e(n,t),e(i,this),e(r,this))}this._state=!0,this._value=t,o.call(this)}catch(a){r.call(this,a)}}function r(e){this._state=!1,this._value=e,o.call(this)}function o(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function s(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}if(window.Promise)return window.Promise;var l=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,i){var r=this;return new t(function(t,o){n.call(r,new a(e,i,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0===--r&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)i(o,e[o])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=0,r=e.length;r>i;i++)e[i].then(t,n)})},t}),i(c,[u],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var i,r=window.requestAnimationFrame,o=["ms","moz","webkit"];for(i=0;i<o.length&&!r;i++)r=window[o[i]+"RequestAnimationFrame"];r||(r=n),r(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function i(e,t){return"number"!=typeof t&&(t=0),setInterval(e,t)}function r(e){return clearTimeout(e)}function o(e){return clearInterval(e)}var a;return{requestAnimationFrame:function(n,i){return a?void a.then(n):void(a=new e(function(e){i||(i=document.body),t(e,i)}).then(n))},setTimeout:n,setInterval:i,setEditorTimeout:function(e,t,i){return n(function(){e.removed||t()},i)},setEditorInterval:function(e,t,n){var r;return r=i(function(){e.removed?clearInterval(r):t()},n)},clearInterval:o,clearTimeout:r}}),i(d,[c],function(e){function t(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function i(e,t){function n(){return!1}function i(){return!0}var r,o=t||{},a;for(r in e)l[r]||(o[r]=e[r]);if(o.target||(o.target=o.srcElement||document),e&&s.test(e.type)&&e.pageX===a&&e.clientX!==a){var u=o.target.ownerDocument||document,c=u.documentElement,d=u.body;o.pageX=e.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),o.pageY=e.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)}return o.preventDefault=function(){o.isDefaultPrevented=i,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=i,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=i,o.stopPropagation()},o.isDefaultPrevented||(o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),"undefined"==typeof o.metaKey&&(o.metaKey=!1),o}function r(i,r,o){function a(){o.domLoaded||(o.domLoaded=!0,r(c))}function s(){("complete"===u.readyState||"interactive"===u.readyState&&u.body)&&(n(u,"readystatechange",s),a())}function l(){try{u.documentElement.doScroll("left")}catch(t){return void e.setTimeout(l)}a()}var u=i.document,c={type:"ready"};return o.domLoaded?void r(c):(u.addEventListener?"complete"===u.readyState?a():t(i,"DOMContentLoaded",a):(t(u,"readystatechange",s),u.documentElement.doScroll&&i.self===i.top&&l()),void t(i,"load",a))}function o(){function e(e,t){var n,i,r,o,a=s[t];if(n=a&&a[e.type])for(i=0,r=n.length;r>i;i++)if(o=n[i],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var o=this,s={},l,u,c,d,h;u=a+(+new Date).toString(32),d="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,h={mouseenter:"mouseover",mouseleave:"mouseout"},l=1,o.domLoaded=!1,o.events=s,o.bind=function(n,a,f,p){function m(t){e(i(t||C.event),g)}var g,v,y,b,w,_,x,C=window;if(n&&3!==n.nodeType&&8!==n.nodeType){for(n[u]?g=n[u]:(g=l++,n[u]=g,s[g]={}),p=p||n,a=a.split(" "),y=a.length;y--;)b=a[y],_=m,w=x=!1,"DOMContentLoaded"===b&&(b="ready"),o.domLoaded&&"ready"===b&&"complete"==n.readyState?f.call(p,i({type:b})):(d||(w=h[b],w&&(_=function(t){var n,r;if(n=t.currentTarget,r=t.relatedTarget,r&&n.contains)r=n.contains(r);else for(;r&&r!==n;)r=r.parentNode;r||(t=i(t||C.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,g))})),c||"focusin"!==b&&"focusout"!==b||(x=!0,w="focusin"===b?"focus":"blur",_=function(t){t=i(t||C.event),t.type="focus"===t.type?"focusin":"focusout",e(t,g)}),v=s[g][b],v?"ready"===b&&o.domLoaded?f({type:b}):v.push({func:f,scope:p}):(s[g][b]=v=[{func:f,scope:p}],v.fakeName=w,v.capture=x,v.nativeHandler=_,"ready"===b?r(n,_,o):t(n,w||b,_,x)));return n=v=0,f}},o.unbind=function(e,t,i){var r,a,l,c,d,h;if(!e||3===e.nodeType||8===e.nodeType)return o;if(r=e[u]){if(h=s[r],t){for(t=t.split(" "),l=t.length;l--;)if(d=t[l],a=h[d]){if(i)for(c=a.length;c--;)if(a[c].func===i){var f=a.nativeHandler,p=a.fakeName,m=a.capture;a=a.slice(0,c).concat(a.slice(c+1)),a.nativeHandler=f,a.fakeName=p,a.capture=m,h[d]=a}i&&0!==a.length||(delete h[d],n(e,a.fakeName||d,a.nativeHandler,a.capture))}}else{for(d in h)a=h[d],n(e,a.fakeName||d,a.nativeHandler,a.capture);h={}}for(d in h)return o;delete s[r];try{delete e[u]}catch(g){e[u]=null}}return o},o.fire=function(t,n,r){var a;if(!t||3===t.nodeType||8===t.nodeType)return o;r=i(null,r),r.type=n,r.target=t;do a=t[u],a&&e(r,a),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return o},o.clean=function(e){var t,n,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[u]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[u]&&i(e);return o},o.destroy=function(){s={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var a="mce-data-",s=/^(?:mouse|contextmenu)|click/,l={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1};return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),i(h,[],function(){function e(e,t,n,i){var r,o,a,s,l,u,d,f,p,m;if((t?t.ownerDocument||t:F)!==A&&R(t),t=t||A,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(I&&!i){if(r=ve.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&O(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&_.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(_.qsa&&(!B||!B.test(e))){if(f=d=W,p=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=S(e),(d=t.getAttribute("id"))?f=d.replace(be,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+h(u[l]);p=ye.test(e)&&c(t.parentNode)||t,m=u.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return N(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[W]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&typeof e.getElementsByTagName!==q&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=$++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u=[L,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[W]||(t[W]={}),(s=l[i])&&s[0]===L&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function g(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),u&&t.push(s));return a}function v(e,t,n,r,o,a){return r&&!r[W]&&(r=v(r)),o&&!o[W]&&(o=v(o,a)),i(function(i,a,s,l){var u,c,d,h=[],f=[],p=a.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,h,e,s,l),b=n?o||(i?e:p||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=g(b,f),r(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[f[c]]=!(y[f[c]]=d));if(i){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?te.call(i,d):h[c])>-1&&(i[u]=!(a[u]=d))}}else b=g(b===a?b.splice(p,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return te.call(t,e)>-1},a,!0),c=[function(e,n,i){return!o&&(i||n!==D)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];r>s;s++)if(n=x.relative[e[s].type])c=[f(p(c),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[W]){for(i=++s;r>i&&!x.relative[e[i].type];i++);return v(s>1&&p(c),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}c.push(n)}return p(c)}function b(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var c,d,h,f=0,p="0",m=i&&[],v=[],y=D,b=i||o&&x.find.TAG("*",u),w=L+=null==y?1:Math.random()||.1,_=b.length;for(u&&(D=a!==A&&a);p!==_&&null!=(c=b[p]);p++){if(o&&c){for(d=0;h=t[d++];)if(h(c,a,s)){l.push(c);break}u&&(L=w)}r&&((c=!h&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(d=0;h=n[d++];)h(m,v,a,s);if(i){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=J.call(l));v=g(v)}Z.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return u&&(L=w,D=y),m};return r?i(a):a}var w,_,x,C,k,S,T,N,D,M,E,R,A,P,I,B,H,z,O,W="sizzle"+-new Date,F=window.document,L=0,$=0,U=n(),j=n(),V=n(),Y=function(e,t){return e===t&&(E=!0),0},q=typeof t,G=1<<31,K={}.hasOwnProperty,X=[],J=X.pop,Q=X.push,Z=X.push,ee=X.slice,te=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(ae),he=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),_e=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(X=ee.call(F.childNodes),F.childNodes),X[F.childNodes.length].nodeType}catch(xe){Z={apply:X.length?function(e,t){Q.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}_=e.support={},k=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=e.setDocument=function(e){var t,n=e?e.ownerDocument||e:F,i=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,P=n.documentElement,I=!k(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){R()},!1):i.attachEvent&&i.attachEvent("onunload",function(){R()})),_.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=ge.test(n.getElementsByClassName),_.getById=r(function(e){return P.appendChild(e).id=W,!n.getElementsByName||!n.getElementsByName(W).length}),_.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==q&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(we,_e);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(we,_e);return function(e){var n=typeof e.getAttributeNode!==q&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==q?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=_.getElementsByClassName&&function(e,t){return I?t.getElementsByClassName(e):void 0},H=[],B=[],(_.qsa=ge.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||B.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||B.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&B.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(_.matchesSelector=ge.test(z=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){_.disconnectedMatch=z.call(e,"div"),z.call(e,"[s!='']:x"),H.push("!=",ae)}),B=B.length&&new RegExp(B.join("|")),H=H.length&&new RegExp(H.join("|")),t=ge.test(P.compareDocumentPosition),O=t||ge.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return E=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!_.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===F&&O(F,e)?-1:t===n||t.ownerDocument===F&&O(F,t)?1:M?te.call(M,e)-te.call(M,t):0:4&i?-1:1)}:function(e,t){if(e===t)return E=!0,0;var i,r=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:M?te.call(M,e)-te.call(M,t):0;if(o===s)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===F?-1:u[r]===F?1:0},n):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&R(t),n=n.replace(ce,"='$1']"),_.matchesSelector&&I&&(!H||!H.test(n))&&(!B||!B.test(n)))try{var i=z.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,A,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==A&&R(e),O(e,t)},e.attr=function(e,n){(e.ownerDocument||e)!==A&&R(e);var i=x.attrHandle[n.toLowerCase()],r=i&&K.call(x.attrHandle,n.toLowerCase())?i(e,n,!I):t;return r!==t?r:_.attributes||!I?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],i=0,r=0;if(E=!_.detectDuplicates,M=!_.sortStable&&e.slice(0),e.sort(Y),E){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return M=null,e},C=e.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(we,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==q&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,f,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(c=g[W]||(g[W]={}),u=c[e]||[],f=u[0]===L&&u[1],h=u[0]===L&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[L,f,h];break}}else if(y&&(u=(t[W]||(t[W]={}))[e])&&u[0]===L)h=u[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[W]||(d[W]={}))[e]=[L,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[W]?o(n):o.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=T(e.replace(se,"$1"));return r[W]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(e){return e=e.replace(we,_e),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,_e).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===P},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=l(w);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,S=e.tokenize=function(t,n){var i,r,o,a,s,l,u,c=j[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=x.preFilter;s;){(!i||(r=le.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in x.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):j(t,l).slice(0)},T=e.compile=function(e,t){var n,i=[],r=[],o=V[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=y(t[n]),o[W]?i.push(o):r.push(o);o=V(e,b(r,i)),o.selector=e}return o},N=e.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,d=!i&&S(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===t.nodeType&&I&&x.relative[o[1].type]){if(t=(x.find.ID(a.matches[0].replace(we,_e),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(i=l(a.matches[0].replace(we,_e),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Z.apply(n,i),n;break}}return(u||T(e,d))(i,t,!I,n,ye.test(e)&&c(t.parentNode)||t),n},_.sortStable=W.split("").sort(Y).join("")===W,_.detectDuplicates=!!E,R(),_.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),e}),i(f,[],function(){function e(e){return"matchMedia"in window?matchMedia(e).matches:!1}var t=navigator,n=t.userAgent,i,r,o,a,s,l,u,c,d,h,f,p;i=window.opera&&window.opera.buildNumber,d=/Android/.test(n),r=/WebKit/.test(n),o=!r&&!i&&/MSIE/gi.test(n)&&/Explorer/gi.test(t.appName),o=o&&/MSIE (\w+)\./.exec(n)[1],a=-1==n.indexOf("Trident/")||-1==n.indexOf("rv:")&&-1==t.appName.indexOf("Netscape")?!1:11,s=-1==n.indexOf("Edge/")||o||a?!1:12,o=o||a||s,l=!r&&!a&&/Gecko/.test(n),u=-1!=n.indexOf("Mac"),c=/(iPad|iPhone)/.test(n),h="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,f=e("only screen and (max-device-width: 480px)")&&(d||c),p=e("only screen and (min-width: 800px)")&&(d||c),s&&(r=!1);var m=!c||h||n.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:i,webkit:r,ie:o,gecko:l,mac:u,iOS:c,android:d,contentEditable:m,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=o,range:window.getSelection&&"Range"in window,documentMode:o&&!s?document.documentMode||7:10,fileApi:h,ceFalse:o===!1||o>8,desktop:!f&&!p}}),i(p,[],function(){function e(e){var t=e,n,i;if(!c(e))for(t=[],n=0,i=e.length;i>n;n++)t[n]=e[n];return t}function n(e,n,i){var r,o;if(!e)return 0;if(i=i||e,e.length!==t){for(r=0,o=e.length;o>r;r++)if(n.call(i,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&n.call(i,e[r],r,e)===!1)return 0;return 1}function i(e,t){var i=[];return n(e,function(n,r){i.push(t(n,r,e))}),i}function r(e,t){var i=[];return n(e,function(n,r){(!t||t(n,r,e))&&i.push(n)}),i}function o(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function a(e,t,n,i){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(i,n,e[r],r);return n}function s(e,t,n){var i,r;for(i=0,r=e.length;r>i;i++)if(t.call(n,e[i],i,e))return i;return-1}function l(e,n,i){var r=s(e,n,i);return-1!==r?e[r]:t}function u(e){return e[e.length-1]}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:c,toArray:e,each:n,map:i,filter:r,indexOf:o,reduce:a,findIndex:s,find:l,last:u}}),i(m,[f,p],function(e,n){function i(e){return null===e||e===t?"":(""+e).replace(f,"")}function r(e,i){return i?"array"==i&&n.isArray(e)?!0:typeof e==i:e!==t}function o(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n}function a(e,t,n){var i=this,r,o,a,s,l,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],o=i.createNS(e[3].replace(/\.\w+$/,""),n),!o[a]){if("static"==e[2])return o[a]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[a]));t[a]||(t[a]=function(){},u=1),o[a]=t[a],i.extend(o[a].prototype,t),e[5]&&(r=i.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],l=o[a],u?o[a]=function(){return r[s].apply(this,arguments)}:o[a]=function(){return this.parent=r[s],l.apply(this,arguments)},o[a].prototype[a]=o[a],i.each(r,function(e,t){o[a].prototype[t]=r[t]}),i.each(t,function(e,t){r[t]?o[a].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=a&&(o[a].prototype[t]=e)})),i.each(t["static"],function(e,t){o[a][t]=e})}}function s(e,n){var i,r,o,a=arguments,s;for(i=1,r=a.length;r>i;i++){n=a[i];for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!==t&&(e[o]=s))}return e}function l(e,t,i,r){r=r||this,e&&(i&&(e=e[i]),n.each(e,function(e,n){return t.call(r,e,n,i)===!1?!1:void l(e,t,i,r)}))}function u(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t}function c(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]],t);n++);return t}function d(e,t){return!e||r(e,"array")?e:n.map(e.split(t||","),i)}function h(t){var n=e.cacheSuffix;return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}var f=/^\s*|\s*$/g;return{trim:i,isArray:n.isArray,is:r,toArray:n.toArray,makeMap:o,each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,extend:s,create:a,walk:l,createNS:u,resolve:c,explode:d,_addCacheSuffix:h}}),i(g,[d,h,m,f],function(e,n,i,r){function o(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e){return e&&e==e.window}function l(e,t){var n,i,r;for(t=t||x,r=t.createElement("div"),n=t.createDocumentFragment(),r.innerHTML=e;i=r.firstChild;)n.appendChild(i);return n}function u(e,t,n,i){var r;if(a(t))t=l(t,v(e[0]));else if(t.length&&!t.nodeType){if(t=h.makeArray(t),i)for(r=t.length-1;r>=0;r--)u(e,t[r],n,i);else for(r=0;r<t.length;r++)u(e,t[r],n,i);return e}if(t.nodeType)for(r=e.length;r--;)n.call(e[r],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function d(e,t,n){var i,r;return t=h(t)[0],e.each(function(){var e=this;n&&i==e.parentNode?r.appendChild(e):(i=e.parentNode,r=t.cloneNode(!1),e.parentNode.insertBefore(r,e),r.appendChild(e))}),e}function h(e,t){return new h.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e){return null===e||e===N?"":(""+e).replace(B,"")}function m(e,t){var n,i,r,o,a;if(e)if(n=e.length,n===o){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],t.call(a,i,a)===!1))break}else for(r=0;n>r&&(a=e[r],t.call(a,r,a)!==!1);r++);return e}function g(e,t){var n=[];return m(e,function(e,i){t(i,e)&&n.push(i)}),n}function v(e){return e?9==e.nodeType?e:e.ownerDocument:x;
}function y(e,n,i){var r=[],o=e[n];for("string"!=typeof i&&i instanceof h&&(i=i[0]);o&&9!==o.nodeType;){if(i!==t){if(o===i)break;if("string"==typeof i&&h(o).is(i))break}1===o.nodeType&&r.push(o),o=o[n]}return r}function b(e,n,i,r){var o=[];for(r instanceof h&&(r=r[0]);e;e=e[n])if(!i||e.nodeType===i){if(r!==t){if(e===r)break;if("string"==typeof r&&h(e).is(r))break}o.push(e)}return o}function w(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function _(e,t,n){m(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})}var x=document,C=Array.prototype.push,k=Array.prototype.slice,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,T=e.Event,N,D=i.makeMap("children,contents,next,prev"),M=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),E=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),R={"for":"htmlFor","class":"className",readonly:"readOnly"},A={"float":"cssFloat"},P={},I={},B=/^\s*|\s*$/g;return h.fn=h.prototype={constructor:h,selector:"",context:null,length:0,init:function(e,t){var n=this,i,r;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return h(e).attr(t);n.context=t=document}if(a(e)){if(n.selector=e,i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e),!i)return h(t).find(e);if(i[1])for(r=l(e,v(t)).firstChild;r;)C.call(n,r),r=r.nextSibling;else{if(r=v(t).getElementById(i[2]),!r)return n;if(r.id!==i[2])return n.find(e);n.length=1,n[0]=r}}else this.add(e,!1);return n},toArray:function(){return i.toArray(this)},add:function(e,t){var n=this,i,r;if(a(e))return n.add(h(e));if(t!==!1)for(i=h.unique(n.toArray().concat(h.makeArray(e))),n.length=i.length,r=0;r<i.length;r++)n[r]=i[r];else C.apply(n,h.makeArray(e));return n},attr:function(e,t){var n=this,i;if("object"==typeof e)m(e,function(e,t){n.attr(e,t)});else{if(!o(t)){if(n[0]&&1===n[0].nodeType){if(i=P[e],i&&i.get)return i.get(n[0],e);if(E[e])return n.prop(e)?e:N;t=n[0].getAttribute(e,2),null===t&&(t=N)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=P[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=R[e]||e,"object"==typeof e)m(e,function(e,t){n.prop(e,t)});else{if(!o(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var r=this,a,s;if("object"==typeof e)m(e,function(e,t){r.css(e,t)});else if(o(t))e=n(e),"number"!=typeof t||M[e]||(t+="px"),r.each(function(){var n=this.style;if(s=I[e],s&&s.set)return void s.set(this,t);try{this.style[A[e]||e]=t}catch(r){}(null===t||""===t)&&(n.removeProperty?n.removeProperty(i(e)):n.removeAttribute(e))});else{if(a=r[0],s=I[e],s&&s.get)return s.get(a);if(a.ownerDocument.defaultView)try{return a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(i(e))}catch(l){return N}else if(a.currentStyle)return a.currentStyle[n(e)]}return r},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],T.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(o(e)){n=t.length;try{for(;n--;)t[n].innerHTML=e}catch(i){h(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(o(e)){for(n=t.length;n--;)"innerText"in t[n]?t[n].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return u(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return u(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?u(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?u(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return h(e).append(this),this},prependTo:function(e){return h(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return d(this,e)},wrapAll:function(e){return d(this,e,!0)},wrapInner:function(e){return this.each(function(){h(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){h(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),h(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?m(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,i){var r,o;o=c(i,e),o!==t&&(r=i.className,o?i.className=p((" "+r+" ").replace(" "+e+" "," ")):i.className+=r?" "+e:e)}),n)},hasClass:function(e){return c(this[0],e)},each:function(e){return m(this,e)},on:function(e,t){return this.each(function(){T.bind(this,e,t)})},off:function(e,t){return this.each(function(){T.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?T.fire(this,e.type,e):T.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new h(k.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;n>t;t++)h.find(e,this[t],i);return h(i)},filter:function(e){return h("function"==typeof e?g(this.toArray(),function(t,n){return e(n,t)}):h.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof h&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&h(i).is(e)){t.push(i);break}if(i==e){t.push(i);break}i=i.parentNode}}),h(t)},offset:function(e){var t,n,i,r=0,o=0,a;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,i=n.documentElement,t.getBoundingClientRect&&(a=t.getBoundingClientRect(),r=a.left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,o=a.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:o})},push:C,sort:[].sort,splice:[].splice},i.extend(h,{extend:i.extend,makeArray:function(e){return s(e)||e.nodeType?[e]:i.toArray(e)},inArray:f,isArray:i.isArray,each:m,trim:p,grep:g,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!=t[i].nodeType&&t.splice(i,1);return t=1===t.length?h.find.matchesSelector(t[0],e)?[t[0]]:[]:h.find.matches(e,t)}}),m({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y(e,"parentNode")},next:function(e){return w(e,"nextSibling",1)},prev:function(e){return w(e,"previousSibling",1)},children:function(e){return b(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){h.fn[e]=function(n){var i=this,r=[];return i.each(function(){var e=t.call(r,this,n,r);e&&(h.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(D[e]||(r=h.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=h(r),n?r.filter(n):r}}),m({parentsUntil:function(e,t){return y(e,"parentNode",t)},nextUntil:function(e,t){return b(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return b(e,"previousSibling",1,t).slice(1)}},function(e,t){h.fn[e]=function(n,i){var r=this,o=[];return r.each(function(){var e=t.call(o,this,n,o);e&&(h.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=h.unique(o),(0===e.indexOf("parents")||"prevUntil"===e)&&(o=o.reverse())),o=h(o),i?o.filter(i):o}}),h.fn.is=function(e){return!!e&&this.filter(e).length>0},h.fn.init.prototype=h.fn,h.overrideDefaults=function(e){function t(i,r){return n=n||e(),0===arguments.length&&(i=n.element),r||(r=n.context),new t.fn.init(i,r)}var n;return h.extend(t,this),t},r.ie&&r.ie<8&&(_(P,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?N:t},size:function(e){var t=e.size;return 20===t?N:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?N:t}}),_(P,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(A["float"]="styleFloat",_(I,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),h.attrHooks=P,h.cssHooks=I,h}),i(v,[],function(){return function(e,t){function n(e,t,n,i){function r(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(i)}var i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,s,l,u={},c,d,h,f="\ufeff";for(e=e||{},t&&(d=t.getValidStyles(),h=t.getInvalidStyles()),c=("\\\" \\' \\; \\: ; : "+f).split(" "),l=0;l<c.length;l++)u[c[l]]=f+l,u[f+l]=c[l];return{toHex:function(e){return e.replace(i,n)},parse:function(t){function s(e,t,n){var i,r,o,a;if(i=m[e+"-top"+t],i&&(r=m[e+"-right"+t],r&&(o=m[e+"-bottom"+t],o&&(a=m[e+"-left"+t])))){var s=[i,r,o,a];for(l=s.length-1;l--&&s[l]===s[l+1];);l>-1&&n||(m[e+t]=-1==l?s[0]:s.join(" "),delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t])}}function c(e){var t=m[e],n;if(t){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return m[e]=t[0],!0}}function d(e,t,n,i){c(t)&&c(n)&&c(i)&&(m[e]=m[t]+" "+m[n]+" "+m[i],delete m[t],delete m[n],delete m[i])}function h(e){return b=!0,u[e]}function f(e,t){return b&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return u[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(t,n,i,r,o,a){if(o=o||a)return o=f(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=f(n||i||r),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return w&&(n=w.call(_,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var m={},g,v,y,b,w=e.url_converter,_=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,h).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,h)});g=o.exec(t);){if(v=g[1].replace(a,"").toLowerCase(),y=g[2].replace(a,""),y=y.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),v&&y.length>0){if(!e.allow_script_urls&&("behavior"==v||/expression\s*\(|\/\*|\*\//.test(y)))continue;"font-weight"===v&&"700"===y?y="bold":("color"===v||"background-color"===v)&&(y=y.toLowerCase()),y=y.replace(i,n),y=y.replace(r,p),m[v]=b?f(y,!0):y}o.lastIndex=g.index+g[0].length}s("border","",!0),s("border","-width"),s("border","-color"),s("border","-style"),s("padding",""),s("margin",""),d("border","border-width","border-style","border-color"),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(e,t){function n(t){var n,i,o,a;if(n=d[t])for(i=0,o=n.length;o>i;i++)t=n[i],a=e[t],a!==s&&a.length>0&&(r+=(r.length>0?" ":"")+t+": "+a+";")}function i(e,t){var n;return n=h["*"],n&&n[e]?!1:(n=h[t],n&&n[e]?!1:!0)}var r="",o,a;if(t&&d)n("*"),n(t);else for(o in e)a=e[o],a!==s&&a.length>0&&(!h||i(o,t))&&(r+=(r.length>0?" ":"")+o+": "+a+";");return r}}}}),i(y,[],function(){return function(e,t){function n(e,n,i,r){var o,a;if(e){if(!r&&e[n])return e[n];if(e!=t){if(o=e[i])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[i])return o}}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)}}}),i(b,[m],function(e){function t(n){function i(){return B.createDocumentFragment()}function r(e,t){C(W,e,t)}function o(e,t){C(F,e,t)}function a(e){r(e.parentNode,Y(e))}function s(e){r(e.parentNode,Y(e)+1)}function l(e){o(e.parentNode,Y(e))}function u(e){o(e.parentNode,Y(e)+1)}function c(e){e?(I[U]=I[$],I[j]=I[L]):(I[$]=I[U],I[L]=I[j]),I.collapsed=W}function d(e){a(e),u(e)}function h(e){r(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=I[$],i=I[L],r=I[U],o=I[j],a=t.startContainer,s=t.startOffset,l=t.endContainer,u=t.endOffset;return 0===e?x(n,i,a,s):1===e?x(r,o,a,s):2===e?x(r,o,l,u):3===e?x(n,i,l,u):void 0}function p(){k(O)}function m(){return k(H)}function g(){return k(z)}function v(e){var t=this[$],i=this[L],r,o;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(o=t.childNodes[i]),o?t.insertBefore(e,o):3==t.nodeType?n.insertAfter(e,t):t.appendChild(e)):i?i>=t.nodeValue.length?n.insertAfter(e,t):(r=t.splitText(i),t.parentNode.insertBefore(e,r)):t.parentNode.insertBefore(e,t)}function y(e){var t=I.extractContents();I.insertNode(e),e.appendChild(t),I.selectNode(e)}function b(){return V(new t(n),{startContainer:I[$],startOffset:I[L],endContainer:I[U],endOffset:I[j],collapsed:I.collapsed,commonAncestorContainer:I.commonAncestorContainer})}function w(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function _(){return I[$]==I[U]&&I[L]==I[j]}function x(e,t,i,r){var o,a,s,l,u,c;if(e==i)return t==r?0:r>t?-1:1;for(o=i;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(o=e;o&&o.parentNode!=i;)o=o.parentNode;if(o){for(a=0,s=i.firstChild;s!=o&&r>a;)a++,s=s.nextSibling;return r>a?-1:1}for(l=n.findCommonAncestor(e,i),u=e;u&&u.parentNode!=l;)u=u.parentNode;for(u||(u=l),c=i;c&&c.parentNode!=l;)c=c.parentNode;if(c||(c=l),u==c)return 0;for(s=l.firstChild;s;){if(s==u)return-1;if(s==c)return 1;s=s.nextSibling}}function C(e,t,i){var r,o;for(e?(I[$]=t,I[L]=i):(I[U]=t,I[j]=i),r=I[U];r.parentNode;)r=r.parentNode;for(o=I[$];o.parentNode;)o=o.parentNode;o==r?x(I[$],I[L],I[U],I[j])>0&&I.collapse(e):I.collapse(e),I.collapsed=_(),I.commonAncestorContainer=n.findCommonAncestor(I[$],I[U])}function k(e){var t,n=0,i=0,r,o,a,s,l,u;if(I[$]==I[U])return S(e);for(t=I[U],r=t.parentNode;r;t=r,r=r.parentNode){if(r==I[$])return T(t,e);++n}for(t=I[$],r=t.parentNode;r;t=r,r=r.parentNode){if(r==I[U])return N(t,e);++i}for(o=i-n,a=I[$];o>0;)a=a.parentNode,o--;for(s=I[U];0>o;)s=s.parentNode,o++;for(l=a.parentNode,u=s.parentNode;l!=u;l=l.parentNode,u=u.parentNode)a=l,s=u;return D(a,s,e)}function S(e){var t,n,r,o,a,s,l,u,c;if(e!=O&&(t=i()),I[L]==I[j])return t;if(3==I[$].nodeType){if(n=I[$].nodeValue,r=n.substring(I[L],I[j]),e!=z&&(o=I[$],u=I[L],c=I[j]-I[L],0===u&&c>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(u,c),I.collapse(W)),e==O)return;return r.length>0&&t.appendChild(B.createTextNode(r)),t}for(o=w(I[$],I[L]),a=I[j]-I[L];o&&a>0;)s=o.nextSibling,l=A(o,e),t&&t.appendChild(l),--a,o=s;return e!=z&&I.collapse(W),t}function T(e,t){var n,r,o,a,s,l;if(t!=O&&(n=i()),r=M(e,t),n&&n.appendChild(r),o=Y(e),a=o-I[L],0>=a)return t!=z&&(I.setEndBefore(e),I.collapse(F)),n;for(r=e.previousSibling;a>0;)s=r.previousSibling,l=A(r,t),n&&n.insertBefore(l,n.firstChild),--a,r=s;return t!=z&&(I.setEndBefore(e),I.collapse(F)),n}function N(e,t){var n,r,o,a,s,l;for(t!=O&&(n=i()),o=E(e,t),n&&n.appendChild(o),r=Y(e),++r,a=I[j]-r,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=A(o,t),n&&n.appendChild(l),--a,o=s;return t!=z&&(I.setStartAfter(e),I.collapse(W)),n}function D(e,t,n){var r,o,a,s,l,u,c;for(n!=O&&(o=i()),r=E(e,n),o&&o.appendChild(r),a=Y(e),s=Y(t),++a,l=s-a,u=e.nextSibling;l>0;)c=u.nextSibling,r=A(u,n),o&&o.appendChild(r),u=c,--l;return r=M(t,n),o&&o.appendChild(r),n!=z&&(I.setStartAfter(e),I.collapse(W)),o}function M(e,t){var n=w(I[U],I[j]-1),i,r,o,a,s,l=n!=I[U];if(n==e)return R(n,l,F,t);for(i=n.parentNode,r=R(i,F,F,t);i;){for(;n;)o=n.previousSibling,a=R(n,l,F,t),t!=O&&r.insertBefore(a,r.firstChild),l=W,n=o;if(i==e)return r;n=i.previousSibling,i=i.parentNode,s=R(i,F,F,t),t!=O&&s.appendChild(r),r=s}}function E(e,t){var n=w(I[$],I[L]),i=n!=I[$],r,o,a,s,l;if(n==e)return R(n,i,W,t);for(r=n.parentNode,o=R(r,F,W,t);r;){for(;n;)a=n.nextSibling,s=R(n,i,W,t),t!=O&&o.appendChild(s),i=W,n=a;if(r==e)return o;n=r.nextSibling,r=r.parentNode,l=R(r,F,W,t),t!=O&&l.appendChild(o),o=l}}function R(e,t,i,r){var o,a,s,l,u;if(t)return A(e,r);if(3==e.nodeType){if(o=e.nodeValue,i?(l=I[L],a=o.substring(l),s=o.substring(0,l)):(l=I[j],a=o.substring(0,l),s=o.substring(l)),r!=z&&(e.nodeValue=s),r==O)return;return u=n.clone(e,F),u.nodeValue=a,u}if(r!=O)return n.clone(e,F)}function A(e,t){return t!=O?t==z?n.clone(e,W):e:void e.parentNode.removeChild(e)}function P(){return n.create("body",null,g()).outerText}var I=this,B=n.doc,H=0,z=1,O=2,W=!0,F=!1,L="startOffset",$="startContainer",U="endContainer",j="endOffset",V=e.extend,Y=n.nodeIndex;return V(I,{startContainer:B,startOffset:0,endContainer:B,endOffset:0,collapsed:W,commonAncestorContainer:B,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:o,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:u,collapse:c,selectNode:d,selectNodeContents:h,compareBoundaryPoints:f,deleteContents:p,extractContents:m,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:P}),I}return t.prototype.toString=function(){return this.toStringIE()},t}),i(w,[m],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),o[i]||(r="&"+e[n+1]+";",a[i]=r,a[r]=i);return a}}var i=e.makeMap,r,o,a,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\"\']/g,c=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,d={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(u,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||r,e.replace(t?s:l,function(e){return o[e]||n[e]||e})},getEncodeFunc:function(e,t){function a(e,n){return e.replace(n?s:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function u(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||r,e=i(e.replace(/\+/g,",")),e.named&&e.numeric?a:e.named?t?u:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(c,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):d[n]||String.fromCharCode(n)):a[e]||r[e]||t(e)})}};return h}),i(_,[m,c],function(e,t){return function(n,i){function r(e){n.getElementsByTagName("head")[0].appendChild(e)}function o(i,o,u){function c(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function d(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function h(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function f(e,n){e()||((new Date).getTime()-y<l?t.setTimeout(n):d())}function p(){f(function(){for(var e=n.styleSheets,t,i=e.length,r;i--;)if(t=e[i],r=t.ownerNode?t.ownerNode:t.owningElement,r&&r.id===g.id)return c(),!0},p)}function m(){f(function(){try{var e=v.sheet.cssRules;return c(),!!e}catch(t){}},m)}var g,v,y,b;if(i=e._addCacheSuffix(i),s[i]?b=s[i]:(b={passed:[],failed:[]},s[i]=b),o&&b.passed.push(o),u&&b.failed.push(u),1!=b.status){if(2==b.status)return void c();if(3==b.status)return void d();if(b.status=1,g=n.createElement("link"),g.rel="stylesheet",g.type="text/css",g.id="u"+a++,g.async=!1,g.defer=!1,y=(new Date).getTime(),"onload"in g&&!h())g.onload=p,g.onerror=d;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=n.createElement("style"),v.textContent='@import "'+i+'"',m(),void r(v);p()}r(g),g.href=i}}var a=0,s={},l;i=i||{},l=i.maxLoadTime||5e3,this.load=o}}),i(x,[h,g,v,d,y,b,w,f,m,_],function(e,n,i,r,o,a,s,l,u,c){function d(e,t){var n={},i=t.keep_values,r;return r={set:function(n,i,r){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||e,i,r,n[0])),n.attr("data-mce-"+r,i).attr(r,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(i&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},i&&(n.href=n.src=r),n}function h(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function f(e,t){var n=0,i,r;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=i&&e.nodeValue.length)&&(n++,i=r);return n}function p(e,t){var o=this,a;o.doc=e,o.win=window,o.files={},o.counter=0,o.stdMode=!b||e.documentMode>=8,o.boxModel=!b||"CSS1Compat"==e.compatMode||o.stdMode,o.styleSheetLoader=new c(e),o.boundEvents=[],o.settings=t=t||{},o.schema=t.schema,o.styles=new i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),o.fixDoc(e),o.events=t.ownEvents?new r(t.proxy):r.Event,o.attrHooks=d(o,t),a=t.schema?t.schema.getBlockElements():{},o.$=n.overrideDefaults(function(){return{context:e,element:o.getRoot()}}),o.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!a[e.nodeName]):!!a[e]}}var m=u.each,g=u.is,v=u.grep,y=u.trim,b=l.ie,w=/^([a-z0-9],?)+$/i,_=/^[ \t\r\n]*$/;return p.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(b&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,i,r;return!b||1!==e.nodeType||t?e.cloneNode(t):(r=n.doc,t?i.firstChild:(i=r.createElement(e.nodeName),m(n.getAttribs(e),function(t){n.setAttrib(i,t.nodeName,n.getAttrib(e,t.nodeName))}),i))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,i;return e=t.get(e),n=t.getPos(e),i=t.getSize(e),{x:n.x,y:n.y,w:i.w,h:i.h}},getSize:function(e){var t=this,n,i;return e=t.get(e),n=t.getStyle(e,"width"),i=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(i,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,i,r){var o=this,a,s=[];for(e=o.get(e),r=r===t,i=i||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),g(n,"string")&&(a=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return o.is(e,a)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!r)return e;s.push(e)}e=e.parentNode}return r?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var r;if(n.length===t){if("*"===i)return 1==n.nodeType;if(w.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),r=i.length-1;r>=0;r--)if(i[r]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var o=n.nodeType?[n]:n;return e(i,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,i,r){var o=this;return this.run(e,function(e){var a;return a=g(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):o.setHTML(a,i)),r?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i="",r;i+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(i+=" "+r+'="'+this.encode(t[r])+'"');return"undefined"!=typeof n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(e){var t,n,i=this.doc,r;for(r=i.createElement("div"),t=i.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&h(this,e)},getStyle:function(e,n,i){return e=this.$$(e),i?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=l.ie&&l.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[n]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&h(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i=this,r,o,a=i.settings;""===n&&(n=null),e=i.$$(e),r=e.attr(t),e.length&&(o=i.attrHooks[t],o&&o.set?o.set(e,n,t):e.attr(t,n),r!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,i){m(t,function(e,t){n.setAttrib(i,t,e)})})},getAttrib:function(e,t,n){var i=this,r,o;return e=i.$$(e),e.length&&(r=i.attrHooks[t],o=r&&r.get?r.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=n||""),o},getPos:function(e,t){var i=this,r=0,o=0,a,s=i.doc,l=s.body,u;if(e=i.get(e),t=t||l,e){if(t===l&&e.getBoundingClientRect&&"static"===n(l).css("position"))return u=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:l,r=u.left+(s.documentElement.scrollLeft||l.scrollLeft)-t.clientLeft,o=u.top+(s.documentElement.scrollTop||l.scrollTop)-t.clientTop,{x:r,y:o};for(a=e;a&&a!=t&&a.nodeType;)r+=a.offsetLeft||0,o+=a.offsetTop||0,a=a.offsetParent;for(a=e.parentNode;a&&a!=t&&a.nodeType;)r-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode}return{x:r,y:o}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,i,r;if(t!==p.DOM&&n===document){var o=p.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=!0,p.DOM.addedStyles=o}r=n.getElementById("mceDefaultStyles"),r||(r=n.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",i=n.getElementsByTagName("head")[0],i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,i;return t!==p.DOM&&n===document?void p.DOM.loadCSS(e):(e||(e=""),i=n.getElementsByTagName("head")[0],void m(e.split(","),function(e){var r;e=u._addCacheSuffix(e),t.files[e]||(t.files[e]=!0,r=t.create("link",{rel:"stylesheet",href:e}),b&&n.documentMode&&n.recalc&&(r.onload=function(){n.recalc&&n.recalc(),r.onload=null}),i.appendChild(r))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,i){this.$$(e).toggleClass(t,i).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),b?e.each(function(e,i){if(i.canHaveHTML!==!1){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t,i.removeChild(i.firstChild)}catch(r){n("<div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType&&"outerHTML"in e?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var i=this;i.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}i.remove(n(this).html(t),!0)})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(e,t,n){var i=this;return i.run(t,function(t){return g(t,"array")&&(e=e.cloneNode(!0)),n&&m(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,i;return e.nodeName!=t.toUpperCase()&&(i=n.create(t),m(n.getAttribs(e),function(t){n.setAttrib(i,t.nodeName,n.getAttrib(e,t.nodeName));
}),n.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){for(var n=e,i;n;){for(i=t;i&&n!=i;)i=i.parentNode;if(n==i)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(u.trim(e))},run:function(e,t,n){var i=this,r;return"string"==typeof e&&(e=i.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],m(e,function(e,o){e&&("string"==typeof e&&(e=i.get(e)),r.push(t.call(n,e,o)))}),r)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,i,r,a,s,l,u=0;if(e=e.firstChild){s=new o(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null);do{if(a=e.nodeType,1===a){if(e.getAttribute("data-mce-bogus"))continue;if(l=e.nodeName.toLowerCase(),t&&t[l]){if("br"===l){u++;continue}return!1}for(r=n.getAttribs(e),i=r.length;i--;)if(l=r[i].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==a)return!1;if(3===a&&!_.test(e.nodeValue))return!1}while(e=s.next())}return 1>=u},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:f,split:function(e,t,n){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,a=e.nodeType;if(1!=a||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)i(o[n]);if(9!=a){if(3==a&&e.nodeValue.length>0){var s=y(e.nodeValue).length;if(!r.isBlock(e.parentNode)||s>0||0===s&&t(e))return}else if(1==a&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;r.remove(e)}return e}}var r=this,o=r.createRng(),a,s,l;return e&&t?(o.setStart(e.parentNode,r.nodeIndex(e)),o.setEnd(t.parentNode,r.nodeIndex(t)),a=o.extractContents(),o=r.createRng(),o.setStart(t.parentNode,r.nodeIndex(t)+1),o.setEnd(e.parentNode,r.nodeIndex(e)+1),s=o.extractContents(),l=e.parentNode,l.insertBefore(i(a),e),n?l.insertBefore(n,e):l.insertBefore(t,e),l.insertBefore(i(s),e),r.remove(e),n||t):void 0},bind:function(e,t,n,i){var r=this;if(u.isArray(e)){for(var o=e.length;o--;)e[o]=r.bind(e[o],t,n,i);return e}return!r.settings.collect||e!==r.doc&&e!==r.win||r.boundEvents.push([e,t,n,i]),r.events.bind(e,t,n,i||r)},unbind:function(e,t,n){var i=this,r;if(u.isArray(e)){for(r=e.length;r--;)e[r]=i.unbind(e[r],t,n);return e}if(i.boundEvents&&(e===i.doc||e===i.win))for(r=i.boundEvents.length;r--;){var o=i.boundEvents[r];e!=o[0]||t&&t!=o[1]||n&&n!=o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,r=t;if(e)for("string"==typeof r&&(r=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(r(e))return e;return null}},p.DOM=new p(document),p.nodeIndex=f,p}),i(C,[x,m],function(e,t){function n(){function e(e,n){function r(){a.remove(l),s&&(s.onreadystatechange=s.onload=s=null),n()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var a=i,s,l;l=a.uniqueId(),s=document.createElement("script"),s.id=l,s.type="text/javascript",s.src=t._addCacheSuffix(e),"onreadystatechange"in s?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&r()}:s.onload=r,s.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n=0,a=1,s=2,l={},u=[],c={},d=[],h=0,f;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,t,i){var r=l[e];r==f&&(u.push(e),l[e]=n),t&&(c[e]||(c[e]=[]),c[e].push({func:t,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(u,e,t)},this.loadScripts=function(t,n,i){function u(e){r(c[e],function(e){e.func.call(e.scope)}),c[e]=f}var p;d.push({func:n,scope:i||this}),(p=function(){var n=o(t);t.length=0,r(n,function(t){return l[t]==s?void u(t):void(l[t]!=a&&(l[t]=a,h++,e(t,function(){l[t]=s,h--,u(t),p()})))}),h||(r(d,function(e){e.func.call(e.scope)}),d.length=0)})()}}var i=e.DOM,r=t.each,o=t.grep;return n.ScriptLoader=new n,n}),i(k,[C,m],function(e,n){function i(){var e=this;e.items=[],e.urls={},e.lookup={}}var r=n.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var r=i.language;if(r&&i.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1==n.indexOf(","+r+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+r+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];r(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(n,o,a,s){function l(){var i=u.dependencies(n);r(i,function(e){var n=u.createUrl(o,e);u.load(n.resource,n,t,t)}),a&&(s?a.call(s):a.call(e))}var u=this,c=o;u.urls[n]||("object"==typeof o&&(c=o.prefix+o.resource+o.suffix),0!==c.indexOf("/")&&-1==c.indexOf("://")&&(c=i.baseURL+"/"+c),u.urls[n]=c.substring(0,c.lastIndexOf("/")),u.lookup[n]?l():e.ScriptLoader.add(c,l,s))}},i.PluginManager=new i,i.ThemeManager=new i,i}),i(S,[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,i;if(t&&t.nodeType)for(i=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(i===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var i,r;if(s(n))for(i=0;i<t.length;i++)if(r=getComputedStyle(n,null).getPropertyValue(e),r===t[i])return!0;return!1}}function i(e,t){return function(n){return s(n)&&n[e]===t}}function r(e,t){return function(n){return s(n)&&n.getAttribute(e)===t}}function o(e){return s(e)&&e.hasAttribute("data-mce-bogus")}function a(e){return function(t){if(s(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var s=e(1);return{isText:e(3),isElement:s,isComment:e(8),isBr:t("br"),isContentEditableTrue:a("true"),isContentEditableFalse:a("false"),matchNodeNames:t,hasPropValue:i,hasAttributeValue:r,matchStyleValues:n,isBogus:o}}),i(T,[],function(){function e(e){return e==n}function t(e){return e.replace(new RegExp(n,"g"),"")}var n="​";return{isZwsp:e,ZWSP:n,trim:t}}),i(N,[S,T],function(e,t){function n(e){return d(e)&&(e=e.parentNode),c(e)&&e.hasAttribute("data-mce-caret")}function i(e){return d(e)&&t.isZwsp(e.data)}function r(e){return n(e)||i(e)}function o(e,n){var i,o,a,s;if(i=e.ownerDocument,a=i.createTextNode(t.ZWSP),s=e.parentNode,n){if(o=e.previousSibling,d(o)){if(r(o))return o;if(u(o))return o.splitText(o.data.length-1)}s.insertBefore(a,e)}else{if(o=e.nextSibling,d(o)){if(r(o))return o;if(l(o))return o.splitText(1),o}e.nextSibling?s.insertBefore(a,e.nextSibling):s.appendChild(a)}return a}function a(e,t,n){var i,r,o;return i=t.ownerDocument,r=i.createElement(e),r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(i.createTextNode(" ")),o=t.parentNode,n?o.insertBefore(r,t):t.nextSibling?o.insertBefore(r,t.nextSibling):o.appendChild(r),r}function s(e){var n;c(e)&&r(e)&&("&nbsp;"!=e.innerHTML?e.removeAttribute("data-mce-caret"):e.parentNode&&e.parentNode.removeChild(e)),d(e)&&(n=t.trim(e.data),0===n.length&&e.parentNode&&e.parentNode.removeChild(e),e.nodeValue=n)}function l(e){return d(e)&&e.data[0]==t.ZWSP}function u(e){return d(e)&&e.data[e.data.length-1]==t.ZWSP}var c=e.isElement,d=e.isText;return{isCaretContainer:r,isCaretContainerBlock:n,isCaretContainerInline:i,insertInline:o,insertBlock:a,remove:s,startsWithCaretContainer:l,endsWithCaretContainer:u}}),i(D,[m,y,S,N],function(e,t,n,i){function r(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function o(e){this.walk=function(t,n){function i(e){var t;return t=e[0],3===t.nodeType&&t===u&&c>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,r){var a=r?"nextSibling":"previousSibling";for(g=e,v=g.parentNode;g&&g!=t;g=v)v=g.parentNode,y=o(g==e?g:g[a],a),y.length&&(r||y.reverse(),n(i(y)))}var u=t.startContainer,c=t.startOffset,d=t.endContainer,h=t.endOffset,f,p,m,g,v,y,b;if(b=e.select("td.mce-item-selected,th.mce-item-selected"),b.length>0)return void s(b,function(e){n([e])});if(1==u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[c]),1==d.nodeType&&d.hasChildNodes()&&(d=r(d,h)),u==d)return n(i([u]));for(f=e.findCommonAncestor(u,d),g=u;g;g=g.parentNode){if(g===d)return l(u,f,!0);if(g===f)break}for(g=d;g;g=g.parentNode){if(g===u)return l(d,f);if(g===f)break}p=a(u,f)||u,m=a(d,f)||d,l(u,p,!0),y=o(p==u?p:p.nextSibling,"nextSibling",m==d?m.nextSibling:m),y.length&&n(i(y)),l(d,m)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset;return n==r&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(r=t(n,i),n=r.previousSibling,o>i?(o-=i,n=r=t(r,o).previousSibling,o=r.nodeValue.length,i=0):o=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==r.nodeType&&o>0&&o<r.nodeValue.length&&(r=t(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:r,endOffset:o}},this.normalize=function(n){function i(i){function a(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function s(n,i){for(var r=new t(n,e.getParent(n.parentNode,e.isBlock)||g);n=r[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function c(e){for(;e&&e!=g;){if(l(e))return!0;e=e.parentNode}return!1}function d(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function h(n,i){var a,s,l;if(i=i||f,l=e.getParent(i.parentNode,e.isBlock)||g,n&&"BR"==i.nodeName&&w&&e.isEmpty(l))return f=i.parentNode,p=e.nodeIndex(i),void(r=!0);for(a=new t(i,l);v=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(v)||u(v))return;if(3===v.nodeType&&v.nodeValue.length>0)return f=v,p=n?v.nodeValue.length:0,void(r=!0);if(e.isBlock(v)||y[v.nodeName.toLowerCase()])return;s=v}o&&s&&(f=s,r=!0,p=0)}var f,p,m,g=e.getRoot(),v,y,b,w;if(f=n[(i?"start":"end")+"Container"],p=n[(i?"start":"end")+"Offset"],w=1==f.nodeType&&p===f.childNodes.length,y=e.schema.getNonEmptyElements(),b=i,!u(f)){if(1==f.nodeType&&p>f.childNodes.length-1&&(b=!1),9===f.nodeType&&(f=e.getRoot(),p=0),f===g){if(b&&(v=f.childNodes[p>0?p-1:0])){if(u(v))return;if(y[v.nodeName]||"TABLE"==v.nodeName)return}if(f.hasChildNodes()){if(p=Math.min(!b&&p>0?p-1:p,f.childNodes.length-1),f=f.childNodes[p],p=0,c(f)||u(f))return;if(f.hasChildNodes()&&!/TABLE/.test(f.nodeName)){v=f,m=new t(f,g);do{if(l(v)||u(v)){r=!1;break}if(3===v.nodeType&&v.nodeValue.length>0){p=b?0:v.nodeValue.length,f=v,r=!0;break}if(y[v.nodeName.toLowerCase()]&&!a(v)){p=e.nodeIndex(v),f=v.parentNode,"IMG"!=v.nodeName||b||p++,r=!0;break}}while(v=b?m.next():m.prev())}}}o&&(3===f.nodeType&&0===p&&h(!0),1===f.nodeType&&(v=f.childNodes[p],v||(v=f.childNodes[p-1]),!v||"BR"!==v.nodeName||d(v,"A")||s(v)||s(v,!0)||h(!0,v))),b&&!o&&3===f.nodeType&&p===f.nodeValue.length&&h(!1),r&&n["set"+(i?"Start":"End")](f,p)}}var r,o;return o=n.collapsed,i(!0),o||i(),r&&o&&n.collapse(!0),r}}function a(t,n,i){var r,o,a;if(r=i.elementFromPoint(t,n),o=i.body.createTextRange(),"HTML"==r.tagName&&(r=i.body),o.moveToElementText(r),a=e.toArray(o.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return o.moveToPoint(t,n),o.collapse(!0),o}catch(s){}}return null}var s=e.each,l=n.isContentEditableFalse,u=i.isCaretContainer;return o.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},o.getCaretRangeFromPoint=function(e,t,n){var i,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(e,t),i=n.createRange(),i.setStart(r.offsetNode,r.offset),i.collapse(!0);else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(o){i=a(e,t,n)}}return i},o.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},o.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},o}),i(M,[D,f,c],function(e,t,n){return function(i){function r(e){var t,n;if(n=i.$(e).parentsUntil(i.getBody()).add(e),n.length===a.length){for(t=n.length;t>=0&&n[t]===a[t];t--);if(-1===t)return a=n,!0}return a=n,!1}var o,a=[];"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,r;n=i.selection.getRng(),r={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(r,o)||i.fire("SelectionChange"),o=r}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var e=i.selection.getStart(!0);(t.range||!i.selection.isCollapsed())&&!r(e)&&i.dom.isChildOf(e,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==i.selection.getNode().nodeName?n.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())}),this.nodeChanged=function(e){var t=i.selection,n,r,o;i.initialized&&t&&!i.settings.disable_nodechange&&!i.readonly&&(o=i.getBody(),n=t.getStart()||o,n=n.ownerDocument!=i.getDoc()?i.getBody():n,"IMG"==n.nodeName&&t.isCollapsed()&&(n=n.parentNode),r=[],i.dom.getParent(n,function(e){return e===o?!0:void r.push(e)}),e=e||{},e.element=n,e.parents=r,i.fire("NodeChange",e))}}}),i(E,[],function(){function e(e,t,n){var i,r,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(i=e[a])return i;for(r=e.parent;r&&r!==t;r=r.parent)if(i=r[a])return i}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,i,r,o;if("string"!=typeof e){for(r in e)n.attr(r,e[r]);return n}if(i=n.attributes){if(t!==o){if(null===t){if(e in i.map)for(delete i.map[e],r=i.length;r--;)if(i[r].name===e)return i=i.splice(r,1),n;return n}if(e in i.map){for(r=i.length;r--;)if(i[r].name===e){i[r].value=t;break}}else i.push({name:e,value:t});return i.map[e]=t,n}return i.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),i,r,o,a,s;if(o=e.attributes){for(s=[],s.map={},i=0,r=o.length;r>i;i++)a=o[i],"id"!==a.name&&(s[s.length]={name:a.name,value:a.value},s.map[a.name]=a.value);n.attributes=s}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(t){var n=this,i,r=[];for(i=n.firstChild;i;i=e(i,n))i.name===t&&r.push(i);return r},empty:function(){var t=this,n,i,r;if(t.firstChild){for(n=[],r=t.firstChild;r;r=e(r,t))n.push(r);for(i=n.length;i--;)r=n[i],r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t){var i=this,r=i.firstChild,o,a;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(t[r.name])return!1;for(o=r.attributes.length;o--;)if(a=r.attributes[o].name,"name"===a||0===a.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!n.test(r.value))return!1}while(r=e(r,i));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var r,o;if(r=new t(e,i[e]||1),n)for(o in n)r.attr(o,n[o]);return r},t}),i(R,[m],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,i){function r(e,t){var n={},i,r;for(i=0,r=e.length;r>i;i++)n[e[i]]=t||{};return n}var s,u,c,d=arguments;for(i=i||[],n=n||"","string"==typeof i&&(i=t(i)),u=3;u<d.length;u++)"string"==typeof d[u]&&(d[u]=t(d[u])),i.push.apply(i,d[u]);for(e=t(e),s=e.length;s--;)c=[].concat(l,t(n)),a[e[s]]={attributes:r(c),attributesOrder:c,children:r(i,o)}}function i(e,n){var i,r,o,s;for(e=t(e),i=e.length,n=t(n);i--;)for(r=a[e[i]],o=0,s=n.length;s>o;o++)r.attributes[n[o]]={},r.attributesOrder.push(n[o])}var a={},l,u,c,d,h,f;return r[e]?r[e]:(l=t("id accesskey class dir lang style tabindex title"),u=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),c=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(l.push.apply(l,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),u.push.apply(u,t("article aside details dialog figure header footer hgroup section nav")),c.push.apply(c,t("audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(l.push("xml:lang"),f=t("acronym applet basefont big font strike tt"),c.push.apply(c,f),s(f,function(e){n(e,"",c)}),h=t("center dir isindex noframes"),u.push.apply(u,h),d=[].concat(u,c),s(h,function(e){n(e,"",d)})),d=d||[].concat(u,c),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",d),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",d,"param"),n("param","name value"),n("map","name",d,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",d,"legend"),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",d,"li"),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",c,"rt rp"),n("figcaption","",d),n("mark rt rp summary bdi","",c),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",d,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",d,"track source"),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",c,"option"),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",d,"figcaption"),n("time","datetime",c),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",d,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){a[e]&&delete a[e].children[e]}),delete a.caption.children.table,delete a.script,r[e]=a,a)}function i(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),s(e,function(e,i){n[i]=n[i.toUpperCase()]="map"==t?a(e,/[, ]/):u(e,/[, ]/)})),n}var r={},o={},a=e.makeMap,s=e.each,l=e.extend,u=e.explode,c=e.inArray;return function(e){function o(t,n,i){var o=e[t];return o?o=a(o,/[, ]/,a(o.toUpperCase(),/[, ]/)):(o=r[t],o||(o=a(n," ",a(n.toUpperCase()," ")),o=l(o,i),r[t]=o)),o}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function h(e){var n,i,r,o,s,l,u,h,f,p,m,g,v,b,_,x,C,k,S,T=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,D=/[*?+]/;if(e)for(e=t(e,","),y["@"]&&(x=y["@"].attributes,C=y["@"].attributesOrder),n=0,i=e.length;i>n;n++)if(s=T.exec(e[n])){if(b=s[1],f=s[2],_=s[3],h=s[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===b&&(l.paddEmpty=!0),"-"===b&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),x){for(k in x)g[k]=x[k];v.push.apply(v,C)}if(h)for(h=t(h,"|"),r=0,o=h.length;o>r;r++)if(s=N.exec(h[r])){if(u={},m=s[1],p=s[2].replace(/::/g,":"),b=s[3],S=s[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),u.required=!0),"-"===m){delete g[p],v.splice(c(v,p),1);continue}b&&("="===b&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:S}),u.defaultValue=S),":"===b&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:S}),u.forcedValue=S),"<"===b&&(u.validValues=a(S,"?"))),D.test(p)?(l.attributePatterns=l.attributePatterns||[],u.pattern=d(p),l.attributePatterns.push(u)):(g[p]||v.push(p),g[p]=u)}x||"@"!=f||(x=g,C=v),_&&(l.outputName=f,y[_]=l),D.test(f)?(l.pattern=d(f),w.push(l)):y[f]=l}}function f(e){y={},w=[],h(e),s(C,function(e,t){b[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&(r.text_block_elements=r.block_elements=null,s(t(e,","),function(e){var t=n.exec(e),i="~"===t[1],r=i?"span":"div",o=t[2];if(b[o]=b[r],I[o]=r,i||(M[o.toUpperCase()]={},M[o]={}),!y[o]){var a=y[r];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,y[o]=a}s(b,function(e,t){e[r]&&(b[t]=e=l({},b[t]),e[o]=e[r])})}))}function m(n){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[e.schema]=null,n&&s(t(n,","),function(e){var n=i.exec(e),r,o;n&&(o=n[1],r=o?b[n[2]]:b[n[2]]={"#comment":{}},r=b[n[2]],s(t(n[3],"|"),function(e){"-"===o?delete r[e]:r[e]={}}))})}function g(e){var t=y[e],n;if(t)return t;for(n=w.length;n--;)if(t=w[n],t.pattern.test(e))return t}var v=this,y={},b={},w=[],_,x,C,k,S,T,N,D,M,E,R,A,P,I={},B={};e=e||{},C=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),_=i(e.valid_styles),x=i(e.invalid_styles,"map"),D=i(e.valid_classes,"map"),k=o("whitespace_elements","pre script noscript style textarea video audio iframe object"),S=o("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),T=o("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=o("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),E=o("non_empty_elements","td th iframe video audio object script",T),R=o("move_caret_before_on_enter_elements","table",E),A=o("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),M=o("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",A),P=o("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((e.special||"script noscript style textarea").split(" "),function(e){B[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(s(C,function(e,t){y[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},b[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),y[e[1]].outputName=e[0]}),y.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){y[e]&&(y[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){y[e].paddEmpty=!0}),s(t("span"),function(e){y[e].removeEmptyAttrs=!0})),p(e.custom_elements),m(e.valid_children),h(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(u(e.invalid_elements),function(e){y[e]&&delete y[e]}),g("span")||h("span[!data-mce-type|*]"),v.children=b,v.getValidStyles=function(){return _},v.getInvalidStyles=function(){return x},v.getValidClasses=function(){return D},v.getBoolAttrs=function(){return N},v.getBlockElements=function(){return M},v.getTextBlockElements=function(){return A},v.getTextInlineElements=function(){return P},v.getShortEndedElements=function(){return T},v.getSelfClosingElements=function(){return S},v.getNonEmptyElements=function(){return E},v.getMoveCaretBeforeOnEnterElements=function(){return R},v.getWhiteSpaceElements=function(){return k},v.getSpecialElements=function(){return B},v.isValidChild=function(e,t){var n=b[e];return!(!n||!n[t])},v.isValid=function(e,t){var n,i,r=g(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},v.getElementRule=g,v.getCustomElements=function(){return I},v.addValidElements=h,v.setValidElements=f,v.addCustomElements=p,v.addValidChildren=m,v.elements=y}}),i(A,[R,w,m],function(e,t,n){function i(e,t,n){var i=1,r,o,a,s;for(s=e.getShortEndedElements(),a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,a.lastIndex=r=n;o=a.exec(t);){if(r=a.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in s)continue;i++}if(0===i)break}return r}function r(r,a){function s(){}var l=this;r=r||{},l.schema=a=a||new e,r.fix_self_closing!==!1&&(r.fix_self_closing=!0),o("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=r[e]||s)}),l.parse=function(e){function o(e){var t,n;for(t=f.length;t--&&f[t].name!==e;);if(t>=0){for(n=f.length-1;n>=t;n--)e=f[n],e.valid&&l.end(e.name);f.length=t}}function s(e,t,n,i,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in _?t:F(n||i||o||""),C&&!y&&0!==t.indexOf("data-")){if(a=D[t],!a&&M){for(s=M.length;s--&&(a=M[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if($[t]&&!r.allow_script_urls){var u=n.replace(l,"");try{u=decodeURIComponent(u)}catch(c){u=unescape(u)}if(U.test(u))return;if(!r.allow_html_data_urls&&j.test(u)&&!/^data:image\//i.test(u))return}p.map[t]=n,p.push({name:t,value:n})}var l=this,u,c=0,d,h,f=[],p,m,g,v,y,b,w,_,x,C,k,S,T,N,D,M,E,R,A,P,I,B,H,z,O,W=0,F=t.decode,L,$=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,j=/^data:/i;for(B=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,w=a.getShortEndedElements(),I=r.self_closing_elements||a.getSelfClosingElements(),_=a.getBoolAttrs(),C=r.validate,b=r.remove_internals,L=r.fix_self_closing,z=a.getSpecialElements();u=B.exec(e);){if(c<u.index&&l.text(F(e.substr(c,u.index-c))),d=u[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),o(d);else if(d=u[7]){if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),
x=d in w,L&&I[d]&&f.length>0&&f[f.length-1].name===d&&o(d),!C||(k=a.getElementRule(d))){if(S=!0,C&&(D=k.attributes,M=k.attributePatterns),(N=u[8])?(y=-1!==N.indexOf("data-mce-type"),y&&b&&(S=!1),p=[],p.map={},N.replace(H,s)):(p=[],p.map={}),C&&!y){if(E=k.attributesRequired,R=k.attributesDefault,A=k.attributesForced,P=k.removeEmptyAttrs,P&&!p.length&&(S=!1),A)for(m=A.length;m--;)T=A[m],v=T.name,O=T.value,"{$uid}"===O&&(O="mce_"+W++),p.map[v]=O,p.push({name:v,value:O});if(R)for(m=R.length;m--;)T=R[m],v=T.name,v in p.map||(O=T.value,"{$uid}"===O&&(O="mce_"+W++),p.map[v]=O,p.push({name:v,value:O}));if(E){for(m=E.length;m--&&!(E[m]in p.map););-1===m&&(S=!1)}if(T=p.map["data-mce-bogus"]){if("all"===T){c=i(a,e,B.lastIndex),B.lastIndex=c;continue}S=!1}}S&&l.start(d,p,x)}else S=!1;if(h=z[d]){h.lastIndex=c=u.index+u[0].length,(u=h.exec(e))?(S&&(g=e.substr(c,u.index-c)),c=u.index+u[0].length):(g=e.substr(c),c=e.length),S&&(g.length>0&&l.text(g,!0),l.end(d)),B.lastIndex=c;continue}x||(N&&N.indexOf("/")==N.length-1?S&&l.end(d):f.push({name:d,valid:S}))}else(d=u[1])?(">"===d.charAt(0)&&(d=" "+d),r.allow_conditional_comments||"[if"!==d.substr(0,3)||(d=" "+d),l.comment(d)):(d=u[2])?l.cdata(d):(d=u[3])?l.doctype(d):(d=u[4])&&l.pi(d,u[5]);c=u.index+u[0].length}for(c<e.length&&l.text(F(e.substr(c))),m=f.length-1;m>=0;m--)d=f[m],d.valid&&l.end(d.name)}}var o=n.each;return r.findEndTag=i,r}),i(P,[E,R,A,m],function(e,t,n,i){var r=i.makeMap,o=i.each,a=i.explode,s=i.extend;return function(i,l){function u(t){var n,i,o,a,s,u,d,h,f,p,m,g,v,y,b;for(m=r("tr,td,th,tbody,thead,tfoot,table"),p=l.getNonEmptyElements(),g=l.getTextBlockElements(),v=l.getSpecialElements(),n=0;n<t.length;n++)if(i=t[n],i.parent&&!i.fixed)if(g[i.name]&&"li"==i.parent.name){for(y=i.next;y&&g[y.name];)y.name="li",y.fixed=!0,i.parent.insert(y,i.parent),y=y.next;i.unwrap(i)}else{for(a=[i],o=i.parent;o&&!l.isValidChild(o.name,i.name)&&!m[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=u=c.filterNode(a[0].clone()),f=0;f<a.length-1;f++){for(l.isValidChild(u.name,a[f].name)?(d=c.filterNode(a[f].clone()),u.append(d)):d=u,h=a[f].firstChild;h&&h!=a[f+1];)b=h.next,d.append(h),h=b;u=d}s.isEmpty(p)?o.insert(i,a[0],!0):(o.insert(s,a[0],!0),o.insert(i,s)),o=a[0],(o.isEmpty(p)||o.firstChild===o.lastChild&&"br"===o.firstChild.name)&&o.empty().remove()}else if(i.parent){if("li"===i.name){if(y=i.prev,y&&("ul"===y.name||"ul"===y.name)){y.append(i);continue}if(y=i.next,y&&("ul"===y.name||"ul"===y.name)){y.insert(i,y.firstChild,!0);continue}i.wrap(c.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(c.filterNode(new e("div",1))):v[i.name]?i.empty().remove():i.unwrap()}}}var c=this,d={},h=[],f={},p={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",c.schema=l=l||new t,c.filterNode=function(e){var t,n,i;n in d&&(i=f[n],i?i.push(e):f[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(i=p[n],i?i.push(e):p[n]=[e]);return e},c.addNodeFilter=function(e,t){o(a(e),function(e){var n=d[e];n||(d[e]=n=[]),n.push(t)})},c.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return void h[n].callbacks.push(t);h.push({name:e,callbacks:[t]})})},c.parse=function(t,o){function a(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(M,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(A,"")))}var t=y.firstChild,n,r;if(l.isValidChild(y.name,O.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!D[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=c(O,1),r.attr(i.forced_root_block_attrs),y.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function c(t,n){var i=new e(t,n),r;return t in d&&(r=f[t],r?r.push(i):f[t]=[i]),i}function m(e){var t,n,i,r,o=l.getBlockElements();for(t=e.prev;t&&3===t.type;){if(i=t.value.replace(A,""),i.length>0)return void(t.value=i);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}r=t.prev,t.remove(),t=r}}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,y,b,w,_,x,C,k,S,T,N,D,M,E=[],R,A,P,I,B,H,z,O;if(o=o||{},f={},p={},D=s(r("script,style,head,html,body,title,meta,param"),l.getBlockElements()),z=l.getNonEmptyElements(),H=l.children,N=i.validate,O="forced_root_block"in o?o.forced_root_block:i.forced_root_block,B=l.getWhiteSpaceElements(),M=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,I=/^[ \t\r\n]+$/,v=new n({validate:N,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(c("#cdata",4)).value=e},text:function(e,t){var n;R||(e=e.replace(P," "),b.lastChild&&D[b.lastChild.name]&&(e=e.replace(M,""))),0!==e.length&&(n=c("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(c("#comment",8)).value=e},pi:function(e,t){b.append(c(e,7)).value=t,m(b)},doctype:function(e){var t;t=b.append(c("#doctype",10)),t.value=e,m(b)},start:function(e,t,n){var i,r,o,a,s;if(o=N?l.getElementRule(e):{}){for(i=c(o.outputName||e,1),i.attributes=t,i.shortEnded=n,b.append(i),s=H[b.name],s&&H[i.name]&&!s[i.name]&&E.push(i),r=h.length;r--;)a=h[r].name,a in t.map&&(S=p[a],S?S.push(i):p[a]=[i]);D[e]&&m(i),n||(b=i),!R&&B[e]&&(R=!0)}},end:function(t){var n,i,r,o,a;if(i=N?l.getElementRule(t):{}){if(D[t]&&!R){if(n=b.firstChild,n&&3===n.type)if(r=n.value.replace(M,""),r.length>0)n.value=r,n=n.next;else for(o=n.next,n.remove(),n=o;n&&3===n.type;)r=n.value,o=n.next,(0===r.length||I.test(r))&&(n.remove(),n=o),n=o;if(n=b.lastChild,n&&3===n.type)if(r=n.value.replace(A,""),r.length>0)n.value=r,n=n.prev;else for(o=n.prev,n.remove(),n=o;n&&3===n.type;)r=n.value,o=n.prev,(0===r.length||I.test(r))&&(n.remove(),n=o),n=o}if(R&&B[t]&&(R=!1),(i.removeEmpty||i.paddEmpty)&&b.isEmpty(z))if(i.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return a=b.parent,D[b.name]?b.empty().remove():b.unwrap(),void(b=a);b=b.parent}}},l),y=b=new e(o.context||i.root_name,11),v.parse(t),N&&E.length&&(o.context?o.invalid=!0:u(E)),O&&("body"==y.name||o.isRootContent)&&a(),!o.invalid){for(T in f){for(S=d[T],w=f[T],C=w.length;C--;)w[C].parent||w.splice(C,1);for(_=0,x=S.length;x>_;_++)S[_](w,T,o)}for(_=0,x=h.length;x>_;_++)if(S=h[_],S.name in p){for(w=p[S.name],C=w.length;C--;)w[C].parent||w.splice(C,1);for(C=0,k=S.callbacks.length;k>C;C++)S.callbacks[C](w,S.name,o)}}return y},i.remove_trailing_brs&&c.addNodeFilter("br",function(t){var n,i=t.length,r,o=s({},l.getBlockElements()),a=l.getNonEmptyElements(),u,c,d,h,f,p;for(o.body=1,n=0;i>n;n++)if(r=t[n],u=r.parent,o[r.parent.name]&&r===u.lastChild){for(d=r.prev;d;){if(h=d.name,"span"!==h||"bookmark"!==d.attr("data-mce-type")){if("br"!==h)break;if("br"===h){r=null;break}}d=d.prev}r&&(r.remove(),u.isEmpty(a)&&(f=l.getElementRule(u.name),f&&(f.removeEmpty?u.remove():f.paddEmpty&&(u.empty().append(new e("#text",3)).value=" "))))}else{for(c=r;u&&u.firstChild===c&&u.lastChild===c&&(c=u,!o[u.name]);)u=u.parent;c===u&&(p=new e("#text",3),p.value=" ",r.replace(p))}}),i.allow_html_in_named_anchor||c.addAttributeFilter("id,name",function(e){for(var t=e.length,n,i,r,o;t--;)if(o=e[t],"a"===o.name&&o.firstChild&&!o.attr("href")){r=o.parent,n=o.lastChild;do i=n.prev,r.insert(n,o),n=i;while(n)}}),i.validate&&l.getValidClasses()&&c.addAttributeFilter("class",function(e){for(var t=e.length,n,i,r,o,a,s=l.getValidClasses(),u,c;t--;){for(n=e[t],i=n.attr("class").split(" "),a="",r=0;r<i.length;r++)o=i[r],c=!1,u=s["*"],u&&u[o]&&(c=!0),u=s[n.name],!c&&u&&u[o]&&(c=!0),c&&(a&&(a+=" "),a+=o);a.length||(a=null),n.attr("class",a)}})}}),i(I,[w,m],function(e,t){var n=t.makeMap;return function(t){var i=[],r,o,a,s,l;return t=t||{},r=t.indent,o=n(t.indent_before||""),a=n(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),l="html"==t.element_format,{start:function(e,t,n){var u,c,d,h;if(r&&o[e]&&i.length>0&&(h=i[i.length-1],h.length>0&&"\n"!==h&&i.push("\n")),i.push("<",e),t)for(u=0,c=t.length;c>u;u++)d=t[u],i.push(" ",d.name,'="',s(d.value,!0),'"');!n||l?i[i.length]=">":i[i.length]=" />",n&&r&&a[e]&&i.length>0&&(h=i[i.length-1],h.length>0&&"\n"!==h&&i.push("\n"))},end:function(e){var t;i.push("</",e,">"),r&&a[e]&&i.length>0&&(t=i[i.length-1],t.length>0&&"\n"!==t&&i.push("\n"))},text:function(e,t){e.length>0&&(i[i.length]=t?e:s(e))},cdata:function(e){i.push("<![CDATA[",e,"]]>")},comment:function(e){i.push("<!--",e,"-->")},pi:function(e,t){t?i.push("<?",e," ",s(t),"?>"):i.push("<?",e,"?>"),r&&i.push("\n")},doctype:function(e){i.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){i.length=0},getContent:function(){return i.join("").replace(/\n$/,"")}}}}),i(B,[I,R],function(e,t){return function(n,i){var r=this,o=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,r.schema=i=i||new t,r.writer=o,r.serialize=function(e){function t(e){var n=r[e.type],s,l,u,c,d,h,f,p,m;if(n)n(e);else{if(s=e.name,l=e.shortEnded,u=e.attributes,a&&u&&u.length>1&&(h=[],h.map={},m=i.getElementRule(e.name))){for(f=0,p=m.attributesOrder.length;p>f;f++)c=m.attributesOrder[f],c in u.map&&(d=u.map[c],h.map[c]=d,h.push({name:c,value:d}));for(f=0,p=u.length;p>f;f++)c=u[f].name,c in h.map||(d=u.map[c],h.map[c]=d,h.push({name:c,value:d}));u=h}if(o.start(e.name,u,l),!l){if(e=e.firstChild)do t(e);while(e=e.next);o.end(s)}}}var r,a;return a=n.validate,r={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},o.reset(),1!=e.type||n.inner?r[11](e):t(e),o.getContent()}}}),i(H,[x,P,A,w,B,E,R,f,m,T],function(e,t,n,i,r,o,a,s,l,u){function c(e){function t(e){return e&&"br"===e.name}var n,i;n=e.lastChild,t(n)&&(i=n.prev,t(i)&&(n.remove(),i.remove()))}var d=l.each,h=l.trim,f=e.DOM,p=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi");return function(e,o){function l(){var e=o.getBody().innerHTML,t=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i,r,a,s,l,c=o.schema;for(e=u.trim(e.replace(p,"")),l=c.getShortEndedElements();s=t.exec(e);)r=t.lastIndex,a=s[0].length,i=l[s[1]]?r:n.findEndTag(c,e,r),e=e.substring(0,r-a)+e.substring(i),t.lastIndex=r-a;return h(e)}var m,g,v;return o&&(m=o.dom,g=o.schema),m=m||f,g=g||new a(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,v=new t(e,g),v.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n=e.length,i;n--;)i=e[n],i.attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)}),v.addAttributeFilter("src,href,style",function(t,n){for(var i=t.length,r,o,a="data-mce-"+n,s=e.url_converter,l=e.url_converter_scope,u;i--;)r=t[i],o=r.attributes.map[a],o!==u?(r.attr(n,o.length>0?o:null),r.attr(a,null)):(o=r.attributes.map[n],"style"===n?o=m.serializeStyle(m.parseStyle(o),r.name):s&&(o=s.call(l,o,n,r.name)),r.attr(n,o.length>0?o:null))}),v.addAttributeFilter("class",function(e){for(var t=e.length,n,i;t--;)n=e[t],i=n.attr("class"),i&&(i=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",i.length>0?i:null))}),v.addAttributeFilter("data-mce-type",function(e,t,n){for(var i=e.length,r;i--;)r=e[i],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),v.addNodeFilter("noscript",function(e){for(var t=e.length,n;t--;)n=e[t].firstChild,n&&(n.value=i.decode(n.value))}),v.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i=e.length,r,o,a;i--;)r=e[i],o=r.firstChild?r.firstChild.value:"","script"===t?(a=r.attr("type"),a&&r.attr("type","mce-no/type"==a?null:a.replace(/^mce\-/,"")),o.length>0&&(r.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(r.firstChild.value="<!--\n"+n(o)+"\n-->")}),v.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),v.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,i;n--;)i=e[n],7===i.type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))}),e.fix_list_elements&&v.addNodeFilter("ul,ol",function(e){for(var t=e.length,n,i;t--;)n=e[t],i=n.parent,("ul"===i.name||"ol"===i.name)&&n.prev&&"li"===n.prev.name&&n.prev.append(n)}),v.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:g,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:function(t,n){var i=this,o,a,l,f,p,y;return s.ie&&m.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),m.setHTML(t,p)):t=t.cloneNode(!0),o=t.ownerDocument.implementation,o.createHTMLDocument&&(a=o.createHTMLDocument(""),d("BODY"==t.nodeName?t.childNodes:[t],function(e){a.body.appendChild(a.importNode(e,!0))}),t="BODY"!=t.nodeName?a.body.firstChild:a.body,l=m.doc,m.doc=a),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),y=v.parse(h(n.getInner?t.innerHTML:m.getOuterHTML(t)),n),c(y),f=new r(e,g),n.content=f.serialize(y),n.cleanup||(n.content=u.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),l&&(m.doc=l),n.node=null,n.content},addRules:function(e){g.addValidElements(e)},setRules:function(e){g.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)},getTrimmedContent:l}}}),i(z,[],function(){function e(e){function t(t,n){var i,r=0,o,a,s,l,u,c,d=-1,h;if(i=t.duplicate(),i.collapse(n),h=i.parentElement(),h.ownerDocument===e.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(s=h.children,o=s.length-1;o>=r;)if(c=Math.floor((r+o)/2),l=s[c],i.moveToElementText(l),d=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),d>0)o=c-1;else{if(!(0>d))return{node:l};r=c+1}if(0>d)for(l?i.collapse(!1):(i.moveToElementText(h),i.collapse(!0),l=h,a=!0),u=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&h==i.parentElement();)u++;else for(i.collapse(!0),u=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&h==i.parentElement();)u++;return{node:l,position:d,offset:u,inside:a}}}function n(){function n(e){var n=t(o,e),i,r,s=0,l,u,c;if(i=n.node,r=n.offset,n.inside&&!i.hasChildNodes())return void a[e?"setStart":"setEnd"](i,0);if(r===u)return void a[e?"setStartBefore":"setEndAfter"](i);if(n.position<0){if(l=n.inside?i.firstChild:i.nextSibling,!l)return void a[e?"setStartAfter":"setEndAfter"](i);if(!r)return void(3==l.nodeType?a[e?"setStart":"setEnd"](l,0):a[e?"setStartBefore":"setEndBefore"](l));for(;l;){if(3==l.nodeType&&(c=l.nodeValue,s+=c.length,s>=r)){i=l,s-=r,s=c.length-s;break}l=l.nextSibling}}else{if(l=i.previousSibling,!l)return a[e?"setStartBefore":"setEndBefore"](i);if(!r)return void(3==i.nodeType?a[e?"setStart":"setEnd"](l,i.nodeValue.length):a[e?"setStartAfter":"setEndAfter"](l));for(;l;){if(3==l.nodeType&&(s+=l.nodeValue.length,s>=r)){i=l,s-=r;break}l=l.previousSibling}}a[e?"setStart":"setEnd"](i,s)}var o=e.getRng(),a=r.createRng(),s,l,u,c,d;if(s=o.item?o.item(0):o.parentElement(),s.ownerDocument!=r.doc)return a;if(l=e.isCollapsed(),o.item)return a.setStart(s.parentNode,r.nodeIndex(s)),a.setEnd(a.startContainer,a.startOffset+1),a;try{n(!0),l||n()}catch(h){if(-2147024809!=h.number)throw h;d=i.getBookmark(2),u=o.duplicate(),u.collapse(!0),s=u.parentElement(),l||(u=o.duplicate(),u.collapse(!1),c=u.parentElement(),c.innerHTML=c.innerHTML),s.innerHTML=s.innerHTML,i.moveToBookmark(d),o=e.getRng(),n(!0),l||n()}return a}var i=this,r=e.dom,o=!1;this.getBookmark=function(n){function i(e){var t,n,i,o,a=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,o=i.length;o--;)if(e===i[o]){a.push(o);break}e=t,t=t.parentNode}return a}function o(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=o(!0),e.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(e){function t(e){var t,n,i,o;for(t=r.getRoot(),n=e.length-1;n>=0;n--)o=t.children,i=e[n],i<=o.length-1&&(t=o[i]);return t}function n(n){var r=e[n?"start":"end"],a,s,l,u;r&&(a=r.position>0,s=o.createTextRange(),s.moveToElementText(t(r.indexes)),u=r.offset,u!==l?(s.collapse(r.inside||a),s.moveStart("character",a?-u:u)):s.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",s),n&&i.collapse(!0))}var i,o=r.doc.body;e.start&&(e.start.ctrl?(i=o.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=o.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,a,d,p;a=r.create("a"),t=e?s:u,n=e?l:c,d=i.duplicate(),(t==h||t==h.documentElement)&&(t=f,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),d.moveToElementText(a),d.moveStart("character",n),r.remove(a),i.setEndPoint(e?"StartToStart":"EndToEnd",d)):(p=t.childNodes,p.length?(n>=p.length?r.insertAfter(a,p[p.length-1]):t.insertBefore(a,p[n]),d.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,d.moveToElementText(a),d.collapse(o)),i.setEndPoint(e?"StartToStart":"EndToEnd",d),r.remove(a))}var i,a,s,l,u,c,d,h=e.dom.doc,f=h.body,p,m;if(s=t.startContainer,l=t.startOffset,u=t.endContainer,c=t.endOffset,i=f.createTextRange(),s==u&&1==s.nodeType){if(l==c&&!s.hasChildNodes()){if(s.canHaveHTML)return d=s.previousSibling,d&&!d.hasChildNodes()&&r.isBlock(d)?d.innerHTML="&#xFEFF;":d=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(s.lastChild),i.select(),r.doc.selection.clear(),s.innerHTML="",void(d&&(d.innerHTML=""));l=r.nodeIndex(s),s=s.parentNode}if(l==c-1)try{if(m=s.childNodes[l],a=f.createControlRange(),a.addElement(m),a.select(),p=e.getRng(),p.item&&m===p.item(0))return}catch(g){}}n(!0),n(),i.select()},this.getRangeAt=n}return e}),i(O,[f],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),i(W,[O,m,c,f,S],function(e,t,n,i,r){var o=r.isContentEditableFalse;return function(r,a){function s(e){var t=a.settings.object_resizing;return t===!1||i.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:e==a.getBody()?!1:a.dom.is(e,t))}function l(t){var n,i,r,o,s;n=t.screenX-R,i=t.screenY-A,W=n*M[2]+B,F=i*M[3]+H,W=5>W?5:W,F=5>F?5:F,r="IMG"==S.nodeName&&a.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==S.nodeName&&M[2]*M[3]!==0,r&&(j(n)>j(i)?(F=V(W*z),W=V(F/z)):(W=V(F/z),F=V(W*z))),C.setStyles(T,{width:W,height:F}),o=M.startPos.x+n,s=M.startPos.y+i,o=o>0?o:0,s=s>0?s:0,C.setStyles(N,{left:o,top:s,display:"block"}),N.innerHTML=W+" &times; "+F,M[2]<0&&T.clientWidth<=W&&C.setStyle(T,"left",P+(B-W)),M[3]<0&&T.clientHeight<=F&&C.setStyle(T,"top",I+(H-F)),n=Y.scrollWidth-q,i=Y.scrollHeight-G,n+i!==0&&C.setStyles(N,{left:o-n,top:s-i}),O||(a.fire("ObjectResizeStart",{target:S,width:B,height:H}),O=!0)}function u(){function e(e,t){t&&(S.style[e]||!a.schema.isValid(S.nodeName.toLowerCase(),e)?C.setStyle(S,e,t):C.setAttrib(S,e,t))}O=!1,e("width",W),e("height",F),C.unbind(L,"mousemove",l),C.unbind(L,"mouseup",u),$!=L&&(C.unbind($,"mousemove",l),C.unbind($,"mouseup",u)),C.remove(T),C.remove(N),U&&"TABLE"!=S.nodeName||c(S),a.fire("ObjectResized",{target:S,width:W,height:F}),C.setAttrib(S,"style",C.getAttrib(S,"style")),a.nodeChanged()}function c(e,t,n){var r,o,c,h,f;d(),b(),r=C.getPos(e,Y),P=r.x,I=r.y,f=e.getBoundingClientRect(),o=f.width||f.right-f.left,c=f.height||f.bottom-f.top,S!=e&&(y(),S=e,W=F=0),h=a.fire("ObjectSelected",{target:e}),s(e)&&!h.isDefaultPrevented()?k(D,function(e,r){function a(t){R=t.screenX,A=t.screenY,B=S.clientWidth,H=S.clientHeight,z=H/B,M=e,e.startPos={x:o*e[0]+P,y:c*e[1]+I},q=Y.scrollWidth,G=Y.scrollHeight,T=S.cloneNode(!0),C.addClass(T,"mce-clonedresizable"),C.setAttrib(T,"data-mce-bogus","all"),T.contentEditable=!1,T.unSelectabe=!0,C.setStyles(T,{left:P,top:I,margin:0}),T.removeAttribute("data-mce-selected"),Y.appendChild(T),C.bind(L,"mousemove",l),C.bind(L,"mouseup",u),$!=L&&(C.bind($,"mousemove",l),C.bind($,"mouseup",u)),N=C.add(Y,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},B+" &times; "+H)}var s;return t?void(r==t&&a(n)):(s=C.get("mceResizeHandle"+r),s&&C.remove(s),s=C.add(Y,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),i.ie&&(s.contentEditable=!1),C.bind(s,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),a(e)}),e.elm=s,void C.setStyles(s,{left:o*e[0]+P-s.offsetWidth/2,top:c*e[1]+I-s.offsetHeight/2}))}):d(),S.setAttribute("data-mce-selected","1")}function d(){var e,t;b(),S&&S.removeAttribute("data-mce-selected");for(e in D)t=C.get("mceResizeHandle"+e),t&&(C.unbind(t),C.remove(t))}function h(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,i;if(!O&&!a.removed)return k(C.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"==e.type?e.target:r.getNode(),i=C.$(i).closest(U?"table":"table,img,hr")[0],t(i,Y)&&(w(),n=r.getStart(!0),t(n,i)&&t(r.getEnd(!0),i)&&(!U||i!=n&&"IMG"!==n.nodeName))?void c(i):void d()}function f(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function p(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function m(e){var t=e.srcElement,n,i,r,o,s,l,u;n=t.getBoundingClientRect(),l=E.clientX-n.left,u=E.clientY-n.top;for(i in D)if(r=D[i],o=t.offsetWidth*r[0],s=t.offsetHeight*r[1],j(o-l)<8&&j(s-u)<8){M=r;break}O=!0,a.fire("ObjectResizeStart",{target:S,width:S.clientWidth,height:S.clientHeight}),a.getDoc().selection.empty(),c(t,i,E)}function g(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function v(e){var t=e.srcElement;if(o(t))return void g(e);if(t!=S){if(a.fire("ObjectSelected",{target:t}),y(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(d(),S=t,f(t,"resizestart",m))}}function y(){p(S,"resizestart",m)}function b(){for(var e in D){var t=D[e];t.elm&&(C.unbind(t.elm),delete t.elm)}}function w(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function _(e){var t;if(U){t=L.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function x(){S=T=null,U&&(y(),p(Y,"controlselect",v))}var C=a.dom,k=t.each,S,T,N,D,M,E,R,A,P,I,B,H,z,O,W,F,L=a.getDoc(),$=document,U=i.ie&&i.ie<11,j=Math.abs,V=Math.round,Y=a.getBody(),q,G;D={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var K=".mce-content-body";return a.contentStyles.push(K+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+K+" .mce-resizehandle:hover {background: #000}"+K+" *[data-mce-selected] {outline: 1px solid black;resize: none}"+K+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+K+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),a.on("init",function(){U?(a.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(d(),_(e.target))}),f(Y,"controlselect",v),a.on("mousedown",function(e){E=e})):(w(),i.ie>=11&&(a.on("mousedown click",function(e){var t=e.target.nodeName;!O&&/^(TABLE|IMG|HR)$/.test(t)&&(a.selection.select(e.target,"TABLE"==t),"mousedown"==e.type&&a.nodeChanged())}),a.dom.bind(Y,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(a,function(){a.selection.select(e)})}return o(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))}))),a.on("nodechange ResizeEditor ResizeWindow drop",function(e){n.requestAnimationFrame(function(){h(e)})}),a.on("keydown keyup",function(e){S&&"TABLE"==S.nodeName&&h(e)}),a.on("hide blur",d)}),a.on("remove",b),{isResizable:s,showResizeRect:c,hideResizeRect:d,updateResizeRect:h,controlSelect:_,destroy:x}}}),i(F,[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function i(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}function r(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function o(e){var t=a.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return o.apply(this,e)}}var a=[].slice;return{constant:e,negate:t,and:r,or:i,curry:o,compose:n}}),i(L,[S,p,N],function(e,t,n){function i(e){return m(e)?!1:d(e)?h(e.parentNode)?!1:!0:f(e)||c(e)||p(e)||u(e)}function r(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(u(e))return!1;if(l(e))return!0}return!0}function o(e){return u(e)?t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)!==!0:!1}function a(e){return f(e)||o(e)}function s(e,t){return i(e)&&r(e,t)}var l=e.isContentEditableTrue,u=e.isContentEditableFalse,c=e.isBr,d=e.isText,h=e.matchNodeNames("script style textarea"),f=e.matchNodeNames("img input textarea hr iframe video audio object"),p=e.matchNodeNames("table"),m=n.isCaretContainer;return{isCaretCandidate:i,isInEditable:r,isAtomic:a,isEditableCaretCandidate:s}}),i($,[],function(){function e(e){return e?{left:u(e.left),top:u(e.top),bottom:u(e.bottom),right:u(e.right),width:u(e.width),height:u(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function i(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function r(e,t){return e.bottom<t.top?!0:e.top>t.bottom?!1:i(t.top-e.bottom,e,t)}function o(e,t){return e.top>t.bottom?!0:e.bottom<t.top?!1:i(t.bottom-e.top,e,t)}function a(e,t){return e.left<t.left}function s(e,t){return e.right>t.right}function l(e,t){return r(e,t)?-1:o(e,t)?1:a(e,t)?-1:s(e,t)?1:0}var u=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:r,isBelow:o,isLeft:a,isRight:s,compare:l}}),i(U,[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:e}}),i(j,[F,S,x,D,L,$,U],function(e,t,n,i,r,o,a){function s(e){return e&&/[\r\n\t ]/.test(e)}function l(e){var t=e.startContainer,n=e.startOffset,i;return s(e.toString())&&g(t.parentNode)&&(i=t.data,s(i[n-1])||s(i[n+1]))?!0:!1}function u(e){function t(e){var t=e.ownerDocument,n=t.createRange(),i=t.createTextNode(" "),r=e.parentNode,a;return r.insertBefore(i,e),n.setStart(i,0),n.setEnd(i,1),a=o.clone(n.getBoundingClientRect()),r.removeChild(i),a}function n(e){var n,i;return i=e.getClientRects(),n=i.length>0?o.clone(i[0]):o.clone(e.getBoundingClientRect()),y(e)&&0===n.left?t(e):n}function i(e,t){return e=o.collapse(e,t),e.width=1,e.right=e.left+1,e}function r(e){0!==e.height&&(u.length>0&&o.isEqual(e,u[u.length-1])||u.push(e))}function s(e,t){var o=e.ownerDocument.createRange();return t<e.data.length&&a.isExtendingChar(e.data[t])?u:(t>0&&(o.setStart(e,t-1),o.setEnd(e,t),l(o)||r(i(n(o),!1))),void(t<e.data.length&&(o.setStart(e,t),o.setEnd(e,t+1),l(o)||r(i(n(o),!0)))))}var u=[],c,h;if(v(e.container()))return s(e.container(),e.offset()),u;if(d(e.container()))if(e.isAtEnd())h=w(e.container(),e.offset()),v(h)&&s(h,h.data.length),m(h)&&!y(h)&&r(i(n(h),!1));else{if(h=w(e.container(),e.offset()),v(h)&&s(h,0),m(h)&&e.isAtEnd())return r(i(n(h),!1)),u;c=w(e.container(),e.offset()-1),m(c)&&!y(c)&&(f(c)||f(h)||!m(h))&&r(i(n(c),!1)),m(h)&&r(i(n(h),!0))}return u}function c(t,n,i){function r(){return v(t)?0===n:0===n}function o(){return v(t)?n>=t.data.length:n>=t.childNodes.length}function a(){var e;return e=t.ownerDocument.createRange(),e.setStart(t,n),e.setEnd(t,n),e}function s(){return i||(i=u(new c(t,n))),i}function l(){return s().length>0}function d(e){return e&&t===e.container()&&n===e.offset()}function h(e){return w(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:s,isVisible:l,isAtStart:r,isAtEnd:o,isEqual:d,getNode:h}}var d=t.isElement,h=r.isCaretCandidate,f=t.matchStyleValues("display","block table"),p=t.matchStyleValues("float","left right"),m=e.and(d,h,e.negate(p)),g=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),v=t.isText,y=t.isBr,b=n.nodeIndex,w=i.getNode;return c.fromRangeStart=function(e){return new c(e.startContainer,e.startOffset)},c.fromRangeEnd=function(e){return new c(e.endContainer,e.endOffset)},c.after=function(e){return new c(e.parentNode,b(e)+1)},c.before=function(e){return new c(e.parentNode,b(e))},c}),i(V,[S,x,F,p,j],function(e,t,n,i,r){function o(e){var t=e.parentNode;return v(t)?o(t):t}function a(e){return e?i.reduce(e.childNodes,function(e,t){return v(t)&&"BR"!=t.nodeName?e=e.concat(a(t)):e.push(t),e},[]):[]}function s(e,t){for(;(e=e.previousSibling)&&g(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function u(t){var n,r,s;return n=a(o(t)),r=i.findIndex(n,l(t),t),n=n.slice(0,r+1),s=i.reduce(n,function(e,t,i){return g(t)&&g(n[i-1])&&e++,e},0),n=i.filter(n,e.matchNodeNames(t.nodeName)),r=i.findIndex(n,l(t),t),r-s}function c(e){var t;return t=g(e)?"text()":e.nodeName.toLowerCase(),t+"["+u(e)+"]"}function d(e,t,n){var i=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)i.push(t);return i}function h(t,r){var o,a,l=[],u,h,f;return o=r.container(),a=r.offset(),g(o)?u=s(o,a):(h=o.childNodes,a>=h.length?(u="after",a=h.length-1):u="before",o=h[a]),l.push(c(o)),f=d(t,o),f=i.filter(f,n.negate(e.isBogus)),l=l.concat(i.map(f,function(e){return c(e)})),l.reverse().join("/")+","+u}function f(t,n,r){var o=a(t);return o=i.filter(o,function(e,t){return!g(e)||!g(o[t-1])}),o=i.filter(o,e.matchNodeNames(n)),o[r]}function p(e,t){for(var n=e,i=0,o;g(n);){if(o=n.data.length,t>=i&&i+o>=t){e=n,t-=i;break}if(!g(n.nextSibling)){e=n,t=o;break}i+=o,n=n.nextSibling}return t>e.data.length&&(t=e.data.length),new r(e,t)}function m(e,t){var n,o,a;return t?(n=t.split(","),t=n[0].split("/"),a=n.length>1?n[1]:"before",o=i.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),
f(e,t[1],parseInt(t[2],10))):null},e),o?g(o)?p(o,parseInt(a,10)):(a="after"===a?y(o)+1:y(o),new r(o.parentNode,a)):null):null}var g=e.isText,v=e.isBogus,y=t.nodeIndex;return{create:h,resolve:m}}),i(Y,[f,m,N,V,j,S],function(e,t,n,i,r,o){function a(a){var l=a.dom;this.getBookmark=function(e,u){function c(e,n){var i=0;return t.each(l.select(e),function(e){return"all"!==e.getAttribute("data-mce-bogus")?e==n?!1:void i++:void 0}),i}function d(e){function t(t){var n,i,r,o=t?"start":"end";n=e[o+"Container"],i=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(t?i:i-1,r.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function h(e){function t(e,t){var i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],o=[],a,s,c=0;if(3==i.nodeType){if(u)for(a=i.previousSibling;a&&3==a.nodeType;a=a.previousSibling)r+=a.nodeValue.length;o.push(r)}else s=i.childNodes,r>=s.length&&s.length&&(c=1,r=Math.max(0,s.length-1)),o.push(l.nodeIndex(s[r],u)+c);for(;i&&i!=n;i=i.parentNode)o.push(l.nodeIndex(i,u));return o}var n=l.getRoot(),i={};return i.start=t(e,!0),a.isCollapsed()||(i.end=t(e)),i}function f(e){function t(e){var t;if(n.isCaretContainer(e)){if(o.isText(e)&&n.isCaretContainerBlock(e)&&(e=e.parentNode),t=e.previousSibling,s(t))return t;if(t=e.nextSibling,s(t))return t}}return t(e.startContainer)||t(e.endContainer)}var p,m,g,v,y,b,w="&#xFEFF;",_;if(2==e)return b=a.getNode(),y=b?b.nodeName:null,p=a.getRng(),s(b)||"IMG"==y?{name:y,index:c(y,b)}:a.tridentSel?a.tridentSel.getBookmark(e):(b=f(p),b?(y=b.tagName,{name:y,index:c(y,b)}):h(p));if(3==e)return p=a.getRng(),{start:i.create(l.getRoot(),r.fromRangeStart(p)),end:i.create(l.getRoot(),r.fromRangeEnd(p))};if(e)return{rng:a.getRng()};if(p=a.getRng(),g=l.uniqueId(),v=a.isCollapsed(),_="overflow:hidden;line-height:0px",p.duplicate||p.item){if(p.item)return b=p.item(0),y=b.nodeName,{name:y,index:c(y,b)};m=p.duplicate();try{p.collapse(),p.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_start" style="'+_+'">'+w+"</span>"),v||(m.collapse(!1),p.moveToElementText(m.parentElement()),0===p.compareEndPoints("StartToEnd",m)&&m.move("character",-1),m.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_end" style="'+_+'">'+w+"</span>"))}catch(x){return null}}else{if(b=a.getNode(),y=b.nodeName,"IMG"==y)return{name:y,index:c(y,b)};m=d(p.cloneRange()),v||(m.collapse(!1),m.insertNode(l.create("span",{"data-mce-type":"bookmark",id:g+"_end",style:_},w))),p=d(p),p.collapse(!0),p.insertNode(l.create("span",{"data-mce-type":"bookmark",id:g+"_start",style:_},w))}return a.moveToBookmark({id:g,keep:1}),{id:g}},this.moveToBookmark=function(n){function r(e){var t=n[e?"start":"end"],i,r,o,a;if(t){for(o=t[0],r=d,i=t.length-1;i>=1;i--){if(a=r.childNodes,t[i]>a.length-1)return;r=a[t[i]]}3===r.nodeType&&(o=Math.min(t[0],r.nodeValue.length)),1===r.nodeType&&(o=Math.min(t[0],r.childNodes.length)),e?c.setStart(r,o):c.setEnd(r,o)}return!0}function o(i){var r=l.get(n.id+"_"+i),o,a,s,u,c=n.keep;if(r&&(o=r.parentNode,"start"==i?(c?(o=r.firstChild,a=1):a=l.nodeIndex(r),h=f=o,p=m=a):(c?(o=r.firstChild,a=1):a=l.nodeIndex(r),f=o,m=a),!c)){for(u=r.previousSibling,s=r.nextSibling,t.each(t.grep(r.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});r=l.get(n.id+"_"+i);)l.remove(r,1);u&&s&&u.nodeType==s.nodeType&&3==u.nodeType&&!e.opera&&(a=u.nodeValue.length,u.appendData(s.nodeValue),l.remove(s),"start"==i?(h=f=u,p=m=a):(f=u,m=a))}}function s(t){return!l.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}function u(){var e,t;return e=l.createRng(),t=i.resolve(l.getRoot(),n.start),e.setStart(t.container(),t.offset()),t=i.resolve(l.getRoot(),n.end),e.setEnd(t.container(),t.offset()),e}var c,d,h,f,p,m;if(n)if(t.isArray(n.start)){if(c=l.createRng(),d=l.getRoot(),a.tridentSel)return a.tridentSel.moveToBookmark(n);r(!0)&&r()&&a.setRng(c)}else"string"==typeof n.start?a.setRng(u(n)):n.id?(o("start"),o("end"),h&&(c=l.createRng(),c.setStart(s(h),p),c.setEnd(s(f),m),a.setRng(c))):n.name?a.select(l.select(n.name)[n.index]):n.rng&&a.setRng(n.rng)}}var s=o.isContentEditableFalse;return a.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},a}),i(q,[y,z,W,D,Y,S,f,m],function(e,n,i,r,o,a,s,l){function u(e,t,r,a){var s=this;s.dom=e,s.win=t,s.serializer=r,s.editor=a,s.bookmarkManager=new o(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var c=l.each,d=l.trim,h=s.ie;return u.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();e?(i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(e){var n=this,i=n.getRng(),r=n.dom.create("body"),o=n.getSel(),a,s,l;return e=e||{},a=s="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":i.text||(o.toString?o.toString():""):(i.cloneContents?(l=i.cloneContents(),l&&r.appendChild(l)):i.item!==t||i.htmlText!==t?(r.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),r.removeChild(r.firstChild)):r.innerHTML=i.toString(),/^\s/.test(r.innerHTML)&&(a=" "),/\s+$/.test(r.innerHTML)&&(s=" "),e.getInner=!0,e.content=n.isCollapsed()?"":a+n.serializer.serialize(r,e)+s,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,i=n.getRng(),r,o=n.win.document,a,s;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,i.insertNode){e+='<span id="__caret">_</span>',i.startContainer==o&&i.endContainer==o?o.body.innerHTML=e:(i.deleteContents(),0===o.body.childNodes.length?o.body.innerHTML=e:i.createContextualFragment?i.insertNode(i.createContextualFragment(e)):(a=o.createDocumentFragment(),s=o.createElement("div"),a.appendChild(s),s.outerHTML=e,i.insertNode(a))),r=n.dom.get("__caret"),i=o.createRange(),i.setStartBefore(r),i.setEndBefore(r),n.setRng(i),n.dom.remove("__caret");try{n.setRng(i)}catch(l){}}else i.item&&(o.execCommand("Delete",!1,null),i=n.getRng()),/^\s+/.test(e)?(i.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):i.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(e){var t=this,n=t.getRng(),i,r,o,a;if(n.duplicate||n.item){if(n.item)return n.item(0);for(o=n.duplicate(),o.collapse(1),i=o.parentElement(),i.ownerDocument!==t.dom.doc&&(i=t.dom.getRoot()),r=a=n.parentElement();a=a.parentNode;)if(a==i){i=r;break}return i}return i=n.startContainer,1==i.nodeType&&i.hasChildNodes()&&(e&&n.collapsed||(i=i.childNodes[Math.min(i.childNodes.length-1,n.startOffset)])),i&&3==i.nodeType?i.parentNode:i},getEnd:function(e){var t=this,n=t.getRng(),i,r;return n.duplicate||n.item?n.item?n.item(0):(n=n.duplicate(),n.collapse(0),i=n.parentElement(),i.ownerDocument!==t.dom.doc&&(i=t.dom.getRoot()),i&&"BODY"==i.nodeName?i.lastChild||i:i):(i=n.endContainer,r=n.endOffset,1==i.nodeType&&i.hasChildNodes()&&(e&&n.collapsed||(i=i.childNodes[r>0?r-1:r])),i&&3==i.nodeType?i.parentNode:i)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,i=n.dom,r=i.createRng(),o;if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;o=i.nodeIndex(e),r.setStart(e.parentNode,o),r.setEnd(e.parentNode,o+1),t&&(n._moveEndPoint(r,e,!0),n._moveEndPoint(r,e)),n.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),i;n.item&&(i=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(i)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(i){return-1}}var n=this,i,r,o,a,s,l;if(!n.win)return null;if(a=n.win.document,!e&&n.lastFocusBookmark){var u=n.lastFocusBookmark;return u.startContainer?(r=a.createRange(),r.setStart(u.startContainer,u.startOffset),r.setEnd(u.endContainer,u.endOffset)):r=u,r}if(e&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{(i=n.getSel())&&(r=i.rangeCount>0?i.getRangeAt(0):i.createRange?i.createRange():a.createRange())}catch(c){}if(l=n.editor.fire("GetSelectionRange",{range:r}),l.range!==r)return l.range;if(h&&r&&r.setStart&&a.selection){try{s=a.selection.createRange()}catch(c){}s&&s.item&&(o=s.item(0),r=a.createRange(),r.setStartBefore(o),r.setEndAfter(o))}return r||(r=a.createRange?a.createRange():a.body.createTextRange()),r.setStart&&9===r.startContainer.nodeType&&r.collapsed&&(o=n.dom.getRoot(),r.setStart(o,0),r.setEnd(o,0)),n.selectedRange&&n.explicitRange&&(0===t(r.START_TO_START,r,n.selectedRange)&&0===t(r.END_TO_END,r,n.selectedRange)?r=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),r},setRng:function(e,t){var n=this,i,r,o;if(e)if(e.select){n.explicitRange=null;try{e.select()}catch(a){}}else if(n.tridentSel){if(e.cloneRange)try{n.tridentSel.addRange(e)}catch(a){}}else{if(i=n.getSel(),o=n.editor.fire("SetSelectionRange",{range:e}),e=o.range,i){n.explicitRange=e;try{i.removeAllRanges(),i.addRange(e)}catch(a){}t===!1&&i.extend&&(i.collapse(e.endContainer,e.endOffset),i.extend(e.startContainer,e.startOffset)),n.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}e.collapsed||e.startContainer!=e.endContainer||!i.setBaseAndExtent||s.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(r=e.startContainer.childNodes[e.startOffset],r&&"IMG"==r.tagName&&n.getSel().setBaseAndExtent(r,0,r,1))}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),i,r=n.startContainer,o=n.endContainer,a=n.startOffset,s=n.endOffset,l=t.dom.getRoot();return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(r==o&&2>s-a&&r.hasChildNodes()&&(i=r.childNodes[a]),3===r.nodeType&&3===o.nodeType&&(r=r.length===a?e(r.nextSibling,!0):r.parentNode,o=0===s?e(o.previousSibling,!1):o.parentNode,r&&r===o))?r:i&&3==i.nodeType?i.parentNode:i):(i=n.item?n.item(0):n.parentElement(),i.ownerDocument!==t.win.document&&(i=l),i):l},getSelectedBlocks:function(t,n){var i=this,r=i.dom,o,a,s=[];if(a=r.getRoot(),t=r.getParent(t||i.getStart(),r.isBlock),n=r.getParent(n||i.getEnd(),r.isBlock),t&&t!=a&&s.push(t),t&&n&&t!=n){o=t;for(var l=new e(t,a);(o=l.next())&&o!=n;)r.isBlock(o)&&s.push(o)}return n&&t!=n&&n!=a&&s.push(n),s},isForward:function(){var e=this.dom,t=this.getSel(),n,i;return t&&t.anchorNode&&t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),i=e.createRng(),i.setStart(t.focusNode,t.focusOffset),i.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,i)<=0):!0},normalize:function(){var e=this,t=e.getRng();return s.range&&new r(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n=this,i;return n.selectorChangedData||(n.selectorChangedData={},i={},n.editor.on("NodeChange",function(e){var t=e.element,r=n.dom,o=r.getParents(t,null,r.getRoot()),a={};c(n.selectorChangedData,function(e,t){c(o,function(n){return r.is(n,t)?(i[t]||(c(e,function(e){e(!0,{node:n,selector:t,parents:o})}),i[t]=e),a[t]=e,!1):void 0})}),c(i,function(e,n){a[n]||(delete i[n],c(e,function(e){e(!1,{node:t,selector:n,parents:o})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){function n(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}var i,r,o=this,s=o.dom,l=s.getRoot(),u,c,d=0;if(a.isElement(e)){if(t===!1&&(d=e.offsetHeight),"BODY"!=l.nodeName){var h=o.getScrollContainer();if(h)return i=n(e).y-n(h).y+d,c=h.clientHeight,u=h.scrollTop,void((u>i||i+25>u+c)&&(h.scrollTop=u>i?i:i-c+25))}r=s.getViewPort(o.editor.getWin()),i=s.getPos(e).y+d,u=r.y,c=r.h,(i<r.y||i+25>u+c)&&o.editor.getWin().scrollTo(0,u>i?i:i-c+25)}},placeCaretAt:function(e,t){this.setRng(r.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(t,n,i){var r=n,o=new e(n,r),a=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==d(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?o.next():o.prev());"BODY"==r.nodeName&&(i?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},u}),i(G,[Y,m],function(e,t){function n(t){this.compare=function(n,r){function o(e){var n={};return i(t.getAttribs(e),function(i){var r=i.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&"data-mce-style"!==r&&(n[r]=t.getAttrib(e,r))}),n}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return n.nodeName!=r.nodeName?!1:a(o(n),o(r))&&a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(r,"style")))?!e.isBookmarkNode(n)&&!e.isBookmarkNode(r):!1}}var i=t.each;return n}),i(K,[m],function(e){function t(e,t){function i(e){return e.replace(/%(\w+)/g,"")}var r,o,a=e.dom,s="",l,u;if(u=e.settings.preview_styles,u===!1)return"";if(u||(u="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return r=t.block||t.inline||"span",o=a.create(r),n(t.styles,function(e,t){e=i(e),e&&a.setStyle(o,t,e)}),n(t.attributes,function(e,t){e=i(e),e&&a.setAttrib(o,t,e)}),n(t.classes,function(e){e=i(e),a.hasClass(o,e)||a.addClass(o,e)}),e.fire("PreviewFormats"),a.setStyles(o,{position:"absolute",left:-65535}),e.getBody().appendChild(o),l=a.getStyle(e.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,n(u.split(" "),function(t){var n=a.getStyle(o,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=a.getStyle(e.getBody(),t,!0),"#ffffff"==a.toHex(n).toLowerCase())||"color"==t&&"#000000"==a.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===l)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*l+"px"}"border"==t&&n&&(s+="padding:0 2px;"),s+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),a.remove(o),s}var n=e.each;return{getCssText:t}}),i(X,[y,D,Y,G,m,K],function(e,t,n,i,r,o){return function(a){function s(e){return e.nodeType&&(e=e.nodeName),!!a.schema.getTextBlockElements()[e.toLowerCase()]}function l(e){return/^(TH|TD)$/.test(e.nodeName)}function u(e){return e&&/^(IMG)$/.test(e.nodeName)}function c(e,t){return V.getParents(e,t,V.getRoot())}function d(e){return 1===e.nodeType&&"_mce_caret"===e.id}function h(){m({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){le(n,function(t,n){V.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),le("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){m(e,{block:e,remove:"all"})}),m(a.settings.formats)}function f(){a.addShortcut("meta+b","bold_desc","Bold"),a.addShortcut("meta+i","italic_desc","Italic"),a.addShortcut("meta+u","underline_desc","Underline");for(var e=1;6>=e;e++)a.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("access+7","",["FormatBlock",!1,"p"]),a.addShortcut("access+8","",["FormatBlock",!1,"div"]),a.addShortcut("access+9","",["FormatBlock",!1,"address"])}function p(e){return e?j[e]:j}function m(e,t){e&&("string"!=typeof e?le(e,function(e,t){m(t,e)}):(t=t.length?t:[t],le(t,function(e){e.deep===ie&&(e.deep=!e.selector),e.split===ie&&(e.split=!e.selector||e.inline),e.remove===ie&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),j[e]=t))}function g(e){return e&&j[e]&&delete j[e],j}function v(e){var t;return a.dom.getParent(e,function(e){return t=a.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function y(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=v(e.parentNode),a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"text-decoration")===t&&a.dom.setStyle(e,"text-decoration",null))}function b(t,n,i){function r(e,t){if(t=t||c,e){if(t.onformat&&t.onformat(e,t,n,i),le(t.styles,function(t,i){V.setStyle(e,i,A(t,n))}),t.styles){var r=V.getAttrib(e,"style");r&&e.setAttribute("data-mce-style",r)}le(t.attributes,function(t,i){V.setAttrib(e,i,A(t,n))}),le(t.classes,function(t){t=A(t,n),V.hasClass(e,t)||V.addClass(e,t)})}}function o(){function t(t,n){var r=new e(n);for(i=r.current();i;i=r.prev())if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}var n=a.selection.getRng(),r=n.startContainer,o=n.endContainer;if(r!=o&&0===n.endOffset){var s=t(r,o),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function l(e,i,o){var a=[],l,h,f=!0;l=c.inline||c.block,h=V.create(l),r(h),q.walk(e,function(e){function i(e){var g,v,y,b,w;return w=f,g=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&re(e)&&(w=f,f="true"===re(e),b=!0),M(g,"br")?(p=0,void(c.block&&V.remove(e))):c.wrapper&&x(e,t,n)?void(p=0):f&&!b&&c.block&&!c.wrapper&&s(g)&&G(v,l)?(e=V.rename(e,l),r(e),a.push(e),void(p=0)):c.selector&&(le(u,function(t){return"collapsed"in t&&t.collapsed!==m?void 0:V.is(e,t.selector)&&!d(e)?(r(e,t),y=!0,!1):void 0}),!c.inline||y)?void(p=0):void(!f||b||!G(l,g)||!G(v,l)||!o&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||d(e)||c.inline&&K(e)?(p=0,le(ue(e.childNodes),i),b&&(f=w),p=0):(p||(p=V.clone(h,ee),e.parentNode.insertBefore(p,e),a.push(p)),p.appendChild(e)))}var p;le(e,i)}),c.links===!0&&le(a,function(e){function t(e){"A"===e.nodeName&&r(e,c),le(ue(e.childNodes),t)}t(e)}),le(a,function(e){function i(e){var t=0;return le(e.childNodes,function(e){P(e)||se(e)||t++}),t}function o(e){var t,n;return le(e.childNodes,function(e){return 1!=e.nodeType||se(e)||d(e)?void 0:(t=e,ee)}),t&&!se(t)&&D(t,c)&&(n=V.clone(t,ee),r(n),V.replace(n,e,te),V.remove(t,1)),n||e}var s;if(s=i(e),(a.length>1||!K(e))&&0===s)return void V.remove(e,1);if(c.inline||c.wrapper){if(c.exact||1!==s||(e=o(e)),le(u,function(t){le(V.select(t.inline,e),function(e){se(e)||z(t,n,e,t.exact?e:null)})}),x(e.parentNode,t,n))return V.remove(e,1),e=0,te;c.merge_with_parents&&V.getParent(e.parentNode,function(i){return x(i,t,n)?(V.remove(e,1),e=0,te):void 0}),e&&c.merge_siblings!==!1&&(e=F(W(e),e),e=F(e,W(e,te)))}})}var u=p(t),c=u[0],h,f,m=!i&&Y.isCollapsed();if("false"!==re(Y.getNode())){if(c)if(i)i.nodeType?(f=V.createRng(),f.setStartBefore(i),f.setEndAfter(i),l(B(f,u),null,!0)):l(i,null,!0);else if(m&&c.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length)$("apply",t,n);else{var g=a.selection.getNode();X||!u[0].defaultBlock||V.getParent(g,V.isBlock)||b(u[0].defaultBlock),a.selection.setRng(o()),h=Y.getBookmark(),l(B(Y.getRng(te),u),h),c.styles&&(c.styles.color||c.styles.textDecoration)&&(ce(g,y,"childNodes"),y(g)),Y.moveToBookmark(h),U(Y.getRng(te)),a.nodeChanged()}}else{i=Y.getNode();for(var v=0,w=u.length;w>v;v++)if(u[v].ceFalseOverride&&V.is(i,u[v].selector))return void r(i,u[v])}}function w(e,t,n,i){function r(e){var n,i,o,a,s;if(1===e.nodeType&&re(e)&&(a=b,b="true"===re(e),s=!0),n=ue(e.childNodes),b&&!s)for(i=0,o=f.length;o>i&&!z(f[i],t,e,e);i++);if(m.deep&&n.length){for(i=0,o=n.length;o>i;i++)r(n[i]);s&&(b=a)}}function o(n){var r;return le(c(n.parentNode).reverse(),function(n){var o;r||"_start"==n.id||"_end"==n.id||(o=x(n,e,t,i),o&&o.split!==!1&&(r=n))}),r}function s(e,n,i,r){var o,a,s,l,u,c;if(e){for(c=e.parentNode,o=n.parentNode;o&&o!=c;o=o.parentNode){for(a=V.clone(o,ee),u=0;u<f.length;u++)if(z(f[u],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!r||m.mixed&&K(e)||(n=V.split(e,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}function u(e){return s(o(e),e,e,!0)}function d(e){var t=V.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return se(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),V.remove(t,!0),n}function h(e){var t,n,i=e.commonAncestorContainer;if(e=B(e,f,te),m.split){if(t=L(e,te),n=L(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&l(n)&&n.firstChild&&(n=n.firstChild||n),V.isChildOf(t,n)&&!K(n)&&!l(t)&&!l(n))return t=I(t,"span",{id:"_start","data-mce-type":"bookmark"}),u(t),void(t=d(te));t=I(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=I(n,"span",{id:"_end","data-mce-type":"bookmark"}),u(t),u(n),t=d(te),n=d()}else t=n=u(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=J(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=J(n)+1}q.walk(e,function(e){le(e,function(e){r(e),1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===v(e.parentNode)&&z({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f=p(e),m=f[0],g,y,b=!0;if(n)return void(n.nodeType?(y=V.createRng(),y.setStartBefore(n),y.setEndAfter(n),h(y)):h(n));if("false"!==re(Y.getNode()))Y.isCollapsed()&&m.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length?$("remove",e,t,i):(g=Y.getBookmark(),h(Y.getRng(te)),Y.moveToBookmark(g),m.inline&&C(e,t,Y.getStart())&&U(Y.getRng(!0)),a.nodeChanged());else{n=Y.getNode();for(var w=0,_=f.length;_>w&&(!f[w].ceFalseOverride||!z(f[w],t,n,n));w++);}}function _(e,t,n){var i=p(e);!C(e,t,n)||"toggle"in i[0]&&!i[0].toggle?b(e,t,n):w(e,t,n)}function x(e,t,n,i){function r(e,t,r){var o,a,s=t[r],l;if(t.onmatch)return t.onmatch(e,t,r);if(s)if(s.length===ie){for(o in s)if(s.hasOwnProperty(o)){if(a="attributes"===r?V.getAttrib(e,o):E(e,o),i&&!a&&!t.exact)return;if((!i||t.exact)&&!M(a,R(A(s[o],n),o)))return}}else for(l=0;l<s.length;l++)if("attributes"===r?V.getAttrib(e,s[l]):E(e,s[l]))return t;return t}var o=p(t),a,s,l;if(o&&e)for(s=0;s<o.length;s++)if(a=o[s],D(e,a)&&r(e,a,"attributes")&&r(e,a,"styles")){if(l=a.classes)for(s=0;s<l.length;s++)if(!V.hasClass(e,l[s]))return;return a}}function C(e,t,n){function i(n){var i=V.getRoot();return n===i?!1:(n=V.getParent(n,function(n){return n.parentNode===i||!!x(n,e,t,!0)}),x(n,e,t))}var r;return n?i(n):(n=Y.getNode(),i(n)?te:(r=Y.getStart(),r!=n&&i(r)?te:ee))}function k(e,t){var n,i=[],r={};return n=Y.getStart(),V.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)a=e[o],!r[a]&&x(n,a,t)&&(r[a]=!0,i.push(a))},V.getRoot()),i}function S(e){var t=p(e),n,i,r,o,a;if(t)for(n=Y.getStart(),i=c(n),o=t.length-1;o>=0;o--){if(a=t[o].selector,!a||t[o].defaultBlock)return te;for(r=i.length-1;r>=0;r--)if(V.is(i[r],a))return te}return ee}function T(e,t,n){var i;return ne||(ne={},i={},a.on("NodeChange",function(e){var t=c(e.element),n={};t=r.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),le(ne,function(e,r){le(t,function(o){return x(o,r,{},e.similar)?(i[r]||(le(e,function(e){e(!0,{node:o,format:r,parents:t})}),i[r]=e),n[r]=e,!1):void 0})}),le(i,function(r,o){n[o]||(delete i[o],le(r,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),le(e.split(","),function(e){ne[e]||(ne[e]=[],ne[e].similar=n),ne[e].push(t)}),this}function N(e){return o.getCssText(a,e)}function D(e,t){return M(e,t.inline)?te:M(e,t.block)?te:t.selector?1==e.nodeType&&V.is(e,t.selector):void 0}function M(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function E(e,t){return R(V.getStyle(e,t),t)}function R(e,t){return("color"==t||"backgroundColor"==t)&&(e=V.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function A(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function P(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function I(e,t,n){var i=V.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function B(t,n,i){function r(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var i,r,o,a,s;if(i=r=e?g:y,a=e?"previousSibling":"nextSibling",s=V.getRoot(),3==i.nodeType&&!P(i)&&(e?v>0:b<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&K(r))return r;for(o=r[a];o;o=o[a])if(!se(o)&&!P(o)&&!t(o))return r;if(r==s||r.parentNode==s){i=r;break}r=r.parentNode}return i}function o(e,t){for(t===ie&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function l(e){for(var t=e;t;){if(1===t.nodeType&&re(t))return"false"===re(t)?t:e;t=t.parentNode}return e}function u(t,n,r){function o(e,t){var n,o,a=e.nodeValue;return"undefined"==typeof t&&(t=r?a.length:0),r?(n=a.lastIndexOf(" ",t),o=a.lastIndexOf(" ",t),n=n>o?n:o,-1===n||i||n++):(n=a.indexOf(" ",t),o=a.indexOf(" ",t),n=-1!==n&&(-1===o||o>n)?n:o),n}var s,l,u,c;if(3===t.nodeType){if(u=o(t,n),-1!==u)return{container:t,offset:u};c=t}for(s=new e(t,V.getParent(t,K)||a.getBody());l=s[r?"prev":"next"]();)if(3===l.nodeType){if(c=l,u=o(l),-1!==u)return{container:l,offset:u}}else if(K(l))break;return c?(n=r?0:c.length,{container:c,offset:n}):void 0}function d(e,i){var r,o,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]),r=c(e),o=0;o<r.length;o++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&V.is(r[o],s.selector))return r[o];return e}function h(e,t){var i,r=V.getRoot();if(n[0].wrapper||(i=V.getParent(e,n[0].block,r)),i||(i=V.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&s(e)})),i&&n[0].wrapper&&(i=c(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!K(i[t])&&(i=i[t],!M(i,"br")););return i||e}var f,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(f=g.childNodes.length-1,g=g.childNodes[v>f?f:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(f=y.childNodes.length-1,y=y.childNodes[b>f?f:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=l(g),y=l(y),(se(g.parentNode)||se(g))&&(g=se(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(se(y.parentNode)||se(y))&&(y=se(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(m=u(g,v,!0),m&&(g=m.container,v=m.offset),m=u(y,b),m&&(y=m.container,b=m.offset)),p=o(y,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=o(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node,y.splitText(p.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=r(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=r())),n[0].selector&&n[0].expand!==ee&&!n[0].inline&&(g=d(g,"previousSibling"),y=d(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=h(g,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(K(g)||(g=r(!0)),K(y)||(y=r()))),1==g.nodeType&&(v=J(g),g=g.parentNode),1==y.nodeType&&(b=J(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function H(e,t){return t.links&&"A"==e.tagName}function z(e,t,n,i){var r,o,a;if(!D(n,e)&&!H(n,e))return ee;if("all"!=e.remove)for(le(e.styles,function(r,o){r=R(A(r,t),o),"number"==typeof o&&(o=r,i=0),(e.remove_similar||!i||M(E(i,o),r))&&V.setStyle(n,o,""),a=1}),a&&""===V.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),le(e.attributes,function(e,r){var o;if(e=A(e,t),"number"==typeof r&&(r=e,i=0),!i||M(V.getAttrib(i,r),e)){if("class"==r&&(e=V.getAttrib(n,r),e&&(o="",le(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void V.setAttrib(n,r,o);"class"==r&&n.removeAttribute("className"),Z.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),le(e.classes,function(e){e=A(e,t),(!i||V.hasClass(i,e))&&V.removeClass(n,e)}),o=V.getAttribs(n),r=0;r<o.length;r++)if(0!==o[r].nodeName.indexOf("_"))return ee;return"none"!=e.remove?(O(n,e),te):void 0}function O(e,t){function n(e,t,n){return e=W(e,t,n),!e||"BR"==e.nodeName||K(e)}var i=e.parentNode,r;t.block&&(X?i==V.getRoot()&&(t.list_block&&M(e,t.list_block)||le(ue(e.childNodes),function(e){G(X,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=I(e,X),V.setAttribs(r,a.settings.forced_root_block_attrs)):r=0})):K(e)&&!K(i)&&(n(e,ee)||n(e.firstChild,te,1)||e.insertBefore(V.create("br"),e.firstChild),n(e,te)||n(e.lastChild,ee,1)||e.appendChild(V.create("br")))),t.selector&&t.inline&&!M(t.inline,e)||V.remove(e,1)}function W(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!P(e))return e}function F(e,t){function n(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!se(r))return r}return e}var r,o,a=new i(V);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(r=e.nextSibling;r&&r!=t;)o=r,r=r.nextSibling,e.appendChild(o);
return V.remove(t),le(ue(t.childNodes),function(t){e.appendChild(t)}),e}return t}function L(t,n){var i,r,o;return i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&r&&r--,i=i.childNodes[r>o?o:r]),3===i.nodeType&&n&&r>=i.nodeValue.length&&(i=new e(i,a.getBody()).next()||i),3!==i.nodeType||n||0!==r||(i=new e(i,a.getBody()).prev()||i),i}function $(t,n,i,r){function o(e){var t=V.create("span",{id:g,"data-mce-bogus":!0,style:v?"color:red":""});return e&&t.appendChild(a.getDoc().createTextNode(Q)),t}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==Q||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function u(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function c(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function d(e,t){var n,i;if(e)i=Y.getRng(!0),l(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),V.remove(e)):(n=c(e),n.nodeValue.charAt(0)===Q&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),V.remove(e,1)),Y.setRng(i);else if(e=u(Y.getStart()),!e)for(;e=V.get(g);)d(e,!1)}function h(){var e,t,r,a,s,l,d;e=Y.getRng(!0),a=e.startOffset,l=e.startContainer,d=l.nodeValue,t=u(Y.getStart()),t&&(r=c(t)),d&&a>0&&a<d.length&&/\w/.test(d.charAt(a))&&/\w/.test(d.charAt(a-1))?(s=Y.getBookmark(),e.collapse(!0),e=B(e,p(n)),e=q.split(e),b(n,i,e),Y.moveToBookmark(s)):(t&&r.nodeValue===Q?b(n,i,t):(t=o(!0),r=t.firstChild,e.insertNode(t),a=1,b(n,i,t)),Y.setCursorLocation(r,a))}function f(){var e=Y.getRng(!0),t,a,l,u,c,d,h=[],f,m;for(t=e.startContainer,a=e.startOffset,c=t,3==t.nodeType&&(a!=t.nodeValue.length&&(u=!0),c=c.parentNode);c;){if(x(c,n,i,r)){d=c;break}c.nextSibling&&(u=!0),h.push(c),c=c.parentNode}if(d)if(u)l=Y.getBookmark(),e.collapse(!0),e=B(e,p(n),!0),e=q.split(e),w(n,i,e),Y.moveToBookmark(l);else{for(m=o(),c=m,f=h.length-1;f>=0;f--)c.appendChild(V.clone(h[f],!1)),c=c.firstChild;c.appendChild(V.doc.createTextNode(Q)),c=c.firstChild;var g=V.getParent(d,s);g&&V.isEmpty(g)?d.parentNode.replaceChild(m,d):V.insertAfter(m,d),Y.setCursorLocation(c,1),V.isEmpty(d)&&V.remove(d)}}function m(){var e;e=u(Y.getStart()),e&&!V.isEmpty(e)&&ce(e,function(e){1!=e.nodeType||e.id===g||V.isEmpty(e)||V.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",v=a.settings.caret_debug;a._hasCaretEvents||(ae=function(){var e=[],t;if(l(u(Y.getStart()),e))for(t=e.length;t--;)V.setAttrib(e[t],"data-mce-bogus","1")},oe=function(e){var t=e.keyCode;d(),8==t&&Y.isCollapsed()&&Y.getStart().innerHTML==Q&&d(u(Y.getStart())),(37==t||39==t)&&d(u(Y.getStart())),m()},a.on("SetContent",function(e){e.selection&&m()}),a._hasCaretEvents=!0),"apply"==t?h():f()}function U(t){var n=t.startContainer,i=t.startOffset,r,o,a,s,l;if((t.startContainer!=t.endContainer||!u(t.startContainer.childNodes[t.startOffset]))&&(3==n.nodeType&&i>=n.nodeValue.length&&(i=J(n),n=n.parentNode,r=!0),1==n.nodeType))for(s=n.childNodes,n=s[Math.min(i,s.length-1)],o=new e(n,V.getParent(n,V.isBlock)),(i>s.length-1||r)&&o.next(),a=o.current();a;a=o.next())if(3==a.nodeType&&!P(a))return l=V.create("a",{"data-mce-bogus":"all"},Q),a.parentNode.insertBefore(l,a),t.setStart(a,0),Y.setRng(t),void V.remove(l)}var j={},V=a.dom,Y=a.selection,q=new t(V),G=a.schema.isValidChild,K=V.isBlock,X=a.settings.forced_root_block,J=V.nodeIndex,Q="\ufeff",Z=/^(src|href|style)$/,ee=!1,te=!0,ne,ie,re=V.getContentEditable,oe,ae,se=n.isBookmarkNode,le=r.each,ue=r.grep,ce=r.walk,de=r.extend;de(this,{get:p,register:m,unregister:g,apply:b,remove:w,toggle:_,match:C,matchAll:k,matchNode:x,canApply:S,formatChanged:T,getCssText:N}),h(),f(),a.on("BeforeGetContent",function(e){ae&&"raw"!=e.format&&ae()}),a.on("mouseup keydown",function(e){oe&&oe(e)})}}),i(J,[O,f],function(e,t){return function(e){function n(){return e.serializer.getTrimmedContent()}function i(t){e.setDirty(t)}function r(e){o.typing=!1,o.add({},e)}var o=this,a=0,s=[],l,u,c=0;return e.on("init",function(){o.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o.beforeChange()}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&r(e)}),e.on("ObjectResizeStart Cut",function(){o.beforeChange()}),e.on("SaveContent ObjectResized blur",r),e.on("DragEnd",r),e.on("KeyUp",function(a){var l=a.keyCode;a.isDefaultPrevented()||((l>=33&&36>=l||l>=37&&40>=l||45==l||13==l||a.ctrlKey)&&(r(),e.nodeChanged()),(46==l||8==l||t.mac&&(91==l||93==l))&&e.nodeChanged(),u&&o.typing&&(e.isDirty()||(i(s[0]&&n()!=s[0].content),e.isDirty()&&e.fire("change",{level:s[0],lastLevel:null})),e.fire("TypingUndo"),u=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&36>=t||t>=37&&40>=t||45==t)return void(o.typing&&r(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(16>t||t>20)||224==t||91==t||o.typing||n||(o.beforeChange(),o.typing=!0,o.add({},e),u=!0)}}),e.on("MouseDown",function(e){o.typing&&r(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),o={data:s,typing:!1,beforeChange:function(){c||(l=e.selection.getBookmark(2,!0))},add:function(t,r){var o,u=e.settings,d;if(t=t||{},t.content=n(),c||e.removed)return null;if(d=s[a],e.fire("BeforeAddUndo",{level:t,lastLevel:d,originalEvent:r}).isDefaultPrevented())return null;if(d&&d.content==t.content)return null;if(s[a]&&(s[a].beforeBookmark=l),u.custom_undo_redo_levels&&s.length>u.custom_undo_redo_levels){for(o=0;o<s.length-1;o++)s[o]=s[o+1];s.length--,a=s.length}t.bookmark=e.selection.getBookmark(2,!0),a<s.length-1&&(s.length=a+1),s.push(t),a=s.length-1;var h={level:t,lastLevel:d,originalEvent:r};return e.fire("AddUndo",h),a>0&&(i(!0),e.fire("change",h)),t},undo:function(){var t;return o.typing&&(o.add(),o.typing=!1),a>0&&(t=s[--a],e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(t.beforeBookmark),i(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return a<s.length-1&&(t=s[++a],e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(t.bookmark),i(!0),e.fire("redo",{level:t})),t},clear:function(){s=[],a=0,o.typing=!1,e.fire("ClearUndos")},hasUndo:function(){return a>0||o.typing&&s[0]&&n()!=s[0].content},hasRedo:function(){return a<s.length-1&&!this.typing},transact:function(e){o.beforeChange();try{c++,e()}finally{c--}o.add()}}}}),i(Q,[y,D,f],function(e,t,n){var i=n.ie&&n.ie<11;return function(r){function o(o){function f(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function p(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function m(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function g(e){var t=e,n=[],i;if(t){for(;t=t.firstChild;){if(a.isBlock(t))return;1!=t.nodeType||d[t.nodeName.toLowerCase()]||n.push(t)}for(i=n.length;i--;)t=n[i],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?a.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&a.remove(t)}}function v(t){function i(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var r,o,l,u=t,c;if(t){if(n.ie&&n.ie<9&&I&&I.firstChild&&I.firstChild==I.lastChild&&"BR"==I.firstChild.tagName&&a.remove(I.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var d=i(t.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(r=new e(t,t);o=r.current();){if(3==o.nodeType){l.setStart(o,0),l.setEnd(o,0);break}if(h[o.nodeName.toLowerCase()]){l.setStartBefore(o),l.setEndBefore(o);break}u=o,o=r.next()}o||(l.setStart(u,0),l.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!B||9>B)&&(c=a.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(c),s.scrollIntoView(t)}}function y(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function b(e){e.innerHTML=i?"":'<br data-mce-bogus="1">'}function w(e){var t=A,n,r,o,s=c.getTextInlineElements();if(e||"TABLE"==F?(n=a.create(e||$),y(n)):n=I.cloneNode(!1),o=n,l.keep_styles!==!1)do if(s[t.nodeName]){if("_mce_caret"==t.id)continue;r=t.cloneNode(!1),a.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(o=r,n.appendChild(r))}while(t=t.parentNode);return i||(o.innerHTML='<br data-mce-bogus="1">'),n}function _(t){var n,i,r;if(3==A.nodeType&&(t?P>0:P<A.nodeValue.length))return!1;if(A.parentNode==I&&U&&!t)return!0;if(t&&1==A.nodeType&&A==I.firstChild)return!0;if("TABLE"===A.nodeName||A.previousSibling&&"TABLE"==A.previousSibling.nodeName)return U&&!t||!U&&t;for(n=new e(A,I),3==A.nodeType&&(t&&0===P?n.prev():t||P!=A.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(r=i.nodeName.toLowerCase(),d[r]&&"br"!==r))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function x(e,t){var n,i,o,s,l,u,d=$||"P";if(i=a.getParent(e,a.isBlock),!i||!f(i)){if(i=i||R,u=i==r.getBody()||p(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return n=a.create(d),y(n),i.appendChild(n),M.setStart(n,0),M.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!a.isBlock(s);)o=s,s=s.previousSibling;if(o&&c.isValidChild(u,d.toLowerCase())){for(n=a.create(d),y(n),o.parentNode.insertBefore(n,o),s=o;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;M.setStart(e,t),M.setEnd(e,t)}}return e}function C(){function e(e){for(var t=W[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===I}function t(){var e=W.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:W}if(W!=r.getBody()){var n=W.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&($="LI"),z=$?w($):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(z,t()):a.replace(z,W):e(!0)?"LI"==n?(a.insertAfter(z,t()),z.appendChild(a.doc.createTextNode(" ")),z.appendChild(W)):W.parentNode.insertBefore(z,W):e()?(a.insertAfter(z,t()),m(z)):(W=t(),E=M.cloneRange(),E.setStartAfter(I),E.setEndAfter(W),O=E.extractContents(),"LI"==$&&"LI"==O.firstChild.nodeName?(z=O.firstChild,a.insertAfter(O,W)):(a.insertAfter(O,W),a.insertAfter(z,W))),a.remove(I),v(z),u.add()}}function k(){r.execCommand("InsertLineBreak",!1,o)}function S(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function T(e){var t=a.getRoot(),n,i;for(n=e;n!==t&&"false"!==a.getContentEditable(n);)"true"===a.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==t?i:t}function N(e){var t;i||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(a.getStyle(t,"float",!0)))&&a.add(e,"br"))}function D(){z=/^(H[1-6]|PRE|FIGURE)$/.test(F)&&"HGROUP"!=L?w($):w(),l.end_container_on_empty_block&&f(W)&&a.isEmpty(I)?z=a.split(W,I):a.insertAfter(z,I),v(z)}var M,E,R,A,P,I,B,H,z,O,W,F,L,$,U;if(M=s.getRng(!0),!o.isDefaultPrevented()){if(!M.collapsed)return void r.execCommand("Delete");if(new t(a).normalize(M),A=M.startContainer,P=M.startOffset,$=(l.force_p_newlines?"p":"")||l.forced_root_block,$=$?$.toUpperCase():"",B=a.doc.documentMode,H=o.shiftKey,1==A.nodeType&&A.hasChildNodes()&&(U=P>A.childNodes.length-1,A=A.childNodes[Math.min(P,A.childNodes.length-1)]||A,P=U&&3==A.nodeType?A.nodeValue.length:0),R=T(A)){if(u.beforeChange(),!a.isBlock(R)&&R!=a.getRoot())return void((!$||H)&&k());if(($&&!H||!$&&H)&&(A=x(A,P)),I=a.getParent(A,a.isBlock),W=I?a.getParent(I.parentNode,a.isBlock):null,F=I?I.nodeName.toUpperCase():"",L=W?W.nodeName.toUpperCase():"","LI"!=L||o.ctrlKey||(I=W,F=L),/^(LI|DT|DD)$/.test(F)){if(!$&&H)return void k();if(a.isEmpty(I))return void C()}if("PRE"==F&&l.br_in_pre!==!1){if(!H)return void k()}else if(!$&&!H&&"LI"!=F||$&&H)return void k();$&&I===r.getBody()||($=$||"P",_()?D():_(!0)?(z=I.parentNode.insertBefore(w(),I),m(z),v(I)):(E=M.cloneRange(),E.setEndAfter(I),O=E.extractContents(),S(O),z=O.firstChild,a.insertAfter(O,I),g(z),N(I),a.isEmpty(I)&&b(I),z.normalize(),a.isEmpty(z)?(a.remove(z),D()):v(z)),a.setAttrib(z,"id",""),r.fire("NewBlock",{newBlock:z}),u.add())}}}var a=r.dom,s=r.selection,l=r.settings,u=r.undoManager,c=r.schema,d=c.getNonEmptyElements(),h=c.getMoveCaretBeforeOnEnterElements();r.on("keydown",function(e){13==e.keyCode&&o(e)!==!1&&e.preventDefault()})}}),i(Z,[],function(){return function(e){function t(){var t=r.getStart(),s=e.getBody(),l,u,c,d,h,f,p,m=-16777215,g,v,y,b,w;if(w=n.forced_root_block,t&&1===t.nodeType&&w){for(;t&&t!=s;){if(a[t.nodeName])return;t=t.parentNode}if(l=r.getRng(),l.setStart){u=l.startContainer,c=l.startOffset,d=l.endContainer,h=l.endOffset;try{v=e.getDoc().activeElement===s}catch(_){}}else l.item&&(t=l.item(0),l=e.getDoc().body.createTextRange(),l.moveToElementText(t)),v=l.parentElement().ownerDocument===e.getDoc(),y=l.duplicate(),y.collapse(!0),c=-1*y.move("character",m),y.collapsed||(y=l.duplicate(),y.collapse(!1),h=-1*y.move("character",m)-c);for(t=s.firstChild,b=s.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!a[t.nodeName])&&o.isValidChild(b,w.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){p=t,t=t.nextSibling,i.remove(p);continue}f||(f=i.create(w,e.settings.forced_root_block_attrs),t.parentNode.insertBefore(f,t),g=!0),p=t,t=t.nextSibling,f.appendChild(p)}else f=null,t=t.nextSibling;if(g&&v){if(l.setStart)l.setStart(u,c),l.setEnd(d,h),r.setRng(l);else try{l=e.getDoc().body.createTextRange(),l.moveToElementText(s),l.collapse(!0),l.moveStart("character",c),h>0&&l.moveEnd("character",h),l.select()}catch(_){}e.nodeChanged()}}}var n=e.settings,i=e.dom,r=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),i(ee,[B,f,m,G,D,y],function(e,n,i,r,o,a){var s=i.each,l=i.extend,u=i.map,c=i.inArray,d=i.explode,h=n.ie,f=n.ie&&n.ie<11,p=!0,m=!1;return function(i){function g(e,t,n,r){var o,a,l=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||i.focus(),r=i.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented())return!1;if(a=e.toLowerCase(),o=P.exec[a])return o(a,t,n),i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(s(i.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),l=!0,!1):void 0}),l)return l;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{l=i.getDoc().execCommand(e,t,n)}catch(u){}return l?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1}function v(e){var t;if(!i._isHidden()){if(e=e.toLowerCase(),t=P.state[e])return t(e);try{return i.getDoc().queryCommandState(e)}catch(n){}return!1}}function y(e){var t;if(!i._isHidden()){if(e=e.toLowerCase(),t=P.value[e])return t(e);try{return i.getDoc().queryCommandValue(e)}catch(n){}}}function b(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){P[t][n]=e})})}function w(e,t,n){e=e.toLowerCase(),P.exec[e]=function(e,r,o,a){return t.call(n||i,r,o,a)}}function _(e){if(e=e.toLowerCase(),P.exec[e])return!0;try{return i.getDoc().queryCommandSupported(e)}catch(t){}return!1}function x(e,t,n){e=e.toLowerCase(),P.state[e]=function(){return t.call(n||i)}}function C(e,t,n){e=e.toLowerCase(),P.value[e]=function(){return t.call(n||i)}}function k(e){return e=e.toLowerCase(),!!P.exec[e]}function S(e,n,r){return n===t&&(n=m),r===t&&(r=null),i.getDoc().execCommand(e,n,r)}function T(e){return A.match(e)}function N(e,n){A.toggle(e,n?{value:n}:t),i.nodeChanged()}function D(e){B=R.getBookmark(e)}function M(){R.moveToBookmark(B)}var E,R,A,P={state:{},exec:{},value:{}},I=i.settings,B;i.on("PreInit",function(){E=i.dom,R=i.selection,I=i.settings,A=i.formatter}),l(this,{execCommand:g,queryCommandState:v,queryCommandValue:y,queryCommandSupported:_,addCommands:b,addCommand:w,addQueryStateHandler:x,addQueryValueHandler:C,hasCustomCommand:k}),b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(e){var t=i.getDoc(),r;try{S(e)}catch(o){r=p}if(r||!t.queryCommandSupported(e)){var a=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(a=a.replace(/Ctrl\+/g,"⌘+")),i.notificationManager.open({text:a,type:"error"})}},unlink:function(){if(R.isCollapsed()){var e=R.getNode();return void("A"==e.tagName&&i.dom.remove(e,!0))}A.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&A.remove("align"+e)}),"none"!=t&&N("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;S(e),t=E.getParent(R.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(D(),E.split(n,t),M()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){N(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){N(e,n)},FontSize:function(e,t,n){var i,r;n>=1&&7>=n&&(r=d(I.font_size_style_values),i=d(I.font_size_classes),n=i?i[n-1]||n:r[n-1]||n),N(e,n)},RemoveFormat:function(e){A.remove(e)},mceBlockQuote:function(){N("blockquote")},FormatBlock:function(e,t,n){return N(n||"p")},mceCleanup:function(){var e=R.getBookmark();i.setContent(i.getContent({cleanup:p}),{cleanup:p}),R.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||R.getNode();r!=i.getBody()&&(D(),i.dom.remove(r,p),M())},mceSelectNodeDepth:function(e,t,n){var r=0;E.getParent(R.getNode(),function(e){return 1==e.nodeType&&r++==n?(R.select(e),m):void 0},i.getBody())},mceSelectNode:function(e,t,n){R.select(n)},mceInsertContent:function(t,n,o){function a(e){function t(e){return i[e]&&3==i[e].nodeType}var n,i,r;return n=R.getRng(!0),i=n.startContainer,r=n.startOffset,3==i.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<i.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(){var e,t,n;e=R.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&(" "===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(o)||(o+=" ")):" "===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(o)||(o=" "+o)))}function u(e){if(k)for(_=e.firstChild;_;_=_.walk(!0))T[_.name]&&_.attr("data-mce-new","true")}function c(){if(k){var e=i.getBody(),t=new r(E);s(E.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&E.remove(n,!0)})}}function d(e){function t(e){for(var t=i.getBody();e&&e!==t;e=e.parentNode)if("false"===i.dom.getContentEditable(e))return e;return null}var n;if(e){if(R.scrollIntoView(e),n=t(e))return E.remove(e),void R.select(n);w=E.createRng(),_=e.previousSibling,_&&3==_.nodeType?(w.setStart(_,_.nodeValue.length),h||(x=e.nextSibling,x&&3==x.nodeType&&(_.appendData(x.data),x.parentNode.removeChild(x)))):(w.setStartBefore(e),w.setEndBefore(e)),E.remove(e),R.setRng(w)}}var f,p,m,g,v,y,b,w,_,x,C,k,S,T=i.schema.getTextInlineElements();"string"!=typeof o&&(k=o.merge,S=o.data,o=o.content),/^ | $/.test(o)&&(o=a(o)),f=i.parser,p=new e({validate:I.validate},i.schema),C='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',y={content:o,format:"html",selection:!0},i.fire("BeforeSetContent",y),o=y.content,-1==o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,C),w=R.getRng();var N=w.startContainer||(w.parentElement?w.parentElement():null),D=i.getBody();N===D&&R.isCollapsed()&&E.isBlock(D.firstChild)&&E.isEmpty(D.firstChild)&&(w=E.createRng(),w.setStart(D.firstChild,0),w.setEnd(D.firstChild,0),R.setRng(w)),R.isCollapsed()||(i.getDoc().execCommand("Delete",!1,null),l()),m=R.getNode();var M={context:m.nodeName.toLowerCase(),data:S};if(v=f.parse(o,M),u(v),_=v.lastChild,"mce_marker"==_.attr("id"))for(b=_,_=_.prev;_;_=_.walk(!0))if(3==_.type||!E.isBlock(_.name)){i.schema.isValidChild(_.parent.name,"span")&&_.parent.insert(b,_,"br"===_.name);break}if(i._selectionOverrides.showBlockCaretContainer(m),M.invalid){for(R.setContent(C),m=R.getNode(),g=i.getBody(),9==m.nodeType?m=_=g:_=m;_!==g;)m=_,_=_.parentNode;o=m==g?g.innerHTML:E.getOuterHTML(m),o=p.serialize(f.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return p.serialize(v)}))),m==g?E.setHTML(g,o):E.setOuterHTML(m,o)}else o=p.serialize(v),_=m.firstChild,x=m.lastChild,!_||_===x&&"BR"===_.nodeName?E.setHTML(m,o):R.setContent(o);c(),d(E.get("mce_marker")),i.fire("SetContent",y),i.addVisual()},mceInsertRawHTML:function(e,t,n){R.setContent("tiny_mce_marker"),i.setContent(i.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){N(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,n,r;t=I.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),v("InsertUnorderedList")||v("InsertOrderedList")?S(e):(I.forced_root_block||E.getParent(R.getNode(),E.isBlock)||A.apply("div"),s(R.getSelectedBlocks(),function(o){if("false"!==E.getContentEditable(o)&&"LI"!=o.nodeName){var a=i.getParam("indent_use_margin",!1)?"margin":"padding";a+="rtl"==E.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(r=Math.max(0,parseInt(o.style[a]||0,10)-t),E.setStyle(o,a,r?r+n:"")):(r=parseInt(o.style[a]||0,10)+t+n,E.setStyle(o,a,r))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,R.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=E.getParent(R.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||A.remove("link"),n.href&&A.apply("link",n,i)},selectAll:function(){var e=E.getRoot(),t;R.getRng().setStart?(t=E.createRng(),t.setStart(e,0),t.setEnd(e,e.childNodes.length),R.setRng(t)):(t=R.getRng(),t.item||(t.moveToElementText(e),t.select()))},"delete":function(){S("Delete");var e=i.getBody();E.isEmpty(e)&&(i.setContent(""),e.firstChild&&E.isBlock(e.firstChild)?i.selection.setCursorLocation(e.firstChild,0):i.selection.setCursorLocation(e,0))},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(e,t,n){function r(){for(var e=new a(m,v),t,n=i.schema.getNonEmptyElements();t=e.next();)if(n[t.nodeName.toLowerCase()]||t.length>0)return!0}var s=n,l,u,c,d=R.getRng(!0);new o(E).normalize(d);var h=d.startOffset,m=d.startContainer;if(1==m.nodeType&&m.hasChildNodes()){var g=h>m.childNodes.length-1;m=m.childNodes[Math.min(h,m.childNodes.length-1)]||m,h=g&&3==m.nodeType?m.nodeValue.length:0}var v=E.getParent(m,E.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?E.getParent(v.parentNode,E.isBlock):null,w=b?b.nodeName.toUpperCase():"",_=s&&s.ctrlKey;"LI"!=w||_||(v=b,y=w),m&&3==m.nodeType&&h>=m.nodeValue.length&&(f||r()||(l=E.create("br"),d.insertNode(l),d.setStartAfter(l),d.setEndAfter(l),u=!0)),l=E.create("br"),d.insertNode(l);var x=E.doc.documentMode;return f&&"PRE"==y&&(!x||8>x)&&l.parentNode.insertBefore(E.doc.createTextNode("\r"),l),c=E.create("span",{},"&nbsp;"),l.parentNode.insertBefore(c,l),R.scrollIntoView(c),E.remove(c),u?(d.setStartBefore(l),d.setEndBefore(l)):(d.setStartAfter(l),d.setEndAfter(l)),R.setRng(d),i.undoManager.add(),p}}),b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=R.isCollapsed()?[E.getParent(R.getNode(),E.isBlock)]:R.getSelectedBlocks(),i=u(n,function(e){return!!A.matchNode(e,t)});return-1!==c(i,p)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return T(e)},mceBlockQuote:function(){return T("blockquote")},Outdent:function(){var e;if(I.inline_styles){if((e=E.getParent(R.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return p;if((e=E.getParent(R.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return p}return v("InsertUnorderedList")||v("InsertOrderedList")||!I.inline_styles&&!!E.getParent(R.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(R.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),b({"FontSize,FontName":function(e){var t=0,n;return(n=E.getParent(R.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),b({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}),i(te,[m],function(e){function t(e,o){var a=this,s,l;if(e=i(e),o=a.settings=o||{},s=o.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(a.source=e);var u=0===e.indexOf("//");0!==e.indexOf("/")||u||(e=(s?s.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(l=o.base_uri?o.base_uri.path:new t(location.href).directory,""===o.base_uri.protocol?e="//mce_host"+a.toAbsPath(l,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(s&&s.protocol||"http")+"://mce_host"+a.toAbsPath(l,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(r,function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),a[t]=i}),s&&(a.protocol||(a.protocol=s.protocol),a.userInfo||(a.userInfo=s.userInfo),a.port||"mce_host"!==a.host||(a.port=s.port),a.host&&"mce_host"!==a.host||(a.host=s.host),a.source=""),u&&(a.protocol="")}var n=e.each,i=e.trim,r="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),o={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n=this,i;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),o=e.getURI();return r==o||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==o?r:(i=n.toRelPath(n.path,e.path),e.query&&(i+="?"+e.query),e.anchor&&(i+="#"+e.anchor),i)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i=0,r="",o,a;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,a=e.length;a>o;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,a=n.length;a>o;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,a=e.length-(i-1);a>o;o++)r+="../";for(o=i-1,a=n.length;a>o;o++)r+=o!=i-1?"/"+n[o]:n[o];return r},toAbsPath:function(e,t){var i,r=0,o=[],a,s;for(a=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&o.push(e)}),e=o,i=t.length-1,o=[];i>=0;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?r>0?r--:o.push(t[i]):r++);return i=e.length-r,s=0>=i?o.reverse().join("/"):e.slice(0,i).join("/")+"/"+o.reverse().join("/"),0!==s.indexOf("/")&&(s="/"+s),a&&s.lastIndexOf("/")!==s.length-1&&(s+=a),s},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},t}),i(ne,[m],function(e){function t(){}var n=e.each,i=e.extend,r,o;return t.extend=r=function(e){function t(){var e,t,n,i=this;if(!o&&(i.init&&i.init.apply(i,arguments),t=i.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(i,arguments)}function a(){return this}function s(e,t){return function(){var n=this,i=n._super,r;return n._super=u[e],r=t.apply(n,arguments),n._super=i,r}}var l=this,u=l.prototype,c,d,h;o=!0,c=new l,o=!1,e.Mixins&&(n(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),u.Mixins&&(e.Mixins=u.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,i;return e!==i?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&u.Defaults&&(e.Defaults=i({},u.Defaults,e.Defaults));for(d in e)h=e[d],"function"==typeof h&&u[d]?c[d]=s(d,h):c[d]=h;return t.prototype=c,t.constructor=t,t.extend=r,t},t}),i(ie,[m],function(e){function t(t){function n(){return!1}function i(){return!0}function r(e,r){var o,s,l,u;if(e=e.toLowerCase(),r=r||{},r.type=e,r.target||(r.target=c),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=i},r.stopPropagation=function(){r.isPropagationStopped=i},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=i},r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(r),o=d[e])for(s=0,l=o.length;l>s;s++){if(u=o[s],u.once&&a(e,u.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(u.func.call(c,r)===!1)return r.preventDefault(),r}return r}function o(t,i,r,o){var a,s,l;if(i===!1&&(i=n),i)for(i={func:i},o&&e.extend(i,o),s=t.toLowerCase().split(" "),l=s.length;l--;)t=s[l],a=d[t],a||(a=d[t]=[],h(t,!0)),r?a.unshift(i):a.push(i);return u}function a(e,t){var n,i,r,o,a;if(e)for(o=e.toLowerCase().split(" "),n=o.length;n--;){if(e=o[n],i=d[e],!e){for(r in d)h(r,!1),delete d[r];return u}if(i){if(t)for(a=i.length;a--;)i[a].func===t&&(i=i.slice(0,a).concat(i.slice(a+1)),d[e]=i);else i.length=0;i.length||(h(e,!1),delete d[e])}}else{for(e in d)h(e,!1);d={}}return u}function s(e,t,n){return o(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var u=this,c,d={},h;t=t||{},c=t.scope||u,h=t.toggleEvent||n,u.fire=r,u.on=o,u.off=a,u.once=s,u.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),i(re,[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,i){function r(t){e.set(i,t.value)}function o(e){t.set(n,e.value)}var a;return e.on("change:"+i,o),t.on("change:"+n,r),a=e._bindings,a||(a=e._bindings=[],e.on("destroy",function(){for(var e=a.length;e--;)a[e]()})),a.push(function(){t.off("change:"+n,r)}),t.get(n)}})},e}),i(oe,[ie],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}})),t._eventDispatcher}return{fire:function(e,n,i){var r=this;if(r.removed&&"remove"!==e)return n;if(n=t(r).fire(e,n,i),i!==!1&&r.parent)for(var o=r.parent();o&&!n.isPropagationStopped();)o.fire(e,n,!1),o=o.parent();return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){
return t(this).has(e)}}}),i(ae,[re,oe,ne,m],function(e,t,n,i){function r(e){return e.nodeType>0}function o(e,t){var n,a;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(i.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!o(e[n],t[n]))return!1}if(r(e)||r(t))return e===t;a={};for(n in t){if(!o(e[n],t[n]))return!1;a[n]=!0}for(n in e)if(!a[n]&&!o(e[n],t[n]))return!1;return!0}return n.extend({Mixins:[t],init:function(t){var n,i;t=t||{};for(n in t)i=t[n],i instanceof e&&(t[n]=i.create(this,n));this.data=t},set:function(t,n){var i,r,a=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(i in t)this.set(i,t[i]);return this}return o(a,n)||(this.data[t]=n,r={target:this,name:t,value:n,oldValue:a},this.fire("change:"+t,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),i(se,[ne],function(e){function t(e){for(var t=[],n=e.length,i;n--;)i=e[n],i.__checked||(t.push(i),i.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,o,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function o(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(i){var r=i[e]?i[e]():"";return t?"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!=n:"^="===t?0===r.indexOf(n):"$="===t?r.substr(r.length-n.length)===n:!1:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=c(e[1],[]),function(e){return!d(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():!1})):void 0}function u(e,i,u){function c(e){e&&i.push(e)}var d;return d=n.exec(e.replace(r,"")),c(t(d[1])),c(o(d[2])),c(a(d[3])),c(s(d[4],d[5],d[6])),c(l(d[7])),i.pseudo=!!d[7],i.direct=u,i}function c(e,t){var n=[],r,o,a;do if(i.exec(""),o=i.exec(e),o&&(e=o[3],n.push(o[1]),o[2])){r=o[3];break}while(o);for(r&&c(r,t),e=[],a=0;a<n.length;a++)">"!=n[a]&&e.push(u(n[a],[],">"===n[a-1]));return t.push(e),t}var d=this.match;this._selectors=c(e,[])},match:function(e,t){var n,i,r,o,a,s,l,u,c,d,h,f,p;for(t=t||this._selectors,n=0,i=t.length;i>n;n++){for(a=t[n],o=a.length,p=e,f=0,r=o-1;r>=0;r--)for(u=a[r];p;){if(u.pseudo)for(h=p.parent().items(),c=d=h.length;c--&&h[c]!==p;);for(s=0,l=u.length;l>s;s++)if(!u[s](p,c,d)){s=l+1;break}if(s===l){f++;break}if(r===o-1)break;p=p.parent()}if(f===o)return!0}return!1},find:function(e){function n(e,t,r){var o,a,s,l,u,c=t[r];for(o=0,a=e.length;a>o;o++){for(u=e[o],s=0,l=c.length;l>s;s++)if(!c[s](u,o,a)){s=l+1;break}if(s===l)r==t.length-1?i.push(u):u.items&&n(u.items(),t,r+1);else if(c.direct)return;u.items&&n(u.items(),t,r)}}var i=[],r,s,l=this._selectors;if(e.items){for(r=0,s=l.length;s>r;r++)n(e.items(),l[r],0);s>1&&(i=t(i))}return o||(o=a.Collection),new o(i)}});return a}),i(le,[m,se,ne],function(e,t,n){var i,r,o=Array.prototype.push,a=Array.prototype.slice;return r={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof i?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t=this,n=t.length,i;for(t.length=0,t.add(e),i=t.length;n>i;i++)delete t[i];return t},filter:function(e){var n=this,r,o,a=[],s,l;for("string"==typeof e?(e=new t(e),l=function(t){return e.match(t)}):l=e,r=0,o=n.length;o>r;r++)s=n[r],l(s)&&a.push(s);return new i(a)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].classes.contains(e):!1},prop:function(e,t){var n=this,i,r;return t!==i?(n.each(function(n){n[e]&&n[e](t)}),n):(r=n[0],r&&r[e]?r[e]():void 0)},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,i)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){r[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){r[e]=function(t){return this.prop(e,t)}}),i=n.extend(r),t.Collection=i,i}),i(ue,[m,x],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,i,r){return t.DOM.bind(e,n,i,r)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),i(ce,[],function(){return{parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}}}}),i(de,[m],function(e){function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),i(he,[c],function(e){var t={},n;return{add:function(i){var r=i.parent();if(r){if(!r._layout||r._layout.isNative())return;t[r._id]||(t[r._id]=r),n||(n=!0,e.requestAnimationFrame(function(){var e,i;n=!1;for(e in t)i=t[e],i.state.get("rendered")&&i.reflow();t={}},document.body))}},remove:function(e){t[e._id]&&delete t[e._id]}}}),i(fe,[ne,m,ie,ae,le,ue,g,ce,de,he],function(e,t,n,i,r,o,a,s,l,u){function c(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){i&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&d(e))}})),e._eventDispatcher}function d(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function i(t){var n=e.getParentCtrl(t.target),i=u._lastHoverCtrl,r=0,o,a,s;if(n!==i){if(u._lastHoverCtrl=n,a=n.parents().toArray().reverse(),a.push(n),i){for(s=i.parents().toArray().reverse(),s.push(i),r=0;r<s.length&&a[r]===s[r];r++);for(o=s.length-1;o>=r;o--)i=s[o],i.fire("mouseleave",{target:i.getEl()})}for(o=r;o<a.length;o++)n=a[o],n.fire("mouseenter",{target:n.getEl()})}}function r(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-1/40*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var o,s,l,u,c,d;if(c=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),o=0,s=l.length;!u&&s>o;o++)u=l[o]._eventsRoot;for(u||(u=l[l.length-1]||e),e._eventsRoot=u,s=o,o=0;s>o;o++)l[o]._eventsRoot=u;var p=u._delegates;p||(p=u._delegates={});for(d in c){if(!c)return!1;"wheel"!==d||f?("mouseenter"===d||"mouseleave"===d?u._hasMouseEnter||(a(u.getEl()).on("mouseleave",n).on("mouseover",i),u._hasMouseEnter=1):p[d]||(a(u.getEl()).on(d,t),p[d]=!0),c[d]=!1):h?a(e.getEl()).on("mousewheel",r):a(e.getEl()).on("DOMMouseScroll",r)}}}var h="onmousewheel"in document,f=!1,p="mce-",m,g=0,v={Statics:{classPrefix:p},isRtl:function(){return m.rtl},classPrefix:p,init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)r.classes.add(e[t])}var r=this,o,u;r.settings=e=t.extend({},r.Defaults,e),r._id=e.id||"mceu_"+g++,r._aria={role:e.role},r._elmCache={},r.$=a,r.state=new i({visible:!0,active:!1,disabled:!1,value:""}),r.data=new i(e.data),r.classes=new l(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())}),r.classes.prefix=r.classPrefix,o=e.classes,o&&(r.Defaults&&(u=r.Defaults.classes,u&&o!=u&&n(u)),n(o)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&r[t](e[t])}),r.on("click",function(){return r.disabled()?!1:void 0}),r.settings=e,r.borderBox=s.parseBox(e.border),r.paddingBox=s.parseBox(e.padding),r.marginBox=s.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e=this,t=e.settings,n,i,r=e.getEl(),a,l,u,c,d,h,f,p;n=e.borderBox=e.borderBox||s.measureBox(r,"border"),e.paddingBox=e.paddingBox||s.measureBox(r,"padding"),e.marginBox=e.marginBox||s.measureBox(r,"margin"),p=o.getSize(r),h=t.minWidth,f=t.minHeight,u=h||p.width,c=f||p.height,a=t.width,l=t.height,d=t.autoResize,d="undefined"!=typeof d?d:!a&&!l,a=a||u,l=l||c;var m=n.left+n.right,g=n.top+n.bottom,v=t.maxWidth||65535,y=t.maxHeight||65535;return e._layoutRect=i={x:t.x||0,y:t.y||0,w:a,h:l,deltaW:m,deltaH:g,contentW:a-m,contentH:l-g,innerW:a-m,innerH:l-g,startMinWidth:h||0,startMinHeight:f||0,minW:Math.min(u,v),minH:Math.min(c,y),maxW:v,maxH:y,autoResize:d,scrollW:0},e._lastLayoutRect={},i},layoutRect:function(e){var t=this,n=t._layoutRect,i,r,o,a,s,l;return n||(n=t.initLayoutRect()),e?(o=n.deltaW,a=n.deltaH,e.x!==s&&(n.x=e.x),e.y!==s&&(n.y=e.y),e.minW!==s&&(n.minW=e.minW),e.minH!==s&&(n.minH=e.minH),r=e.w,r!==s&&(r=r<n.minW?n.minW:r,r=r>n.maxW?n.maxW:r,n.w=r,n.innerW=r-o),r=e.h,r!==s&&(r=r<n.minH?n.minH:r,r=r>n.maxH?n.maxH:r,n.h=r,n.innerH=r-a),r=e.innerW,r!==s&&(r=r<n.minW-o?n.minW-o:r,r=r>n.maxW-o?n.maxW-o:r,n.innerW=r,n.w=r+o),r=e.innerH,r!==s&&(r=r<n.minH-a?n.minH-a:r,r=r>n.maxH-a?n.maxH-a:r,n.innerH=r,n.h=r+a),e.contentW!==s&&(n.contentW=e.contentW),e.contentH!==s&&(n.contentH=e.contentH),i=t._lastLayoutRect,(i.x!==n.x||i.y!==n.y||i.w!==n.w||i.h!==n.h)&&(l=m.repaintControls,l&&l.map&&!l.map[t._id]&&(l.push(t),l.map[t._id]=!0),i.x=n.x,i.y=n.y,i.w=n.w,i.h=n.h),t):n},repaint:function(){var e=this,t,n,i,r,o,a,s,l,u,c;u=document.createRange?function(e){return e}:Math.round,t=e.getEl().style,r=e._layoutRect,l=e._lastRepaintRect||{},o=e.borderBox,a=o.left+o.right,s=o.top+o.bottom,r.x!==l.x&&(t.left=u(r.x)+"px",l.x=r.x),r.y!==l.y&&(t.top=u(r.y)+"px",l.y=r.y),r.w!==l.w&&(c=u(r.w-a),t.width=(c>=0?c:0)+"px",l.w=r.w),r.h!==l.h&&(c=u(r.h-s),t.height=(c>=0?c:0)+"px",l.h=r.h),e._hasBody&&r.innerW!==l.innerW&&(c=u(r.innerW),i=e.getEl("body"),i&&(n=i.style,n.width=(c>=0?c:0)+"px"),l.innerW=r.innerW),e._hasBody&&r.innerH!==l.innerH&&(c=u(r.innerH),i=i||e.getEl("body"),i&&(n=n||i.style,n.height=(c>=0?c:0)+"px"),l.innerH=r.innerH),e._lastRepaintRect=l,e.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(r){return t||i.parentsAndSelf().each(function(i){var r=i.settings.callbacks;return r&&(t=r[e])?(n=i,!1):void 0}),t?t.call(n,r):(r.action=e,void this.fire("execute",r))}}var i=this;return c(i).on(e,n(t)),i},off:function(e,t){return c(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=c(i).fire(e,t),n!==!1&&i.parent)for(var r=i.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return c(this).has(e)},parents:function(e){var t=this,n,i=new r;for(n=t.parent();n;n=n.parent())i.add(n);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=a("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&i.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return m.translate?m.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),i,r;if(e.items){var o=e.items().toArray();for(r=o.length;r--;)o[r].remove()}n&&n.items&&(i=[],n.items().each(function(t){t!==e&&i.push(t)}),n.items().set(i),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&a(t).off();var s=e.getRoot().controlIdLookup;return s&&delete s[e._id],t&&t.parentNode&&t.parentNode.removeChild(t),e.state.set("rendered",!1),e.state.destroy(),e.fire("remove"),e},renderBefore:function(e){return a(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return a(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e=this,t=e.settings,n,i,r,o,s;e.$el=a(e.getEl()),e.state.set("rendered",!0);for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(r=e.parent();!s&&r;r=r.parent())s=r._eventsRoot;if(s)for(o in s._nativeEvents)e._nativeEvents[o]=!0}d(e),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e.settings.border&&(i=e.borderBox,e.$el.css({"border-top-width":i.top,"border-right-width":i.right,"border-bottom-width":i.bottom,"border-left-width":i.left}));var l=e.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[e._id]=e;for(var c in e._aria)e.aria(c,e._aria[c]);e.state.get("visible")===!1&&(e.getEl().style.display="none"),e.bindStates(),e.state.on("change:visible",function(t){var n=t.value,i;e.state.get("rendered")&&(e.getEl().style.display=n===!1?"none":"",e.getEl().getBoundingClientRect()),i=e.parent(),i&&(i._lastRect=null),e.fire(n?"show":"hide"),u.add(e)}),e.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,i,r=e;for(n=i=0;r&&r!=t&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}var n=this.getEl(),i=n.parentNode,r,o,a,s,l,u,c=t(n,i);return r=c.x,o=c.y,a=n.offsetWidth,s=n.offsetHeight,l=i.clientWidth,u=i.clientHeight,"end"==e?(r-=l-a,o-=u-s):"center"==e&&(r-=l/2-a/2,o-=u/2-s/2),i.scrollLeft=r,i.scrollTop=o,this},getRoot:function(){for(var e=this,t,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var i=n.length;i--;)n[i].rootControl=t;return t},reflow:function(){u.remove(this);var e=this.parent();return e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){v[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),m=e.extend(v)}),i(pe,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,i){var r,o,a;if(!t){a=tinymce.ui;for(o in a)e[o.toLowerCase()]=a[o];t=!0}if("string"==typeof n?(i=i||{},i.type=n):(i=n,n=i.type),n=n.toLowerCase(),r=e[n],!r)throw new Error("Could not find control by type: "+n);return r=new r(i),r.type=n,r}}}),i(me,[],function(){return function(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||w,t(e)?e.getAttribute("role"):null}function i(e){for(var t,i=e||w;i=i.parentNode;)if(t=n(i))return t}function r(e){var n=w;return t(n)?n.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function a(e){return o(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(n(e))?!0:!1}function s(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){a(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||b.getEl()),n}function l(e){var t,n;e=e||_,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function u(e){var t=l(e),n=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,i=l();t=t||s(i.getEl());for(var r=0;r<t.length;r++)t[r]===w&&(n=r);n+=e,i.lastAriaIndex=c(n,t)}function h(){var e=i();"tablist"==e?d(-1,s(w.parentNode)):_.parent().submenu?v():d(-1)}function f(){var e=n(),t=i();"tablist"==t?d(1,s(w.parentNode)):"menuitem"==e&&"menu"==t&&r("haspopup")?y():d(1)}function p(){d(-1)}function m(){var e=n(),t=i();"menuitem"==e&&"menubar"==t?y():"button"==e&&r("haspopup")?y({key:"down"}):d(1)}function g(e){var t=i();if("tablist"==t){var n=s(_.getEl("body"))[0];n&&n.focus()}else d(e.shiftKey?-1:1)}function v(){_.fire("cancel")}function y(e){e=e||{},_.fire("click",{target:w,aria:e})}var b=e.root,w,_;try{w=document.activeElement}catch(x){w=document.body}return _=b.getParentCtrl(w),b.on("keydown",function(e){function t(e,t){o(w)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,h);break;case 39:t(e,f);break;case 38:t(e,p);break;case 40:t(e,m);break;case 27:v();break;case 14:case 13:case 32:t(e,y);break;case 9:g(e)!==!1&&e.preventDefault()}}),b.on("focusin",function(e){w=e.target,_=e.control}),{focusFirst:u}}}),i(ge,[fe,le,se,pe,me,m,g,de,he],function(e,t,n,i,r,o,a,s,l){var u={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=i.create((e.layout||"")+"layout"),n.settings.items?n.add(n.settings.items):n.add(n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,i,r;return e&&(i=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void i.focusFirst(t):(r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(e){return e.settings.autofocus?(n=null,!1):void(e.canFocus&&(n=n||e))}),n&&n.focus(),t)},replace:function(e,t){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===e){i[r]=t;break}r>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,r,a=[];return o.isArray(t)||(t=[t]),o.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),r=o.extend({},n.settings.defaults,t),t.type=r.type=r.type||t.type||n.settings.defaultType||(r.defaults?r.defaults.type:null),t=i.create(r)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i;t.parent(e),t.state.get("rendered")||(i=e.getEl("body"),i.hasChildNodes()&&n<=i.childNodes.length-1?a(i.childNodes[n]).before(t.renderHtml()):a(i).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i=this,r,o,a;return e=i.create(e),r=i.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(o=r.slice(0,t).toArray(),a=r.slice(t).toArray(),r.set(o.concat(e,a))),i.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&(t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=new r({root:e})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),i(ve,[g],function(e){function t(e){var t,n,i,r,o,a,s,l,u=Math.max;return t=e.documentElement,n=e.body,i=u(t.scrollWidth,n.scrollWidth),r=u(t.clientWidth,n.clientWidth),o=u(t.offsetWidth,n.offsetWidth),a=u(t.scrollHeight,n.scrollHeight),s=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:o>i?r:i,height:l>a?s:a}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(i,r){function o(){return s.getElementById(r.handle||i)}var a,s=r.document||document,l,u,c,d,h,f;r=r||{},u=function(i){var u=t(s),p,m;n(i),i.preventDefault(),l=i.button,p=o(),h=i.screenX,f=i.screenY,m=window.getComputedStyle?window.getComputedStyle(p,null).getPropertyValue("cursor"):p.runtimeStyle.cursor,a=e("<div>").css({position:"absolute",top:0,left:0,width:u.width,height:u.height,zIndex:2147483647,opacity:1e-4,cursor:m}).appendTo(s.body),e(s).on("mousemove touchmove",d).on("mouseup touchend",c),r.start(i)},d=function(e){return n(e),e.button!==l?c(e):(e.deltaX=e.screenX-h,e.deltaY=e.screenY-f,e.preventDefault(),void r.drag(e))},c=function(t){n(t),e(s).off("mousemove touchmove",d).off("mouseup touchend",c),a.remove(),r.stop&&r.stop(t)},this.destroy=function(){e(o()).off()},e(o()).on("mousedown touchstart",u)}}),i(ye,[g,ve],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,u,c){var d,h,f,p,m,g,v,y,b;if(h=r.getEl("scroll"+t)){if(y=a.toLowerCase(),b=s.toLowerCase(),e(r.getEl("absend")).css(y,r.layoutRect()[l]-1),!u)return void e(h).css("display","none");e(h).css("display","block"),d=r.getEl("body"),f=r.getEl("scroll"+t+"t"),p=d["client"+s]-2*o,p-=n&&i?h["client"+c]:0,m=d["scroll"+s],g=p/m,v={},v[y]=d["offset"+a]+o,v[b]=p,e(h).css(v),v={},v[y]=d["scroll"+a]*g,v[b]=p*g,e(f).css(v)}}var n,i,a;a=r.getEl("body"),n=a.scrollWidth>a.clientWidth,i=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",i,"Width")}function i(){function n(n,i,a,s,l){var u,c=r._id+"-scroll"+n,d=r.classPrefix;e(r.getEl()).append('<div id="'+c+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+c+'t" class="'+d+'scrollbar-thumb"></div></div>'),r.draghelper=new t(c+"t",{start:function(){u=r.getEl("body")["scroll"+i],e("#"+c).addClass(d+"active")},drag:function(e){var t,c,d,h,f=r.layoutRect();c=f.contentW>f.innerW,d=f.contentH>f.innerH,h=r.getEl("body")["client"+a]-2*o,h-=c&&d?r.getEl("scroll"+n)["client"+l]:0,t=h/r.getEl("body")["scroll"+a],r.getEl("body")["scroll"+i]=u+e["delta"+s]/t},stop:function(){e("#"+c).removeClass(d+"active")}})}r.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var r=this,o=2;r.settings.autoScroll&&(r._hasScroll||(r._hasScroll=!0,i(),r.on("wheel",function(e){var t=r.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(r.getEl("body")).on("scroll",n)),n())}}}),i(be,[ge,ye],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),i(we,[ue],function(e){function t(t,n,i){var r,o,a,s,l,u,c,d,h,f;return h=e.getViewPort(),o=e.getPos(n),a=o.x,s=o.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=h.x,s-=h.y),r=t.getEl(),f=e.getSize(r),l=f.width,u=f.height,f=e.getSize(n),c=f.width,d=f.height,i=(i||"").split(""),"b"===i[0]&&(s+=d),"r"===i[1]&&(a+=c),"c"===i[0]&&(s+=Math.round(d/2)),"c"===i[1]&&(a+=Math.round(c/2)),"b"===i[3]&&(s-=u),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(u/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:u}}return{testMoveRel:function(n,i){for(var r=e.getViewPort(),o=0;o<i.length;o++){var a=t(this,n,i[o]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<r.w&&a.y>0&&a.y+a.h<r.h)return i[o]}else if(a.x>r.x&&a.x+a.w<r.w+r.x&&a.y>r.y&&a.y+a.h<r.h+r.y)return i[o]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){function i(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var r=this;if(r.settings.constrainToViewport){var o=e.getViewPort(window),a=r.layoutRect();t=i(t,o.w+o.x,a.w),n=i(n,o.h+o.y,a.h)}return r.state.get("rendered")?r.layoutRect({x:t,y:n}).repaint():(r.settings.x=t,r.settings.y=n),r.fire("move",{x:t,y:n}),r}}}),i(_e,[ue],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var i=e.getWindowSize();t=1>=t?t*i.w:t,n=1>=n?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),i(xe,[be,we,_e,ue,g,c],function(e,t,n,i,r,o){function a(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function s(e){for(var t=v.length;t--;){var n=v[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i&&(a(i,n)||n.parent()===i))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){p||(p=function(e){2!=e.button&&s(e)},r(document).on("click touchstart",p))}function u(){m||(m=function(){var e;for(e=v.length;e--;)d(v[e])},r(window).on("scroll",m))}function c(){if(!g){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;g=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,w.hideAll())},r(window).on("resize",g)}}function d(e){function t(t,n){for(var i,r=0;r<v.length;r++)if(v[r]!=e)for(i=v[r].parent();i&&(i=i.parent());)i==e&&v[r].fixed(t).moveBy(0,n).repaint()}var n=i.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function h(e,t){var n,i=w.zIndex||65535,o;if(e)y.push(t);else for(n=y.length;n--;)y[n]===t&&y.splice(n,1);if(y.length)for(n=0;n<y.length;n++)y[n].modal&&(i++,o=y[n]),y[n].getEl().style.zIndex=i,y[n].zIndex=i,i++;var a=document.getElementById(t.classPrefix+"modal-block");o?r(a).css("z-index",o.zIndex-1):a&&(a.parentNode.removeChild(a),b=!1),w.currentZIndex=i}function f(e){var t;for(t=v.length;t--;)v[t]===e&&v.splice(t,1);for(t=y.length;t--;)y[t]===e&&y.splice(t,1)}var p,m,g,v=[],y=[],b,w=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),c(),v.push(t)),e.autofix&&(u(),t.on("move",function(){d(this)})),t.on("postrender show",function(e){if(e.control==t){var n,i=t.classPrefix;t.modal&&!b&&(n=r("#"+i+"modal-block"),n[0]||(n=r('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(t.getContainerElm())),o.setTimeout(function(){n.addClass(i+"in"),r(t.getEl()).addClass(i+"in")}),b=!0),h(!0,t)}}),t.on("show",function(){t.parents().each(function(e){return e.state.get("fixed")?(t.fixed(!0),!1):void 0})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e=this,t,n=e._super();for(t=v.length;t--&&v[t]!==e;);return-1===t&&v.push(e),n},hide:function(){return f(this),h(!1,this),this._super()},hideAll:function(){w.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),h(!1,e)),e},remove:function(){f(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),
e._super()}});return w.hideAll=function(){for(var e=v.length;e--;){var t=v[e];t&&t.settings.autohide&&(t.hide(),v.splice(e,1))}},w}),i(Ce,[xe,be,ue,g,ve,ce,f,c],function(e,t,n,i,r,o,a,s){function l(e){var t="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",n=i("meta[name=viewport]")[0],r;a.overrideViewPort!==!1&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),r=n.getAttribute("content"),r&&"undefined"!=typeof h&&(h=r),n.setAttribute("content",e?t:h))}function u(e){for(var t=0;t<d.length;t++)if(d[t]._fullscreen)return;i([document.documentElement,document.body]).removeClass(e+"fullscreen")}function c(){function e(){var e,t=n.getWindowSize(),i;for(e=0;e<d.length;e++)i=d[e].layoutRect(),d[e].moveTo(d[e].settings.x||Math.max(0,t.w/2-i.w/2),d[e].settings.y||Math.max(0,t.h/2-i.h/2))}var t={w:window.innerWidth,h:window.innerHeight};s.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;(t.w!=e||t.h!=n)&&(t={w:e,h:n},i(window).trigger("resize"))},100),i(window).on("resize",e)}var d=[],h="",f=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,i,r,o,a;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),i=e.layoutRect(),e.settings.title&&!e._fullscreen&&(r=i.headerW,r>i.w&&(o=i.x-Math.max(0,r/2),e.layoutRect({w:r,x:o}),a=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),r=t.layoutRect().minW+i.deltaW,r>i.w&&(o=i.x-Math.max(0,r-i.w),e.layoutRect({w:r,x:o}),a=!0)),a&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),i=0,r;if(e.settings.title&&!e._fullscreen){r=e.getEl("head");var o=n.getSize(r);t.headerW=o.width,t.headerH=o.height,i+=t.headerH}e.statusbar&&(i+=e.statusbar.layoutRect().h),t.deltaH+=i,t.minH+=i,t.h+=i;var a=n.getWindowSize();return t.x=e.settings.x||Math.max(0,a.w/2-t.w/2),t.y=e.settings.y||Math.max(0,a.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,r=e.settings,o="",a="",s=r.html;return e.preRender(),t.preRender(e),r.title&&(o='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(r.title)+'</div><button type="button" class="'+i+'close" aria-hidden="true">×</button><div id="'+n+'-dragh" class="'+i+'dragh"></div></div>'),r.url&&(s='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t=this,r=document.documentElement,a,l=t.classPrefix,u;if(e!=t._fullscreen)if(i(window).on("resize",function(){var e;if(t._fullscreen)if(a)t._timer||(t._timer=s.setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var i=n.getWindowSize();t.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50&&(a=!0)}}),u=t.layoutRect(),t._fullscreen=e,e){t._initial={x:u.x,y:u.y,w:u.w,h:u.h},t.borderBox=o.parseBox("0"),t.getEl("head").style.display="none",u.deltaH-=u.headerH+2,i([r,document.body]).addClass(l+"fullscreen"),t.classes.add("fullscreen");var c=n.getWindowSize();t.moveTo(0,0).resizeTo(c.w,c.h)}else t.borderBox=o.parseBox(t.settings.border),t.getEl("head").style.display="",u.deltaH+=u.headerH,i([r,document.body]).removeClass(l+"fullscreen"),t.classes.remove("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t;setTimeout(function(){e.classes.add("in")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new r(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),d.push(e),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),t=d.length;t--;)d[t]===e&&d.splice(t,1);l(d.length>0),u(e.classPrefix)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return a.desktop||c(),f}),i(ke,[Ce],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),o(t)}}}var r,o=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[i("Ok",!0,!0),i("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:r=[i("Yes",1,!0),i("No",0)],n.buttons==t.YES_NO_CANCEL&&r.push(i("Cancel",-1));break;default:r=[i("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){o(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),i(Se,[Ce,ke],function(e,t){return function(n){function i(){return o.length?o[o.length-1]:void 0}var r=this,o=[];r.windows=o,n.on("remove",function(){for(var e=o.length;e--;)o[e].close()}),r.open=function(t,i){var r;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new e(t),o.push(r),r.on("close",function(){for(var e=o.length;e--;)o[e]===r&&o.splice(e,1);o.length||n.focus()}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),r.features=t||{},r.params=i||{},1===o.length&&n.nodeChanged(),r.renderTo().reflow()},r.alert=function(e,i,r){t.alert(e,function(){i?i.call(r||this):n.focus()})},r.confirm=function(e,n,i){t.confirm(e,function(e){n.call(i||this,e)})},r.close=function(){i()&&i().close()},r.getParams=function(){return i()?i().params:null},r.setParams=function(e){i()&&(i().params=e)},r.getWindows=function(){return o}}}),i(Te,[fe,we],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),i(Ne,[fe,Te],function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&i.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var r=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"==r),i.classes.toggle("tooltip-nw","bc-tl"==r),i.classes.toggle("tooltip-ne","bc-tr"==r),i.moveRel(t.getEl(),r)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),i(De,[Ne],function(e){return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),i(Me,[fe,we,De],function(e,t,n){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",i="",r="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(o=' style="background-color: '+e.color+'"'),e.closeButton&&(i='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(r=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+i+"</div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),i(Ee,[Me,c],function(e,t){return function(n){function i(){return l.length?l[l.length-1]:void 0}function r(){t.requestAnimationFrame(function(){o(),a()})}function o(){for(var e=0;e<l.length;e++)l[e].moveTo(0,0)}function a(){if(l.length>0){var e=l.slice(0,1)[0],t=n.inline?n.getElement():n.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),l.length>1)for(var i=1;i<l.length;i++)l[i].moveRel(l[i-1].getEl(),"bc-tc")}}var s=this,l=[];s.notifications=l,n.on("remove",function(){for(var e=l.length;e--;)l[e].close()}),n.on("ResizeEditor",a),n.on("ResizeWindow",r),s.open=function(t){var i;return n.editorManager.setActive(n),i=new e(t),l.push(i),t.timeout>0&&(i.timer=setTimeout(function(){i.close()},t.timeout)),i.on("close",function(){var e=l.length;for(i.timer&&n.getWin().clearTimeout(i.timer);e--;)l[e]===i&&l.splice(e,1);a()}),i.renderTo(),a(),i},s.close=function(){i()&&i().close()},s.getNotifications=function(){return l}}}),i(Re,[x],function(e){function t(t,n,i){for(var r=[];n&&n!=t;n=n.parentNode)r.push(e.nodeIndex(n,i));return r}function n(e,t){var n,i,r;for(i=e,n=t.length-1;n>=0;n--){if(r=i.childNodes,t[n]>r.length-1)return null;i=r[t[n]]}return i}return{create:t,resolve:n}}),i(Ae,[O,D,y,Re,E,w,f,m,c,N],function(e,t,n,i,r,o,a,s,l,u){return function(c){function d(e,t){try{c.getDoc().execCommand(e,!1,t)}catch(n){}}function h(){var e=c.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function p(e){var t,n;e.dataTransfer&&(c.selection.isCollapsed()&&"IMG"==e.target.tagName&&Q.select(e.target),t=c.selection.getContent(),t.length>0&&(n=oe+escape(c.id)+","+escape(t),e.dataTransfer.setData(ae,n)))}function m(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(ae),t&&t.indexOf(oe)>=0)?(t=t.substr(oe.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function g(e){c.queryCommandSupported("mceInsertClipboardContent")?c.execCommand("mceInsertClipboardContent",!1,{content:e}):c.execCommand("mceInsertContent",!1,e)}function v(){function r(e){var t=w.schema.getBlockElements(),n=c.getBody();if("BR"!=e.nodeName)return!1;for(e=e;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return!1;return!0}function o(e,t){var n;for(n=e.nextSibling;n&&n!=t;n=n.nextSibling)if((3!=n.nodeType||0!==G.trim(n.data).length)&&n!==t)return!1;return n===t}function a(e,t,i){var o,a,s;for(s=w.schema.getNonEmptyElements(),o=new n(i||e,e);a=o[t?"next":"prev"]();){if(s[a.nodeName]&&!r(a))return a;if(3==a.nodeType&&a.data.length>0)return a}}function u(e){var n,i,r,o,s;if(!e.collapsed&&(n=w.getParent(t.getNode(e.startContainer,e.startOffset),w.isBlock),i=w.getParent(t.getNode(e.endContainer,e.endOffset),w.isBlock),s=c.schema.getTextBlockElements(),n!=i&&s[n.nodeName]&&s[i.nodeName]&&"false"!==w.getContentEditable(n)&&"false"!==w.getContentEditable(i)))return e.deleteContents(),r=a(n,!1),o=a(i,!0),w.isEmpty(i)||G(n).append(i.childNodes),G(i).remove(),r?1==r.nodeType?"BR"==r.nodeName?(e.setStartBefore(r),e.setEndBefore(r)):(e.setStartAfter(r),e.setEndAfter(r)):(e.setStart(r,r.data.length),e.setEnd(r,r.data.length)):o&&(1==o.nodeType?(e.setStartBefore(o),e.setEndBefore(o)):(e.setStart(o,0),e.setEnd(o,0))),_.setRng(e),!0}function d(e,n){var i,r,s,l,u,d;if(!e.collapsed)return e;if(u=e.startContainer,d=e.startOffset,3==u.nodeType)if(n){if(d<u.data.length)return e}else if(d>0)return e;if(i=t.getNode(e.startContainer,e.startOffset),s=w.getParent(i,w.isBlock),r=a(c.getBody(),n,i),l=w.getParent(r,w.isBlock),!i||!r)return e;if(l&&s!=l)if(n){if(!o(s,l))return e;1==i.nodeType?"BR"==i.nodeName?e.setStartBefore(i):e.setStartAfter(i):e.setStart(i,i.data.length),1==r.nodeType?e.setEnd(r,0):e.setEndBefore(r)}else{if(!o(l,s))return e;1==r.nodeType?"BR"==r.nodeName?e.setStartBefore(r):e.setStartAfter(r):e.setStart(r,r.data.length),1==i.nodeType?e.setEnd(i,0):e.setEndBefore(i)}return e}function h(e){var t=_.getRng();return t=d(t,e),u(t)?!0:void 0}function v(e,t){function n(e,n){return m=G(n).parents().filter(function(e,t){return!!c.schema.getTextInlineElements()[t.nodeName]}),l=e.cloneNode(!1),m=s.map(m,function(e){return e=e.cloneNode(!1),l.hasChildNodes()?(e.appendChild(l.firstChild),l.appendChild(e)):l.appendChild(e),l.appendChild(e),e}),m.length?(p=w.create("br"),m[0].appendChild(p),w.replace(l,e),t.setStartBefore(p),t.setEndBefore(p),c.selection.setRng(t),p):null}function r(e){return e&&c.schema.getTextBlockElements()[e.tagName]}var o,a,l,u,d,h,f,p,m;if(t.collapsed&&(h=t.startContainer,f=t.startOffset,a=w.getParent(h,w.isBlock),r(a)))if(1==h.nodeType){if(h=h.childNodes[f],h&&"BR"!=h.tagName)return;if(d=e?a.nextSibling:a.previousSibling,w.isEmpty(a)&&r(d)&&w.isEmpty(d)&&n(a,h))return w.remove(d),!0}else if(3==h.nodeType){if(o=i.create(a,h),u=a.cloneNode(!0),h=i.resolve(u,o),e){if(f>=h.data.length)return;h.deleteData(f,1)}else{if(0>=f)return;h.deleteData(f-1,1)}if(w.isEmpty(u))return n(a,h)}}function y(e){var t,n,i;h(e)||(s.each(c.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&c.dom.setAttrib(e,"style",c.dom.getAttrib(e,"style"))}),t=new x(function(){}),t.observe(c.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),c.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),n=c.selection.getRng(),i=n.startContainer.parentNode,s.each(t.takeRecords(),function(e){if(w.isChildOf(e.target,c.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,r;e==i&&(t=n.startOffset,r=e.firstChild),w.remove(e,!0),r&&(n.setStart(r,t),n.setEnd(r,t),c.selection.setRng(n))}})}}),t.disconnect(),s.each(c.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")}))}var b=c.getDoc(),w=c.dom,_=c.selection,x=window.MutationObserver,C,k;x||(C=!0,x=function(){function e(e){var t=e.relatedNode||e.target;n.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;n.push({target:t,attributeName:e.attrName})}var n=[],i;this.observe=function(n){i=n,i.addEventListener("DOMSubtreeModified",e,!1),i.addEventListener("DOMNodeInsertedIntoDocument",e,!1),i.addEventListener("DOMNodeInserted",e,!1),i.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){i.removeEventListener("DOMSubtreeModified",e,!1),i.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),i.removeEventListener("DOMNodeInserted",e,!1),i.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return n}}),c.on("keydown",function(e){var t=e.keyCode==X,n=e.ctrlKey||e.metaKey;if(!f(e)&&(t||e.keyCode==K)){var i=c.selection.getRng(),r=i.startContainer,o=i.startOffset;if(t&&e.shiftKey)return;if(v(t,i))return void e.preventDefault();if(!n&&i.collapsed&&3==r.nodeType&&(t?o<r.data.length:o>0))return;e.preventDefault(),n&&c.selection.getSel().modify("extend",t?"forward":"backward",e.metaKey?"lineboundary":"word"),y(t)}}),c.on("keypress",function(t){if(!f(t)&&!_.isCollapsed()&&t.charCode>31&&!e.metaKeyPressed(t)){var n,i,r,o,a,s;n=c.selection.getRng(),s=String.fromCharCode(t.charCode),t.preventDefault(),i=G(n.startContainer).parents().filter(function(e,t){return!!c.schema.getTextInlineElements()[t.nodeName]}),y(!0),i=i.filter(function(e,t){return!G.contains(c.getBody(),t)}),i.length?(r=w.createFragment(),i.each(function(e,t){t=t.cloneNode(!1),r.hasChildNodes()?(t.appendChild(r.firstChild),r.appendChild(t)):(a=t,r.appendChild(t)),r.appendChild(t)}),a.appendChild(c.getDoc().createTextNode(s)),o=w.getParent(n.startContainer,w.isBlock),w.isEmpty(o)?G(o).empty().append(r):n.insertNode(r),n.setStart(a.firstChild,1),n.setEnd(a.firstChild,1),c.selection.setRng(n)):c.selection.setContent(s)}}),c.addCommand("Delete",function(){y()}),c.addCommand("ForwardDelete",function(){y(!0)}),C||(c.on("dragstart",function(e){k=_.getRng(),p(e)}),c.on("drop",function(e){if(!f(e)){var n=m(e);n&&(e.preventDefault(),l.setEditorTimeout(c,function(){var i=t.getCaretRangeFromPoint(e.x,e.y,b);k&&(_.setRng(k),k=null),y(),_.setRng(i),g(n.html)}))}}),c.on("cut",function(e){f(e)||!e.clipboardData||c.selection.isCollapsed()||(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",c.selection.getContent()),e.clipboardData.setData("text/plain",c.selection.getContent({format:"text"})),l.setEditorTimeout(c,function(){y(!0)}))}))}function y(){function e(e){var t=J.create("body"),n=e.cloneContents();return t.appendChild(n),Q.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(c.getBody()),t.compareRanges(n,i)}var r=e(n),o=J.createRng();o.selectNode(c.getBody());var a=e(o);return r===a}c.on("keydown",function(e){var t=e.keyCode,i,r;if(!f(e)&&(t==X||t==K)){if(i=c.selection.isCollapsed(),r=c.getBody(),i&&!J.isEmpty(r))return;if(!i&&!n(c.selection.getRng()))return;e.preventDefault(),c.setContent(""),r.firstChild&&J.isBlock(r.firstChild)?c.selection.setCursorLocation(r.firstChild,0):c.selection.setCursorLocation(r,0),c.nodeChanged()}})}function b(){c.shortcuts.add("meta+a",null,"SelectAll")}function w(){c.settings.content_editable||J.bind(c.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==c.getDoc().documentElement)if(t=Q.getRng(),c.getBody().focus(),"mousedown"==e.type){if(u.isCaretContainer(t.startContainer))return;Q.placeCaretAt(e.clientX,e.clientY)}else Q.setRng(t)})}function _(){c.on("keydown",function(e){if(!f(e)&&e.keyCode===K){if(!c.getBody().getElementsByTagName("hr").length)return;if(Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return J.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(J.remove(n),e.preventDefault())}}})}function x(){window.Range.prototype.getClientRects||c.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=c.getBody();t.blur(),l.setEditorTimeout(c,function(){t.focus()})}})}function C(){c.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==J.getContentEditableParent(t)&&(e.preventDefault(),Q.getSel().setBaseAndExtent(t,0,t,1),c.nodeChanged()),"A"==t.nodeName&&J.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),Q.select(t))})}function k(){function e(){var e=J.getAttribs(Q.getStart().cloneNode(!1));return function(){var t=Q.getStart();t!==c.getBody()&&(J.setAttrib(t,"style",null),q(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!Q.isCollapsed()&&J.getParent(Q.getStart(),J.isBlock)!=J.getParent(Q.getEnd(),J.isBlock)}c.on("keypress",function(n){var i;return f(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(i=e(),c.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1)}),J.bind(c.getDoc(),"cut",function(n){var i;!f(n)&&t()&&(i=e(),l.setEditorTimeout(c,function(){i()}))})}function S(){document.body.setAttribute("role","application")}function T(){c.on("keydown",function(e){if(!f(e)&&e.keyCode===K&&Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function N(){h()>7||(d("RespectVisibilityInDesign",!0),c.contentStyles.push(".mceHideBrInPre pre br {display: none}"),J.addClass(c.getBody(),"mceHideBrInPre"),ee.addNodeFilter("pre",function(e){for(var t=e.length,n,i,o,a;t--;)for(n=e[t].getAll("br"),i=n.length;i--;)o=n[i],a=o.prev,a&&3===a.type&&"\n"!=a.value.charAt(a.value-1)?a.value+="\n":o.parent.insert(new r("#text",3),o,!0).value="\n"}),te.addNodeFilter("pre",function(e){for(var t=e.length,n,i,r,o;t--;)for(n=e[t].getAll("br"),i=n.length;i--;)r=n[i],o=r.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function D(){J.bind(c.getBody(),"mouseup",function(){var e,t=Q.getNode();"IMG"==t.nodeName&&((e=J.getStyle(t,"width"))&&(J.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),J.setStyle(t,"width","")),(e=J.getStyle(t,"height"))&&(J.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),J.setStyle(t,"height","")))})}function M(){c.on("keydown",function(t){var n,i,r,o,a;if(!f(t)&&t.keyCode==e.BACKSPACE&&(n=Q.getRng(),i=n.startContainer,r=n.startOffset,o=J.getRoot(),a=i,n.collapsed&&0===r)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(c.formatter.toggle("blockquote",null,a),n=J.createRng(),n.setStart(i,0),n.setEnd(i,0),Q.setRng(n))}})}function E(){function e(){c._refreshContentEditable(),d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),Z.object_resizing||d("enableObjectResizing",!1)}Z.readonly||c.on("BeforeExecCommand MouseDown",e)}function R(){function e(){q(J.select("a"),function(e){var t=e.parentNode,n=J.getRoot();if(t.lastChild===e){for(;t&&!J.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}J.add(t,"br",{"data-mce-bogus":1})}})}c.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function A(){Z.forced_root_block&&c.on("init",function(){d("DefaultParagraphSeparator",Z.forced_root_block)})}function P(){c.on("keydown",function(e){var t;f(e)||e.keyCode!=K||(t=c.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),c.undoManager.beforeChange(),J.remove(t.item(0)),c.undoManager.add()))})}function I(){var e;h()>=10&&(e="",q("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),c.contentStyles.push(e+"{padding-right: 1px !important}"))}function B(){h()<9&&(ee.addNodeFilter("noscript",function(e){for(var t=e.length,n,i;t--;)n=e[t],i=n.firstChild,i&&n.attr("data-mce-innertext",i.value)}),te.addNodeFilter("noscript",function(e){for(var t=e.length,n,i,a;t--;)n=e[t],i=e[t].firstChild,i?i.value=o.decode(i.value):(a=n.attributes.map["data-mce-innertext"],a&&(n.attr("data-mce-innertext",null),i=new r("#text",3),i.value=a,i.raw=!0,n.append(i)))}))}function H(){function e(e,t){var n=r.createTextRange();try{n.moveToPoint(e,t)}catch(i){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",a)>0?i.setEndPoint("StartToStart",a):i.setEndPoint("EndToEnd",a),i.select())):n()}function n(){var e=i.selection.createRange();a&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&a.select(),J.unbind(i,"mouseup",n),J.unbind(i,"mousemove",t),a=o=0}var i=J.doc,r=i.body,o,a,s;i.documentElement.unselectable=!0,J.bind(i,"mousedown contextmenu",function(r){if("HTML"===r.target.nodeName){if(o&&n(),s=i.documentElement,s.scrollHeight>s.clientHeight)return;o=1,a=e(r.x,r.y),a&&(J.bind(i,"mouseup",n),J.bind(i,"mousemove",t),J.getRoot().focus(),a.select())}})}function z(){c.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||Q.normalize()},!0)}function O(){c.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function W(){c.inline||c.on("keydown",function(){document.activeElement==document.body&&c.getWin().focus()})}function F(){c.inline||(c.contentStyles.push("body {min-height: 150px}"),c.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(a.ie>11)return void c.getBody().focus();t=c.selection.getRng(),c.getBody().focus(),c.selection.setRng(t),c.selection.normalize(),c.nodeChanged()}}))}function L(){a.mac&&c.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),c.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function $(){d("AutoUrlDetect",!1)}function U(){c.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),c.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function j(){c.on("init",function(){c.dom.bind(c.getBody(),"submit",function(e){e.preventDefault()})})}function V(){ee.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function Y(){c.on("dragstart",function(e){p(e)}),c.on("drop",function(e){if(!f(e)){var n=m(e);if(n&&n.id!=c.id){e.preventDefault();var i=t.getCaretRangeFromPoint(e.x,e.y,c.getDoc());Q.setRng(i),g(n.html)}}})}var q=s.each,G=c.$,K=e.BACKSPACE,X=e.DELETE,J=c.dom,Q=c.selection,Z=c.settings,ee=c.parser,te=c.serializer,ne=a.gecko,ie=a.ie,re=a.webkit,oe="data:text/mce-internal,",ae=ie?"Text":"URL";M(),y(),z(),re&&(v(),w(),C(),A(),j(),T(),V(),a.iOS?(W(),F(),U()):b()),ie&&a.ie<11&&(_(),S(),N(),D(),P(),I(),B(),H()),a.ie>=11&&(F(),T()),a.ie&&(b(),$(),Y()),ne&&(_(),x(),k(),E(),R(),O(),L(),T())}}),i(Pe,[oe,x,m],function(e,t,n){function i(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=o.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function r(e,t){function n(e){return!e.hidden&&!e.readonly}var r=i(e,t),s;if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(a||(a={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&a){for(t in a)e.dom.unbind(i(e,t));a=null}})),a[t])return;s=function(i){for(var r=i.target,a=e.editorManager.editors,s=a.length;s--;){var l=a[s].getBody();(l===r||o.isChildOf(r,l))&&n(a[s])&&a[s].fire(t,i)}},a[t]=s,o.bind(r,t,s)}else s=function(i){n(e)&&e.fire(t,i)},o.bind(r,t,s),e.delegates[t]=s}var o=t.DOM,a,s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){r(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?r(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates)e.dom.unbind(i(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return s=n.extend({},e,s)}),i(Ie,[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(i){}}function t(t,n){var i=t.readonly?"readonly":"design";n!=i&&("readonly"==n?(t.selection.controlSelection.hideResizeRect(),t.readonly=!0,t.getBody().contentEditable=!1):(t.readonly=!1,t.getBody().contentEditable=!0,e(t,"StyleWithCSS",!1),e(t,"enableInlineTableEditing",!1),e(t,"enableObjectResizing",!1),t.focus(),t.nodeChanged()),t.fire("SwitchMode",{mode:n}))}return{setMode:t}}),i(Be,[m,f],function(e,t){var n=e.each,i=e.explode,r={f9:120,f10:121,f11:122},o=e.makeMap("alt,ctrl,shift,meta,access");return function(a){function s(e,s,l,u){var c,d,h;h={func:l,scope:u||a,desc:a.translate(s)},n(i(e,"+"),function(e){e in o?h[e]=!0:/^[0-9]{2,}$/.test(e)?h.keyCode=parseInt(e,10):(h.charCode=e.charCodeAt(0),h.keyCode=r[e]||e.toUpperCase().charCodeAt(0))}),c=[h.keyCode];for(d in o)h[d]?c.push(d):h[d]=!1;return h.id=c.join(","),h.access&&(h.alt=!0,t.mac?h.ctrl=!0:h.shift=!0),h.meta&&(t.mac?h.meta=!0:(h.ctrl=!0,h.meta=!1)),h}var l=this,u={};a.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()&&n(u,function(t){return t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)?(e.preventDefault(),"keydown"==e.type&&t.func.call(t.scope),!0):void 0})}),l.add=function(t,r,o,l){var c;return c=o,"string"==typeof o?o=function(){a.execCommand(c,!1,null)}:e.isArray(c)&&(o=function(){a.execCommand(c[0],c[1],c[2])}),n(i(t.toLowerCase()),function(e){var t=s(e,r,o,l);u[t.id]=t}),!0},l.remove=function(e){var t=s(e);return u[t.id]?(delete u[t.id],!0):!1}}}),i(He,[u,m,F],function(e,t,n){return function(i){function r(e){var t,n;return n={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"},t=n[e.blob().type.toLowerCase()]||"dat",e.id()+"."+t}function o(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function a(e){return{id:e.id,blob:e.blob,base64:e.base64,filename:n.constant(r(e))}}function s(e,t,n,a){var s,l,u;s=new XMLHttpRequest,s.open("POST",i.url),s.withCredentials=i.credentials,u=a(),s.upload.onprogress=function(e){var t=Math.round(e.loaded/e.total*100);u.progressBar.value(t)},s.onload=function(){
var e;return u.close(),200!=s.status?void n("HTTP Error: "+s.status):(e=JSON.parse(s.responseText),e&&"string"==typeof e.location?void t(o(i.basePath,e.location)):void n("Invalid JSON: "+s.responseText))},l=new FormData,l.append("file",e.blob(),r(e)),s.send(l)}function l(){return new e(function(e){e([])})}function u(e){return e.then(function(e){return e})["catch"](function(e){return e})}function c(e,t,n){var i=e(n),r=u(i);return delete p[t],p[t]=r,r}function d(e,n){return t.map(e,function(e){var t=e.id();return p[t]?p[t]:c(n,t,e)})}function h(t,n){function r(t){return new e(function(e){var r=i.handler;r(a(t),function(n){e({url:n,blobInfo:t,status:!0})},function(n){e({url:"",blobInfo:t,status:!1,error:n})},n)})}var o=d(t,r);return e.all(o)}function f(e,t){return i.url||i.handler!==s?h(e,t):l()}var p={};return i=t.extend({credentials:!1,handler:s},i),{upload:f}}}),i(ze,[u],function(e){function t(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function i(t){return new e(function(e){var i,r,o;t=n(t);try{i=atob(t.data)}catch(a){return void e(new Blob([]))}for(r=new Uint8Array(i.length),o=0;o<r.length;o++)r[o]=i.charCodeAt(o);e(new Blob([r],{type:t.type}))})}function r(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?i(e):null}function o(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:r,blobToDataUri:o,parseDataUri:n}}),i(Oe,[u,p,F,ze,f],function(e,t,n,i,r){var o=0;return function(a){function s(s,u){function c(e,t){var n,r;return 0===e.src.indexOf("blob:")?(r=a.getByUri(e.src),void(r&&t({image:e,blobInfo:r}))):(n=i.parseDataUri(e.src).data,r=a.findFirst(function(e){return e.base64()===n}),void(r?t({image:e,blobInfo:r}):i.uriToBlob(e.src).then(function(i){var r="blobid"+o++,s=a.create(r,i,n);a.add(s),t({image:e,blobInfo:s})})))}var d,h;return u||(u=n.constant(!0)),d=t.filter(s.getElementsByTagName("img"),function(e){var t=e.src;return r.fileApi?e.hasAttribute("data-mce-bogus")?!1:e.hasAttribute("data-mce-placeholder")?!1:t&&t!=r.transparentSrc?0===t.indexOf("blob:")?!0:0===t.indexOf("data:")?u(e):!1:!1:!1}),h=t.map(d,function(t){var n;return l[t.src]?new e(function(e){l[t.src].then(function(n){e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e){c(t,e)}).then(function(e){return delete l[e.image.src],e})["catch"](function(e){return delete l[t.src],e}),l[t.src]=n,n)}),e.all(h)}var l={};return{findAll:s}}}),i(We,[p,F],function(e,t){return function(){function n(e,t,n){return{id:u(e),blob:u(t),base64:u(n),blobUri:u(URL.createObjectURL(t))}}function i(e){r(e.id())||l.push(e)}function r(e){return o(function(t){return t.id()===e})}function o(t){return e.filter(l,t)[0]}function a(e){return o(function(t){return t.blobUri()==e})}function s(){e.each(l,function(e){URL.revokeObjectURL(e.blobUri())}),l=[]}var l=[],u=t.constant;return{create:n,add:i,get:r,getByUri:a,findFirst:o,destroy:s}}}),i(Fe,[p,He,Oe,We],function(e,t,n,i){return function(r){function o(e){return function(t){return r.selection?e(t):[]}}function a(e,t,n){var i=0;do i=e.indexOf(t,i),-1!==i&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1);while(-1!==i);return e}function s(e,t,n){return e=a(e,'src="'+t+'"','src="'+n+'"'),e=a(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function l(t,n){e.each(r.undoManager.data,function(e){e.content=s(e.content,t,n)})}function u(){return r.notificationManager.open({text:r.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function c(n){return g||(g=new t({url:y.images_upload_url,basePath:y.images_upload_base_path,credentials:y.images_upload_credentials,handler:y.images_upload_handler})),h().then(o(function(t){var i;return i=e.map(t,function(e){return e.blobInfo}),g.upload(i,u).then(o(function(i){return i=e.map(i,function(e,n){var i=t[n].image;return l(i.src,e.url),r.$(i).attr({src:e.url,"data-mce-src":r.convertURL(e.url,"src")}),{element:i,status:e.status}}),n&&n(i),i}))}))}function d(e){return y.automatic_uploads!==!1?c(e):void 0}function h(){return v||(v=new n(m)),v.findAll(r.getBody(),y.images_dataimg_filter).then(o(function(t){return e.each(t,function(e){l(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri()}),t}))}function f(){m.destroy(),v=g=null}function p(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var i=m.getByUri(n);return i||(i=e.reduce(r.editorManager.editors,function(e,t){return e||t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})}var m=new i,g,v,y=r.settings;return r.on("setContent",function(){r.settings.automatic_uploads!==!1?d():h()}),r.on("RawSaveContent",function(e){e.content=p(e.content)}),r.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=p(e.content))}),{blobCache:m,uploadImages:c,uploadImagesAuto:d,scanForImages:h,destroy:f}}}),i(Le,[F,y,S,j,N,L],function(e,t,n,i,r,o){function a(e){return e>0}function s(e){return 0>e}function l(e,n,i,r,o){var l=new t(e,r);if(s(n)){if(w(e)&&(e=l.prev(!0),i(e)))return e;for(;e=l.prev(o);)if(i(e))return e}if(a(n)){if(w(e)&&(e=l.next(!0),i(e)))return e;for(;e=l.next(o);)if(i(e))return e}return null}function u(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(b(e))return e;return t}function c(e,t){for(;e&&e!=t;){if(_(e))return e;e=e.parentNode}return null}function d(e,t,n){return c(e.container(),n)==c(t.container(),n)}function h(e,t,n){return u(e.container(),n)==u(t.container(),n)}function f(e,t){var n,i;return t?(n=t.container(),i=t.offset(),k(n)?n.childNodes[i+e]:null):null}function p(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function m(e,t,n){return c(t,e)==c(n,e)}function g(e,t,n){var i,r;for(r=e?"previousSibling":"nextSibling";n&&n!=t;){if(i=n[r],x(i)&&(i=i[r]),w(i)){if(m(t,i,n))return i;break}if(S(i))break;n=n.parentNode}return null}function v(e,t,i){var o,a,s,l,u=C(g,!0,t),c=C(g,!1,t);if(a=i.startContainer,s=i.startOffset,r.isCaretContainerBlock(a)){if(k(a)||(a=a.parentNode),l=a.getAttribute("data-mce-caret"),"before"==l&&(o=a.nextSibling,w(o)))return T(o);if("after"==l&&(o=a.previousSibling,w(o)))return N(o)}if(!i.collapsed)return i;if(n.isText(a)){if(x(a)){if(1===e){if(o=c(a))return T(o);if(o=u(a))return N(o)}if(-1===e){if(o=u(a))return N(o);if(o=c(a))return T(o)}return i}if(r.endsWithCaretContainer(a)&&s>=a.data.length-1)return 1===e&&(o=c(a))?T(o):i;if(r.startsWithCaretContainer(a)&&1>=s)return-1===e&&(o=u(a))?N(o):i;if(s===a.data.length)return o=c(a),o?T(o):i;if(0===s)return o=u(a),o?N(o):i}return i}function y(e,t){return w(f(e,t))}var b=n.isContentEditableTrue,w=n.isContentEditableFalse,_=n.matchStyleValues("display","block table table-cell table-caption"),x=r.isCaretContainer,C=e.curry,k=n.isElement,S=o.isCaretCandidate,T=C(p,!0),N=C(p,!1);return{isForwards:a,isBackwards:s,findNode:l,getEditingHost:u,getParentBlock:c,isInSameBlock:d,isInSameEditingHost:h,isBeforeContentEditableFalse:C(y,0),isAfterContentEditableFalse:C(y,-1),normalizeRange:v}}),i($e,[S,L,j,Le,p,F],function(e,t,n,i,r,o){function a(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function s(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(f(e)){if(m(t.previousSibling)&&!d(t.previousSibling))return n.before(t);if(d(t))return n(t,0)}if(p(e)){if(m(t.nextSibling)&&!d(t.nextSibling))return n.after(t);if(d(t))return n(t,t.data.length)}return p(e)?n.after(t):n.before(t)}function u(e,t,u){var y,b,w,_,x,C,k;if(!h(u)||!t)return null;if(k=t,y=k.container(),b=k.offset(),d(y)){if(p(e)&&b>0)return n(y,--b);if(f(e)&&b<y.length)return n(y,++b);w=y}else{if(p(e)&&b>0&&(_=s(y,b-1),m(_)))return!g(_)&&(x=i.findNode(_,e,v,_))?d(x)?n(x,x.data.length):n.after(x):d(_)?n(_,_.data.length):n.before(_);if(f(e)&&b<y.childNodes.length&&(_=s(y,b),m(_)))return!g(_)&&(x=i.findNode(_,e,v,_))?d(x)?n(x,0):n.before(x):d(_)?n(_,0):n.after(_);w=k.getNode()}return(f(e)&&k.isAtEnd()||p(e)&&k.isAtStart())&&(w=i.findNode(w,e,o.constant(!0),u,!0),v(w))?l(e,w):(_=i.findNode(w,e,v,u),C=r.last(r.filter(a(y,u),c)),!C||_&&C.contains(_)?_?l(e,_):null:k=f(e)?n.after(C):n.before(C))}var c=e.isContentEditableFalse,d=e.isText,h=e.isElement,f=i.isForwards,p=i.isBackwards,m=t.isCaretCandidate,g=t.isAtomic,v=t.isEditableCaretCandidate;return function(e){return{next:function(t){return u(1,t,e)},prev:function(t){return u(-1,t,e)}}}}),i(Ue,[N,j,S,D,g,$,c],function(e,t,n,i,r,o,a){var s=n.isContentEditableFalse;return function(t,n){function i(e,n){var i=o.collapse(e.getBoundingClientRect(),n),r,a,s,l,u;return"BODY"==t.tagName?(r=t.ownerDocument.documentElement,a=t.scrollLeft||r.scrollLeft,s=t.scrollTop||r.scrollTop):(u=t.getBoundingClientRect(),a=t.scrollLeft-u.left,s=t.scrollTop-u.top),i.left+=a,i.right+=a,i.top+=s,i.bottom+=s,i.width=1,l=e.offsetWidth-e.clientWidth,l>0&&(n&&(l*=-1),i.left+=l,i.right+=l),i}function l(){var n,i,o,a,s;for(n=r("*[contentEditable=false]",t),a=0;a<n.length;a++)i=n[a],o=i.previousSibling,e.endsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(s.length-1,1)),o=i.nextSibling,e.startsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(0,1));return null}function u(o,a){var l,u,h;return c(),n(a)?(g=e.insertBlock("p",a,o),l=i(a,o),r(g).css("top",l.top),m=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(l).appendTo(t),o&&m.addClass("mce-visual-caret-before"),d(),u=a.ownerDocument.createRange(),h=g.firstChild,u.setStart(h,0),u.setEnd(h,1),u):(g=e.insertInline(a,o),u=a.ownerDocument.createRange(),s(g.nextSibling)?(u.setStart(g,0),u.setEnd(g,0)):(u.setStart(g,1),u.setEnd(g,1)),u)}function c(){l(),g&&(e.remove(g),g=null),m&&(m.remove(),m=null),clearInterval(p)}function d(){p=a.setInterval(function(){r("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden")},500)}function h(){a.clearInterval(p)}function f(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var p,m,g;return{show:u,hide:c,getCss:f,destroy:h}}}),i(je,[p,S,$],function(e,t,n){function i(r){function o(t){return e.map(t,function(e){return e=n.clone(e),e.node=r,e})}if(e.isArray(r))return e.reduce(r,function(e,t){return e.concat(i(t))},[]);if(t.isElement(r))return o(r.getClientRects());if(t.isText(r)){var a=r.ownerDocument.createRange();return a.setStart(r,0),a.setEnd(r,r.data.length),o(a.getClientRects())}}return{getClientRects:i}}),i(Ve,[F,p,je,L,Le,$e,j,$],function(e,t,n,i,r,o,a,s){function l(e,t,n,o){for(;o=r.findNode(o,e,i.isEditableCaretCandidate,t);)if(n(o))return}function u(e,i,r,o,a,s){function u(o){var s,l,u;for(u=n.getClientRects(o),-1==e&&(u=u.reverse()),s=0;s<u.length;s++)if(l=u[s],!r(l,f)){if(h.length>0&&i(l,t.last(h))&&c++,l.line=c,a(l))return!0;h.push(l)}}var c=0,d,h=[],f;return(f=t.last(s.getClientRects()))?(d=s.getNode(),u(d),l(e,o,u,d),h):h}function c(e,t){return t.line>e}function d(e,t){return t.line===e}function h(e,n,i,r){function l(n){return 1==e?t.last(n.getClientRects()):t.last(n.getClientRects())}var u=new o(n),c,d,h,f,p=[],m=0,g,v;1==e?(c=u.next,d=s.isBelow,h=s.isAbove,f=a.after(r)):(c=u.prev,d=s.isAbove,h=s.isBelow,f=a.before(r)),v=l(f);do if(f.isVisible()&&(g=l(f),!h(g,v))){if(p.length>0&&d(g,t.last(p))&&m++,g=s.clone(g),g.position=f,g.line=m,i(g))return p;p.push(g)}while(f=c(f));return p}var f=e.curry,p=f(u,-1,s.isAbove,s.isBelow),m=f(u,1,s.isBelow,s.isAbove);return{upUntil:p,downUntil:m,positionsUntil:h,isAboveLine:f(c),isLine:f(d)}}),i(Ye,[F,p,S,je,$,Le,L],function(e,t,n,i,r,o,a){function s(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function u(e,n){function i(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var r,o;return r=Math.min(s(e,n),l(e,n)),o=Math.min(s(t,n),l(t,n)),i(n,t)?t:i(n,e)?e:o==r&&m(t.node)?t:r>o?t:e})}function c(e,t,n,i){for(;i=g(i,e,a.isEditableCaretCandidate,t);)if(n(i))return}function d(e,n){function o(e,r){var o;return o=t.filter(i.getClientRects(r),function(t){return!e(t,n)}),a=a.concat(o),0===o.length}var a=[];return a.push(n),c(-1,e,v(o,r.isAbove),n.node),c(1,e,v(o,r.isBelow),n.node),a}function h(e){return t.filter(t.toArray(e.getElementsByTagName("*")),m)}function f(e,t){return{node:e.node,before:s(e,t)<l(e,t)}}function p(e,n,r){var o,a;return o=i.getClientRects(h(e)),o=t.filter(o,function(e){return r>=e.top&&r<=e.bottom}),a=u(o,n),a&&(a=u(d(e,a),n),a&&m(a.node))?f(a,n):null}var m=n.isContentEditableFalse,g=o.findNode,v=e.curry;return{findClosestClientRect:u,findLineNodeRects:d,closestCaret:p}}),i(qe,[S],function(e){function t(e){function t(e){return n(e)}function i(t){u(e.getBody()).css("cursor",t)}function r(t){return t==f.element||e.dom.isChildOf(t,f.element)?!1:n(t)?!1:!0}function o(t){var n,r,o,a,s=0,l=0,c,d,p,m;0===t.button&&(n=t.screenX-f.screenX,r=t.screenY-f.screenY,c=Math.max(Math.abs(n),Math.abs(r)),!f.dragging&&c>10&&(f.dragging=!0,i("default"),f.clone=f.element.cloneNode(!0),o=h.getPos(f.element),f.relX=f.clientX-o.x,f.relY=f.clientY-o.y,f.width=f.element.offsetWidth,f.height=f.element.offsetHeight,u(f.clone).css({width:f.width,height:f.height}).removeAttr("data-mce-selected"),f.ghost=u("<div>").css({position:"absolute",opacity:.5,overflow:"hidden",width:f.width,height:f.height}).attr({"data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}).addClass("mce-drag-container mce-reset").append(f.clone).appendTo(e.getBody())[0],a=e.dom.getViewPort(e.getWin()),f.maxX=a.w,f.maxY=a.h),f.dragging&&(e.selection.placeCaretAt(t.clientX,t.clientY),d=f.clientX+n-f.relX,p=f.clientY+r+5,d+f.width>f.maxX&&(s=d+f.width-f.maxX),p+f.height>f.maxY&&(l=p+f.height-f.maxY),m="BODY"!=e.getBody().nodeName?e.getBody().getBoundingClientRect():{left:0,top:0},u(f.ghost).css({left:d-m.left,top:p-m.top,width:f.width-s,height:f.height-l})))}function a(){f.dragging&&(e.selection.setRng(e.selection.getSel().getRangeAt(0)),r(e.selection.getNode())&&e.undoManager.transact(function(){e.insertContent(h.getOuterHTML(f.element)),u(f.element).remove()})),l()}function s(n){if(l(),t(n.target)){if(e.fire("dragstart",{target:n.target}).isDefaultPrevented())return;e.on("mousemove",o),e.on("mouseup",a),c!=d&&(h.bind(c,"mousemove",o),h.bind(c,"mouseup",a)),f={screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,element:n.target}}}function l(){u(f.ghost).remove(),i(null),e.off("mousemove",o),e.off("mouseup",l),c!=d&&(h.unbind(c,"mousemove",o),h.unbind(c,"mouseup",l)),f={}}var u=e.$,c=document,d=e.getDoc(),h=e.dom,f={};e.on("mousedown",s),e.on("drop",function(t){var i=e.getDoc().elementFromPoint(t.clientX,t.clientY);(n(i)||n(e.dom.getContentEditableParent(i)))&&t.preventDefault()})}var n=e.isContentEditableFalse;return{init:t}}),i(Ge,[f,$e,j,N,Le,Ue,Ve,Ye,S,D,O,F,p,c,qe],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p){function m(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}function g(u){function d(e){return u.dom.isBlock(e)}function g(e){e&&u.selection.setRng(e)}function k(){return u.selection.getRng()}function S(e,t){u.selection.scrollIntoView(e,t)}function T(e,t,n){var i;return i=u.fire("ShowCaret",{target:t,direction:e,before:n}),i.isDefaultPrevented()?null:(S(t,-1===e),Z.show(n,t))}function N(e){var t;return t=u.fire("ObjectSelected",{target:e}),t.isDefaultPrevented()?null:(Z.hide(),D(e))}function D(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}function M(e,t){var n=r.isInSameBlock(e,t);return!n&&l.isBr(e.getNode())?!0:n}function E(e,t){return t=r.normalizeRange(e,K,t),-1==e?n.fromRangeStart(t):n.fromRangeEnd(t)}function R(e){return i.isCaretContainerBlock(e.startContainer)}function A(e,t,n,i){var r,o,a,s;return!i.collapsed&&(r=C(i),b(r))?T(e,r,-1==e):(s=R(i),o=E(e,i),n(o)?N(o.getNode(-1==e)):(o=t(o))?n(o)?T(e,o.getNode(-1==e),1==e):(a=t(o),n(a)&&M(o,a)?T(e,a.getNode(-1==e),1==e):s?F(o.toRange()):null):s?i:null)}function P(e,t,n){var i,r,o,l,u,c,d,f,p;if(p=C(n),i=E(e,n),r=t(K,a.isAboveLine(1),i),o=h.filter(r,a.isLine(1)),u=h.last(i.getClientRects()),x(i)&&(p=i.getNode()),_(i)&&(p=i.getNode(!0)),!u)return null;if(c=u.left,l=s.findClosestClientRect(o,c),l&&b(l.node))return d=Math.abs(c-l.left),f=Math.abs(c-l.right),T(e,l.node,f>d);if(p){var m=a.positionsUntil(e,K,a.isAboveLine(1),p);if(l=s.findClosestClientRect(h.filter(m,a.isLine(1)),c))return F(l.position.toRange());if(l=h.last(h.filter(m,a.isLine(0))))return F(l.position.toRange())}}function I(t,i){function r(){var t=u.dom.create(u.settings.forced_root_block);return(!e.ie||e.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}var o,a,s;if(i.collapsed&&u.settings.forced_root_block){if(o=u.dom.getParent(i.startContainer,"PRE"),!o)return;a=1==t?J(n.fromRangeStart(i)):Q(n.fromRangeStart(i)),a||(s=r(),1==t?u.$(o).after(s):u.$(o).before(s),u.selection.select(s,!0),u.selection.collapse())}}function B(e,t,n,i){var r;return(r=A(e,t,n,i))?r:(r=I(e,i),r?r:null)}function H(e,t,n){var i;return(i=P(e,t,n))?i:(i=I(e,n),i?i:null)}function z(){return ne("*[data-mce-caret]")[0]}function O(e){e=ne(e),e.attr("data-mce-caret")&&(Z.hide(),e.removeAttr("data-mce-caret"),e.removeAttr("data-mce-bogus"),e.removeAttr("style"),g(k()),S(e[0]))}function W(e){var t;return e=r.normalizeRange(1,K,e),t=n.fromRangeStart(e),b(t.getNode())?T(1,t.getNode(),!t.isAtEnd()):b(t.getNode(!0))?T(1,t.getNode(!0),!1):(Z.hide(),null)}function F(e){var t;return e&&e.collapsed?(t=W(e),t?t:e):e}function L(e){var t,r,o,a;return b(e)?(b(e.previousSibling)&&(o=e.previousSibling),r=Q(n.before(e)),r||(t=J(n.after(e))),t&&w(t.getNode())&&(a=t.getNode()),i.remove(e.previousSibling),i.remove(e.nextSibling),u.dom.remove(e),q(),u.dom.isEmpty(u.getBody())?(u.setContent(""),void u.focus()):o?n.after(o).toRange():a?n.before(a).toRange():r?r.toRange():t?t.toRange():null):null}function $(e,t,n){var i,r;return!n.collapsed&&(i=C(n),b(i))?F(L(i)):(r=E(e,n),t(r)?F(L(r.getNode(-1==e))):void 0)}function U(){function e(e){var t=e(k());return t?(g(t),!0):!1}function t(e){for(var t=u.getBody();e&&e!=t;){if(y(e)||b(e))return e;e=e.parentNode}return null}function i(){var e,i=t(u.selection.getNode());y(i)&&d(i)&&u.dom.isEmpty(i)&&(e=u.dom.create("br",{"data-mce-bogus":"1"}),u.$(i).empty().append(e),u.selection.setRng(n.before(e).toRange()))}function r(e){var t=z();if(t)return"compositionstart"==e.type?(e.preventDefault(),e.stopPropagation(),void O(t)):void("&nbsp;"!=t.innerHTML&&O(t))}function o(e){var t;switch(e.keyCode){case c.DELETE:t=i();break;case c.BACKSPACE:t=i()}t&&e.preventDefault()}var l=v(B,1,J,x),h=v(B,-1,Q,_),m=v($,1,x),w=v($,-1,_),C=v(H,-1,a.upUntil),S=v(H,1,a.downUntil);u.on("mouseup",function(){var e=k();e.collapsed&&g(W(e))}),u.on("mousedown",function(e){var n;if(n=t(e.target))b(n)?(e.preventDefault(),Y(N(n),!1)):u.selection.placeCaretAt(e.clientX,e.clientY);else{q(),Z.hide();var i=s.closestCaret(K,e.clientX,e.clientY);i&&(e.preventDefault(),u.getBody().focus(),g(T(1,i.node,i.before)))}}),u.on("keydown",function(t){var n;if(!c.modifierPressed(t)){switch(t.keyCode){case c.RIGHT:n=e(l);break;case c.DOWN:n=e(S);break;case c.LEFT:n=e(h);break;case c.UP:n=e(C);break;case c.DELETE:n=e(m);break;case c.BACKSPACE:n=e(w);break;default:n=b(u.selection.getNode())}n&&t.preventDefault()}}),u.on("keyup compositionstart",function(e){r(e),o(e)},!0),u.on("cut",function(){var e=u.selection.getNode();b(e)&&f.setEditorTimeout(u,function(){g(F(L(e)))})}),u.on("getSelectionRange",function(e){var t=e.range;if(te){if(!te.parentNode)return void(te=null);t=t.cloneRange(),t.selectNode(te),e.range=t}}),u.on("setSelectionRange",function(e){var t;t=Y(e.range),t&&(e.range=t)}),u.on("focus",function(){f.setEditorTimeout(u,function(){u.selection.setRng(F(u.selection.getRng()))})}),p.init(u)}function j(){var e=u.contentStyles,t=".mce-content-body";e.push(Z.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;width: 100pxheight: 100px}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function V(e){return i.isCaretContainer(e.startContainer)||i.isCaretContainer(e.endContainer)}function Y(e,t){var n,i=u.$,r=u.dom,o,a,s,l,c,d,h;if(!e)return q(),null;if(e.collapsed){if(q(),!V(e)){if(h=E(1,e),b(h.getNode()))return T(1,h.getNode(),!h.isAtEnd());if(b(h.getNode(!0)))return T(1,h.getNode(!0),!1)}return null}return s=e.startContainer,l=e.startOffset,c=e.endOffset,3==s.nodeType&&0==l&&b(s.parentNode)&&(s=s.parentNode,l=r.nodeIndex(s),s=s.parentNode),1!=s.nodeType?(q(),null):(c==l+1&&(n=s.childNodes[l]),b(n)?t!==!1&&(d=u.fire("ObjectSelected",{target:n}),d.isDefaultPrevented())?(q(),null):(o=i("#"+ee),0===o.length&&(o=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",ee),o.appendTo(u.getBody())),o.empty().append(" ").append(n.cloneNode(!0)).append(" ").css({top:r.getPos(n,u.getBody()).y}),e=u.dom.createRng(),e.setStart(o[0].firstChild,1),e.setEnd(o[0].lastChild,0),u.getBody().focus(),o[0].focus(),a=u.selection.getSel(),a.removeAllRanges(),a.addRange(e),u.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),te=n,e):(q(),null))}function q(){te&&(te.removeAttribute("data-mce-selected"),u.$("#"+ee).remove(),te=null)}function G(){Z.destroy(),te=null}var K=u.getBody(),X=new t(K),J=v(m,X.next),Q=v(m,X.prev),Z=new o(u.getBody(),d),ee="sel-"+u.dom.uniqueId(),te,ne=u.$;return e.ceFalse&&(U(),j()),{showBlockCaretContainer:O,destroy:G}}var v=d.curry,y=l.isContentEditableTrue,b=l.isContentEditableFalse,w=l.isElement,_=r.isAfterContentEditableFalse,x=r.isBeforeContentEditableFalse,C=u.getSelectedNode;return g}),i(Ke,[x,g,k,M,E,H,B,q,X,J,Q,Z,ee,te,C,d,Se,Ee,R,P,Ae,f,m,c,Pe,Ie,Be,Fe,Ge],function(e,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y,b,w,_,x,C,k,S,T,N,D,M){function E(e,t,r){var o=this,a,s;a=o.documentBaseUrl=r.documentBaseURL,s=r.baseURI,o.settings=t=I({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o,ie7_compat:!0},t),i.language=t.language||"en",i.languageLoad=t.language_load,i.baseURL=r.baseURL,o.id=t.id=e,o.setDirty(!1),o.plugins={},o.documentBaseURI=new p(t.document_base_url||a,{base_uri:s}),o.baseURI=s,o.contentCSS=[],o.contentStyles=[],o.shortcuts=new N(o),o.loadedCSS={},o.editorCommands=new f(o),t.target&&(o.targetElm=t.target),o.suffix=r.suffix,o.editorManager=r,o.inline=t.inline,t.cache_suffix&&(x.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),t.override_viewport===!1&&(x.overrideViewPort=!1),r.fire("SetupEditor",o),o.execCallback("setup",o),o.$=n.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})}var R=e.DOM,A=i.ThemeManager,P=i.PluginManager,I=C.extend,B=C.each,H=C.explode,z=C.inArray,O=C.trim,W=C.resolve,F=g.Event,L=x.gecko,$=x.ie;return E.prototype={render:function(){function e(){R.unbind(window,"ready",e),n.render()}function t(){var e=m.ScriptLoader;if(i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=n.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&e.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!A.urls[i.theme]){var t=i.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+o+".js",A.load(i.theme,t)}C.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),B(i.external_plugins,function(e,t){P.load(t,e),i.plugins+=" "+t}),B(i.plugins.split(/[ ,]/),function(e){if(e=O(e),e&&!P.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=P.dependencies(e);B(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=P.createUrl(t,e),P.load(e.resource,e)})}else P.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,i=n.settings,r=n.id,o=n.suffix;if(!F.domLoaded)return void R.bind(window,"ready",e);if(n.getElement()&&x.contentEditable){i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||R.getParent(r,"form");a&&(n.formElement=a,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(R.insertAfter(R.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},R.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),a._mceOldSubmit(a)})),n.windowManager=new v(n),n.notificationManager=new y(n),"xml"==i.encoding&&n.on("GetContent",function(e){e.save&&(e.content=R.encode(e.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(n){var i=P.get(n),r,o;if(r=P.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=O(n),i&&-1===z(m,n)){if(B(P.dependencies(n),function(t){e(t)}),t.plugins[n])return;o=new i(t,r,t.$),t.plugins[n]=o,o.init&&(o.init(t,r),m.push(n))}}var t=this,n=t.settings,i=t.getElement(),r,o,a,s,l,u,c,d,h,f,p,m=[];if(this.editorManager.i18n.setCode(n.language),t.rtl=n.rtl_ui||this.editorManager.i18n.rtl,t.editorManager.add(t),n.aria_label=n.aria_label||R.getAttrib(i,"aria-label",t.getLang("aria.rich_text_area")),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),u=A.get(n.theme),t.theme=new u(t,A.urls[n.theme]),t.theme.init&&t.theme.init(t,A.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""),t.$)):t.theme=n.theme),B(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),n.render_ui&&t.theme&&(t.orgDisplay=i.style.display,"function"!=typeof n.theme?(r=n.width||i.style.width||i.offsetWidth,o=n.height||i.style.height||i.offsetHeight,a=n.min_height||100,f=/^[0-9\.]+(|px)$/i,f.test(""+r)&&(r=Math.max(parseInt(r,10),100)),f.test(""+o)&&(o=Math.max(parseInt(o,10),a)),l=t.theme.renderUI({targetNode:i,width:r,height:o,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(o=(l.iframeHeight||o)+("number"==typeof o?l.deltaHeight||0:""),a>o&&(o=a))):(l=n.theme(t,i),l.editorContainer.nodeType&&(l.editorContainer=l.editorContainer.id=l.editorContainer.id||t.id+"_parent"),l.iframeContainer.nodeType&&(l.iframeContainer=l.iframeContainer.id=l.iframeContainer.id||t.id+"_iframecontainer"),o=l.iframeHeight||i.offsetHeight),t.editorContainer=l.editorContainer),n.content_css&&B(H(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return i=s=l=null,t.initContentBody();for(t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!x.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',p=0;p<t.contentCSS.length;p++){var g=t.contentCSS[p];t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+C._addCacheSuffix(g)+'" />',t.loadedCSS[g]=!0}d=n.body_id||"tinymce",-1!=d.indexOf("=")&&(d=t.getParam("body_id","","hash"),d=d[t.id]||d),h=n.body_class||"",-1!=h.indexOf("=")&&(h=t.getParam("body_class","","hash"),h=h[t.id]||""),n.content_security_policy&&(t.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+n.content_security_policy+'" />'),t.iframeHTML+='</head><body id="'+d+'" class="mce-content-body '+h+'" data-id="'+t.id+'"><br></body></html>';var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&x.ie&&x.ie<12&&(c=v);var y=R.create("iframe",{id:t.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:o,display:"block"}});if(y.onload=function(){y.onload=null,t.fire("load")},R.setAttrib(y,"src",c||'javascript:""'),t.contentAreaContainer=l.iframeContainer,t.iframeElement=y,s=R.add(l.iframeContainer,y),$)try{t.getDoc()}catch(b){s.src=c=v}l.editorContainer&&(R.get(l.editorContainer).style.display=t.orgDisplay,t.hidden=R.isHidden(l.editorContainer)),t.getElement().style.display="none",R.setAttrib(t.id,"aria-hidden",!0),c||t.initContentBody(),i=s=l=null},initContentBody:function(t){var n=this,i=n.settings,s=n.getElement(),f=n.getDoc(),p,m;i.inline||(n.getElement().style.visibility=n.orgVisibility),t||i.content_editable||(f.open(),f.write(n.iframeHTML),f.close()),i.content_editable&&(n.on("remove",function(){var e=this.getBody();R.removeClass(e,"mce-content-body"),R.removeClass(e,"mce-edit-focus"),R.setAttrib(e,"contentEditable",null)}),R.addClass(s,"mce-content-body"),n.contentDocument=f=i.content_document||document,n.contentWindow=i.content_window||window,n.bodyElement=s,i.content_document=i.content_window=null,i.root_name=s.nodeName.toLowerCase()),p=n.getBody(),p.disabled=!0,n.readonly=i.readonly,n.readonly||(n.inline&&"static"==R.getStyle(p,"position",!0)&&(p.style.position="relative"),p.contentEditable=n.getParam("content_editable_state",!0)),p.disabled=!1,n.editorUpload=new D(n),n.schema=new b(i),n.dom=new e(f,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:n.inline?n.getBody():null,collect:i.content_editable,schema:n.schema,onSetAttrib:function(e){n.fire("SetAttrib",e)}}),n.parser=new w(i,n.schema),n.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var i=e.length,r,o=n.dom,a,s;i--;)if(r=e[i],a=r.attr(t),s="data-mce-"+t,!r.attributes.map[s]){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===t?(a=o.serializeStyle(o.parseStyle(a),r.name),a.length||(a=null),r.attr(s,a),r.attr(t,a)):"tabindex"===t?(r.attr(s,a),r.attr(t,null)):r.attr(s,n.convertURL(a,t,r.name))}}),n.parser.addNodeFilter("script",function(e){for(var t=e.length,n,i;t--;)n=e[t],i=n.attr("type")||"no/type",0!==i.indexOf("mce-")&&n.attr("type","mce-"+i)}),n.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,i,r=n.schema.getNonEmptyElements();t--;)i=e[t],i.isEmpty(r)&&(i.append(new o("br",1)).shortEnded=!0)}),n.serializer=new a(i,n),
n.selection=new l(n.dom,n.getWin(),n.serializer,n),n.formatter=new u(n),n.undoManager=new c(n),n.forceBlocks=new h(n),n.enterKey=new d(n),n._nodeChangeDispatcher=new r(n),n._selectionOverrides=new M(n),n.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(f.body.spellcheck=!1,R.setAttrib(p,"spellcheck","false")),n.fire("PostRender"),n.quirks=new _(n),i.directionality&&(p.dir=i.directionality),i.nowrap&&(p.style.whiteSpace="nowrap"),i.protect&&n.on("BeforeSetContent",function(e){B(i.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.on("SetContent",function(){n.addVisual(n.getBody())}),i.padd_empty_editor&&n.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.bindPendingEventDelegates(),n.fire("init"),n.focus(!0),n.nodeChanged({initial:!0}),n.execCallback("init_instance_callback",n),n.contentStyles.length>0&&(m="",B(n.contentStyles,function(e){m+=e+"\r\n"}),n.dom.addStyle(m)),B(n.contentCSS,function(e){n.loadedCSS[e]||(n.dom.loadCSS(e),n.loadedCSS[e]=!0)}),i.auto_focus&&k.setEditorTimeout(n,function(){var e;e=i.auto_focus===!0?n:n.editorManager.get(i.auto_focus),e.destroyed||e.focus()},100),s=f=p=null},focus:function(e){function t(e){return n.dom.getParent(e,function(e){return"true"===n.dom.getContentEditable(e)})}var n=this,i=n.selection,r=n.settings.content_editable,o,a,s=n.getDoc(),l=n.getBody(),u;if(!e){if(o=i.getRng(),o.item&&(a=o.item(0)),n._refreshContentEditable(),u=t(i.getNode()),n.$.contains(l,u))return u.focus(),i.normalize(),void n.editorManager.setActive(n);if(r||(x.opera||n.getBody().focus(),n.getWin().focus()),L||r){if(l.setActive)try{l.setActive()}catch(c){l.focus()}else l.focus();r&&i.normalize()}a&&a.ownerDocument==s&&(o=s.body.createControlRange(),o.addElement(a),o.select())}n.editorManager.setActive(n)},execCallback:function(e){var t=this,n=t.settings[e],i;if(n)return t.callbackLookup&&(i=t.callbackLookup[e])&&(n=i.func,i=i.scope),"string"==typeof n&&(i=n.replace(/\.\w+$/,""),i=i?W(i):0,n=W(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:i}),n.apply(i||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i=e in this.settings?this.settings[e]:t,r;return"hash"===n?(r={},"string"==typeof i?B(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("="),e.length>1?r[O(e[0])]=O(e[1]):r[O(e[0])]=O(e)}):r=i,r):i},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,i;n.contextToolbars=n.contextToolbars||[],"string"==typeof e&&(i=e,e=function(e){return n.dom.is(e,i)}),n.contextToolbars.push({predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(R.show(e.getContainer()),R.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||($&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(R.hide(e.getContainer()),R.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,i=n.getElement(),r;return i?(e=e||{},e.load=!0,r=n.setContent(i.value!==t?i.value:i.innerHTML,e),e.element=i,e.no_events||n.fire("LoadContent",e),e.element=i=null,r):void 0},save:function(e){var t=this,n=t.getElement(),i,r;if(n&&t.initialized)return e=e||{},e.save=!0,e.element=n,i=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),"raw"==e.format&&t.fire("RawSaveContent",e),i=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=i:(t.inline||(n.innerHTML=i),(r=R.getParent(t.id,"form"))&&B(r.elements,function(e){return e.name==t.id?(e.value=i,!1):void 0})),e.element=n=null,e.set_dirty!==!1&&t.setDirty(!1),i},setContent:function(e,t){var n=this,i=n.getBody(),r,o;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(o=$&&11>$?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName?e="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(e="<li>"+o+"</li>"),r=n.settings.forced_root_block,r&&n.schema.isValidChild(i.nodeName.toLowerCase(),r.toLowerCase())?(e=o,e=n.dom.createHTML(r,n.settings.forced_root_block_attrs,e)):$||e||(e='<br data-mce-bogus="1">'),n.dom.setHTML(i,e),n.fire("SetContent",t)):("raw"!==t.format&&(e=new s({validate:n.validate},n.schema).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=O(e),n.dom.setHTML(i,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t=this,n,i=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?t.serializer.getTrimmedContent():"text"==e.format?i.innerText||i.textContent:t.serializer.serialize(i,e),"text"!=e.format?e.content=O(n):e.content=n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=I({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){T.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=R.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=R.get(this.id)),this.targetElm},getWin:function(){var e=this,t;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var n=this,i=n.settings,r=n.dom,o;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=i.visual),B(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return o=i.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),void(t&&"0"!=t||!n.hasVisual?r.removeClass(e,o):r.addClass(e,o));case"A":return void(r.getAttrib(e,"href",!1)||(t=r.getAttrib(e,"name")||e.id,o=i.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual?r.addClass(e,o):r.removeClass(e,o)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&R.remove(e.getElement().nextSibling),e.inline||($&&10>$&&e.getDoc().execCommand("SelectAll",!1,null),R.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),R.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t=this,n;if(!t.destroyed){if(!e&&!t.removed)return void t.remove();e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),R.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return L?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},I(E.prototype,S),E}),i(Xe,[],function(){var e={},t="en";return{setCode:function(e){e&&(t=e,this.rtl=this.data[e]?"rtl"===this.data[e]._dir:!1)},getCode:function(){return t},rtl:!1,add:function(t,n){var i=e[t];i||(e[t]=i={});for(var r in n)i[r]=n[r];this.setCode(t)},translate:function(n){var i;if(i=e[t],i||(i={}),"undefined"==typeof n)return n;if("string"!=typeof n&&n.raw)return n.raw;if(n.push){var r=n.slice(1);n=(i[n[0]]||n[0]).replace(/\{([0-9]+)\}/g,function(e,t){return r[t]})}return(i[n]||n).replace(/{context:\w+}$/,"")},data:e}}),i(Je,[x,c,f],function(e,t,n){function i(e){function l(){try{return document.activeElement}catch(e){return document.body}}function u(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function d(e){return!!s.getParent(e,i.isEditorUIElement)}function h(i){var h=i.editor;h.on("init",function(){(h.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?h.dom.bind(h.getBody(),"beforedeactivate",function(e){if(e.target==h.getBody())try{h.lastRng=h.selection.getRng()}catch(t){}}):h.on("nodechange mouseup keyup",function(e){var t=l();"nodechange"==e.type&&e.selectionChange||(t&&t.id==h.id+"_ifr"&&(t=h.getBody()),h.dom.isChildOf(t,h.getBody())&&(h.lastRng=h.selection.getRng()))}),n.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(h.lastRng=n)}},s.bind(document,"selectionchange",r)))}),h.on("setcontent",function(){h.lastRng=null}),h.on("mousedown",function(){h.selection.lastFocusBookmark=null}),h.on("focusin",function(){var t=e.focusedEditor,n;h.selection.lastFocusBookmark&&(n=c(h,h.selection.lastFocusBookmark),h.selection.lastFocusBookmark=null,h.selection.setRng(n)),t!=h&&(t&&t.fire("blur",{focusedEditor:h}),e.setActive(h),e.focusedEditor=h,h.fire("focus",{blurredEditor:t}),h.focus(!0)),h.lastRng=null}),h.on("focusout",function(){t.setEditorTimeout(h,function(){var t=e.focusedEditor;d(l())||t!=h||(h.fire("blur",{focusedEditor:null}),e.focusedEditor=null,h.selection&&(h.selection.lastFocusBookmark=null))})}),o||(o=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=u(n.dom,n.lastRng)),t.target==document.body||d(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},s.bind(document,"focusin",o)),h.inline&&!a&&(a=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},s.bind(document,"mouseup",a))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(document,"selectionchange",r),s.unbind(document,"focusin",o),s.unbind(document,"mouseup",a),r=o=a=null)}e.on("AddEditor",h),e.on("RemoveEditor",f)}var r,o,a,s=e.DOM;return i.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},i}),i(Qe,[Ke,g,x,te,f,m,oe,Xe,Je],function(e,t,n,i,r,o,a,s,l){function u(e){m(b.editors,function(t){t.fire("ResizeWindow",e)})}function c(e,n){n!==w&&(n?t(window).on("resize",u):t(window).off("resize",u),w=n)}function d(e){var t=b.editors,n;delete t[e.id];for(var i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1),n=!0;break}return b.activeEditor==e&&(b.activeEditor=t[0]),b.focusedEditor==e&&(b.focusedEditor=null),n}function h(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(d(e),e.unbindAllNativeEvents(),e.destroy(!0),e=null),e}var f=n.DOM,p=o.explode,m=o.each,g=o.extend,v=0,y,b,w=!1;return b={$:t,majorVersion:"4",minorVersion:"3.2",releaseDate:"2015-12-14",editors:[],i18n:s,activeEditor:null,setup:function(){var e=this,t,n,r="",o,a;if(n=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),o=window.tinymce||window.tinyMCEPreInit)t=o.base||o.baseURL,r=o.suffix;else{for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){a=s[u].src;var c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!=c.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}!t&&document.currentScript&&(a=document.currentScript.src,-1!=a.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/")))}e.baseURL=new i(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new i(e.baseURL),e.suffix=r,e.focusManager=new l(e)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function i(t,n,i){if(!h(s.get(t))){var r=new e(t,n,s);r.targetElm=r.targetElm||i,l.push(r),r.render()}}function r(e){var n=t[e];if(n)return n.apply(s,Array.prototype.slice.call(arguments,2))}function o(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}function a(){var e,s;if(f.unbind(window,"ready",a),r("onpageload"),t.types)return void m(t.types,function(e){m(f.select(e.selector),function(r){i(n(r),g({},t,e),r)})});if(t.selector)return void m(f.select(t.selector),function(e){i(n(e),t,e)});switch(t.target&&i(n(t.target),t),t.mode){case"exact":e=t.elements||"",e.length>0&&m(p(e),function(e){var n;(n=f.get(e))?i(e,t,n):m(document.forms,function(n){m(n.elements,function(n){n.name===e&&(e="mce_editor_"+v++,f.setAttrib(n,"id",e),i(e,t,n))})})});break;case"textareas":case"specific_textareas":m(f.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||(!t.editor_selector||o(e,t.editor_selector))&&i(n(e),t,e)})}t.oninit&&(e=s=0,m(l,function(t){s++,t.initialized?e++:t.on("init",function(){e++,e==s&&r("oninit")}),e==s&&r("oninit")}))}var s=this,l=[];s.settings=t,f.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),c(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),y||(y=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",y)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,i=t.editors,r;{if(e)return"string"==typeof e?(e=e.selector||e,void m(f.select(e),function(e){r=i[e.id],r&&t.remove(r)})):(r=e,i[r.id]?(d(r)&&t.fire("RemoveEditor",{editor:r}),i.length||f.unbind(window,"beforeunload",y),r.remove(),c(i,i.length>0),r):null);for(n=i.length-1;n>=0;n--)t.remove(i[n])}},execCommand:function(t,n,i){var r=this,o=r.get(i);switch(t){case"mceAddEditor":return r.get(i)||new e(i,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",0,i),!0)}return r.activeEditor?r.activeEditor.execCommand(t,n,i):!1},triggerSave:function(){m(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},g(b,a),b.setup(),window.tinymce=window.tinyMCE=b,b}),i(Ze,[Qe,m],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function r(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=i(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(n,i){"html4"===t.settings.schema&&e(i,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",r))})})}),i(et,[oe,m],function(e,t){var n={send:function(e){function i(){!e.async||4==r.readyState||o++>1e4?(e.success&&1e4>o&&200==r.status?e.success.call(e.success_scope,""+r.responseText,r,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",r,e),r=null):setTimeout(i,10)}var r,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",r=new XMLHttpRequest){if(r.overrideMimeType&&r.overrideMimeType(e.content_type),r.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(r.withCredentials=!0),e.content_type&&r.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){r.setRequestHeader(e.key,e.value)}),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=n.fire("beforeSend",{xhr:r,settings:e}).xhr,r.send(e.data),!e.async)return i();setTimeout(i,10)}}};return t.extend(n,e),n}),i(tt,[],function(){function e(t,n){var i,r,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return r="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(i=r.indexOf(t),i+1?"\\"+r.charAt(i+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,r="[";i<t.length;i++)r+=(i>0?",":"")+e(t[i],n);return r+"]"}r="{";for(a in t)t.hasOwnProperty(a)&&(r+="function"!=typeof t[a]?(r.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return r+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),i(nt,[tt,et,m],function(e,t,n){function i(e){this.settings=r({},e),this.count=0}var r=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,o=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,r):o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),i(it,[x],function(e){return{callbacks:{},count:0,send:function(n){var i=this,r=e.DOM,o=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+o;i.callbacks[o]=function(e){r.remove(a),delete i.callbacks[o],n.callback(e)},r.add(r.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),i(rt,[],function(){function e(){s=[];for(var e in a)s.push(e);r.length=s.length}function n(){function n(e){var n,i;return i=e!==t?c+e:r.indexOf(",",c),-1===i||i>r.length?null:(n=r.substring(c,i),c=i+1,n)}var i,r,s,c=0;if(a={},u){o.load(l),r=o.getAttribute(l)||"";do{var d=n();if(null===d)break;if(i=n(parseInt(d,32)||0),null!==i){if(d=n(),null===d)break;s=n(parseInt(d,32)||0),i&&(a[i]=s)}}while(null!==i);e()}}function i(){var t,n="";if(u){for(var i in a)t=a[i],n+=(n?",":"")+i.length.toString(32)+","+i+","+t.length.toString(32)+","+t;o.setAttribute(l,n);try{o.save(l)}catch(r){}e()}}var r,o,a,s,l,u;try{if(window.localStorage)return localStorage}catch(c){}return l="tinymce",o=document.documentElement,u=!!o.addBehavior,u&&o.addBehavior("#default#userData"),r={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,i()},removeItem:function(e){delete a[e],i()},clear:function(){a={},i()}},n(),r}),i(ot,[x,d,C,k,m,f],function(e,t,n,i,r,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,r.each(r,function(e,t){a[t]=e}),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),i(at,[ne,m],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t=this,n=t.settings,i,r,o,a;i=n.firstControlClass,r=n.lastControlClass,e.each(function(e){e.classes.remove(i).remove(r).add(n.controlClass),e.visible()&&(o||(o=e),a=e)}),o&&o.classes.add(i),a&&a.classes.add(r)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),i(st,[at],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),i(lt,[Ne],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t._super(e),e=t.settings,n=t.settings.size,t.on("click mousedown",function(e){e.preventDefault()}),t.on("touchstart",function(e){t.fire("click",e),e.preventDefault()}),e.subtype&&t.classes.add(e.subtype),n&&t.classes.add("btn-"+n),e.icon&&t.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild,t;e&&(t=e.style,t.width=t.height="100%"),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("icon"),r,o=e.state.get("text"),a="";return r=e.settings.image,r?(i="none","string"!=typeof r&&(r=window.getSelection?r[0]:r[1]),r=" style=\"background-image: url('"+r+"')\""):r="",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),i=e.settings.icon?n+"ico "+n+"i-"+i:"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+a+"</button></div>"},bindStates:function(){function e(e){var r=n("span."+i,t.getEl());e?(r[0]||(n("button:first",t.getEl()).append('<span class="'+i+'"></span>'),r=n("span."+i,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,i=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var i=n.value,r=t.classPrefix;t.settings.icon=i,i=i?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];i?(a&&a==o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=i):a&&o.removeChild(a),e(t.state.get("text"))}),t._super()}})}),i(ut,[ge],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),i(ct,[Ne],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,o=r.getElementsByTagName("i")[0];n?(o&&o==r.firstChild||(o=document.createElement("i"),r.insertBefore(o,r.firstChild)),o.className=n):o&&r.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}})}),i(dt,[Ne,pe,ue,g],function(e,t,n,i){return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,o=t.getEl();if(i.contains(o,r)||r==o)for(;r&&r!=o;)r.id&&-1!=r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){var i=t.state.get("value"),r=t.getEl("inp").value;return e.preventDefault(),t.state.set("value",r),i!=r&&t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),t.on("keyup",function(e){"INPUT"==e.target.nodeName&&t.state.set("value",e.target.value)})},showMenu:function(){var e=this,n=e.settings,i;e.menu||(i=n.menu||[],i.length?i={type:"menu",items:i}:i.type=i.type||"menu",e.menu=t.create(i).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),o=e.layoutRect(),a,s;a=r?o.w-n.getSize(r).width-10:o.w-10;var l=document;return l.all&&(!l.documentMode||l.documentMode<=8)&&(s=e.layoutRect().h-2+"px"),i(t.firstChild).css({width:a,lineHeight:s}),e._super(),e},postRender:function(){var e=this;return i(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.classPrefix,r=e.state.get("value")||"",o,a,s="",l="";return"spellcheck"in n&&(l+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(l+=' maxlength="'+n.maxLength+'"'),n.size&&(l+=' size="'+n.size+'"'),n.subtype&&(l+=' type="'+n.subtype+'"'),e.disabled()&&(l+=' disabled="disabled"'),o=n.icon,o&&"caret"!=o&&(o=i+"ico "+i+"i-"+n.icon),a=e.state.get("text"),(o||a)&&(s='<div id="'+t+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=o?'<i class="'+o+'"></i>':'<i class="'+i+'caret"></i>')+(a?(o?" ":"")+a:"")+"</button></div>",e.classes.add("has-open")),'<div id="'+t+'" class="'+e.classes+'"><input id="'+t+'-inp" class="'+i+'textbox" value="'+e.encode(r,!1)+'" hidefocus="1"'+l+' placeholder="'+e.encode(n.placeholder)+'" />'+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e._super()},remove:function(){i(this.getEl("inp")).off(),this._super()}})}),i(ht,[dt],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(n){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e._rendered&&e.repaintColor(t.value)}),e._super()}})}),i(ft,[lt,xe],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,e.panel=new t(i).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),i(pt,[ft,x],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return i&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;
return e.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=e||n.getParent(i.target,"."+e.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(e,i))}),delete e.settings.onclick,e._super()}})}),i(mt,[],function(){function e(e){function r(e,r,o){var a,s,l,u,c,d;return a=0,s=0,l=0,e/=255,r/=255,o/=255,c=t(e,t(r,o)),d=n(e,n(r,o)),c==d?(l=c,{h:0,s:0,v:100*l}):(u=e==c?r-o:o==c?e-r:o-e,a=e==c?3:o==c?1:5,a=60*(a-u/(d-c)),s=(d-c)/d,l=d,{h:i(a),s:i(100*s),v:i(100*l)})}function o(e,r,o){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,r=parseInt(r,10)/100,o=parseInt(o,10)/100,r=n(0,t(r,1)),o=n(0,t(o,1)),0===r)return void(d=h=f=i(255*o));switch(a=e/60,s=o*r,l=s*(1-Math.abs(a%2-1)),u=o-s,Math.floor(a)){case 0:d=s,h=l,f=0;break;case 1:d=l,h=s,f=0;break;case 2:d=0,h=s,f=l;break;case 3:d=0,h=l,f=s;break;case 4:d=l,h=0,f=s;break;case 5:d=s,h=0,f=l;break;default:d=h=f=0}d=i(255*(d+u)),h=i(255*(h+u)),f=i(255*(f+u))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(d)+e(h)+e(f)}function s(){return{r:d,g:h,b:f}}function l(){return r(d,h,f)}function u(e){var t;return"object"==typeof e?"r"in e?(d=e.r,h=e.g,f=e.b):"v"in e&&o(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(d=parseInt(t[1],10),h=parseInt(t[2],10),f=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(d=parseInt(t[1],16),h=parseInt(t[2],16),f=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(d=parseInt(t[1]+t[1],16),h=parseInt(t[2]+t[2],16),f=parseInt(t[3]+t[3],16)),d=0>d?0:d>255?255:d,h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,c}var c=this,d=0,h=0,f=0;e&&u(e),c.toRgb=s,c.toHsv=l,c.toHex=a,c.parse=u}var t=Math.min,n=Math.max,i=Math.round;return e}),i(gt,[Ne,ve,ue,mt],function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var i=n.getPos(e),r,o;return r=t.pageX-i.x,o=t.pageY-i.y,r=Math.max(0,Math.min(r/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:r,y:o}}function r(e,t){var r=(360-e.h)/360;n.css(d,{top:100*r+"%"}),t||n.css(f,{left:e.s+"%",top:100-e.v+"%"}),h.style.background=new i({s:100,v:100,h:e.h}).toHex(),s.color().parse({s:e.s,v:e.v,h:e.h})}function o(t){var n;n=e(h,t),u.s=100*n.x,u.v=100*(1-n.y),r(u),s.fire("change")}function a(t){var n;n=e(c,t),u=l.toHsv(),u.h=360*(1-n.y),r(u,!0),s.fire("change")}var s=this,l=s.color(),u,c,d,h,f;c=s.getEl("h"),d=s.getEl("hp"),h=s.getEl("sv"),f=s.getEl("svp"),s._repaint=function(){u=l.toHsv(),r(u)},s._super(),s._svdraghelper=new t(s._id+"-sv",{start:o,drag:o}),s._hdraghelper=new t(s._id+"-h",{start:a,drag:a}),s._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){function e(){var e,t,n="",r,a;for(r="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",a=o.split(","),e=0,t=a.length-1;t>e;e++)n+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/t+"%;"+r+a[e]+",endColorstr="+a[e+1]+");-ms-"+r+a[e]+",endColorstr="+a[e+1]+')"></div>';return n}var t=this,n=t._id,i=t.classPrefix,r,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");";return r='<div id="'+n+'-h" class="'+i+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+n+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+r+"</div>"}})}),i(vt,[Ne],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t=this,n=e||[],i,r,o="",a=t.classPrefix;for(i=0,r=n.length;r>i;i++)o+=(i>0?'<div class="'+a+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(i==r-1?" "+a+"last":"")+'" data-index="'+i+'" tabindex="-1" id="'+t._id+"-"+i+'" aria-level="'+i+'">'+n[i].name+"</div>";return o||(o='<div class="'+a+'path-item"> </div>'),o}})}),i(yt,[vt,Qe],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,i=t.activeEditor;return i.settings.elementpath!==!1&&(n.on("select",function(e){i.focus(),i.selection.select(this.row()[e.index].element),i.nodeChanged()}),i.on("nodeChange",function(t){for(var r=[],o=t.parents,a=o.length;a--;)if(1==o[a].nodeType&&!e(o[a])){var s=i.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||r.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}n.row(r)})),n._super()}})}),i(bt,[ge],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),i(wt,[ge,bt,m],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each(function(i){var r,o=i.settings.label;o&&(r=new t(n.extend({items:{type:"label",id:i._id+"-l",text:o,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults)),r.type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),e.replace(i,r),r.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e=0,n=[],i,r,o;if(t.settings.labelGapCalc!==!1)for(o="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),o.filter("formitem").each(function(t){var i=t.items()[0],r=i.getEl().clientWidth;e=r>e?r:e,n.push(i)}),r=t.settings.labelGap||0,i=n.length;i--;)n[i].settings.minWidth=e+r}var t=this;t._super(),t.on("show",e),e()}})}),i(_t,[wt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),i(xt,[dt,m],function(e,t){return e.extend({init:function(e){var n=this,i=tinymce.activeEditor,r=i.settings,o,a,s;e.spellcheck=!1,s=r.file_picker_types||r.file_browser_callback_types,s&&(s=t.makeMap(s,/[, ]/)),(!s||s[e.filetype])&&(a=r.file_picker_callback,!a||s&&!s[e.filetype]?(a=r.file_browser_callback,!a||s&&!s[e.filetype]||(o=function(){a(n.getEl("inp").id,n.value(),e.filetype,window)})):o=function(){var r=n.fire("beforecall").meta;r=t.extend({filetype:e.filetype},r),a.call(i,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),r)}),o&&(e.icon="browse",e.onaction=o),n._super(e)}})}),i(Ct,[st],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),i(kt,[st],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v=[],y,b,w,_,x,C,k,S,T,N,D,M,E,R,A,P,I,B,H,z,O,W,F=Math.max,L=Math.min;for(i=e.items().filter(":visible"),r=e.layoutRect(),o=e.paddingBox,a=e.settings,h=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(i=i.set(i.toArray().reverse()),h=h.split("-")[0]),"column"==h?(T="y",k="h",S="minH",N="maxH",M="innerH",D="top",E="deltaH",R="contentH",H="left",I="w",A="x",P="innerW",B="minW",z="right",O="deltaW",W="contentW"):(T="x",k="w",S="minW",N="maxW",M="innerW",D="left",E="deltaW",R="contentW",H="top",I="h",A="y",P="innerH",B="minH",z="bottom",O="deltaH",W="contentH"),d=r[M]-o[D]-o[D],C=c=0,t=0,n=i.length;n>t;t++)f=i[t],p=f.layoutRect(),m=f.settings,g=m.flex,d-=n-1>t?u:0,g>0&&(c+=g,p[N]&&v.push(f),p.flex=g),d-=p[S],y=o[H]+p[B]+o[z],y>C&&(C=y);if(_={},0>d?_[S]=r[S]-d+r[E]:_[S]=r[M]-d+r[E],_[B]=C+r[O],_[R]=r[M]-d,_[W]=C,_.minW=L(_.minW,r.maxW),_.minH=L(_.minH,r.maxH),_.minW=F(_.minW,r.startMinWidth),_.minH=F(_.minH,r.startMinHeight),!r.autoResize||_.minW==r.minW&&_.minH==r.minH){for(w=d/c,t=0,n=v.length;n>t;t++)f=v[t],p=f.layoutRect(),b=p[N],y=p[S]+p.flex*w,y>b?(d-=p[N]-p[S],c-=p.flex,p.flex=0,p.maxFlexSize=b):p.maxFlexSize=0;for(w=d/c,x=o[D],_={},0===c&&("end"==l?x=d+o[D]:"center"==l?(x=Math.round(r[M]/2-(r[M]-d)/2)+o[D],0>x&&(x=o[D])):"justify"==l&&(x=o[D],u=Math.floor(d/(i.length-1)))),_[A]=o[H],t=0,n=i.length;n>t;t++)f=i[t],p=f.layoutRect(),y=p.maxFlexSize||p[S],"center"===s?_[A]=Math.round(r[P]/2-p[I]/2):"stretch"===s?(_[I]=F(p[B]||0,r[P]-o[H]-o[z]),_[A]=o[H]):"end"===s&&(_[A]=r[P]-p[I]-o.top),p.flex>0&&(y+=p.flex*w),_[k]=y,_[T]=x,f.layoutRect(_),f.recalc&&f.recalc(),x+=y+u}else if(_.w=_.minW,_.h=_.minH,e.layoutRect(_),this.recalc(e),null===e._lastRect){var $=e.parent();$&&($._lastRect=null,$.recalc())}}})}),i(St,[at],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),i(Tt,[fe,Ne,xe,m,Qe,f],function(e,t,n,i,r,o){function a(e){function t(t,n){return function(){var i=this;e.on("nodeChange",function(r){var o=e.formatter,a=null;s(r.parents,function(e){return s(t,function(t){return n?o.matchNode(e,n,{value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),a?!1:void 0}),a?!1:void 0}),i.value(a)})}}function i(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function r(){function t(e){var n=[];if(e)return s(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=t(e.items);else{var a=e.format||"custom"+i++;e.format||(e.name=a,r.push(e)),o.format=a,o.cmd=e.cmd}n.push(o)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?o.concat(e.settings.style_formats):o:e.settings.style_formats||o)}var i=0,r=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(r,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&u(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function o(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function a(t){return function(){function n(){return e.undoManager?e.undoManager[t]():!1}var i=this;t="redo"==t?"hasRedo":"hasUndo",i.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(e.readonly||!n())})}}function l(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function u(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=r(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:o(n),onclick:function(){u(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:o(n)})}),e.addButton("undo",{tooltip:"Undo",onPostRender:a("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:a("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:a("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:a("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:l,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),s({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var n=[],r=i(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return s(r,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:r[0][0],values:n,fixedWidth:!0,onselect:u,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=i(e.settings.font_formats||n);return s(o,function(e){r.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:t(r,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],i="8pt 10pt 12pt 14pt 18pt 24pt 36pt",r=e.settings.fontsize_formats||i;return s(r.split(" "),function(e){var t=e,i=e,r=e.split("=");r.length>1&&(t=r[0],i=r[1]),n.push({text:t,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var s=i.each;r.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return r.translate(e)},t.tooltips=!o.iOS}),i(Nt,[st],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y,b,w,_,x,C,k=[],S=[],T,N,D,M,E,R;t=e.settings,r=e.items().filter(":visible"),o=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,_=t.alignV||t.align,g=e.paddingBox,E="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),_&&"string"==typeof _&&(_=[_]);for(d=0;i>d;d++)k.push(0);for(h=0;n>h;h++)S.push(0);for(h=0;n>h;h++)for(d=0;i>d&&(c=r[h*i+d],c);d++)u=c.layoutRect(),T=u.minW,N=u.minH,k[d]=T>k[d]?T:k[d],S[h]=N>S[h]?N:S[h];for(D=o.innerW-g.left-g.right,x=0,d=0;i>d;d++)x+=k[d]+(d>0?y:0),D-=(d>0?y:0)+k[d];for(M=o.innerH-g.top-g.bottom,C=0,h=0;n>h;h++)C+=S[h]+(h>0?b:0),M-=(h>0?b:0)+S[h];if(x+=g.left+g.right,C+=g.top+g.bottom,l={},l.minW=x+(o.w-o.innerW),l.minH=C+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),!o.autoResize||l.minW==o.minW&&l.minH==o.minH){o.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH);var A;A="start"==t.packV?0:M>0?Math.floor(M/n):0;var P=0,I=t.flexWidths;if(I)for(d=0;d<I.length;d++)P+=I[d];else P=i;var B=D/P;for(d=0;i>d;d++)k[d]+=I?I[d]*B:B;for(p=g.top,h=0;n>h;h++){for(f=g.left,s=S[h]+A,d=0;i>d&&(R=E?h*i+i-1-d:h*i+d,c=r[R],c);d++)m=c.settings,u=c.layoutRect(),a=Math.max(k[d],u.startMinWidth),u.x=f,u.y=p,v=m.alignH||(w?w[d]||w[0]:null),"center"==v?u.x=f+a/2-u.w/2:"right"==v?u.x=f+a-u.w:"stretch"==v&&(u.w=a),v=m.alignV||(_?_[d]||_[0]:null),"center"==v?u.y=p+s/2-u.h/2:"bottom"==v?u.y=p+s-u.h:"stretch"==v&&(u.h=s),c.layoutRect(u),f+=a+y,c.recalc&&c.recalc();p+=s+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var H=e.parent();H&&(H._lastRect=null,H.recalc())}}})}),i(Dt,[Ne,c],function(e,t){return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var i=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,n&&n()):t.setTimeout(function(){i.html(e)}),this}})}),i(Mt,[Ne,ue],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var i=t.getSize(e.getEl());i.width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e.state.get("text"))+"</label>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value))}),e._super()}})}),i(Et,[ge],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),i(Rt,[Et],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),i(At,[lt,pe,Rt],function(e,t,n){function i(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var r=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(){var e=this,n;return e.menu&&e.menu.visible()?e.hideMenu():(e.menu||(n=e.state.get("menu")||[],n.length?n={type:"menu",items:n}:n.type=n.type||"menu",n.renderTo?e.menu=n.parent(e).show().renderTo():e.menu=t.create(n).parent(e).renderTo(),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control.parent()===e.menu&&(t.stopPropagation(),e.focus(),e.hideMenu())}),e.menu.on("select",function(){e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu("show"==t.type),e.aria("expanded","show"==t.type)}).fire("show")),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),void e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,i=e.classPrefix,r=e.settings.icon,o,a=e.state.get("text"),s="";return o=e.settings.image,o?(r="none","string"!=typeof o&&(o=window.getSelection?o[0]:o[1]),o=" style=\"background-image: url('"+o+"')\""):o="",a&&(e.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+e.encode(a)+"</span>"),r=e.settings.icon?i+"ico "+i+"i-"+r:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+s+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&i(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,i=e.parent(),o;n&&i&&n instanceof r&&n.parent()==i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(o=!0),e.hideMenu())}),o&&(n.focus(),n.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return r}),i(Pt,[Ne,pe,f],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this,n;t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu&&t.classes.add("menu-item-expand"),e.preview&&t.classes.add("menu-item-preview"),n=t.state.get("text"),("-"===n||"|"===n)&&(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-")),e.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.classes.add("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,i,r=e.parent();if(r.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){i=e.menu,i?i.show():(i=n.menu,i.length?i={type:"menu",items:i}:i.type=i.type||"menu",r.settings.itemDefaults&&(i.itemDefaults=r.settings.itemDefaults),i=e.menu=t.create(i).parent(e).renderTo(),i.reflow(),i.on("cancel",function(t){t.stopPropagation(),e.focus(),i.hide()}),i.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),i.on("hide",function(t){t.control===i&&e.classes.remove("selected")}),i.submenu=!0),i._parentMenu=r,i.classes.add("menu-sub");var o=i.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);i.moveRel(e.getEl(),o),i.rel=o,o="menu-sub-"+o,i.classes.remove(i._lastRel).add(o),i._lastRel=o,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,i,r={};for(r=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)i=r[e[t].toLowerCase()],i&&(e[t]=i);return e.join("+")}var t=this,i=t._id,r=t.settings,o=t.classPrefix,a=t.encode(t.state.get("text")),s=t.settings.icon,l="",u=r.shortcut;return s&&t.parent().classes.add("menu-has-icons"),r.image&&(l=" style=\"background-image: url('"+r.image+"')\""),u&&(u=e(u)),s=o+"ico "+o+"i-"+(t.settings.icon||"none"),'<div id="'+i+'" class="'+t.classes+'" tabindex="-1">'+("-"!==a?'<i class="'+s+'"'+l+"></i> ":"")+("-"!==a?'<span id="'+i+'-text" class="'+o+'text">'+a+"</span>":"")+(u?'<div id="'+i+'-shortcut" class="'+o+'menu-shortcut">'+u+"</div>":"")+(r.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&i.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),i(It,[xe,Pt,m],function(e,t,n){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var i=e.items,r=i.length;r--;)i[r]=n.extend({},e.itemDefaults,i[r]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.image||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}})}),i(Bt,[At,It],function(e,t){return e.extend({init:function(e){function t(i){for(var a=0;a<i.length;a++){if(r=i[a].selected||e.value===i[a].value)return o=o||i[a].text,n.state.set("value",i[a].value),!0;if(i[a].menu&&t(i[a].menu))return!0}}var n=this,i,r,o,a;n._super(e),e=n.settings,n._values=i=e.values,i&&("undefined"!=typeof e.value&&t(i),!r&&i.length>0&&(o=i[0].text,n.state.set("value",i[0].value)),n.state.set("menu",i)),n.state.set("text",e.text||o),n.classes.add("listbox"),n.on("select",function(t){var i=t.control;a&&(t.lastControl=a),e.multiple?i.active(!i.active()):n.value(t.control.value()),a=i})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu&&(i=n(e[r].menu,t)))return i}}var i=this;return i.on("show",function(t){e(t.control,i.value())}),i.state.on("change:value",function(e){var t=n(i.state.get("menu"),e.value);t?i.text(t.text):i.text(i.settings.text)}),i._super()}})}),i(Ht,[ct],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),i(zt,[Ne,ve],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),i(Ot,[Ne],function(e){function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options)},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e=this,n,i="";return n=t(e._options),e.size&&(i=' size = "'+e.size+'"'),'<select id="'+e._id+'" class="'+e.classes+'"'+i+">"+n+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),i(Wt,[Ne,ve,ue],function(e,t,n){function i(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}function r(e,t){var i,r,o,a,s;"v"==e.settings.orientation?(a="top",o="height",r="h"):(a="left",o="width",r="w"),i=(e.layoutRect()[r]||100)-n.getSize(e.getEl("handle"))[o],s=i*((t-e._minValue)/(e._maxValue-e._minValue))+"px",e.getEl("handle").style[a]=s,e.getEl("handle").style.height=e.layoutRect().h+"px"}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e=this,r,o,a=0,s,l,u,c,d,h,f,p;
l=e._minValue,u=e._maxValue,s=e.value(),"v"==e.settings.orientation?(d="screenY",h="top",f="height",p="h"):(d="screenX",h="left",f="width",p="w"),e._super(),e._dragHelper=new t(e._id,{handle:e._id+"-handle",start:function(t){r=t[d],o=parseInt(e.getEl("handle").style[h],10),c=(e.layoutRect()[p]||100)-n.getSize(e.getEl("handle"))[f],e.fire("dragstart",{value:s})},drag:function(t){var n=t[d]-r,f=e.getEl("handle");a=i(o+n,0,c),f.style[h]=a+"px",s=l+a/c*(u-l),e.value(s),e.tooltip().text(""+e.settings.previewFilter(s)).show().moveRel(f,"bc tc"),e.fire("drag",{value:s})},stop:function(){e.tooltip().hide(),e.fire("dragend",{value:s})}})},repaint:function(){this._super(),r(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){r(e,t.value)}),e._super()}})}),i(Ft,[Ne],function(e){return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),i(Lt,[At,ue,g],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,i=e.getEl(),r=e.layoutRect(),o,a;return e._super(),o=i.firstChild,a=i.lastChild,n(o).css({width:r.w-t.getSize(a).width,height:r.h-2}),n(a).css({height:r.h-2}),e},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i,r=e.state.get("icon"),o=e.state.get("text"),a="";return i=e.settings.image,i?(r="none","string"!=typeof i&&(i=window.getSelection?i[0]:i[1]),i=" style=\"background-image: url('"+i+"')\""):i="",r=e.settings.icon?n+"ico "+n+"i-"+r:"",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),i($t,[St],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),i(Ut,[be,g,ue],function(e,t,n){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var o=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)})},initLayoutRect:function(){var e=this,t,i,r;i=n.getSize(e.getEl("head")).width,i=0>i?0:i,r=0,e.items().each(function(e){i=Math.max(i,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=i,e.settings.h=r,e.layoutRect({x:0,y:0,w:i,h:r})});var o=n.getSize(e.getEl("head")).height;return e.settings.minWidth=i,e.settings.minHeight=r+o,t=e._super(),t.deltaH+=o,t.innerH=t.h-t.deltaH,t}})}),i(jt,[Ne],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){return e.toJSON?(n=e,!1):void 0}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e=this,t,n,i,r,o=0,a;t=e.getEl().style,n=e._layoutRect,a=e._lastRepaintRect||{};var s=document;return!e.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=n.h-o+"px"),i=e.borderBox,r=i.left+i.right+8,o=i.top+i.bottom+(e.settings.multiline?8:0),n.x!==a.x&&(t.left=n.x+"px",a.x=n.x),n.y!==a.y&&(t.top=n.y+"px",a.y=n.y),n.w!==a.w&&(t.width=n.w-r+"px",a.w=n.w),n.h!==a.h&&(t.height=n.h-o+"px",a.h=n.h),e._lastRepaintRect=a,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.encode(e.state.get("value"),!1),r="";return"spellcheck"in n&&(r+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(r+=' maxlength="'+n.maxLength+'"'),n.size&&(r+=' size="'+n.size+'"'),n.subtype&&(r+=' type="'+n.subtype+'"'),e.disabled()&&(r+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+r+">"+i+"</textarea>":'<input id="'+t+'" class="'+e.classes+'" value="'+i+'" hidefocus="1"'+r+" />"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),i(Vt,[g,fe,c],function(e,t,n){return function(i,r){var o=this,a,s=t.classPrefix;o.show=function(t,l){return o.hide(),a=!0,n.setTimeout(function(){a&&(e(i).append('<div class="'+s+"throbber"+(r?" "+s+"throbber-inline":"")+'"></div>'),l&&l())},t),o},o.hide=function(){var e=i.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),a=!1,o}}}),a([l,u,c,d,h,f,m,g,v,y,w,x,C,k,D,E,R,A,P,I,B,H,O,W,Y,q,X,J,ee,te,ne,ie,oe,se,le,he,fe,pe,me,ge,ve,ye,be,we,_e,xe,Ce,ke,Se,Te,Ne,De,Me,Ee,Pe,Be,Ke,Xe,Je,Qe,et,tt,nt,it,rt,ot,at,st,lt,ut,ct,dt,ht,ft,pt,mt,gt,vt,yt,bt,wt,_t,xt,Ct,kt,St,Tt,Nt,Dt,Mt,Et,Rt,At,Pt,It,Bt,Ht,zt,Ot,Wt,Ft,Lt,$t,Ut,jt,Vt])}(this);function waitForWebfonts(e,t){var n=5*1e3;var i=(new Date).getTime();var r=0;var o=false;for(var a=0,s=e.length;a<s;++a){(function(a){var s=document.createElement("span");s.innerHTML="giItT1WQy@!-/#";s.style.position="absolute";s.style.left="-10000px";s.style.top="-10000px";s.style.fontSize="300px";s.style.fontFamily="initial";s.style.fontVariant="normal";s.style.fontStyle="normal";s.style.fontWeight="normal";s.style.letterSpacing="0";document.body.appendChild(s);var l=s.offsetWidth;s.style.fontFamily=a;var u;function c(){if(s&&((new Date).getTime()-i>n||s.offsetWidth!=l)){++r;s.parentNode.removeChild(s);s=null;if(u){clearInterval(u)}}if(r>=e.length){if(r==e.length){if(!o){t()}o=true;return true}}}setTimeout(function(){if(!c()){u=setInterval(c,50)}})})(e[a])}}var Stream={create:function(){var e=false;var t=$.Deferred();var n;var i=[];var r=function(r){t.resolve(r);if(!e&&n!==r){n=r;i.map(function(e){return e(r)})}};return{lastValue:function(){return n},map:function(e){var t=Stream.create();if(n!==undefined){t.push(e(n))}i.push(function(n){t.push(e(n))});return t},reduce:function(e,t){var r=Stream.once(t);if(n!==undefined){r.push(e(r.lastValue(),n))}i.push(function(t){r.push(e(r.lastValue(),t))});return r},filter:function(e){var t=Stream.create();if(n!==undefined){e(n,t.push)}i.push(function(n){e(n,t.push)});return t},onValue:function(e){return this.map(function(t){e(t);return true})},promise:t.promise(),prop:function(e){return this.map(function(t){return t[e]})},delay:function(e){var t=Stream.create();this.map(function(n){setTimeout(function(){t.push(n)},e)});return t},end:function(){e=true},push:r,pushAll:function(e){this.onValue(function(t){e.push(t)})},test:function(){var e=arguments;var t=new Error;setTimeout(function(){if(n===undefined){e;t;debugger}},5e3);return this}}},once:function(e){var t=Stream.create();t.push(e);return t},never:function(){return Stream.create()},combine:function(e,t){var n=[];var i=Stream.create();var r=false;var o=new Error;var a=function(){if(!r){r=true;setTimeout(function(){o;r=false;for(var a=0;a<e.length;a++){if(n[a]===undefined){return}}i.push(t.apply(null,n))})}};e.reduce(function(e,t){t.onValue(function(t){n[e]=t;a()});return e+1},0);return i},all:function(e,t){return this.combine(e,function(){t.apply(null,arguments);return true})},combineObject:function(e){var t=Object.keys(e);var n={};var i=Stream.create();var r=false;var o=function(){if(!r){r=true;setTimeout(function(){r=false;for(var e=0;e<t.length;e++){var o=t[e];if(n[o]===undefined){return}}i.push($.extend({},n))})}};t.map(function(t,i){e[t].onValue(function(e){n[t]=e;o()})});return i},splitObject:function(e){var t=Object.keys(e);var n={};t.map(function(t){n[t]=Stream.once(e[t])});return n},fromPromise:function(e,t){var n=Stream.never();if(t){n.push(t)}e.then(function(e){n.push(e)});return n}};var child=function(e){if(!e||!e.create){console.error("faulty component")}return function(t){t.child(e)}};var children=function(e){e.map(function(e){if(!e||!e.create){console.error("faulty component")}});return function(t){t.children(e)}};var wireChildren=function(e){return function(t){t.wireChildren=e}};var component=function(e){var t={create:function(e){var t=this.build(e);t.wireChildren=t.wireChildren||function(){};var n=t.childComponentPs;var i=[];var r=n.map(function(e){if($.isArray(e)){var n=[];var r=e.map(function(e){var i=t.newCtx();n.push(i);return e.create(i)});i.push(n);return r}else{var o=t.newCtx();i.push(o);return e.create(o)}});t.childInstances=r;var o=t.wireChildren.apply(null,[t,e].concat(r))||[];var a=function(e,t,n){e=e||{};if(e.top){e.top.pushAll(n.top)}if(e.left){e.left.pushAll(n.left)}if(e.width){e.width.pushAll(n.width)}if(e.height){e.height.pushAll(n.height)}if(e.backgroundColor){e.backgroundColor.pushAll(n.backgroundColor)}if(e.fontColor){e.fontColor.pushAll(n.fontColor)}};for(var s=0;s<r.length;s++){var l=o[s]||{};var u=r[s];var c=i[s];if($.isArray(u)){for(var d=0;d<u.length;d++){a(l[d],u[d],c[d])}}else{a(l,u,c)}}return t},build:e,and:function(e){var t=this;var n=$.extend({},t);n.build=function(n){var i=t.build(n);var r=e(i,n);var o=i.destroy;if(r){i.destroy=function(){var e=r();if(e){e.then(function(){o.apply(i)})}else{o.apply(i)}}}return i};return n},all:function(e){return e.reduce(function(e,t){return e.and(t)},this)}};return t};var findOptimalHeight=function(e,t){var n=$(".sandbox");var i=e.clone();i.css("height","").css("width",t).appendTo(n);var r=parseInt(i.css("height"));i.remove();return r};var findMinWidth=function(e){var t=$(".sandbox");var n=e.clone();n.css("width","").css("height","").appendTo(t);var i=parseInt(n.css("width"));n.remove();return i};var findScrollWidth=function(e,t){var n=$(".sandbox");var i=e.clone();i.css("width",t).css("height","").appendTo(n);var r=i[0].scrollWidth;i.remove();return r};var findMinHeight=function(e){var t=$(".sandbox");var n=e.clone();n.css("width","").css("height","").appendTo(t);var i=parseInt(n.css("height"));n.remove();return i};var updateDomFuncs=[];var updateDomFunc=function(e){if(updateDomFuncs.length===0){setTimeout(function(){updateDomFuncs.map(function(e){e()});updateDomFuncs=[];updateWindowWidth()})}updateDomFuncs.push(e)};var el=function(e){return component(function(t){var n=Stream.never();var r=Stream.never();var o=function(){var e=findMinHeight(i.$el);i.minWidth.push(mw);i.minHeight.push(e)};var a=$(document.createElement(e));a.css("position","absolute");a.css("visibility","hidden");t.$el.append(a);t.top.onValue(function(e){updateDomFunc(function(){a.css("top",px(e))})});t.left.onValue(function(e){updateDomFunc(function(){a.css("left",px(e))})});t.width.onValue(function(e){updateDomFunc(function(){a.css("width",px(e))})});t.height.onValue(function(e){updateDomFunc(function(){a.css("height",px(e))})});Stream.combine([t.width,t.height,t.top,t.left],function(){updateDomFunc(function(){a.css("visibility","")})});t.backgroundColor.onValue(function(e){a.css("background-color",e)});t.fontColor.onValue(function(e){a.css("color",e)});var s=[];var l=Stream.combine([t.scroll,t.top],function(e,t){return e-t});var u=Stream.combine([t.topAccum,t.top],function(e,t){return e+t});var c=Stream.combine([t.leftAccum,t.left],function(e,t){return e+t});var d=function(e){return{$el:a,scroll:l,topAccum:u,top:Stream.never(),left:Stream.never(),leftAccum:c,width:Stream.never(),height:Stream.never(),backgroundColor:Stream.once("rgba(0,0,0,0)"),fontColor:Stream.once("inherit")}};return{$el:a,optimalWidth:0,minWidth:n,minHeight:r,newCtx:d,childComponentPs:s,child:function(e){s.push(e)},children:function(e){s.push(e)},destroy:function(){n.end();r.end();var e=this.childInstances||[];for(var t=0;t<e.length;t++){var i=e[t];if($.isArray(i)){var o=i;o.map(function(e){e.destroy()})}else{i.destroy()}}this.$el.remove()},updateDimensions:function(e){var t=findMinWidth(this.$el);var n=findMinHeight(this.$el);if(!e||t!==0){this.minWidth.push(t)}if(!e||n!==0){this.minHeight.push(n)}}}})};var a=el("a");var button=el("button");var div=el("div");var form=el("form");var img=el("img");var input=el("input");var li=el("li");var option=el("option");var select=el("select");var textarea=el("textarea");var ul=el("ul");var rootContext=function(){return{$el:$("body"),top:Stream.once(0),topAccum:Stream.once(0),left:Stream.once(0),leftAccum:Stream.once(0),scroll:windowScroll,width:windowWidth,height:Stream.never(),backgroundColor:Stream.once("white"),fontColor:Stream.once("black")}};var rootComponent=function(e,t,n){var i=$.extend(rootContext(),t);var r=e.create(i);r.minHeight.pushAll(i.height);if(n){i.width.map(function(e){i.$el.css("width",e)});i.height.map(function(e){i.$el.css("height",e)})}return r};var passThroughToFirst=function(e,t,n){n.minHeight.pushAll(e.minHeight);n.minWidth.pushAll(e.minWidth);return[{width:t.width,height:t.height,top:Stream.once(0),left:Stream.once(0)}]};var unit=function(e){return function(t){return t+e}};var px=unit("px");var url=function(e){return'url("'+e+'")'};var color=function(e){return $.extend({r:0,g:0,b:0,a:1},e)};var multiplyColor=function(e){return function(t){return{r:Math.min(255,t.r*e),g:Math.min(255,t.g*e),b:Math.min(255,t.b*e),a:t.a}}};var desaturate=function(e){return function(t){var n=(t.r+t.g+t.b)/3;var i=1-e;return{r:i*t.r+e*n,g:i*t.g+e*n,b:i*t.b+e*n,a:t.a}}};var colorString=function(e){return"rgba("+Math.floor(e.r)+","+Math.floor(e.g)+","+Math.floor(e.b)+","+e.a+")"};var rgbColorString=function(e){return"rgb("+Math.floor(e.r)+","+Math.floor(e.g)+","+Math.floor(e.b)+")"};var transparent=color({a:0});var black=color({r:0,g:0,b:0});var white=color({r:255,g:255,b:255});var $$=function(e){return function(){var t=Array.prototype.slice.call(arguments);return function(n){n.$el[e].apply(n.$el,t);setTimeout(function(){n.updateDimensions(true)})}}};var $addClass=$$("addClass");var $css=$$("css");var $attr=$$("attr");var $prop=$$("prop");var chooseHeightFromWidth=function(e,t){var n=false;t.width.onValue(function(t){if(!n){n=true;setTimeout(function(){var i=findOptimalHeight(e.$el,t);e.minHeight.push(i);n=false})}})};var $html=function(e,t){return function(n,i){n.$el.html(e);chooseHeightFromWidth(n,i);if(t){n.updateDimensions()}}};var windowWidth=Stream.never();var windowHeight=Stream.never();var updateWindowWidth=function(){windowWidth.push(document.body.clientWidth)};var updateWindowHeight=function(){windowHeight.push(window.innerHeight)};$(updateWindowWidth);$(updateWindowHeight);$(window).on("resize",function(){updateWindowWidth();updateWindowHeight()});var windowResize=Stream.once(null);$(window).on("resize",function(e){windowResize.push(e)});var windowScroll=Stream.never();$(window).on("scroll",function(){windowScroll.push(window.scrollY)});windowScroll.push(window.scrollY);var windowHash=Stream.never();$(window).on("hashchange",function(){windowHash.push(location.hash)});windowHash.push(location.hash);var withMinWidth=function(e,t){return function(n){n.minWidth.push(e);if(t){n.minWidth.end()}}};var withMinHeight=function(e,t){return function(n){n.minHeight.push(e);if(t){n.minHeight.end()}}};var adjustMinSize=function(e){return function(t){return div.all([child(t),wireChildren(function(t,n,i){i.minWidth.map(function(t){return e.mw(t)}).pushAll(t.minWidth);i.minHeight.map(function(t){return e.mh(t)}).pushAll(t.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:n.width,height:n.height}]})])}};var withBackgroundColor=function(e){return function(t,n){n.backgroundColor.push(colorString(e))}};var withFontColor=function(e){return function(t,n){n.fontColor.push(colorString(e))}};var link=$css("cursor","pointer");var componentName=function(e){return function(t){t.$el.addClass(e)}};var onThis=function(e){return function(t){return function(n){var i=false;n.$el.on(e,function(e){if(!i){return t(e,function(){i=true;return function(){i=false}},n)}})}}};var changeThis=onThis("change");var clickThis=onThis("click");var inputPropertychangeThis=onThis("input propertychange");var keydownThis=onThis("keydown");var keyupThis=onThis("keyup");var mousedownThis=onThis("mousedown");var mouseoverThis=onThis("mouseover");var mouseoutThis=onThis("mouseout");var mouseupThis=onThis("mouseup");var submitThis=onThis("click");var hoverThis=function(e){return function(t){t.$el.on("mouseover",function(){e(true,t)});t.$el.on("mouseout",function(){e(false,t)})}};var cssStream=function(e,t){return function(n){t.map(function(t){n.$el.css(e,t)})}};var keepAspectRatioCorner=function(e){e=e||{};return function(t){return div.all([child(t),wireChildren(function(t,n,i){i.minWidth.pushAll(t.minWidth);i.minHeight.pushAll(t.minHeight);var r={top:Stream.create(),left:Stream.create(),width:Stream.create(),height:Stream.create()};Stream.combine([i.minWidth,i.minHeight,n.width,n.height],function(t,n,i,o){var a=t/n;var s=i/o;if(s>a){var l=o*a;var u;if(e.left){u=0}else if(e.right){u=i-l}else{u=(i-l)/2}r.top.push(0);r.left.push(u);r.width.push(l);r.height.push(o)}else{var c=i/a;var d;if(e.top){d=0}else if(e.bottom){d=o-c}else{d=(o-c)/2}r.top.push(d);r.left.push(0);r.width.push(i);r.height.push(c)}});return[r]})])}};var keepAspectRatio=keepAspectRatioCorner();var align=function(e){e=e||{};return function(t){return div.all([child(t),componentName("align"),wireChildren(function(t,n,i){i.minWidth.pushAll(t.minWidth);i.minHeight.pushAll(t.minHeight);var r={top:Stream.create(),left:Stream.create(),width:Stream.create(),height:Stream.create()};n.width.pushAll(r.width);n.height.pushAll(r.height);Stream.combine([i.minWidth,i.minHeight,n.width,n.height],function(t,n,i,o){var a=t/n;var s=i/o;var l;if(e.left){l=0}else if(e.right){l=i-t}else{l=(i-t)/2}var u;if(e.top){u=0}else if(e.bottom){u=o-n}else{u=(o-n)/2}r.top.push(u);r.left.push(l)});return[r]})])}};var image=function(e){var t=e.src&&e.src.map?e.src:Stream.once(e.src);return img.all([function(n,i){t.map(function(e){n.$el.prop("src",e)});n.minWidth.push(e.minWidth||e.chooseWidth||0);n.minHeight.push(e.minHeight||e.chooseHeight||0);n.$el.css("display","none");n.$el.on("load",function(){n.$el.css("display","");var t=n.$el[0].naturalWidth;var r=n.$el[0].naturalHeight;var o=t/r;var a,s;if(e.useNativeSize!==undefined){n.minWidth.push(t);n.minHeight.push(r)}if(e.minWidth!==undefined){a=e.minWidth;s=a/o;n.minWidth.push(a);n.minHeight.push(s)}else if(e.minHeight!==undefined){s=e.minHeight;a=s*o;n.minWidth.push(a);n.minHeight.push(s)}if(e.chooseWidth!==undefined){i.height.map(function(t){return Math.max(e.chooseWidth,t*o)}).pushAll(n.minWidth)}if(e.chooseHeight!==undefined){i.width.map(function(t){return Math.max(e.chooseHeight,t/o)}).pushAll(n.minHeight)}})}])};var linkTo=function(e,t){return a.all([$prop("href",e),child(t),wireChildren(passThroughToFirst)])};var nothing=div.all([componentName("nothing"),withMinHeight(0),withMinWidth(0)]);var text=function(e){if(!(e.map&&e.push)){e=Stream.once(e)}return div.all([componentName("text"),function(t,n){chooseHeightFromWidth(t,n);e.onValue(function(e){if(e){while(e.indexOf(" ")!==-1){e=e.replace(" ","&nbsp;")}}t.$el.html(e);t.minWidth.push(findMinWidth(t.$el))})}])};var faIcon=function(e){return text('<i class="fa fa-'+e+'"></i>')};var paragraph=function(e,t){if(!(e&&e.map&&e.push)){e=Stream.once(e)}t=t||0;return div.all([componentName("paragraph"),function(n,i){chooseHeightFromWidth(n,i);n.updateDimensions=function(){n.minWidth.push(findScrollWidth(n.$el,t))};e.onValue(function(e){n.$el.html(e);n.$el.find("img").css("max-width","100%");n.updateDimensions()});Stream.combine([e,i.width],function(e,t){var i=findOptimalHeight(n.$el,t);n.minHeight.push(i)})}])};var ignoreSurplusWidth=function(e,t){return t};var ignoreSurplusHeight=function(e,t){return t};var evenSplitSurplusWidth=function(e,t){var n=t[t.length-1];var i=e-(n.left+n.width);var r=i/t.length;t.map(function(e,t){e.width+=r;e.left+=t*r});return t};var justifySurplusWidth=function(e,t){var n=t[t.length-1];var i=e-(n.left+n.width);t.map(function(e,n){for(var r=0;r<n;r++){e.left+=i/(t.length-1)}});return t};var justifyAndCenterSurplusWidth=function(e,t){var n=t[t.length-1];var i=e-(n.left+n.width);t.map(function(e,n){e.left+=n*i/t.length+i/(2*t.length)});return t};var superSurplusWidth=function(e,t){var n=t[t.length-1];var i=e-(n.left+n.width);if(t.length===1){if(i<t[0].width){return evenSplitSurplusWidth(e,t)}else{return t}}if(t.length===2){return justifyAndCenterSurplusWidth(e,t)}return justifySurplusWidth(e,t)};var giveToNth=function(e){return function(t,n){var i=n[n.length-1];var r=t-(i.left+i.width);n.map(function(t,i){if(i===e||i===n.length-1&&e>=n.length){t.width+=r}else if(i>e){t.left+=r}});return n}};var giveToFirst=giveToNth(0);var giveToSecond=giveToNth(1);var giveToThird=giveToNth(2);var giveHeightToNth=function(e){return function(t,n){var i=n[n.length-1];var r=t-(i.top+i.height);n.map(function(t,i){if(i===e||i===n.length-1&&e>=n.length){t.height+=r}else if(i>e){t.top+=r}});return n}};var slideshow=function(e,t){e.gutterSize=e.gutterSize||0;e.leftTransition=e.leftTransition||"none";e.alwaysFullWidth=e.alwaysFullWidth||false;return div.all([$css("overflow","hidden"),componentName("slideshow"),children(t.map(function(t){return t.all([$css("transition","left "+e.leftTransition)])})),wireChildren(function(t,n,i){var r=Stream.combine(i.map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);return e});r.onValue(function(n){t.minWidth.push(n.reduce(function(e,t){return e+t},e.gutterSize*(i.length-1)))});var o=i.map(function(){return{top:Stream.once(0),left:Stream.never(),width:Stream.never(),height:n.height}});Stream.all([e.selected,n.width,r],function(t,n,i){var r=0;var a=0;var s=0;var l=i.map(function(i,o){i=e.alwaysFullWidth?n:i;if(t===o){r=s+e.gutterSize*o;a=i}var l={left:s+e.gutterSize*o,width:i};s+=i;return l});var u=(n-a)/2-r;l.map(function(e){e.left+=u});l.map(function(e,t){var n=o[t];n.left.push(e.left);n.width.push(e.width)})});Stream.combine(i.map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);var t=e.reduce(function(e,t){return Math.max(e,t)},0);o.map(function(e){e.height.push(t)});return t}).pushAll(t.minHeight);return[o]})])};var sideBySide=function(e,t){e.gutterSize=e.gutterSize||0;e.handleSurplusWidth=e.handleSurplusWidth||ignoreSurplusWidth;return div.all([componentName("sideBySide"),children(t),wireChildren(function(t,n,i){var r=Stream.combine(i.map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);return e});r.onValue(function(n){t.minWidth.push(n.reduce(function(e,t){return e+t},e.gutterSize*(i.length-1)))});var o=i.map(function(){return{top:Stream.once(0),left:Stream.never(),width:Stream.never(),height:n.height}});Stream.all([n.width,r],function(t,n){var i=0;var r=n.map(function(t,n){var r={left:i+e.gutterSize*n,width:t};i+=t;return r});r=e.handleSurplusWidth(t,r);r.map(function(e,t){var n=o[t];n.left.push(e.left);n.width.push(e.width)})});Stream.combine(i.map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)}).pushAll(t.minHeight);return[o]})])};var stack2=function(e,t){e.gutterSize=e.gutterSize||0;e.handleSurplusHeight=e.handleSurplusHeight||ignoreSurplusHeight;return div.all([componentName("stack2"),children(t),wireChildren(function(t,n,i){var r=Stream.combine(i.map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);return e});r.onValue(function(n){t.minHeight.push(n.reduce(function(e,t){return e+t},e.gutterSize*(i.length-1)))});var o=i.map(function(){return{top:Stream.create(),left:Stream.once(0),width:n.width,height:Stream.never()}});Stream.all([n.height,r],function(t,n){var i=0;var r=n.map(function(t,n){var r={top:i+e.gutterSize*n,height:t};i+=t;return r});r=e.handleSurplusHeight(t,r);r.map(function(e,t){var n=o[t];n.top.push(e.top);n.height.push(e.height)})});Stream.combine(i.map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)}).pushAll(t.minWidth);return[o]})])};var intersperse=function(e,t){var n=[];e.map(function(e){n.push(e);n.push(t)});n.pop();return n};var stackTwo=function(e,t){e.gutterSize=e.gutterSize||0;e.align=e.align||"left";return div.all([componentName("stack"),children(t),wireChildren(function(t,n,i){var r=i[0];var o=i[1];var a=e.gutterSize;var s=[];t.minHeight.push(0);t.minWidth.push(0);Stream.combine([r.minHeight,o.minHeight],function(e,t){return e+t+a}).pushAll(t.minHeight);Stream.combine([r.minWidth,o.minWidth],function(e,t){return Math.max(e,t)}).pushAll(t.minWidth);return[[{top:Stream.once(0),left:Stream.once(0),width:n.width,height:r.minHeight},{top:r.minHeight.map(function(e){return e+a}),left:Stream.once(0),width:n.width,height:o.minHeight}]]})])};var stack=function(e,t){e.gutterSize=e.gutterSize||0;e.collapseGutters=e.collapseGutters||false;e.align=e.align||"left";if(t.length===0){t=[nothing]}return div.all([componentName("stack"),children(t),wireChildren(function(t,n,i){var r=e&&e.gutterSize||0;var o=function(t){if(t.length===0){return Stream.once(0)}return Stream.combine(t.map(function(t,i){var r;if(e&&e.mhs&&e.mhs[i]){var o=e.mhs[i](n);return Stream.combine([t.minHeight,o],function(e,t){return Math.max(e,t)})}else{return t.minHeight}return t.minHeight}),function(){var t=Array.prototype.slice.call(arguments);var n=t.reduce(function(t,n){return t+n+(e.collapseGutters&&n===0?0:r)},-r);return n})};var a=[];i.reduce(function(t,i,s){var l=o(t).map(function(t){return t+(s===0||e.collapseGutters&&t===0?0:r)});var u;if(e&&e.mhs&&e.mhs[t.length]){var c=e.mhs[t.length](n);u=Stream.combine([i.minHeight,c],function(e,t){return Math.max(e,t)})}else{u=i.minHeight}a.push({top:l,left:Stream.once(0),width:n.width,height:u});t.push(i);return t},[]);o(i).pushAll(t.minHeight);Stream.combine(i.map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)}).pushAll(t.minWidth);return[a]})])};var adjustPosition=function(e,t){var n=e.top||0;var i=e.left||0;var r=e.expand;return div.all([componentName("adjustPosition"),child(t),wireChildren(function(e,t,o){o.minWidth.map(function(e){return e+r?i:0}).pushAll(e.minWidth);o.minHeight.map(function(e){return e+r?n:0}).pushAll(e.minHeight);return[{top:t.top.map(function(e){return e+n}),left:t.left.map(function(e){return e+i}),width:t.width,height:t.height}]})])};var padding=function(e,t){var n=e.all||0,i=e.all||0,r=e.all||0,o=e.all||0;if($.isNumeric(e)){n=i=r=o=e}else{for(var a in e){var s=a.toLowerCase();if(s.indexOf("top")!==-1){n=e[a]}if(s.indexOf("bottom")!==-1){i=e[a]}if(s.indexOf("left")!==-1){r=e[a]}if(s.indexOf("right")!==-1){o=e[a]}}}return div.all([componentName("padding"),child(t),wireChildren(function(e,t,a){a.minWidth.map(function(e){return e+r+o}).pushAll(e.minWidth);a.minHeight.map(function(e){return e+n+i}).pushAll(e.minHeight);return[{top:Stream.once(n,"padding top"),left:Stream.once(r,"padding left"),width:t.width.map(function(e){return e-r-o}),height:t.height.map(function(e){return e-n-i})}]})])};var alignLRM=function(e){return div.all([componentName("alignLRM"),child(e.middle||nothing),child(e.left||nothing),child(e.right||nothing),wireChildren(function(e,t,n,i,r){var o=Stream.combine([n,i,r].map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);var t=e.reduce(function(e,t){return Math.max(e,t)},0);return t});o.pushAll(e.minHeight);Stream.combine([n,i,r].map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);var t=e.reduce(function(e,t){return e+t},0);return t}).pushAll(e.minWidth);var a=function(e,t){return Stream.combine([e,t],function(e,t){return Math.min(e,t)})};var s=a(t.width,n.minWidth);var l=a(t.width,i.minWidth);var u=a(t.width,r.minWidth);return[{top:Stream.once(0),left:Stream.combine([t.width,s],function(e,t){return(e-t)/2}),width:s,height:t.height},{top:Stream.once(0),left:Stream.once(0),width:l,height:t.height},{top:Stream.once(0),left:Stream.combine([t.width,u],function(e,t){return e-t}),width:u,height:t.height}]})])};var alignTBM=function(e){e.middle=e.middle||nothing;e.bottom=e.bottom||nothing;e.top=e.top||nothing;return div.all([componentName("alignTBM"),child(e.middle),child(e.bottom),child(e.top),wireChildren(function(e,t,n,i,r){var o=Stream.combine([n,i,r].map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);var t=e.reduce(function(e,t){return Math.max(e,t)},0);return t});o.pushAll(e.minWidth);Stream.combine([n,i,r].map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);var t=e.reduce(function(e,t){return e+t},0);return t}).pushAll(e.minHeight);return[{top:Stream.combine([t.height,n.minHeight],function(e,t){return(e-t)/2}),left:Stream.once(0),width:t.width,height:n.minHeight},{top:Stream.combine([t.height,i.minHeight],function(e,t){return e-t}),left:Stream.once(0),width:t.width,height:i.minHeight},{top:Stream.once(0),left:Stream.once(0),width:t.width,height:r.minHeight}]})])};var invertOnHover=function(e){var t=Stream.once(false,"invert");var n=function(e,n){return Stream.combine([t,e,n],function(e,t,n){return e?n:t},"choose stream")};return div.all([componentName("invert-on-hover"),child(e.and($css("transition","background-color 0.2s linear, color 0.1s linear"))),wireChildren(function(e,t,i){i.minHeight.pushAll(e.minHeight);i.minWidth.pushAll(e.minWidth);return[{backgroundColor:n(t.backgroundColor,t.fontColor),fontColor:n(t.fontColor,t.backgroundColor),top:Stream.once(0),left:Stream.once(0),width:t.width,height:t.height}]}),mouseoverThis(function(){t.push(true)}),mouseoutThis(function(){t.push(false)})])};var border=function(e,t,n){var i=t.left||t.all||0;var r=t.right||t.all||0;var o=t.top||t.all||0;var a=t.bottom||t.all||0;var s=t.radius||0;var l=colorString(e);return div.all([componentName("border"),child(div.all([componentName("border-child"),$css("border-left",px(i)+" solid "+l),$css("border-right",px(r)+" solid "+l),$css("border-top",px(o)+" solid "+l),$css("border-bottom",px(a)+" solid "+l),$css("border-radius",px(s)),child(n),wireChildren(passThroughToFirst)])),wireChildren(function(e,t,n){
n.minWidth.map(function(e){return e+i+r}).pushAll(e.minWidth);n.minHeight.map(function(e){return e+o+a}).pushAll(e.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:t.width.map(function(e){return e-i-r}),height:t.height.map(function(e){return e-o-a})}]})])};var componentStream=function(e){var t;return div.all([componentName("component-stream"),function(n,i){var r=n.newCtx();r.top.push(0);r.left.push(0);i.width.pushAll(r.width);i.height.pushAll(r.height);var o=Stream.create();e.pushAll(o);o.map(function(e){var i=function(e){if(t){t.destroy()}t=e.create(r);t.$el.css("transition","inherit");t.minWidth.pushAll(n.minWidth);t.minHeight.pushAll(n.minHeight)};if(e.then){e.then(function(e){i(e)},function(e){console.error("child components failed to load");console.log(e)})}else{i(e)}});return function(){o.end();if(t){t.destroy()}}}])};var promiseComponent=function(e){var t=Stream.once(nothing);e.then(function(e){t.push(e)},function(e){console.log(e)});return componentStream(t)};var toggleComponent=function(e,t){return componentStream(t.map(function(t){return e[t]}))};var modalDialog=function(e){return function(t,n){var i=Stream.once(false);t.pushAll(i);n=n||0;return div.all([$css("z-index",100),componentName("toggle-height"),child(e),wireChildren(function(e,t,r){e.minWidth.push(0);e.minHeight.push(0);var o=r.$el;o.css("position","fixed");o.css("transition",o.css("transition")+", opacity "+n+"s");o.css("display","none");i.onValue(function(e){if(e){o.css("display","");setTimeout(function(){o.css("opacity",1)},100)}else{o.css("opacity",0);setTimeout(function(){o.css("display","none")},n*1e3)}});return[{width:Stream.combine([windowWidth,r.minWidth],function(e,t){return Math.min(e,t)}),height:Stream.combine([windowHeight,r.minHeight],function(e,t){return Math.min(e,t)}),left:Stream.combine([windowWidth,r.minWidth],function(e,t){return Math.max(0,(e-t)/2)}),top:Stream.combine([windowHeight,r.minHeight],function(e,t){return Math.max(0,(e-t)/2)})}]})])}};var toggleHeight=function(e){var t=Stream.once(false);e.pushAll(t);return function(e){return div.all([$css("overflow","hidden"),componentName("toggle-height"),child(e),wireChildren(function(e,n,i){i.minWidth.pushAll(e.minWidth);Stream.combine([i.minHeight,t],function(e,t){return t?e:0}).pushAll(e.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:n.width,height:n.height}]})])}};var dropdownPanel=function(e,t,n,i){i=i||{};i.transition=i.transition||"0.5s";return div.all([componentName("dropdown-panel"),child(div.all([child(t),wireChildren(function(e,t,r){r.minWidth.pushAll(e.minWidth);r.minHeight.pushAll(e.minHeight);r.$el.css("transition","top "+i.transition);e.$el.css("pointer-events","none");r.$el.css("pointer-events","initial");r.$el.css("z-index","1000");return[{width:t.width,height:r.minHeight,top:Stream.combine([n,r.minHeight],function(e,t){return e?0:-t}),left:Stream.once(0)}]}),$css("overflow","hidden")])),child(e),wireChildren(function(e,t,n,i){i.minWidth.pushAll(e.minWidth);i.minHeight.pushAll(e.minHeight);return[{width:t.width,height:n.minHeight,top:t.height,left:Stream.once(0)},{width:t.width,height:t.height,top:Stream.once(0),left:Stream.once(0)}]})])};var fixedHeaderBody=function(e,t,n){e.transition=e.transition||"0.5s";return div.all([componentName("fixedHeaderBody"),child(n),child(t),wireChildren(function(t,n,i,r){r.$el.css("position","fixed");setTimeout(function(){r.$el.css("transition","height "+e.transition);i.$el.css("transition","top "+e.transition)});Stream.combine([i,r].map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return e+t},0)}).pushAll(t.minHeight);Stream.combine([i,r].map(function(e){return e.minWidth}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)}).pushAll(t.minWidth);return[{top:r.minHeight,left:Stream.once(0),width:n.width,height:i.minHeight},{top:Stream.once(0),left:Stream.once(0),width:n.width,height:r.minHeight}]})])};var stickyHeaderBody=function(e,t,n){return div.all([componentName("stickyHeaderBody"),child(e),child(n),child(t),wireChildren(function(e,t,n,i,r){Stream.combine([n,i,r].map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return e+t},0)}).pushAll(e.minHeight);var o=false;return[{top:Stream.once(0),left:Stream.once(0),width:t.width,height:n.minHeight},{top:Stream.combine([n.minHeight,r.minHeight],function(e,t){return e+t}),left:Stream.once(0),width:t.width,height:i.minHeight},{top:Stream.combine([n.minHeight,t.scroll,t.topAccum],function(e,t,n){var i=r.$el;e=Math.floor(e);if(e>t+n){i.css("position","absolute");i.css("transition","");if(o){window.scrollTo(0,e+n)}o=false;return e}else if(e<t+n){i.css("position","fixed");setTimeout(function(){i.css("transition","inherit")},20);if(!o){window.scrollTo(0,e+n)}o=true;return n}}),left:Stream.once(0),width:t.width,height:r.minHeight}]})])};var grid=function(e,t){e.gutterSize=e.gutterSize||0;e.handleSurplusWidth=e.handleSurplusWidth||ignoreSurplusWidth;e.handleSurplusHeight=e.handleSurplusHeight||ignoreSurplusHeight;return padding(e.outerGutter?e.gutterSize:0,div.all([componentName("grid"),children(t),wireChildren(function(t,n,i){if(i.length===0){t.minWidth.push(0);t.minHeight.push(0)}var r=Stream.combine(i.map(function(e){return e.minWidth}),function(){return Array.prototype.slice.call(arguments)});var o=Stream.combine(i.map(function(e){return e.minHeight}),function(){return Array.prototype.slice.call(arguments)});r.map(function(t){return t.reduce(function(t,n){return e.useFullWidth?t+n:Math.max(t,n)},e.useFullWidth?e.gutterSize*(t.length-1):0)}).pushAll(t.minWidth);var a=i.map(function(e){return{top:Stream.never(),left:Stream.never(),width:Stream.never(),height:Stream.never()}});var s=Stream.combine([n.width,r],function(t,n){var r=function(){return{cells:[],contexts:[],height:0}};var o=i.reduce(function(i,o,s){var l=i.rows;var u=i.currentRow;var c=n[s];var d=u.cells.reduce(function(t,n){return t+n+e.gutterSize},0);var h=Math.min(c,t);if(h>0&&h+d>t){l.push(u);u=r()}u.cells.push(h);u.contexts.push(a[s]);return{rows:l,currentRow:u}},{rows:[],currentRow:r()});var s=o.rows;s.push(o.currentRow);s.map(function(n,i){var r=0;var o=n.cells.map(function(t){var n={left:r,width:t};r+=t+e.gutterSize;return n});o=e.handleSurplusWidth(t,o,e,i);o.map(function(e,t){var i=n.contexts[t];i.width.push(e.width)})});return s});var l=Stream.combine([o,s],function(n,i){var r=0;i.map(function(e){e.height=0;e.cells.map(function(t,i){e.height=Math.max(e.height,n[r+i])});r+=e.cells.length});t.minHeight.push(i.map(function(e){return e.height}).reduce(function(t,n){return t+n+e.gutterSize},-e.gutterSize));return i});Stream.all([n.width,n.height,l],function(t,n,i){if(e.bottomToTop){i=i.slice(0).reverse()}var r=0;i=e.handleSurplusHeight(n,i,e);i.map(function(n,i){var o=0;var a=n.cells.map(function(t){var i={top:r,left:o,width:t,height:n.height};o+=t+e.gutterSize;return i});a=e.handleSurplusWidth(t,a,e,i);a.map(function(e,t){var i=n.contexts[t];i.top.push(e.top);i.left.push(e.left);i.width.push(e.width);i.height.push(e.height)});r+=n.height+e.gutterSize})});return[a]})]))};var backgroundImagePosition={fit:"fit",fill:"fill"};var withMinHeightStream=function(e,t){return div.all([componentName("with-min-height-stream"),child(t),wireChildren(function(t,n,i){e(i,n).pushAll(t.minHeight);i.minWidth.pushAll(t.minWidth);return[{top:Stream.once(0),left:Stream.once(0),width:n.width,height:n.height}]})])};var extendToWindowBottom=function(e,t){t=t||Stream.once(0);return withMinHeightStream(function(e,n){return Stream.combine([e.minHeight,n.top,n.topAccum,t,windowResize],function(e,t,n,i){return Math.max(e,window.innerHeight-t-n-i)})},e)};var overlays=function(e){return div.all([children(e),wireChildren(function(e,t,n){var i=function(e){return Stream.combine(e,function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)})};i(n.map(function(e){return e.minHeight})).test().pushAll(e.minHeight);i(n.map(function(e){return e.minWidth})).test().pushAll(e.minWidth);return[n.map(function(e){return{top:Stream.once(0),left:Stream.once(0),width:t.width,height:t.height}})]})])};var withBackground=function(e,t){return div.all([componentName("with-background"),child(e),child(t),wireChildren(function(e,t,n,i){i.minWidth.pushAll(e.minWidth);i.minHeight.pushAll(e.minHeight);var r={top:Stream.once(0),left:Stream.once(0),width:t.width,height:t.height};return[r,r]})])};var withBackgroundImage=function(e,t){var n=Stream.once(e.aspectRatio||1);if(!e.src.map){e.src=Stream.once(e.src)}return div.all([componentName("with-background-image"),$css("overflow","hidden"),child(img.all([$css("visibility","hidden"),function(t,i){t.minWidth.push(0);t.minHeight.push(0);e.src.map(function(e){t.$el.prop("src",e)});t.$el.on("load",function(){var e=findMinWidth(t.$el);var i=findMinHeight(t.$el);var r=e/i;n.push(r)});Stream.all([i.width,i.height],function(){t.$el.css("visibility","")})}])),child(t),wireChildren(function(e,t,i,r){r.minWidth.pushAll(e.minWidth);r.minHeight.pushAll(e.minHeight);var o=e.newCtx();t.top.push(0);t.left.push(0);t.width.pushAll(o.width);t.height.pushAll(o.height);var a=e.newCtx();a.top.push(0);a.left.push(0);Stream.all([n,t.width,t.height],function(e,t,n){var i=t/n;if(e<i){a.width.push(t);a.height.push(t/e)}else{a.width.push(n*e);a.height.push(n)}});return[a,o]})])};var table=function(e,t){e=e||{};var n=(e.paddingSize||0)*2;return div.all(t.map(function(e){return children(e)})).all([componentName("table"),wireChildren(function(){var e=Array.prototype.slice.call(arguments);var t=e[0];var i=e[1];var r=e.slice(2);var o=Stream.combine(r.reduce(function(e,t){e.push(Stream.combine(t.map(function(e){return e.minWidth}),function(){return Array.prototype.slice.call(arguments)}));return e},[]),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return t.map(function(t,n){return Math.max(e[n]||0,t)})},[])});o.map(function(e){var i=e.reduce(function(e,t){return e+t+n},-n);t.minWidth.push(i)});var a=r.reduce(function(e,t){e.push(Stream.combine(t.map(function(e){return e.minHeight}),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)}));return e},[]);Stream.combine(a,function(){var e=Array.prototype.slice.call(arguments);var i=e.reduce(function(e,t){return e+t+n},-n);t.minHeight.push(i)});return a.map(function(e,t){return r[t].map(function(e,i){return{width:o.map(function(e){return e[i]}),height:a[t],top:Stream.combine(a.slice(0,t).concat([Stream.once(0)]),function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return e+t+n},-n)}),left:o.map(function(e){return e.reduce(function(e,t,r){return e+(r<i?t+n:0)},0)})}})})})])};var tabs=function(e,t){var n=t||Stream.once(0);return stack({},[sideBySide({},e.map(function(e,t){return alignTBM({bottom:toggleComponent([e.tab.left,e.tab.right,e.tab.selected],n.map(function(e){if(t<e){return 0}if(t>e){return 1}return 2})).all([link,clickThis(function(){n.push(t)})])})})),componentStream(n.map(function(t){return e[t].content}))])};var matchStrings=function(e){return function(t){for(var n=0;n<e.length;n++){var i=e[n];if(t.indexOf(i.string)===0){return i.router(t.substring(i.string.length))}}}};var routeToComponent=function(e){return function(){return e}};var routeToComponentF=function(e){return function(){return e()}};var routeToFirst=function(e){return function(t){for(var n=0;n<e.length;n++){var i=e[n](t);if(i){return i}}}};var routeMatchRest=function(e){return function(t){return Q(t).then(e)}};var ignoreHashChange=false;var route=function(e){var t;return div.all([child(div.all([componentName("route"),function(n,i){windowHash.onValue(function(r){if(ignoreHashChange){ignoreHashChange=false;return}if(t){t.destroy()}Q.all([e(r)]).then(function(e){var r=e[0];t=r.create(i);t.$el.css("transition","inherit");t.minWidth.pushAll(n.minWidth);t.minHeight.pushAll(n.minHeight)},function(e){console.error("child components failed to load");console.log(e)})})}])),wireChildren(passThroughToFirst)])};(function(){var e=[console.error,function(){debugger}];var t={handleWith:function(e){return function(t){return function(n,i){if(n!==null&&typeof n!=="undefined"){return e(n)}else{return t(i,function(t){return e(null,t)})}}}},reportError:function(t){e.map(function(e){e(t)})},handle:function(e){return t.handleWith(t.reportError)(e)},addLogger:function(t){e.push(t)}};if(typeof exports==="undefined"){window.Err=t}else{module.exports=t}})();(function(){var e=function(e){return{name:"file",accept:e||"*"}};var t={id:{name:"id"},string:{name:"string"},paragraph:{name:"paragraph"},html:{name:"html"},password:{name:"password"},number:{name:"number"},date:{name:"date"},bool:{name:"bool"},foreignKey:function(e,t){return{name:"foreignKey",table:e,nameField:t}},enumeration:function(e){return{name:"enumeration",options:e}},oneOf:function(e){return{name:"oneOf",options:e}},file:e,image:e("image/*"),listOf:function(e){return{name:"listOf",editorType:e}}};if(typeof exports==="undefined"){window.editorType=t}else{module.exports=t}})();(function(){var e=function(e,t){return{string:{title:"String",fromString:function(e){if(t){t.whiteList.div.push("align")}return t?t(e,{whiteList:t.whiteList}):e}},id:{title:"Object ID",fromString:function(t){return e?new e(t):t}},json:{title:"JSON object",fromString:function(e){return e}},number:{title:"Number",fromString:function(e){return e}},date:{title:"Date",fromString:function(e){return e&&new Date(e)}},bool:{title:"Boolean",fromString:function(e){return e}}}};if(typeof exports==="undefined"){window.type=e()}else{var t=require("mongodb").ObjectID;var n=require("xss");module.exports=e(t,n)}})();(function(){var e=function(e,t,n,i){var r=function(e,t,n,i){return i(true)};var o=function(e,t,n,i){return i(false)};var a=function(e,t,n,i){if(!e){return i(false)}return n.admin.findOne({user:e._id},function(e){return i(e)})};var s=function(e){return function(t,n,r,o){if(!t){return o(false)}if(!n){return o(false)}return o(i.equal(t._id,n[e]))}};var l=function(e,t,n,i){return i(e)};var u=function(e){if(typeof exports!=="undefined"){var t=require("async");return function(n,i,r,o){return t.map(e,function(e,t){return e(n,i,r,function(e){return t(null,e)})},function(e,t){return o(t.reduce(function(e,t){return e||t},false))})}}};var c=function(e,t,n){return function(i,r,o,a){return o[e].findOne({_id:r[t]},function(e){return n(i,e,o,a)})}};var d=[{name:"upload",fields:[{name:"_id",type:n.id},{name:"creator",type:n.id}],mayFind:r,mayInsert:s("creator"),mayUpdate:s("creator"),mayRemove:o},{name:"profile",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"firstName",type:n.string,editorType:e.string,displayName:"First Name"},{name:"lastName",type:n.string,editorType:e.string,displayName:"Last Name"},{name:"email",type:n.string,editorType:e.string,displayName:"Email"},{name:"birthday",type:n.date,editorType:e.date,displayName:"Birthday"},{name:"bio",type:n.string,editorType:e.html,displayName:"Bio"},{name:"imageUrl",type:n.string,editorType:e.image,displayName:"Profile Picture"},{name:"holibirther",type:n.bool,editorType:e.bool,displayName:"I am a Holibirther"},{name:"knowAHolibirther",type:n.bool,editorType:e.bool,displayName:"I know a Holibirther"},{name:"receiveMarketingEmails",type:n.bool,editorType:e.bool,displayName:"I wish to receive emails from Holibirthday"},{name:"unsubscribeToken",type:n.string},{name:"optOutToken",type:n.string}],mayFind:r,mayInsert:o,mayUpdate:u([s("user"),a]),mayRemove:o},{name:"user",fields:[{name:"_id",type:n.id},{name:"email",type:n.id},{name:"emailConfirmationToken",type:n.string},{name:"passwordResetToken",type:n.string},{name:"passwordResetDate",type:n.date},{name:"passwordEncrypted",type:n.string},{name:"facebookId",type:n.string}],mayFind:o,mayInsert:o,mayUpdate:o,mayRemove:o},{name:"userEmailConfirmed",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"email",type:n.string}],mayFind:o,mayInsert:o,mayUpdate:o,mayRemove:o},{name:"admin",fields:[{name:"_id",type:n.id},{name:"user",type:n.id}],mayFind:s("user"),mayInsert:o,mayUpdate:o,mayRemove:o},{name:"holibirthday",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"month",type:n.number,editorType:e.number,displayName:"Holibirth-month"},{name:"day",type:n.number,editorType:e.number,displayName:"Holibirth-day"},{name:"date",type:n.date,editorType:e.date,displayName:"Holibirthdate"},{name:"createDate",type:n.date},{name:"imageUrl",type:n.string}],mayFind:r,mayInsert:s("user"),mayUpdate:s("user"),mayRemove:s("user")},{name:"pointsChange",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"amount",type:n.number},{name:"reason",type:n.string},{name:"createDate",type:n.date}],mayFind:r,mayInsert:o,mayUpdate:o,mayRemove:o},{name:"pointsTotal",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"amount",type:n.number},{name:"createDate",type:n.date}],mayFind:r,mayInsert:o,mayUpdate:o,mayRemove:o},{name:"storyLike",fields:[{name:"_id",type:n.id},{name:"user",type:n.user},{name:"story",type:n.story}],mayFind:r,mayInsert:s("user"),mayUpdate:o,mayRemove:o},{name:"story",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"name",type:n.string},{name:"text",type:n.string},{name:"storyType",type:n.string},{name:"imageUrl",type:n.string},{name:"imageWidth",type:n.number},{name:"isPublic",type:n.bool},{name:"createDate",type:n.date},{name:"updateDate",type:n.date}],storyType:{best:"best",worst:"worst",forgotmenot:"forgotmenot",blog:"blog"},mayFind:r,mayInsert:function(e,t,n,i){if(t.storyType==="blog"){if(!e){return i(false)}return n.admin.findOne({user:e._id},function(e){return i(e)})}return i(e)},mayUpdate:u([a,s("user")]),mayRemove:u([a,s("user")])},{name:"comment",fields:[{name:"_id",type:n.id},{name:"story",type:n.id},{name:"user",type:n.id},{name:"text",type:n.string},{name:"createDate",type:n.string},{name:"updateDate",type:n.string}],mayFind:r,mayInsert:s("user"),mayUpdate:s("user"),mayRemove:u([a,s("user")])},{name:"storyTag",fields:[{name:"_id",type:n.id},{name:"story",type:n.id},{name:"tag",type:n.string}],mayFind:r,mayInsert:u([c("story","story",s("user")),a]),mayUpdate:u([c("story","story",s("user")),a]),mayRemove:u([c("story","story",s("user")),a])},{name:"uniqueTag",fields:[{name:"_id",type:n.id},{name:"tag",type:n.string},{name:"count",type:n.number}],mayFind:r,mayInsert:o,mayUpdate:o,mayRemove:o},{name:"dailyTheme",fields:[{name:"_id",type:n.id},{name:"createDate",type:n.date},{name:"updateDate",type:n.date},{name:"type",type:n.string,options:{featuredStory:"featuredStory",poll:"poll",someText:"someText"},displayName:"Type",editorType:e.enumeration([{name:"Featured Story",value:"featuredStory"},{name:"Poll",value:"poll"},{name:"Rich Text",value:"someText"}])},{name:"storyId",type:n.id,displayName:"Story",editorType:e.foreignKey("story","name")},{name:"storyText",type:n.string,displayName:"Description",editorType:e.html},{name:"giftId",type:n.number,displayName:"Gift",editorType:{name:"gift"}},{name:"giftText",type:n.string,displayName:"Description",editorType:e.html},{name:"pollTitle",type:n.string,displayName:"Title",editorType:e.string},{name:"pollDescription",type:n.string,displayName:"Description",editorType:e.html},{name:"pollChoices",type:n.json,displayName:"Choices",editorType:e.listOf(e.string)},{name:"pollImage",type:n.string,displayName:"Picture",editorType:e.image},{name:"someTextTitle",type:n.string,displayName:"Title",editorType:e.string},{name:"someTextText",type:n.string,displayName:"Text",editorType:e.html},{name:"someTextImage",type:n.string,displayName:"Picture",editorType:e.image}],mayFind:r,mayInsert:a,mayUpdate:a,mayRemove:a},{name:"dailyThemePollResponse",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"dailyTheme",type:n.id},{name:"choice",type:n.number},{name:"createDate",type:n.date}],mayFind:r,mayInsert:l,mayUpdate:o,mayRemove:o},{name:"gafyStyle",fields:[{name:"_id",type:n.id},{name:"styleNumber",type:n.string,editorType:e.string,displayName:"Style Number"},{name:"styleDescription",type:n.string,editorType:e.string,displayName:"Style Description"},{name:"imageUrl",type:n.string,displayName:"Style Picture",editorType:e.image},{name:"sizesImageUrl",type:n.string,displayName:"Sizes Chart Picture",editorType:e.image},{name:"sizes",type:n.json,editorType:e.listOf(e.string),displayName:"Sizes"},{name:"colors",type:n.json,editorType:{name:"gafyColor"},displayName:"Colors"},{name:"price",type:n.json,editorType:e.number,displayName:"Price"}],mayFind:r,mayInsert:a,mayUpdate:a,mayRemove:a},{name:"gafyDesign",fields:[{name:"_id",type:n.id},{name:"designNumber",type:n.string,displayName:"Design Number",editorType:e.string},{name:"designDescription",type:n.string,displayName:"Design Description",editorType:e.string},{name:"printLocation",type:n.string,displayName:"Print Location",editorType:e.string},{name:"imageUrl",type:n.string,displayName:"Design Image",editorType:e.image},{name:"styles",type:n.json,displayName:"Styles",editorType:{name:"gafyStyle"}},{name:"colors",type:n.json,displayName:"Colors",editorType:{name:"gafyColor"}},{name:"month",type:n.string,displayName:"Month / Timeless",editorType:e.oneOf(["Timeless","January","February","March","April","May","June","July","August","September","October","November","December"])}],mayFind:r,mayInsert:a,mayUpdate:a,mayRemove:a},{name:"contactUsMessage",fields:[{name:"_id",type:n.id},{name:"name",type:n.string},{name:"email",type:n.string},{name:"message",type:n.string}],mayFind:o,mayInsert:r,mayUpdate:o,mayRemove:o},{name:"siteCopyItem",fields:[{name:"_id",type:n.id},{name:"uniqueName",type:n.string},{name:"value",type:n.string}],mayFind:r,mayInsert:a,mayUpdate:a,mayRemove:a,options:[{name:"Home Tagline",multiline:false},{name:"Home Share Your Story",multiline:false},{name:"Home Claim Your Holibirthday",multiline:false},{name:"Home Find Friends",multiline:false},{name:"Edit Story Title",multiline:false},{name:"Edit Story Smaller Title",multiline:false},{name:"Edit Story Instructions",multiline:true},{name:"Edit Story Submit Instructions",multiline:true},{name:"Order Confirmation Email: From",multiline:false},{name:"Order Confirmation Email: From Name",multiline:false},{name:"Order Confirmation Email: Subject",multiline:false},{name:"Order Confirmation Email: Text ( {{orderNumber}} includes order number)",multiline:true},{name:"Header Gifts",multiline:true},{name:"Header Cart",multiline:true},{name:"Header Wishlist",multiline:true},{name:"Header My Profile",multiline:true},{name:"Header Sign In",multiline:true},{name:"Header Sign Out",multiline:true},{name:"Header Register",multiline:true},{name:"Header Admin",multiline:true}]},{name:"gafyOrder",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"orderBatch",type:n.string},{name:"customerEmailAddress",type:n.string},{name:"firstName",type:n.string},{name:"lastName",type:n.string},{name:"addressLine1",type:n.string},{name:"addressLine2",type:n.string},{name:"addressCity",type:n.string},{name:"addressState",type:n.string},{name:"addressZip",type:n.string},{name:"addressCountry",type:n.string},{name:"designNumber",type:n.string},{name:"designDescription",type:n.string},{name:"printLocation",type:n.string},{name:"styleNumber",type:n.string},{name:"styleDescription",type:n.string},{name:"color",type:n.string},{name:"size",type:n.string},{name:"quantity",type:n.number},{name:"shippingMethod",type:n.string}],mayFind:o,mayInsert:r,mayUpdate:o,mayRemove:o},{name:"stripePayment",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"email",type:n.string},{name:"orderBatch",type:n.string},{name:"amount",type:n.number},{name:"stripeToken",type:n.string}],mayFind:o,mayInsert:r,mayUpdate:o,mayRemove:o},{name:"stripeDonation",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"email",type:n.string},{name:"amount",type:n.number},{name:"stripeToken",type:n.string}],mayFind:o,mayInsert:r,mayUpdate:o,mayRemove:o},{name:"gafyWishlist",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"items",type:n.json}],mayFind:r,mayInsert:s("user"),mayUpdate:s("user"),mayRemove:s("user")},{name:"sendEmail",fields:[{name:"_id",type:n.id},{name:"constraintSource",type:n.string},{name:"monthGT",type:n.number},{name:"dayGT",type:n.number},{name:"monthLT",type:n.number},{name:"dayLT",type:n.number},{name:"from",type:n.string},{name:"fromName",type:n.string},{name:"subject",type:n.string},{name:"text",type:n.string}],mayFind:o,mayInsert:a,mayUpdate:o,mayRemove:o},{name:"famousBirthday",fields:[{name:"_id",type:n.id},{name:"name",type:n.string,displayName:"Name",editorType:e.string},{name:"birthday",type:n.date,displayName:"Birthday (year is ignored)",editorType:e.date},{name:"description",type:n.string,displayName:"Description",editorType:e.paragraph},{name:"imageUrl",type:n.string,displayName:"Image",editorType:e.image}],mayFind:r,mayInsert:a,mayUpdate:a,mayRemove:a},{name:"contactOtherUser",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"otherUser",type:n.id}],mayFind:s("user"),mayInsert:s("user"),mayUpdate:s("user"),mayRemove:s("user")},{name:"contactCustom",fields:[{name:"_id",type:n.id},{name:"user",type:n.id},{name:"name",type:n.string,displayName:"Name",editorType:e.string},{name:"birthday",type:n.date,displayName:"Birthday",editorType:e.date},{name:"email",type:n.string,displayName:"Email",editorType:e.string}],mayFind:s("user"),mayInsert:s("user"),mayUpdate:s("user"),mayRemove:s("user")},{name:"mailchimpTemplate",fields:[{name:"_id",type:n.id},{name:"mailchimpTemplateId",type:n.string},{name:"event",type:n.string,options:{holibirthdayInThreeWeeks:"holibirthdayInThreeWeeks",holibirthdayInOneWeek:"holibirthdayInOneWeek",holibirthdayTomorrow:"holibirthdayTomorrow",friendsHolibirthdayInThreeWeeks:"friendsHolibirthdayInThreeWeeks",friendsHolibirthdayInOneWeek:"friendsHolibirthdayInOneWeek",friendsHolibirthdayTomorrow:"friendsHolibirthdayTomorrow",storyDeleted:"storyDeleted",commentDeleted:"commentDeleted"}},{name:"toName",type:n.string},{name:"fromName",type:n.string},{name:"subject",type:n.string}],mayFind:a,mayInsert:a,mayUpdate:a,mayRemove:a},{name:"mailchimpList",fields:[{name:"_id",type:n.id},{name:"mailchimpListType",type:n.string,options:{holibirthers:"holibirthers",friendsOfHolibirthers:"friendsOfHolibirthers"}},{name:"mailchimpListId",type:n.string}],mayFind:a,mayInsert:a,mayUpdate:a,mayRemove:a}];d.map(function(e){d[e.name]=e;e.fields.map(function(t){e.fields[t.name]=t})});if(typeof exports!=="undefined"){var h=require("async");var f=function(){var e=[];return{use:function(t){e.push(t)},invoke:function(){var t=Array.prototype.slice.call(arguments);var n=t.length-1;var i=t.splice(n,1)[0];h.map(e,function(e,n){thisArgs=t.slice();thisArgs.push(n);e.apply(null,thisArgs)},i)}}};d.map(function(e){e.findMiddleware=f();e.insertMiddleware=f();e.updateMiddleware=f();e.removeMiddleware=f();e.postFindMiddleware=f();e.postInsertMiddleware=f();e.postUpdateMiddleware=f();e.postRemoveMiddleware=f()})}return d};if(typeof exports==="undefined"){window.schema=e(window.editorType,window.Err,window.type)}else{var t=require("mongodb").ObjectID;t.equal=function(e,t){return e&&t&&e.toString()===t.toString()};var n=require("./editorType");var i=require("./Err");var r=require("./type");module.exports=e(n,i,r,t)}})();$(function(){waitForWebfonts(["BebasNeue","CelebrationTime","FontAwesome","Open Sans","Raleway Thin"],function(){var e=setInterval(function(){if(document.readyState==="complete"){clearInterval(e);window.app()}},100)})});define("myHolibirthdayView",["bar","bodyColumn","chooseNonHoliday","colors","confettiBackground","db","famousBirthdaysDisplay","fonts","holibirthdayRow","meP","months","prettyForms","profileP","separatorSize","signInForm","signInStream","siteCopyItemsP","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v){return promiseComponent(o.famousBirthday.find({}).then(function(e){return g.then(function(c){var d=function(e){return div.all([children(e.options.map(function(e){return padding({top:30,bottom:30,left:20,right:20},alignLRM({middle:text(e+"").all([s.bebasNeue,$css("font-size",40)])})).all([withBackgroundColor(white),function(e){e.$el.css("position","relative");e.$el.css("visibility","")}])})),wireChildren(function(t,n,i){n.height.promise.then(function(){var n=t.$el.slotMachine();var i=100;var r=2e3;var o=Math.random();var a=r+Math.random()*i;e.stream.onValue(function(e){n.setRandomize(function(){return e.index});setTimeout(function(){n.shuffle()},o);setTimeout(function(){n.stop()},a)})});var r=function(e){return Stream.combine(e,function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){return Math.max(e,t)},0)})};r(i.map(function(e){return e.minHeight})).pushAll(t.minHeight);r(i.map(function(e){return e.minWidth})).pushAll(t.minWidth);return[i.map(function(){return{width:n.width,height:n.height}})]})])};var p=function(e){var t=e.filter(function(e,t){if(e){t(e)}});var r=false;var o;var a=150;var l=overlays([alignLRM({middle:nothing.all([withMinWidth(2,true),withMinHeight(a,true),withBackgroundColor(black)])}),alignTBM({top:border(black,{all:2},padding(5,text(c.find("Slot Machine Pull")).all([s.bebasNeue,$css("font-size",20)]))).all([$css("cursor","move"),withBackgroundColor(i.holibirthdayRed),withFontColor(white),mousedownThis(function(e){r=true;o=e.clientY;return false}),function(t){$("body").on("mouseup",function(){if(r){r=false;t.$el.animate({"margin-top":0})}});$("body").on("mousemove",function(i){if(r){var s=Math.max(0,i.clientY-o);var l=a-parseInt(t.$el.css("height"));t.$el.css("margin-top",s);if(s>l){t.$el.css("margin-top",l);t.$el.animate({"margin-top":0});r=false;e.push(n())}}})}])})]);return stack({gutterSize:f},[sideBySide({gutterSize:f},[alignTBM({middle:border(black,{all:1},sideBySide({},[d({options:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],stream:t.map(function(e){return{index:e&&e.getUTCMonth()}})}),d({options:[0,1,2,3],stream:t.map(function(e){return{index:e&&Math.floor(e.getUTCDate()/10)}})}),d({options:[0,1,2,3,4,5,6,7,8,9],stream:t.map(function(e){return{index:e&&e.getUTCDate()%10}})})]))}),l]).all([$css("user-select","none")])])};var g=function(t){if(!t){return[]}return e.filter(function(e){return e.birthday.getUTCMonth()===t.getUTCMonth()&&e.birthday.getUTCDate()===t.getUTCDate()})};return u.then(function(e){if(e){return h.then(function(n){var u={user:Stream.once(e._id),date:Stream.once(null)};var d;var h=Stream.combineObject(u);h.onValue(function(e){d=e});var m=Stream.once(false);h.map(function(){m.push(true)});var y=function(t,r){return stack({gutterSize:f},[alignLRM({middle:p(u.date)}),alignLRM({middle:componentStream(m.map(function(t){return!t?v(i.middleGray,text(n.holibirther&&r?c.find("Slot Machine Change Holibirthday"):c.find("Slot Machine Claim Holibirthday")).all([s.bebasNeue])):v(black,text(n.holibirther&&r?c.find("Slot Machine Change Holibirthday"):c.find("Slot Machine Claim Holibirthday")).all([s.bebasNeue])).all([link,clickThis(function(){var t=document.createElement("canvas");var i=$(t);i.appendTo($("body")).prop("width",1080).prop("height",702);var a=t.getContext("2d");var s=function(e,t,n){a.font=n;var i=a.measureText(t).width;a.fillText(t,e.x-i/2,e.y)};var l=new Image;l.onload=function(){a.drawImage(l,0,0);s({x:540,y:310},n.firstName+" "+n.lastName,"bold 50px Raleway Thin");s({x:540,y:540},moment(d.date).utc().format("MMMM Do"),"bold 50px Raleway Thin");if(n.birthday){s({x:160,y:595},"Old Birthday","20px BebasNeue");s({x:160,y:615},moment(n.birthday).utc().format("MMMM Do"),"20px BebasNeue")}setTimeout(function(){var n=window.dataURLtoBlob(t.toDataURL());o.uploadFile(n,"certificate.png").then(function(t){d.imageUrl="/api/uploadFile/find/"+t;o.profile.update({user:e._id},{holibirther:true}).then(function(){if(r){o.holibirthday.update({
user:e._id},d).then(function(){window.location.hash="#!user/"+e._id+"/certificate";window.location.reload()})}else{o.holibirthday.insert(d).then(function(){window.location.hash="#!user/"+e._id+"/certificate";window.location.reload()})}})});i.remove()})};l.src="./content/certificate-new.png"})])}))})])};return o.holibirthday.findOne({user:e._id}).then(function(i){if(n.holibirther&&i){var o=i.date;u.date.push(o);return stack({gutterSize:f},[linkTo("#!user/"+e._id+"/certificate",r(t(l(stack({gutterSize:f},[text(c.find("Slot Machine Your Holibirthday Is")).all([s.ralewayThinBold,$css("font-size",40)]),text(moment(o).utc().format("MMMM Do")).all([s.ralewayThinBold,$css("font-size",20)])]))))),t(paragraph(c.find("Slot Machine Description"))),t(alignLRM({middle:y(u,true)})),componentStream(u.date.delay(2500).map(function(e){return a(g(e))}))])}else{return stack({gutterSize:f},[r(t(l(text(c.find("Slot Machine Claim Title")).all([s.ralewayThinBold,$css("font-size",40)])))),t(paragraph(c.find("Slot Machine Description"))),t(alignLRM({middle:y(u)})),componentStream(u.date.delay(2500).map(function(e){return a(g(e))}))])}})})}return stack({gutterSize:f},[r(t(l(text(c.find("Slot Machine Claim Title")).all([s.ralewayThinBold,$css("font-size",40)])))),t(paragraph(c.find("Slot Machine Must Sign In")).all([s.h1,link,clickThis(function(e){m.push(true);e.stopPropagation()})]))])})})}))});define("auth",["domain"],function(e){return{signIn:function(t){return $.ajax({type:"post",url:e+"/auth/login",data:JSON.stringify(t),contentType:"application/json"})},signOut:function(){return $.get("/auth/logout")},loginWithFacebook:function(t){return $.ajax({type:"post",url:e+"/auth/facebook",data:JSON.stringify({username:t.accessToken,password:t.accessToken}),contentType:"application/json"})},register:function(t){return $.ajax({type:"post",url:e+"/auth/register",data:JSON.stringify(t),contentType:"application/json"})},resendConfirmEmail:function(t){return $.ajax({type:"post",url:e+"/auth/resendConfirmEmail",data:JSON.stringify({email:t.email}),contentType:"application/json"})},resetPasswordRequest:function(t){return $.ajax({type:"post",url:e+"/auth/resetPasswordRequest",data:JSON.stringify({email:t.email}),contentType:"application/json"})},resetPassword:function(t){return $.ajax({type:"post",url:e+"/auth/resetPassword",data:JSON.stringify({passwordResetToken:t.token,password:t.password}),contentType:"application/json"})},setPassword:function(t){return $.ajax({type:"post",url:e+"/auth/setPassword",data:JSON.stringify({password:t.password}),contentType:"application/json"})},confirmEmail:function(t){return $.ajax({type:"post",url:e+"/auth/confirmEmail",data:JSON.stringify({emailConfirmationToken:t}),contentType:"application/json"})},optOutEmails:function(t){return $.ajax({type:"post",url:e+"/auth/optOutEmails",data:JSON.stringify({token:t.token}),contentType:"application/json"})},grecaptchaSitekeyP:$.get(e+"/grecaptcha/sitekey"),grecaptchaP:function(){var e=Q.defer();var t=function(){if(typeof grecaptcha==="undefined"){setTimeout(t,100)}else{e.resolve(grecaptcha)}};t();return e.promise}(),StripeP:$.get(e+"/stripe/publishableKey").then(function(e){if(window.Stripe){window.Stripe.setPublishableKey(e);return window.Stripe}else{console.log("Stripe not loaded")}})}});define("forms",["ckeditorP"],function(e){return{inputBox:function(e,t,n,i,r){t=t||"text";return border(color({r:169,b:169,g:169}),{all:!r&&(t==="text"||t==="password"||t==="date"||t==="number")?1:0},input.all((i||[]).concat([$prop("name",n),$prop("type",t==="date"?"text":t),withBackgroundColor(white),withFontColor(black),keyupThis(function(n){if(t==="text"||t==="password"){e.push($(n.target).val())}}),changeThis(function(n){var i=$(n.target);var r=i.val();if(t==="date"){e.push(moment(r).toDate())}else if(t==="checkbox"){e.push(i.prop("checked"))}else{e.push(r)}}),function(n){var i=n.$el;if(t==="date"){i.datepicker({dateFormat:"mm/dd/yy"})}e.onValue(function(e){var n;if(t==="date"){if(e){n=moment(e).utc().format("MM/DD/YYYY");i.datepicker("setDate",n)}}else if(t==="checkbox"){setTimeout(function(){i.prop("checked",e)});n=e}else{n=e}if(i.val()!==n){i.val(n)}})}])))},plainTextareaBox:function(e,t){return textarea.all([$prop("id",t),$prop("name",t),$prop("rows",10),keyupThis(function(t){e.push($(t.target).val())}),changeThis(function(t){e.push($(t.target).val())}),function(t){e.onValue(function(e){t.$el.val(e)})},withBackgroundColor(white)])},textareaBox:function(e,t){var n=400;return div.all([child(textarea.all([$prop("name",t),$prop("rows",21),keyupThis(function(t){e.push($(t.target).val())}),changeThis(function(t){e.push($(t.target).val())}),function(i,r){var o=t+(Math.random()+"").substring(2);i.$el.prop("id",o);setTimeout(function(){var t=function(e){i.minHeight.push(parseInt($(e.editorContainer).css("height")))};var a=e.promise.then(function(a){i.$el.val(a);window.tinymce.init({selector:"#"+o,plugins:["autoresize","image","link"],menubar:false,toolbar:"styleselect | undo redo | bold italic underline_that_works | align_left align_center align_right | bullist numlist | link image | print preview media fullpage | forecolor backcolor emoticons",resize:false,autoresize_min_height:n,autoresize_max_height:n,init_instance_callback:function(n){setTimeout(function(){r.width.map(function(){t(n)})});n.on("change",function(){e.push(n.getContent())})},setup:function(e){e.addButton("underline_that_works",{title:"Underline",icon:"underline",onclick:function(){window.tinymce.execCommand("mceToggleFormat",false,"underline_that_works")}});e.addButton("align_left",{title:"Align Left",icon:"alignleft",onclick:function(){window.tinymce.execCommand("mceToggleFormat",false,"align_left")}});e.addButton("align_right",{title:"Align Right",icon:"alignright",onclick:function(){window.tinymce.execCommand("mceToggleFormat",false,"align_right")}});e.addButton("align_center",{title:"Align Center",icon:"aligncenter",onclick:function(){window.tinymce.execCommand("mceToggleFormat",false,"align_center")}})},style_formats:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}],formats:{underline_that_works:{inline:"u",remove:"all"},align_left:{block:"div",remove:"all",attributes:{align:"left"}},align_right:{block:"div",remove:"all",attributes:{align:"right"}},align_center:{block:"div",remove:"all",attributes:{align:"center"}}}})})},2e3);return function(){console.log("removing");window.tinymce.execCommand("mceRemoveControl",true,o)}}])),wireChildren(function(e,t,n){n.minHeight.pushAll(e.minHeight);n.minWidth.pushAll(e.minWidth);return[{width:t.width,height:t.height}]})])},selectBox:function(e){return border(color({r:169,b:169,g:169}),{all:1},select.all([children(e.options.map(function(e){if(!e.name||!e.value){e={name:e,value:e}}return option.all([$html(e.name),$prop("value",e.value),$css("visibility","")])})),$prop("name",e.name),withBackgroundColor(white),withFontColor(black),changeThis(function(t){e.stream.push($(t.target).val())}),function(t){var n=t.$el;e.stream.onValue(function(e){setTimeout(function(){n.val(e)})})}]))}}});define("privacyPolicyView",["bodyColumn","confettiBackground","fonts","holibirthdayRow","separatorSize"],function(e,t,n,i,r){return stack({gutterSize:r},[t(i(text("Privacy Policy").all([n.h1]))),e(paragraph(["<style>","#ppBody","{","font-size:11pt;","width:100%;","margin:0 auto;","text-align:justify;","}","","#ppHeader","{","font-family:verdana;","font-size:21pt;","width:100%;","margin:0 auto;","}","",".ppConsistencies","{","display:none;","}",'</style><div id="ppBody"><div class="ppConsistencies"><div class="col-2">','<div class="quick-links text-center">Information Collection</div>','</div><div class="col-2">','<div class="quick-links text-center">Information Usage</div>','</div><div class="col-2">','<div class="quick-links text-center">Information Protection</div>','</div><div class="col-2"></div><div class="col-2">','<div class="quick-links text-center">3rd Party Disclosure</div>','</div><div class="col-2">','<div class="quick-links text-center">3rd Party Links</div>','</div><div class="col-2"></div></div><div style="clear:both;height:10px;"></div><div class="ppConsistencies"><div class="col-2">','<div class="col-12 quick-links2 gen-text-center">Google AdSense</div>','</div><div class="col-2">','<div class="col-12 quick-links2 gen-text-center">',"Fair Information Practices",'<div class="col-8 gen-text-left gen-xs-text-center" style="font-size:12px;position:relative;left:20px;">Fair information<br> Practices</div>',"</div>",'</div><div class="col-2">','<div class="col-12 quick-links2 gen-text-center coppa-pad">',"COPPA","","</div>",'</div><div class="col-2">','<div class="col-12 quick-links2 quick4 gen-text-center caloppa-pad">',"CalOPPA","","</div>",'</div><div class="col-2">','<div class="quick-links2 gen-text-center">Our Contact Information<br></div>','</div></div><div style="clear:both;height:10px;"></div>','<div class="innerText">This privacy policy has been compiled to better serve those who are concerned with how their "Personally identifiable information" (PII) is being used online. PII, as used in US privacy law and information security, is information that can be used on its own or with other information to identify, contact, or locate a single person, or to identify an individual in context. Please read our privacy policy carefully to get a clear understanding of how we collect, use, protect or otherwise handle your Personally Identifiable Information in accordance with our website.<br></div><span id="infoCo"></span><br><div class="grayText"><strong>What personal information do we collect from the people that visit our blog, website or app?</strong></div><br /><div class="innerText">When ordering or registering on our site, as appropriate, you may be asked to enter your name, email address, birth date or other details to help you with your experience.</div><br><div class="grayText"><strong>When do we collect information?</strong></div><br /><div class="innerText">We collect information from you when you register on our site  or enter information on our site.</div><br><span id="infoUs"></span><br><div class="grayText"><strong>How do we use your information? </strong></div><br /><div class="innerText"> We may use the information we collect from you when you register, make a purchase, sign up for our newsletter, respond to a survey or marketing communication, surf the website, or use certain other site features in the following ways:<br><br></div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> To personalize user"s experience and to allow us to deliver the type of content and product offerings in which you are most interested.</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> To improve our website in order to better serve you.</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> To allow us to better service you in responding to your customer service requests.</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> To administer a contest, promotion, survey or other site feature.</div><span id="infoPro"></span><br><div class="grayText"><strong>How do we protect visitor information?</strong></div><br /><div class="innerText">We do not use vulnerability scanning and/or scanning to PCI standards.</div><div class="innerText">We do not use Malware Scanning.<br><br></div><div class="innerText">Your personal information is contained behind secured networks and is only accessible by a limited number of persons who have special access rights to such systems, and are required to keep the information confidential. In addition, all sensitive/credit information you supply is encrypted via Secure Socket Layer (SSL) technology. </div><br><div class="innerText">We implement a variety of security measures when a user enters, submits, or accesses their information to maintain the safety of your personal information.</div><br><div class="innerText">All transactions are processed through a gateway provider and are not stored or processed on our servers.</div><span id="trDi"></span><br><div class="grayText"><strong>Third Party Disclosure</strong></div><br /><div class="innerText">We do not sell, trade, or otherwise transfer to outside parties your personally identifiable information unless we provide you with advance notice. This does not include website hosting partners and other parties who assist us in operating our website, conducting our business, or servicing you, so long as those parties agree to keep this information confidential. We may also release your information when we believe release is appropriate to comply with the law, enforce our site policies, or protect ours or others" rights, property, or safety. <br><br> However, non-personally identifiable visitor information may be provided to other parties for marketing, advertising, or other uses. </div><span id="trLi"></span><br><div class="grayText"><strong>Third party links</strong></div><br /><div class="innerText">Occasionally, at our discretion, we may include or offer third party products or services on our website. These third party sites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked sites. Nonetheless, we seek to protect the integrity of our site and welcome any feedback about these sites.</div><span id="gooAd"></span><br><div class="blueText"><strong>Google</strong></div><br /><div class="innerText">Google"s advertising requirements can be summed up by Google"s Advertising Principles. They are put in place to provide a positive experience for users. https://support.google.com/adwordspolicy/answer/1316548?hl=en <br><br></div><div class="innerText">We have not enabled Google AdSense on our site but we may do so in the future.</div><span id="calOppa"></span><br><div class="blueText"><strong>California Online Privacy Protection Act</strong></div><br /><div class="innerText">CalOPPA is the first state law in the nation to require commercial websites and online services to post a privacy policy.  The law"s reach stretches well beyond California to require a person or company in the United States (and conceivably the world) that operates websites collecting personally identifiable information from California consumers to post a conspicuous privacy policy on its website stating exactly the information being collected and those individuals with whom it is being shared, and to comply with this policy. -  See more at: http://consumercal.org/california-online-privacy-protection-act-caloppa/#sthash.0FdRbT51.dpuf<br></div><div class="innerText"><br><strong>According to CalOPPA we agree to the following:</strong></div><div class="innerText">Users can visit our site anonymously</div><div class="innerText">Once this privacy policy is created, we will add a link to it on our home page, or as a minimum on the first significant page after entering our website.</div><div class="innerText">Our Privacy Policy link includes the word "Privacy", and can be easily be found on the page specified above.</div><div class="innerText"><br>Users will be notified of any privacy policy changes:</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> On our Privacy Policy Page</div><div class="innerText">Users are able to change their personal information:</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> By logging in to their account</div><div class="innerText"><br><strong>How does our site handle do not track signals?</strong></div><div class="innerText">We honor do not track signals and do not track, plant cookies, or use advertising when a Do Not Track (DNT) browser mechanism is in place. </div><div class="innerText"><br><strong>Does our site allow third party behavioral tracking?</strong></div><div class="innerText">It"s also important to note that we do not allow third party behavioral tracking</div><span id="coppAct"></span><br><div class="blueText"><strong>COPPA (Children Online Privacy Protection Act)</strong></div><br /><div class="innerText">When it comes to the collection of personal information from children under 13, the Children"s Online Privacy Protection Act (COPPA) puts parents in control.  The Federal Trade Commission, the nation"s consumer protection agency, enforces the COPPA Rule, which spells out what operators of websites and online services must do to protect children"s privacy and safety online.<br><br></div><div class="innerText">We do not specifically market to children under 13.</div><span id="ftcFip"></span><br><div class="blueText"><strong>Fair Information Practices</strong></div><br /><div class="innerText">The Fair Information Practices Principles form the backbone of privacy law in the United States and the concepts they include have played a significant role in the development of data protection laws around the globe. Understanding the Fair Information Practice Principles and how they should be implemented is critical to comply with the various privacy laws that protect personal information.<br><br></div><div class="innerText"><strong>In order to be in line with Fair Information Practices we will take the following responsive action, should a data breach occur:</strong></div><div class="innerText">We will notify the users via email</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> Within 7 business days</div><div class="innerText">We will notify the users via in site notification</div><div class="innerText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&bull;</strong> Within 7 business days</div><div class="innerText"><br>We also agree to the individual redress principle, which requires that individuals have a right to pursue legally enforceable rights against data collectors and processors who fail to adhere to the law. This principle requires not only that individuals have enforceable rights against data users, but also that individuals have recourse to courts or a government agency to investigate and/or prosecute non-compliance by data processors.</div><span id="canSpam"></span><br><div class="blueText"><strong>CAN SPAM Act</strong></div><br /><div class="innerText">The CAN-SPAM Act is a law that sets the rules for commercial email, establishes requirements for commercial messages, gives recipients the right to have emails stopped from being sent to them, and spells out tough penalties for violations.<br><br></div><div class="innerText"><strong>We collect your email address in order to:</strong></div><div class="innerText"><br><strong>To be in accordance with CANSPAM we agree to the following:</strong></div><div class="innerText"><strong><br>If at any time you would like to unsubscribe from receiving future emails, you can email us at</strong></div> and we will promptly remove you from <strong>ALL</strong> correspondence.</div><br><div class="innerText">If there are any questions regarding this privacy policy you may contact us using the information below.<br><br></div><div class="innerText"><br>Last Edited on 2015-06-09</div></div>'].join("\n")))])});define("loginWithFacebook",["auth","fonts","separatorSize","siteCopyItemsP","socialMedia","submitButton"],function(e,t,n,i,r,o){var a=Q.defer();FB.getLoginStatus(function(e){if(e.status==="unknown"||e.status==="not_authorized"||e.status==="connected"){a.resolve(false)}a.resolve(e.authResponse)},true);return function(){return promiseComponent(a.promise.then(function(a){return i.then(function(i){return button.all([child(o(r.facebook.color,sideBySide({gutterSize:n},[text(r.facebook.icon).all([$css("font-size","20px")]),text(i.find("Sign In With Facebook")).all([t.bebasNeue])])).all([withFontColor(r.facebook.color)])),wireChildren(passThroughToFirst)]).all([link,clickThis(function(t){t.stopPropagation();t.preventDefault();if(a){e.loginWithFacebook(a).then(function(){window.location.reload()})}else{FB.login(function(t){e.loginWithFacebook(t.authResponse).then(function(){window.location.reload()})},{scope:"email, public_profile, user_friends, user_birthday"})}})])})}))}});define("resetPasswordView",["auth","bar","bodyColumn","fonts","prettyForms","separatorSize"],function(e,t,n,i,r,o){return function(t){var a=Stream.once("");var s=Stream.once("");var l=Stream.once(false);a.map(function(){l.push(false)});s.map(function(e){l.push(a.lastValue()!==e)});var u=r.input({name:"Password",fieldName:"password",stream:a,type:"password"});var c=r.input({name:"Password Again",fieldName:"confirmPassword",stream:s,type:"password"});var d=r.submit(black,"Submit",function(){if(!l.lastValue()){e.resetPassword({password:a.lastValue(),token:t}).then(function(){h.push(text("Reset!  You may now log in.").all([i.h1]))},function(){h.push(text("Invalid token.").all([i.h1]))})}});var h=Stream.once(alignLRM({left:stack({gutterSize:o},[text("Reset Password").all([i.h1]),u,c,toggleHeight(l)(paragraph("Passwords must match")),d])}));return n(componentStream(h))}});define("profileEditViewP",["auth","bodyColumn","confettiBackground","daysByMonth","db","defaultFormFor","fonts","holibirthdayRow","meP","months","prettyForms","profilesP","separatorSize","siteCopyItemsP","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p){return function(o){var m=function(t){var n=Stream.once("");var i=Stream.once("");var r=Stream.once(false);n.map(function(){r.push(false)});i.map(function(e){r.push(n.lastValue()!==e)});return t(function(e){var t=c.input({name:e.find("Edit Profile New Password"),fieldName:"password",stream:n,type:"password"});var o=c.input({name:e.find("Edit Profile Confirm New Password"),fieldName:"confirmPassword",stream:i,type:"password"});return stack({gutterSize:h},[nothing,text(e.find("Edit Profile Change Your Password")).all([a.bebasNeue]),t,o,toggleHeight(r)(paragraph("Passwords must match"))])},function(){var t=Q.defer();var i=n.lastValue();if(r.lastValue()){t.reject()}else if(i.length>0){e.setPassword({password:n.lastValue()}).then(function(){t.resolve()})}else{t.resolve()}return t.promise})};return m(function(e,m){return d.then(function(d){return r.holibirthday.findOne({user:o}).then(function(g){return f.then(function(f){return l.then(function(l){var v=d.filter(function(e){return e.user===o})[0];v.firstName=v.firstName||"";v.lastName=v.lastName||"";v.email=v.email||"";v.birthday=v.birthday||null;v.bio=v.bio||"";v.imageUrl=v.imageUrl||"./content/man.png";v.holibirther=v.holibirther||false;v.knowAHolibirther=v.knowAHolibirther||false;v.receiveMarketingEmails=v.receiveMarketingEmails||false;g=g||{user:o,month:0,day:1};g.month=u[g.month];var y=Stream.splitObject(g);var b=Stream.combineObject(y);var w=Stream.splitObject(v);var _=Stream.combineObject(w);return stack({gutterSize:h},[n(t(s(text(f.find("Edit Profile Title")).all([a.h1]),v.imageUrl))),t(stack({gutterSize:h},[c.input({name:f.find("Edit Profile First Name"),stream:w.firstName}),c.input({name:f.find("Edit Profile Last Name"),stream:w.lastName}),c.input({name:f.find("Edit Profile Email"),stream:w.email}),c.checkbox({name:f.find("Edit Profile Receive Marketing Emails"),stream:w.receiveMarketingEmails}),c.input({name:f.find("Edit Profile Birthday"),stream:w.birthday,type:"date"}),c.textarea({name:f.find("Edit Profile Bio"),stream:w.bio,fieldName:"profile_bio"}),c.imageUpload({name:f.find("Edit Profile Image URL"),stream:w.imageUrl}),stack({},[c.checkbox({name:f.find("Edit Profile Holibirther"),stream:w.holibirther}),componentStream(w.holibirther.map(function(e){return e?stack({gutterSize:h},[nothing,c.select({name:f.find("Edit Profile Holibirthday Month"),options:u,stream:y.month}),componentStream(y.month.map(function(e){var t=i[e];var n=[];for(var r=0;r<t;r++){n.push(r+1)}return c.select({name:f.find("Edit Profile Holibirthday Month"),options:n,stream:y.day})}))]):nothing}))]),c.checkbox({name:f.find("Edit Profile Know a Holibirther"),stream:w.knowAHolibirther}),l._id===o&&!l.facebookId?e(f):nothing,alignLRM({middle:p(black,text("Submit").all([a.bebasNeue])).all([link,clickThis(function(){var e=_.lastValue();return m().then(function(){return r.profile.update({_id:e._id},e).then(function(){if(e.holibirther){var t=b.lastValue();t.date=new Date(t.month+" "+t.day+" 2000");if(t._id){return r.holibirthday.update({_id:t._id},{date:t.date}).then(function(){window.location.hash="#!user/"+e.user;window.location.reload()})}else{return r.holibirthday.insert(t).then(function(){window.location.hash="#!user/"+e.user;window.location.reload()})}}else{window.location.hash="#!user/"+e.user;window.location.reload()}})})})])})]))])})})})})})}});define("footer",["colors","fonts","separatorSize"],function(e,t,n){var i=[{name:"Contact Holibirthday",link:"#!contactUs"},{name:"Privacy Policy",link:"#!privacyPolicy"}].map(function(e){return linkTo(e.link,text(e.name).all([t.ralewayThinBold]))});return alignLRM({middle:sideBySide({gutterSize:n},i)}).all([withBackgroundColor(e.pageBackgroundColor)])});define("profilesP",["db"],function(e){return e.profile.find()});define("signInForm",["auth","bodyColumn","colors","fonts","loginWithFacebook","prettyForms","separatorSize","signInStream","siteCopyItemsP"],function(e,t,n,i,r,o,a,s,l){return function(){return promiseComponent(l.then(function(l){var u=Stream.once(false);var c=toggleHeight(u)(text(l.find("Sign In Fill Out All Fields")));var d=Stream.once(false);var h=toggleHeight(d)(text(l.find("Side Header Email Not Confirmed")).all([link,clickThis(function(t,n){n();e.resendConfirmEmail({email:_.username.lastValue()}).then(function(){d.push(false);f.push(true)})})]));var f=Stream.once(false);var p=toggleHeight(f)(text(l.find("Sign In Email Confirmation Resent")));var m=Stream.once(false);var g=toggleHeight(m)(linkTo("#!register",text(l.find("Sign In Resend Email Confirmation - No Such Email"))).all([clickThis(function(){s.push(false)})]));var v=Stream.once(false);var y=toggleHeight(v)(text(l.find("Sign In Wrong Email / Password")).all([link,clickThis(function(t,n){n();e.resetPasswordRequest({email:_.username.lastValue()}).then(function(){v.push(false);b.push(true)},function(){v.push(false);m.push(true)})})]));var b=Stream.once(false);var w=toggleHeight(b)(text(l.find("Sign In Reset Email Sent")));var _={username:Stream.once(""),password:Stream.once("")};var x;Stream.combineObject(_).onValue(function(e){x=e;u.push(false)});var C=o.submit(black,"Submit",function(t){t();if(x===undefined){u.push(true)}else{e.signIn(x).then(function(){window.location.hash="#!";window.location.reload()},function(e){if(e.responseText.indexOf("confirm")!==-1){d.push(true)}else{v.push(true)}})}});var k=o.input({name:"email",fieldName:"username",stream:_.username});var S=o.input({name:"password",fieldName:"password",stream:_.password,type:"password"});var T=text(l.find("Sign In Or")).all([i.ralewayThinBold]);var N=sideBySide({handleSurplusWidth:giveToSecond},[alignTBM({middle:stack({},[r()])}),alignLRM({middle:alignTBM({middle:T})}),form.all([child(stack({},[sideBySide({gutterSize:a},[k,S,C]),c,h,p,g,y,w])),wireChildren(passThroughToFirst)])]);var D=stack({gutterSize:a,collapseGutters:true},[alignLRM({middle:stack({},[r()])}),alignLRM({middle:T}),form.all([child(stack({gutterSize:a,collapseGutters:true},[alignLRM({middle:sideBySide({gutterSize:a},[k,S])}),c,h,p,g,y,w,alignLRM({middle:C})])),wireChildren(passThroughToFirst)])]);var M=Stream.never();return border(n.middleGray,{bottom:1},t(padding({top:a,bottom:a},componentStream(M.map(function(e){return e>700?N:D})).all([function(e,t){t.width.pushAll(M)}]))).all([withBackgroundColor(n.pageBackgroundColor)]))}))}});define("siteCopyItemsP",["db"],function(e){return e.siteCopyItem.find({}).then(function(e){e.find=function(t){var n=e.filter(function(e){return e.uniqueName===t})[0];return n?n.value:"No Copy"};return e})});define("db",["domain"],function(e){return function(){var t={};schema.map(function(n){var i=e+"/api/"+n.name+"/";var r=function(e){n.fields.map(function(t){if(e[t.name]){if(t.type!==type.id){e[t.name]=t.type.fromString(e[t.name])}}})};var o=function(e){return e.then(function(e){if(e){if(Array.isArray(e)){e.map(r)}else{r(e)}}return e})};t[n.name]={findOne:function(e){var t=Q.defer();$.ajax({type:"post",url:i+"find",data:JSON.stringify(e),contentType:"application/json"}).then(function(e){if(e.length===0){t.resolve(null)}t.resolve(e[0])});return o(t.promise)},find:function(e){return o($.ajax({type:"post",url:i+"find",data:JSON.stringify(e),contentType:"application/json"}))},insert:function(e){return o($.ajax({type:"post",url:i+"insert",data:JSON.stringify(e),contentType:"application/json"}))},update:function(e,t){return o($.ajax({type:"post",url:i+"update",data:JSON.stringify({query:e,update:t}),contentType:"application/json"}))},insertOrUpdate:function(e){if(e._id){return t[n.name].update({_id:e._id},e)}return t[n.name].insert(e)},remove:function(e){return o($.ajax({type:"post",url:i+"remove",data:JSON.stringify(e),contentType:"application/json"}))}}});t.uploadFile=function(e,t){var n=new FormData;if(t){n.append("file",e,t)}else{n.append("file",e)}return $.ajax({url:"/api/uploadFile/insert",type:"post",data:n,cache:false,processData:false,contentType:false})};return t}()});define("wishlistView",["bodyColumn","cart","confettiBackground","db","fonts","formatPrice","gafyColors","holibirthdayRow","meP","separatorSize","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c){return function(d){var h=Q.defer();return promiseComponent(i.gafyDesign.find().then(function(f){return i.gafyStyle.find().then(function(p){return l.then(function(l){if(d){i.gafyWishlist.findOne({user:d}).then(function(e){h.resolve(e.items)})}else if(l){i.gafyWishlist.findOne({user:l._id}).then(function(e){if(e){location.hash="#!wishlist/"+l._id}else{h.resolve(t.wishlistItems)}})}else{h.resolve(t.wishlistItems)}var m=l&&d===l._id||!l&&!d;return h.promise.then(function(i){var l=function(e,n){var s=f.filter(function(t){return t._id===e.designId})[0];var l=p.filter(function(t){return t._id===e.styleId})[0];var c=Stream.once(false);return sideBySide({handleSurplusWidth:giveToFirst},[linkTo("#!design/"+e.designId,grid({minColumnWidth:10,gutterSize:u},[alignLRM({left:image({src:s.imageUrl,minHeight:200,chooseWidth:0})}),alignLRM({left:image({src:l.imageUrl,minHeight:200,chooseWidth:0})}),stack({gutterSize:u},[text(a[e.color].name+" "+s.designDescription+" "+l.styleDescription).all([r.ralewayThinBold]),alignLRM({left:div.all([withBackgroundColor(a[e.color].color),withMinWidth(50),withMinHeight(50)])}),text("Size: "+e.size).all([r.ralewayThinBold])])])),stack({},[alignLRM({right:text(o(l.price)).all([r.ralewayThinBold,$css("font-size",30)])}),alignLRM({right:componentStream(c.map(function(e){return e?text("(Added to Cart)").all([$css("font-size",15),link,clickThis(function(){t.addItem(i[n]);window.location.reload()})]):nothing}))}),alignLRM({right:m?text("Add to Cart").all([$css("font-size",15),link,clickThis(function(){t.addItem(i[n]);c.push(true)})]):nothing}),alignLRM({right:m?text("(Remove Item)").all([$css("font-size",15),link,clickThis(function(){t.removeWishlistItem(n);window.location.reload()})]):nothing})])])};return stack({gutterSize:u},[n(e(s(text("Wish List").all([r.ralewayThinBold,$css("font-size",40)])))),e(stack({gutterSize:u},[stack({gutterSize:u},i.map(l)),alignLRM({right:text("Total: "+o(i.reduce(function(e,t){return e+p.filter(function(e){return e._id===t.styleId})[0].price},0))).all([r.ralewayThinBold,$css("font-size",30)])}),alignLRM({right:sideBySide({gutterSize:u},[linkTo("#!gifts",c(black,sideBySide({gutterSize:u},[r.fa("cart-plus"),text("Continue Shopping")]))),linkTo("#!cart",c(black,sideBySide({gutterSize:u},[r.fa("shopping-cart"),text("Cart")])))])})]))])})})})})).all([function(){l.then(function(e){if(e){h.promise.then(function(t){i.gafyWishlist.findOne({user:d}).then(function(n){if(n){
i.gafyWishlist.update({_id:n._id},{user:e._id,items:t}).then(function(){location.hash="#!wishlist/"+e._id})}else{i.gafyWishlist.insert({user:e._id,items:t}).then(function(){location.hash="#!wishlist/"+e._id})}})})}})}])}});define("confettiBackground",["colors","domain"],function(e,t){return function(n){return withBackground(alignLRM({right:image({src:t+"/content/confetti.png",chooseWidth:1})}).all([withBackgroundColor(e.holibirthdayRed)]),n.all([withFontColor(white)]))}});define("socialMediaButton",["fonts","separatorSize"],function(e,t){return function(n,i){return function(r){return border(r.color,{all:2,radius:2},padding(10,sideBySide({gutterSize:t},[text(r.icon).all([$css("font-size","20px")]),text(n(r.shareVerb)).all([e.bebasNeue])]))).all([link,withFontColor(r.color),clickThis(function(){r.shareThisPage(i)})])}}});define("gift",["bodyColumn","confettiBackground","domain","fonts","holibirthdayRow","separatorSize","siteCopyItemsP"],function(e,t,n,i,r,o,a){return promiseComponent(a.then(function(a){return stack({gutterSize:o},[t(e(r(stack({gutterSize:o},[text(a.find("Gifts Title")).all([i.ralewayThinBold,i.h1])]),n+"/content/man.png")))])}))});define("bar",[],function(){return{horizontal:function(e,t){e=e||0;t=t||transparent;return div.all([componentName("vertical-separator"),withMinWidth(0,true),withMinHeight(e,true),withBackgroundColor(t)])},vertical:function(e,t){e=e||0;t=t||transparent;return div.all([componentName("horizontal-separator"),withMinWidth(e,true),withMinHeight(0,true),withBackgroundColor(t)])}}});define("separatorSize",[],function(){return 20});define("fonts",[],function(){return{ralewayThin:$css("font-family","Raleway Thin"),bebasNeue:function(e){e.$el.css("font-family","BebasNeue");e.$el.css("font-size","20px");setTimeout(function(){e.updateDimensions()})},celebrationTime:$css("font-family","CelebrationTime"),ralewayThinBold:function(e){e.$el.css("font-family","Raleway Thin");e.$el.css("font-weight","bold");setTimeout(function(){e.updateDimensions()})},h1:function(e){e.$el.css("font-family","Raleway Thin");e.$el.css("font-weight","bold");e.$el.css("font-size",px(40));setTimeout(function(){e.updateDimensions()})},h2:function(e){e.$el.css("font-family","Raleway Thin");e.$el.css("font-weight","bold");e.$el.css("font-size",px(30));setTimeout(function(){e.updateDimensions()})},h3:function(e){e.$el.css("font-family","Raleway Thin");e.$el.css("font-weight","bold");e.$el.css("font-size",px(20));setTimeout(function(){e.updateDimensions()})},fa:function(e){return text('<i	class="fa	fa-'+e+'"></i>')},faI:function(e){return'<i	class="fa	fa-'+e+'"></i>'}}});define("profileP",["meP","profilesP"],function(e,t){return e.then(function(e){return e&&t.then(function(t){return t.filter(function(t){return t.user===e._id})[0]})})});define("formFor",["db","fonts","forms","gafyColors","gafyStyleSmall","opacityGridSelect","prettyForms","separatorSize"],function(e,t,n,i,r,o,a,s){var l=function(e,n,i){return stack({},[text(e).all([t.ralewayThinBold,t.h3]).all(i||[]),n])};var u=function(u){var c={};u.fields.map(function(u){c[u.name]=function(c,d){switch(u.editorType&&u.editorType.name){case"string":return a.input({name:u.displayName,fieldName:u.name,labelAll:c,stream:d,type:"text"});case"paragraph":return a.plainTextarea({name:u.displayName,fieldName:u.name,labelAll:c,stream:d});case"password":return a.input({name:u.displayName,fieldName:u.name,labelAll:c,stream:d,type:"password"});case"html":return a.textarea({name:u.displayName,fieldName:u.name,labelAll:c,stream:d});case"date":return a.input({name:u.displayName,fieldName:u.name,labelAll:c,stream:d,type:"date"});case"number":return a.input({name:u.displayName,fieldName:u.name,labelAll:c,stream:d,type:"number"});case"file":if(u.editorType.accept.indexOf("image")!==-1){return a.imageUpload({name:u.displayName,fieldName:u.name,labelAll:c,stream:d})}return a.fileUpload({name:u.displayName,fieldName:u.name,labelAll:c,stream:d});case"bool":return a.checkbox({name:u.displayName,fieldName:u.name,stream:d});case"foreignKey":return promiseComponent(e[u.editorType.table].find({}).then(function(e){return l(u.displayName,n.selectBox({options:e.map(function(e){return{name:e[u.editorType.nameField],value:e._id}}),name:u.name,stream:d}))}));case"listOf":var h=Stream.create();d.map(function(e){if(!e.join){e=[]}return e.join("\n")}).pushAll(h);h.map(function(e){return e.split("\n")}).pushAll(d);return l(u.displayName+" (one per line)",n.plainTextareaBox(h,u.name).all([$addClass("pre")]));case"oneOf":return l(u.displayName,stack({},u.editorType.options.map(function(e){return sideBySide({gutterSize:s},[n.inputBox(Stream.create(),"radio",u.name).all([$prop("value",e),clickThis(function(){d.push(e)}),function(t){setTimeout(function(){d.onValue(function(n){if(n===e){t.$el.find("input").click()}})})}]),padding({top:1},text(e).all([t.ralewayThinBold]))])})));case"enumeration":return l(u.displayName,n.selectBox({options:u.editorType.options,name:u.name,stream:d}));case"gafyColor":return l(u.displayName,o(d,i.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(e){return{component:stack({},[alignLRM({middle:div.all([withBackgroundColor(e.color),withMinWidth(50),withMinHeight(50)])}),text(e.name),text(rgbColorString(e.color))]),value:e.name}}),true));case"gafyStyle":return promiseComponent(e.gafyStyle.find({}).then(function(e){return l(u.displayName,o(d,e.map(function(e){return{component:r(e),value:e._id}}),true))}));default:return text("no form element")}}});return function(e){return function(t,n){var i={};var r={};for(var o in t){var a=t[o]!==undefined?Stream.once(t[o]):Stream.create();i[o]=a;if(c[o]){r[o]=c[o](e,a)}}return form.all([child(n(Stream.combineObject(i),r)),wireChildren(passThroughToFirst)])}}};var c=[];schema.map(function(e){var t=u(e);c.push(t);c[e.name]=t});return c});define("header",["adminP","auth","bar","bodyColumn","colors","domain","fonts","meP","separatorSize","signInForm","signInStream","siteCopyItemsP"],function(e,t,n,i,r,o,a,s,l,u,c,d){return promiseComponent(d.then(function(n){var d=function(e){e.all=e.all||[];return function(t){return padding(e.padding,alignTBM({middle:text(t).all(e.all)}))}};var h=function(e){return d({padding:10,all:[a.celebrationTime,$css("font-weight","bold"),$css("font-size","20px")]})(e)};var f=function(e,i,r){var o=[];if(i){o.push(linkTo("#!admin",h(n.find("Header Admin"))))}o.push(linkTo("http://holibirthdaygift.com/",h(n.find("Header Gifts"))));o.push(linkTo("#!browseStories",h(n.find("Header Browse"))));o.push(linkTo("#!causes",h(n.find("Header Causes"))));if(e){o.push(linkTo("#!user/"+e._id,h(n.find("Header My Profile"))));o.push(h(n.find("Header Sign Out")).all([link,clickThis(function(){t.signOut().then(function(){window.location.hash="#!";window.location.reload()})})]))}else{o.push(h(n.find("Header Sign In")).all([link,clickThis(function(e){r.push(!r.lastValue());e.stopPropagation()})]));o.push(linkTo("#!register",h(n.find("Header Register"))))}return o};return s.then(function(t){return e.then(function(e){var n=Stream.once(false);$("body").on("click",function(){c.push(false);n.push(false)});var s=f(t,e,c);var d=sideBySide({gutterSize:l},s);var p=h(a.faI("bars")).all([link,clickThis(function(e){n.push(!n.lastValue());e.stopPropagation()})]);return dropdownPanel(dropdownPanel(border(r.middleGray,{bottom:1},alignLRM({middle:i(stack({},[alignLRM({left:alignTBM({middle:toggleComponent([linkTo(o+"/#!",image({src:"https://www.holibirthday.com/content/man3.png",minHeight:44,minWidth:55.45})),image({src:"https://www.holibirthday.com/content/man3.png",minHeight:44,minWidth:55.45}).all([function(e,t){e.$el.css("cursor","pointer");Stream.combine([windowScroll,t.height,windowHash],function(t,n,i){e.$el.css("opacity",(i===""||i==="#"||i==="#!")&&t>0?1:0);setTimeout(function(){e.$el.css("transition","opacity 0.1s")})})},clickThis(function(){$("body").animate({scrollTop:0},300)})])],windowHash.map(function(e){if(-1!==window.location.href.indexOf("gift")){return 0}return e===""||e==="#"||e==="#!"?1:0}))}),right:componentStream(windowWidth.map(function(e){if(e>560){n.push(false);return d}return p}))})]))})).all([withBackgroundColor(r.pageBackgroundColor)]),alignLRM({right:border(black,{left:1,bottom:1},stack({gutterSize:l},s).all([withBackgroundColor(r.pageBackgroundColor)]))}),n),u().all([clickThis(function(e){e.stopPropagation()})]),c)})})}))});define("months",[],function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]});define("holibirthdayView",["bodyColumn","colors","confettiBackground","db","fonts","holibirthdayRow","meP","separatorSize","socialMedia","socialMediaButton"],function(e,t,n,i,r,o,a,s,l,u){return function(n){return promiseComponent(Q.all([i.holibirthday.findOne({user:n}),i.profile.findOne({user:n})]).then(function(n){return a.then(function(i){var o=n[0];var a=n[1];if(!o){return nothing}var c=Stream.create();var d=document.createElement("canvas");var h=$(d);h.appendTo($("body")).prop("width",2970).prop("height",2228);var f=d.getContext("2d");var p=function(e,t,n){f.font=n;var i=f.measureText(t).width;f.fillText(t,e.x-i/2,e.y)};var m=new Image;m.onload=function(){f.drawImage(m,0,0);p({x:1485,y:840},a.firstName+" "+a.lastName,"bold 100px Raleway Thin");p({x:960,y:995},moment(o.date).utc().format("MMMM Do"),"bold 100px Raleway Thin");p({x:1572,y:1118},moment(a.birthday).utc().format("MMMM Do"),"bold 100px Raleway Thin");p({x:1893,y:1758},moment(o.updateDate).utc().format("MMMM Do"),"bold 100px Raleway Thin");setTimeout(function(){c.push(d.toDataURL());h.remove()})};m.src="./content/certificate-new.png";var g=u(function(e){return e+(i&&i._id===a.user?" your certificate":" this certificate")},{imageUrl:o.imageUrl,name:a.firstName+" "+a.lastName,text:"Holiborn on "+moment(new Date(o.date)).utc().format("MMMM Do")});var v=e(alignLRM({middle:sideBySide({gutterSize:s},[g(l.facebook),g(l.twitter)].map(function(e){return e.all([withBackgroundColor(t.pageBackgroundColor),clickThis(function(e){e.stopPropagation()})])}))}));return stack2({gutterSize:s,handleSurplusHeight:giveHeightToNth(0)},[o?componentStream(c.map(function(t){return e(keepAspectRatio(linkTo(t,image({src:t,useNativeSize:true}))))})).all([withMinWidth(0,true),withMinHeight(0,true)]):e(text(a.firstName+" "+a.lastName+" does not have a holibirthday!").all([r.ralewayThinBold,r.h1])),v])})}))}});define("prettyForms",["db","fonts","forms","separatorSize","submitButton"],function(e,t,n,i,r){var o={input:function(e){return stack({},[text(e.name).all([t.ralewayThinBold]).all(e.labelAll||[]),alignLRM({left:n.inputBox(e.stream,e.type,e.fieldName)})])},select:function(e){return stack({},[text(e.name).all([t.ralewayThinBold]).all(e.labelAll||[]),alignLRM({left:stack({},[n.selectBox(e),nothing.all([withMinWidth(150,true)])])})])},textarea:function(e){return stack({},[text(e.name).all([t.ralewayThinBold]).all(e.labelAll||[]),n.textareaBox(e.stream,e.fieldName).all([$addClass("pre")])])},plainTextarea:function(e){return stack({},[text(e.name).all([t.ralewayThinBold]).all(e.labelAll||[]),n.plainTextareaBox(e.stream,e.fieldName).all([$addClass("pre")])])},fileUpload:function(e,n){n=n||function(){};e.accept=e.accept||"*";return stack({},[text(e.name).all([t.ralewayThinBold]).all(e.labelAll||[]),input.all([$prop("type","file"),$prop("accept",e.accept),changeThis(function(t){var i=t.target.files[0];n(i);if(e.stream){e.stream.push(i)}})])])},imageUpload:function(t){var n=Stream.once("./content/man.png");t.stream.pushAll(n);t.accept=t.accept||"image/*";return grid({gutterSize:i},[o.fileUpload({name:t.name,accept:t.accept,labelAll:t.labelAll,stream:Stream.create()},function(n){e.uploadFile(n).then(function(e){t.stream.push("/api/uploadFile/find/"+encodeURIComponent(e))})}).all([withMinWidth(300,true)]),image({src:n,minWidth:300})])},checkbox:function(e){var r=false;e.stream.onValue(function(e){r=e});return sideBySide({gutterSize:i},[n.inputBox(e.stream,"checkbox",e.fieldName),padding({top:1},text(e.name).all([t.ralewayThinBold]))]).all([clickThis(function(t){e.stream.push(!r);t.stopPropagation();return false})])},radios:function(e){return stack({},e.options.map(function(r){return sideBySide({gutterSize:i},[n.inputBox(Stream.create(),"radio",e.fieldName).all([$prop("value",r.value),function(t){setTimeout(function(){e.stream.onValue(function(e){if(e===r.value){t.$el.find("input").prop("checked",true)}else{t.$el.find("input").prop("checked",false)}})})},clickThis(function(){e.stream.push(r.value)})]),padding({top:1},text(r.name).all([t.ralewayThinBold]))])}))},submit:function(e,n,i){return stack({},[input.all([$prop("type","submit"),submitThis(function(e,t){var n=t();i(n);return false}),withMinHeight(0,true),$css("display","none")]),r(e,text(n).all([t.bebasNeue])).all([link,clickThis(function(e,t){var n=t();i(n)})])])}};return o});define("registerView",["auth","bar","bodyColumn","fonts","loginWithFacebook","meP","prettyForms","separatorSize"],function(e,t,n,i,r,o,a,s){return function(){var l=30;var u=Stream.once(false);var c=Stream.once(false);var d={firstName:Stream.never(),lastName:Stream.never(),email:Stream.never(),birthday:Stream.never(),holibirther:Stream.once(false),knowAHolibirther:Stream.once(false),receiveMarketingEmails:Stream.once(true),password:Stream.never(),confirmPassword:Stream.never()};var h;Stream.combineObject(d).onValue(function(e){h=e;u.push(false)});var f=Stream.once(0);var p=a.submit(black,"Submit",function(t){e.grecaptchaP.then(function(n){var i=n.getResponse();if(h===undefined||i===""){u.push(true);t()}else if(h.password!==h.confirmPassword){c.push(true);t()}else{h.captchaResponse=i;e.register(h).then(function(){f.push(1)})}})});var m=a.input({name:"First Name",fieldName:"firstName",stream:d.firstName});var g=a.input({name:"Last Name",fieldName:"lastName",stream:d.lastName});var v=a.input({name:"Birthday",fieldName:"lastName",stream:d.birthday,type:"date"});var y=a.input({name:"Email",fieldName:"email",stream:d.email});var b=a.checkbox({name:"Am a Holibirther",fieldName:"holibirther",stream:d.holibirther});var w=a.checkbox({name:"Know a Holibirther",fieldName:"knowAHolibirther",stream:d.knowAHolibirther});var _=a.checkbox({name:"Receive Emails from Holibirthday",fieldName:"lastName",stream:d.receiveMarketingEmails});var x=a.input({name:"Password",fieldName:"password",stream:d.password,type:"password"});var C=a.input({name:"Password Again",fieldName:"confirmPassword",stream:d.confirmPassword,type:"password"});var k=div.all([$prop("id","grecaptcha-div"),function(t){e.grecaptchaP.then(function(){e.grecaptchaSitekeyP.then(function(e){grecaptcha.render("grecaptcha-div",{sitekey:e});var n=setInterval(function(){t.updateDimensions(true)},100);t.minHeight.onValue(function(){clearInterval(n)})})})}]);var S=text("or").all([i.ralewayThinBold]);o.then(function(e){if(e){location.hash="#!";location.reload()}});return n(padding({top:s*4},sideBySide({handleSurplusWidth:giveToFirst,gutterSize:s*4},[stack({gutterSize:s},[paragraph("Sign in to share a Holibirthday story").all([i.ralewayThinBold,$css("font-size",l)]),paragraph("That Fourth of July birthday cookout where your friends caught the house on fire.").all([i.ralewayThinBold,$css("font-size",l)]),paragraph("Your grandfather being born on April Fools day and nothing he said could be taken seriously.").all([i.ralewayThinBold,$css("font-size",l)])]),stack({gutterSize:s},[r(),alignLRM({middle:S}),toggleComponent([form.all([child(stack({gutterSize:s},[m,g,y,_,v,b,w,x,C,k,stack({},[toggleHeight(u)(stack({},[paragraph("Please fill out all fields"),t.horizontal(s)])),toggleHeight(c)(stack({},[paragraph("Passwords must match"),t.horizontal(s)])),p])])),wireChildren(passThroughToFirst)]),stack({gutterSize:s},[paragraph("Success!").all([i.ralewayThinBold]),paragraph("Please check your email to confirm your email address.").all([i.ralewayThinBold])])],f).all([withMinWidth(300,true)])])])))}()});define("gafyDesignSmall",["colors","fonts"],function(e,t){return function(e){return stack({},[alignLRM({middle:image({src:e.imageUrl,chooseWidth:0,minHeight:200})}),padding({all:10},alignLRM({middle:text(e.designDescription).all([t.h2])}))]).all([withMinWidth(300,true)])}});define("chooseNonHoliday",[],function(){return function(){var e=function(e,t){return e.month===t.month&&e.dayTens===t.dayTens&&e.dayOnes===t.dayOnes};var t=function(){var e=new Date((new Date).getTime()*Math.random());var t=e.getUTCMonth();var n=e.getUTCDate();var i=parseInt(n/10+"");var r=n%10;return{month:t,dayTens:i,dayOnes:r,date:e}};var n=function(t){if(t.month===10){if(t.dayTens>=2){return true}}if(t.month===11){return true}var n=[{month:0,dayTens:0,dayOnes:1,reason:"New Years"},{month:0,dayTens:0,dayOnes:2,reason:"day after new years"},{month:3,dayTens:0,dayOnes:1,reason:"April Fool's"},{month:6,dayTens:0,dayOnes:4,reason:"Independence Day"},{month:8,dayTens:0,dayOnes:7,reason:"labor day"},{month:9,dayTens:3,dayOnes:1,reason:"halloween"},{month:11,dayTens:2,dayOnes:1,reason:"christmas eve eve eve eve"},{month:11,dayTens:2,dayOnes:2,reason:"christmas eve eve eve"},{month:11,dayTens:2,dayOnes:3,reason:"christmas eve eve"},{month:11,dayTens:2,dayOnes:4,reason:"christmas eve"},{month:11,dayTens:2,dayOnes:5,reason:"christmas"},{month:11,dayTens:2,dayOnes:6,reason:"day after christmas"},{month:11,dayTens:2,dayOnes:7,reason:"day after day after christmas"},{month:11,dayTens:2,dayOnes:8,reason:"day after day after day after christmas"},{month:11,dayTens:2,dayOnes:9,reason:"day after day after day after day after christmas"},{month:11,dayTens:3,dayOnes:0,reason:"New Years eve eve"},{month:11,dayTens:3,dayOnes:1,reason:"New Years eve"}];return n.filter(function(n){return e(n,t)}).length>0};var i=t();while(n(i)){i=t()}return i.date}});define("storyPaginate",["bar","colors","fonts","separatorSize"],function(e,t,n,i){var r=function(e){return function(t,n){var i=[];for(var r=0;r<n.length;r+=t.perPage){i.push(n.slice(r,r+t.perPage))}if(i.length===0){i.push([])}return e(i,t.pageS)}};return r(function(n,r){var o=false;return componentStream(r.map(function(a){var s=alignLRM({middle:sideBySide({gutterSize:i},n.map(function(e,n){var i=""+(n+1);return a===n?text(i):text(i).all([withFontColor(t.linkBlue),$css("text-decoration","underline"),link,clickThis(function(){r.push(n)})])}))});return stack({gutterSize:i},[s,stack({gutterSize:i},intersperse(n[a],e.horizontal(1,t.middleGray))),s]).all([function(e,t){if(o){var n=-50+t.topAccum.lastValue()+t.top.lastValue();$("body").animate({scrollTop:n},300)}o=true}])}))})});define("areYouSure",["fonts","separatorSize","submitButton"],function(e,t,n){return function(i){i=i||{};i.text=i.text||"Are you sure?";i.yesText=i.yesText||"Yes";i.noText=i.noText||"No";i.onYes=i.onYes||function(){};i.onNo=i.onNo||function(){};var r=Q.defer();var o=function(){r.promise.then(function(e){e.$el.css("opacity",0);setTimeout(function(){e.destroy()},200)})};var a=extendToWindowBottom(alignLRM({middle:alignTBM({middle:stack({gutterSize:t},[paragraph(i.text,300).all([e.h1,e.ralewayThinBold,$css("text-align","center")]),alignLRM({left:n(black,text(i.noText).all([e.bebasNeue])).all([link,clickThis(function(){i.onNo();o()})]),right:n(black,text(i.yesText).all([e.bebasNeue])).all([link,clickThis(function(){i.onYes();o()})])})])})})).all([$css("position","fixed"),function(e){e.$el.css("opacity",0);setTimeout(function(){e.$el.css("transition","opacity 0.2s").css("opacity",1)})}]);r.resolve(rootComponent(a))}});define("domain",[],function(){return"https://www.holibirthday.com"});define("app",["bar","colors","footer","header","pageRoutes","separatorSize"],function(e,t,n,i,r,o){var a=extendToWindowBottom(alignTBM({top:fixedHeaderBody({},i,stack({},[e.horizontal(o),route(r),e.horizontal(o)])),bottom:n})).all([withBackgroundColor(t.pageBackgroundColor)]);return a});define("submitButton",[],function(){return function(e,t){if(!t){debugger}return border(e,{all:2,radius:5},padding({all:8,top:10},alignLRM({middle:alignTBM({middle:t})})))}});window.app=function(){if(-1===window.location.href.indexOf("holibirthdaygift")){require(["app"],function(e){rootComponent(e)})}else{require(["gift","header","footer"],function(e,t,n){rootComponent(t.all([$addClass("reset"),$css("z-index",100),$css("position","fixed")]));var i=$(document.createElement("div")).appendTo($("#footer")).css("position","relative");rootComponent(n.all([$addClass("reset"),$css("z-index",100)]),{$el:i});var r=$(document.createElement("div")).prependTo("#content").css("position","relative");var o=rootComponent(e,{$el:r});o.minHeight.map(function(e){r.css("height",e)})})}};define("cart",[],function(){var e="shoppingCart";var t="wishlist";var n=JSON.parse(window.localStorage.getItem(e))||[];var i=JSON.parse(window.localStorage.getItem(t))||[];return{items:n,wishlistItems:i,addItem:function(t){n.push(t);window.localStorage.setItem(e,JSON.stringify(n))},removeItem:function(t){n.splice(t,1);window.localStorage.setItem(e,JSON.stringify(n))},editItem:function(t,i){n[t]=i;window.localStorage.setItem(e,JSON.stringify(n))},addWishlistItem:function(e){i.push(e);window.localStorage.setItem(t,JSON.stringify(i))},removeWishlistItem:function(e){i.splice(e,1);window.localStorage.setItem(t,JSON.stringify(i))},editWishlistItem:function(e,n){i[e]=n;window.localStorage.setItem(t,JSON.stringify(i))}}});define("gafyDesignRow",["fonts","separatorSize"],function(e,t){return function(n){return grid({handleSurplusWidth:giveToSecond},[alignTBM({middle:image({src:n.imageUrl,minWidth:300,chooseHeight:0})}),alignTBM({middle:padding({left:30,right:30},stack({gutterSize:t},[text(n.designDescription).all([e.ralewayThinBold,$css("font-size",40)])])).all([withMinWidth(300,true)])})])}});define("contactsView",["areYouSure","bar","bodyColumn","colors","confettiBackground","db","defaultFormFor","domain","fonts","formFor","holibirthdayRow","meP","separatorSize","signInForm","signInStream","siteCopyItemsP","socialMedia","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v){var y=align();var b=function(e){return alignLRM({middle:stack({gutterSize:h},intersperse(e.map(function(e){return grid({gutterSize:h,useFullWidth:true,handleSurplusWidth:justifyAndCenterSurplusWidth},e.map(function(e){return y(e.all([$css("text-align","center"),withMinWidth(170,true)]))}))}),t.horizontal(1).all([withBackgroundColor(i.middleGray)])))})};return promiseComponent(d.then(function(i){return m.then(function(a){if(!i){return stack({gutterSize:h},[r(n(c(text(a.find("Contacts Title")).all([l.ralewayThinBold,l.h1])))),n(paragraph(a.find("Contacts Sign In")).all([l.bebasNeue,$css("font-size","30px"),link,clickThis(function(e){p.push(true);e.stopPropagation()})]))])}var s=new Date;var d=365*24*60*60*1e3;var f=function(e){if(!e){return d}var t=new Date(s);t.setUTCMonth(e.getUTCMonth());t.setUTCDate(e.getUTCDate());var n=t.getTime()-s.getTime();if(n<0){n+=d}return n};return g.facebook.api("/me/friends","get",{}).then(function(s){var d=s.data&&s.data.map(function(e){return e.id})||[];return $.ajax({type:"post",url:"/userIdsByFacebookIds",data:JSON.stringify(d),contentType:"application/json"}).then(function(s){return Q.all([o.contactOtherUser.find({user:i._id}),o.contactCustom.find({user:i._id})]).then(function(d){var p=Stream.once(d[0]);var m=Stream.once(d[1]);var y=p.map(function(e){return s.map(function(e){return{user:e}}).concat(e.map(function(e){return{user:e.otherUser}}))});return componentStream(y.map(function(d){return promiseComponent(Q.all([o.profile.find({$or:d}),o.holibirthday.find({$or:d})]).then(function(d){var y=d[0];var w=d[1];var _=p.map(function(t){return t.map(function(t){var n=y.filter(function(e){return e.user===t.otherUser})[0];var r=w.filter(function(e){return e.user===n.user})[0];return{row:[linkTo("#!user/"+n.user,text(n.firstName+" "+n.lastName).all([l.ralewayThinBold])),text(n.birthday?moment(n.birthday).utc().format("MMMM Do"):"&nbsp;").all([l.ralewayThinBold]),text(r?+moment(r.date).utc().format("MMMM Do"):"&nbsp;").all([l.ralewayThinBold]),text(n.email||"&nbsp;").all([l.ralewayThinBold]),text(a.find("Contacts Remove Contact")).all([l.ralewayThinBold]).all([link,clickThis(function(){e({onYes:function(){o.contactOtherUser.remove({user:i._id,otherUser:n.user}).then(function(){p.push(p.lastValue().filter(function(e){return e._id!==t._id}))})}})})])],howLong:Math.min(f(n.birthday),f(r&&r.date))}})});var x=m.map(function(t){return t.map(function(t){return{row:[text(t.name).all([l.ralewayThinBold]),text(t.birthday?moment(t.birthday).utc().format("MMMM Do"):"&nbsp;").all([l.ralewayThinBold]),text(a.find("Contacts No Holibirthday")),text(t.email||"&nbsp;").all([l.ralewayThinBold]),text(a.find("Contacts Remove Contact")).all([l.ralewayThinBold]).all([link,clickThis(function(){e({onYes:function(){o.contactCustom.remove({_id:t._id}).then(function(){m.push(m.lastValue().filter(function(e){return e._id!==t._id}))})}})})])],howLong:f(t.birthday)}})});var C=Stream.combine([_,x],function(e,t){return e.concat(t).sort(function(e,t){return t.howLong-e.howLong}).map(function(e){return e.row})});return stack({gutterSize:h},[r(n(c(text("Contacts").all([l.ralewayThinBold,l.h1])))),n(alignLRM({middle:componentStream(C.map(function(e){return u.contactCustom([$css("display","none"),withMinHeight(0,true)])({user:i._id,name:"",birthday:null,email:""},function(t,n){var i=[text(a.find("Contacts Contact Name")),text(a.find("Contacts Contact Birthday")),text(a.find("Contacts Contact Holibirthday")),text(a.find("Contacts Contact Email")),text(a.find("Contacts Contact Add / Remove Contact"))].map(function(e){return e.all([l.bebasNeue])});var r=[n.name,n.birthday,text(a.find("Contacts No Holibirthday")),n.email,v(black,text(a.find("Contacts Add Contact")).all([l.bebasNeue])).all([link,clickThis(function(e,n){var i=n();o.contactCustom.insert(t.lastValue()).then(function(e){m.push(m.lastValue().concat([e]));i()})})])];var s=align();return b([i].concat(e).concat([r]))})}))})),t.horizontal(1).all([withBackgroundColor(black)]),componentStream(p.map(function(t){var r=s.filter(function(e){return t.filter(function(t){return e===t.otherUser}).length===0});if(r.length===0){return nothing}return n(stack({gutterSize:h,collapseGutters:true},[i.facebookId?alignLRM({middle:text(a.find("Contacts Other Facebook Friends")).all([l.h2])}):nothing,b(r.map(function(t){var n=y.filter(function(e){return e.user===t})[0];var r=w.filter(function(e){return e.user===n.user})[0];return[linkTo("#!user/"+n.user,text(n.firstName+" "+n.lastName).all([l.ralewayThinBold])),text(n.birthday?moment(n.birthday).utc().format("MMMM Do"):"&nbsp;").all([l.ralewayThinBold]),text(r?moment(r.date).utc().format("MMMM Do"):"&nbsp;").all([l.ralewayThinBold]),text(n.email||"&nbsp;").all([l.ralewayThinBold]),v(black,text(a.find("Contacs Add Contact")).all([l.bebasNeue])).all([link,clickThis(function(){e({onYes:function(){o.contactOtherUser.insert({user:i._id,otherUser:n.user}).then(function(e){p.push(p.lastValue().concat([e]))})}})})])]}))]))})),alignLRM({middle:v(g.facebook.color,sideBySide({gutterSize:h},[text(g.facebook.icon).all([$css("font-size","20px")]),text(a.find("Contacts Invite Facebook Friends")).all([l.bebasNeue])])).all([withFontColor(g.facebook.color),link,clickThis(function(){g.facebook.shareThisPage({imageUrl:a.find("Contacts Facebook Invite Image"),text:a.find("Contacts Facebook Invite Caption"),description:a.find("Contacts Facebook Invite Description")})})])})])}))}))})})})})}))});define("formatPrice",[],function(){return function(e){return"$"+Math.floor(e/100)+"."+e%100}});define("gafyStyleSmall",["colors","fonts"],function(e,t){return function(n){return border(e.middleGray,{all:1},stack({},[alignLRM({middle:image({src:n.imageUrl||"./content/man.png",chooseWidth:0,minHeight:200})}),padding({all:10},alignLRM({middle:text(n.styleDescription).all([t.h2])}))])).all([withMinWidth(300,true)])}});define("formFieldsFor",[],function(){var e=function(e){return function(e,t){return form.all([child(t({})),wireChildren(passThroughToFirst)])}};var t=[];schema.map(function(n){formFieldsForTable=e(n);t.push(n);t[n.name]=n});return t});define("adminView",["areYouSure","bar","bodyColumn","colors","db","defaultFormFor","fonts","formLayouts","forms","gafyDesignSmall","gafyStyleSmall","months","prettyForms","separatorSize","siteCopyItemsP","storiesP","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g){var v=function(e){var t=padding({top:10,bottom:10,left:10,right:10},paragraph(e,0).all([a.h3]));return{left:border(i.middleGray,{top:1,left:1},padding({left:1,right:2},t)),right:border(i.middleGray,{top:1,right:1},padding({left:2,right:1},t)),selected:border(i.middleGray,{top:1,left:1,right:1},padding({all:1},t))}};var y=function(e){return border(i.middleGray,{all:1},padding({all:f},e))};var b=promiseComponent(r.dailyTheme.findOne({}).then(function(e){e=e||{};return o.dailyTheme({_id:e._id||null,type:e.type||schema.dailyTheme.fields.type.options.featuredStory,storyId:e.storyId||null,storyText:e.storyText||"",giftId:e.giftId||null,giftText:e.giftText||"",pollTitle:e.pollTitle||"",pollDescription:e.pollDescription||"",pollChoices:e.pollChoices||"",pollImage:e.pollImage||"./content/man.png",someTextTitle:e.someTextTitle||"",someTextText:e.someTextText||"",someTextImage:e.someTextImage||"./content/man.png"},function(e,t){var n=stack({gutterSize:f},[t.storyId,t.storyText]);var i=stack({gutterSize:f},[t.giftId,t.giftText]);var o=stack({gutterSize:f},[t.pollTitle,t.pollDescription,t.pollChoices,t.pollImage]);var s=stack({gutterSize:f},[t.someTextTitle,t.someTextText,t.someTextImage]);var l=alignLRM({left:g(black,text("Publish")).all([link,clickThis(function(){var t=e.lastValue();delete t._id;r.dailyTheme.update({id:t._id},t).then(function(){window.location.hash="#!";window.location.reload()})})])});return stack({gutterSize:f},[text("Daily Theme").all([a.h1]),t.type,componentStream(e.map(function(e){switch(e.type){case schema.dailyTheme.fields.type.options.featuredStory:return n;case schema.dailyTheme.fields.type.options.featuredGift:return i;case schema.dailyTheme.fields.type.options.poll:return o;case schema.dailyTheme.fields.type.options.someText:return s}})),l])})}));var w=function(e){return function(t,n){var i=e.filter(function(e){return e.uniqueName===t})[0]||{uniqueName:t,value:n==="imageUpload"?"/content/man.png":""};var o=Stream.once(i.value);var s=o.map(function(){return true});s.push(false);return stack({gutterSize:f},[h[n||"input"]({name:t,stream:o}),alignLRM({left:sideBySide({gutterSize:f},[g(black,text("Save").all([a.bebasNeue])).all([link,clickThis(function(){i.value=o.lastValue();(i._id?r.siteCopyItem.update({_id:i._id},i):r.siteCopyItem.insert(i)).then(function(e){i._id=i._id||e._id;s.push(false)})})]),componentStream(s.map(function(e){return e?alignTBM({middle:text("(unsaved)")}):nothing}))])})])}};var _=promiseComponent(r.siteCopyItem.find({}).then(function(e){var t=w(e);return tabs([{tab:v("Home Page"),content:y(stack({gutterSize:f},[t("Home Tagline"),t("Home Share Your Story"),t("Home Claim Your Holibirthday"),t("Home Find Friends"),t("Home Stories"),t("Home Browse Stories")]))},{tab:v("Story View"),content:y(stack({gutterSize:f},[t("Story Comment Sign In"),t("Story Comment Post"),t("Story Comment Delete"),t("Story By (include a space)"),t("Story Category (include a space)"),t("Story Tags (include a space)"),t("Story Edit"),t("Story Delete")]))},{tab:v("Edit Story"),content:y(stack({gutterSize:f},[t("Edit Story Must Sign In"),t("Edit Story Title"),t("Edit Story Smaller Title"),t("Edit Story Instructions","plainTextarea"),t("Edit Story Submit Instructions"),t("Edit Story Title Field"),t("Edit Story Body Field"),t("Edit Story Category Field"),t("Edit Story Tags Field"),t("Edit Story Image URL Field"),t("Edit Story Add Tag"),t("Edit Story Submit Story")]))},{tab:v("Profile"),content:y(stack({gutterSize:f},[t("Profile Born On (include space)"),t("Profile Holiborn On (include space)"),t("Profile Holibirthday Points (include space)"),t("Profile My Contacts"),t("Profile Add Contact"),t("Profile Claim a Holibirthday"),t("Profile Holibirthday Points / View Leaderboards"),t("Profile Holibirthday Points Total"),t("Profile Edit")]))
},{tab:v("Edit Profile"),content:y(stack({gutterSize:f},[t("Edit Profile Title"),t("Edit Profile First Name"),t("Edit Profile Last Name"),t("Edit Profile Email"),t("Edit Profile Receive Marketing Emails"),t("Edit Profile Birthday"),t("Edit Profile Bio"),t("Edit Profile Image URL"),t("Edit Profile Holibirther"),t("Edit Profile Holibirthday Month"),t("Edit Profile Holibirthday Day"),t("Edit Profile Know a Holibirther"),t("Edit Profile Change Your Password"),t("Edit Profile New Password"),t("Edit Profile Confirm New Password")]))},{tab:v("Daily Theme"),content:y(stack({gutterSize:f},[t("Daily Theme Placeholder"),t("Daily Theme Poll Vote / Abstain"),t("Daily Theme Poll Sign In")]))},{tab:v("Contacts"),content:y(stack({gutterSize:f},[t("Contacts Title"),t("Contacts Sign In"),t("Contacts No Holibirthday"),t("Contacts Remove Contact"),t("Contacts Contact Name"),t("Contacts Contact Birthday"),t("Contacts Contact Holibirthday"),t("Contacts Contact Email"),t("Contacts Contact Add / Remove Contact"),t("Contacts Add Contact"),t("Contacts Other Facebook Friends"),t("Contacts Invite Facebook Friends"),t("Contacts Facebook Invite Image","imageUpload"),t("Contacts Facebook Invite Caption"),t("Contacts Facebook Invite Description")]))},{tab:v("Slot Machine"),content:y(stack({gutterSize:f},[t("Slot Machine Pull"),t("Slot Machine Change Holibirthday"),t("Slot Machine Claim Holibirthday"),t("Slot Machine Your Holibirthday Is"),t("Slot Machine Claim Title"),t("Slot Machine Description","textarea"),t("Slot Machine Must Sign In")]))},{tab:v("Gifts"),content:y(stack({gutterSize:f},[t("Gifts Title")]))},{tab:v("Causes"),content:y(stack({gutterSize:f},[t("Causes Title"),t("Causes Donate Now"),t("Causes","textarea"),t("Causes Image","imageUpload")]))},{tab:v("Site Header"),content:y(stack({gutterSize:f},[t("Header Browse"),t("Header Gifts"),t("Header Causes"),t("Header My Profile"),t("Header Contacts"),t("Header Sign In"),t("Header Sign Out"),t("Header Register"),t("Header Admin"),t("Sign In With Facebook"),t("Sign In Fill Out All Fields"),t("Side Header Email Not Confirmed"),t("Sign In Email Confirmation Resent"),t("Sign In Resend Email Confirmation - No Such Email"),t("Sign In Wrong Email / Password"),t("Sign In Reset Email Sent"),t("Sign In Or")]))},{tab:v("Unsubscribed"),content:y(stack({gutterSize:f},[t("Unsubscribed Title"),t("Unsubscribed Message")]))}])}));var x=function(e){return stack({},[text(e.name).all([a.h3])])};var C=promiseComponent(r.famousBirthday.find({}).then(function(t){var n=Stream.once(t);var i=s.stack({formBuilder:o.famousBirthday,stackConfig:{gutterSize:f},fields:["name","birthday","imageUrl"]});var l=Stream.once(0);var u=Stream.once(t.length>0?t[0]._id:null);var c=Stream.combine([n,u],function(e,t){return e.filter(function(e){return e._id===t})[0]||{}});return stack({gutterSize:f},[tabs([{tab:v("Famous Birthdays List"),content:y(stack({gutterSize:f},[text("Famous Birthdays List").all([a.h2]),componentStream(n.map(function(e){var t=[];e.map(function(e){var n=moment(e.birthday);var i=n.month();var r=n.date();t[i]=t[i]||[[]];t[i][r]=t[i][r]||[];t[i][r].push(e)});var n=Stream.once(d[0]);return stack({gutterSize:f},[h.select({name:"Month",options:d,stream:n}),componentStream(n.map(function(e){var n=d.indexOf(e);var i=t[n];return stack({gutterSize:f},i.map(function(e,t){return t===0?nothing:stack({},[text(d[n]+" "+t).all([a.h2]),stack({},e.map(function(e){return x(e).all([link,clickThis(function(){u.push(e._id);l.push(2)})])}))])}))}))])}))]))},{tab:v("Add Famous Birthday"),content:y(stack({gutterSize:f},[text("Add Famous Birthday").all([a.h2]),i({name:"",birthday:new Date,description:"",imageUrl:"./content/man.png"},function(e){var t=Stream.once(0);e.onValue(function(){t.push(0)});return stack({gutterSize:f},[toggleComponent([nothing,text("You must fill out all fields")],t),alignLRM({left:g(black,text("Add Famous Birthday")).all([link,clickThis(function(){var i=e.lastValue();if(!i){t.push(1);return}i.birthday=moment(moment(i.birthday).utc().format("YYYY-MM-DD")).format();r.famousBirthday.insert(i).then(function(e){n.push(n.lastValue().concat([e]));l.push(0)})})])})])})]))},{tab:v("Edit Famous Birthday"),content:y(stack({gutterSize:f},[componentStream(n.map(function(e){return h.select({name:"Editing Famous Birthday",options:e.map(function(e){return{name:e.name,value:e._id}}),stream:u}).all([changeThis(function(e){u.push($(e.target).val())})])})),text("Edit Famous Birthday").all([a.h2]),componentStream(c.map(function(t){return i(t,function(t){var i=Stream.once(0);t.onValue(function(){i.push(0)});return stack({gutterSize:f},[toggleComponent([nothing,text("You must fill out all fields")],i),alignLRM({left:sideBySide({gutterSize:f},[g(black,text("Save Famous Birthday").all([a.bebasNeue])).all([link,clickThis(function(){var e=t.lastValue();if(!e){i.push(1);return}e.birthday=moment(moment(e.birthday).utc().format("YYYY-MM-DD")).format();r.famousBirthday.update({_id:e._id},e).then(function(){var t=n.lastValue().slice(0);for(var i=0;i<t.length;i++){if(t[i]._id===e._id){t[i]=e}}n.push(t);l.push(0)})})]),g(black,text("Delete Famous Birthday")).all([link,clickThis(function(){e({onYes:function(){var e=t.lastValue();if(!e){i.push(1);return}r.famousBirthday.remove({_id:e._id},e).then(function(){var t=n.lastValue().slice(0);for(var i=0;i<t.length;i++){if(t[i]._id===e._id){t.splice(i,1)}}n.push(t);l.push(0)})}})})])])})])})}))]))}],l)])}));var k=promiseComponent($.ajax({url:"/mailchimp/templates"}).then(function(e){var t=e.map(function(e){return{name:e.name,value:e.id}});t.sort(function(e,t){return e.name.localeCompare(t.name)});return r.mailchimpTemplate.find({}).then(function(e){return alignLRM({left:stack({gutterSize:f},[{name:"Holibirthday in Three Weeks",event:schema.mailchimpTemplate.fields.event.options.holibirthdayInThreeWeeks},{name:"Holibirthday in One Week",event:schema.mailchimpTemplate.fields.event.options.holibirthdayInOneWeek},{name:"Holibirthday Tomorrow",event:schema.mailchimpTemplate.fields.event.options.holibirthdayTomorrow},{name:"Friend's Holibirthday in Three Weeks",event:schema.mailchimpTemplate.fields.event.options.friendsHolibirthdayInThreeWeeks},{name:"Friend's Holibirthday in One Week",event:schema.mailchimpTemplate.fields.event.options.friendsHolibirthdayInOneWeek},{name:"Friend's Holibirthday Tomorrow",event:schema.mailchimpTemplate.fields.event.options.friendsHolibirthdayTomorrow},{name:"Your Story Deleted",event:schema.mailchimpTemplate.fields.event.options.storyDeleted},{name:"Your Comment Deleted",event:schema.mailchimpTemplate.fields.event.options.commentDeleted}].map(function(n){var i=Stream.splitObject(e.filter(function(e){return e.event===n.event})[0]||{event:n.event,mailchimpTemplateId:"",toName:"",fromName:"",subject:""});var o=Stream.combineObject(i);var s=Stream.once(false);var u=false;o.map(function(){if(u){s.push(true)}u=true});return stack({gutterSize:f},[text(n.name).all([a.h2]),l.selectBox({options:t,stream:i.mailchimpTemplateId}),h.input({name:"toName",stream:i.toName}),h.input({name:"fromName",stream:i.fromName}),h.input({name:"subject",stream:i.subject}),sideBySide({gutterSize:f},[g(black,text("Save").all([a.bebasNeue])).all([link,clickThis(function(e,t){var n=t();r.mailchimpTemplate.insertOrUpdate(o.lastValue()).then(function(){n();s.push(false)})})]),alignTBM({middle:componentStream(s.map(function(e){return e?text("(unsaved)"):nothing}))})])])}))})})}));var S=promiseComponent(p.then(function(e){var t=w(e);return t('Automated Emails Unsubscribe Footer (wrap text for "unsubscribe" link in double curly braces, e.g. {{unsubscribe}} )',"textarea")}));var T=stack({gutterSize:f},[k,S]);var N=promiseComponent($.ajax({url:"/mailchimp/lists"}).then(function(e){var t=e.map(function(e){return{name:e.name,value:e.id}});t.sort(function(e,t){return e.name.localeCompare(t.name)});return r.mailchimpList.find({}).then(function(e){return alignLRM({left:stack({gutterSize:f},[{name:"Holibirthers",internalType:"holibirthers"},{name:"Friends of Holibirthers",internalType:"friendsOfHolibirthers"}].map(function(n){var i=Stream.splitObject(e.filter(function(e){return e.mailchimpListType===n.internalType})[0]||{mailchimpListType:n.internalType,mailchimpListId:""});var o=Stream.combineObject(i);var s=Stream.once(false);var u=false;o.map(function(){if(u){s.push(true)}u=true});return stack({gutterSize:f},[text(n.name).all([a.h2]),l.selectBox({options:t,stream:i.mailchimpListId}),sideBySide({gutterSize:f},[g(black,text("Save").all([a.bebasNeue])).all([link,clickThis(function(e,t){var n=t();r.mailchimpList.insertOrUpdate(o.lastValue()).then(function(){n();s.push(false)})})]),alignTBM({middle:componentStream(s.map(function(e){return e?text("(unsaved)"):nothing}))})])])}))})})}));return n(stack({},[t.horizontal(f),tabs([{tab:v("Daily Theme"),content:y(b)},{tab:v("Site Copy"),content:y(_)},{tab:v("Famous Birthdays"),content:y(C)},{tab:v("Mailchimp Templates"),content:y(T)},{tab:v("Mailchimp Lists"),content:y(N)}],Stream.once(0))]))});define("adminP",["db","meP"],function(e,t){return t.then(function(t){if(t){return e.admin.findOne({user:t._id})}})});define("optOutEmailsView",["auth","bodyColumn","confettiBackground","fonts","holibirthdayRow","separatorSize","siteCopyItemsP"],function(e,t,n,i,r,o,a){return function(s){return promiseComponent(a.then(function(a){return e.optOutEmails({token:s}).then(function(){return stack({gutterSize:o},[n(t(r(paragraph(a.find("Unsubscribed Title")).all([i.h1])))),t(paragraph(a.find("Unsubscribed Message")).all([i.h1]))])})}))}});define("socialMedia",["domain"],function(e){return function(){var t=function(e){var t=575,n=400,i=($(window).width()-t)/2,r=($(window).height()-n)/2,o="status=1"+",width="+t+",height="+n+",top="+r+",left="+i;window.open(e,"twitter",o)};return{facebook:{icon:'<i	class="fa	fa-facebook"></i>',color:color({r:59,g:89,b:152}),name:"Facebook",shareVerb:"share",shareThisPage:function(t){t=t||{};if(t.description&&t.description.length>200){t.description=t.description.substring(0,197)+"..."}t.imageUrl=t.imageUrl||"./content/man2.png";if(t.imageUrl.indexOf("/api")===0){t.imageUrl=e+t.imageUrl}if(t.imageUrl.indexOf(".")===0){t.imageUrl=e+"/"+t.imageUrl}console.log(t.imageUrl);return FB.ui({display:"popup",method:"feed",picture:t.imageUrl,name:t.name,caption:t.text,description:t.description,href:location.href})},api:function(){var e=Array.prototype.slice.call(arguments);var t=Q.defer();e[3]=function(e){t.resolve(e)};FB.api.apply(null,e);return t.promise}},twitter:{icon:'<i	class="fa	fa-twitter"></i>',color:color({r:0,g:172,b:237}),name:"Twitter",shareVerb:"tweet",shareThisPage:function(){return t("https://twitter.com/intent/tweet?url="+encodeURIComponent(location.href))},countShares:function(){}}}}()});define("storyDetailViewP",["adminP","areYouSure","bar","bodyColumn","confettiBackground","db","fonts","forms","meP","prettyForms","profilesP","separatorSize","signInStream","siteCopyItemsP","socialMedia","socialMediaButton","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g){var v=function(e){return promiseComponent(l.then(function(t){return f.then(function(n){if(!t){return text(n.find("Story Comment Sign In")).all([a.bebasNeue,link,clickThis(function(e){h.push(true);e.stopPropagation()})])}var i={user:t._id,story:e._id,text:""};var r=Stream.splitObject(i);var l=Stream.combineObject(r);var c;l.onValue(function(e){c=e});return form.all([child(stack({},[stack({},[s.plainTextareaBox(r.text,"text").all([$prop("rows",6)]),alignLRM({left:u.submit(black,n.find("Story Comment Post"),function(){o.comment.insert(c).then(function(){window.location.reload()})})})].map(function(e){return padding({top:10},e)}))])),wireChildren(function(e,t,n){n.minHeight.pushAll(e.minHeight);n.minWidth.pushAll(e.minWidth);return[t]})])})}))};var y=function(n){return promiseComponent(o.comment.find({story:n._id}).then(function(n){n.sort(function(e,t){return new Date(t.createDate).getTime()-new Date(e.createDate).getTime()});return c.then(function(i){return e.then(function(e){return f.then(function(r){return stack({gutterSize:d*2},n.map(function(n){var a=i.filter(function(e){return e.user===n.user})[0];return sideBySide({handleSurplusWidth:giveToNth(2),gutterSize:d},[stack({gutterSize:d,collapseGutters:true},[linkTo("#!user/"+a.user,image({src:a.profileImageURL||"./content/man.png",minWidth:100,chooseHeight:true})),linkTo("#!user/"+a.user,text(a.firstName+" "+a.lastName)),e?text(r.find("Story Comment Delete")).all([link,clickThis(function(e){e.stopPropagation();t({onYes:function(){o.comment.remove({_id:n._id}).then(function(){window.location.reload()})}})})]):nothing]),border(black,{all:1},padding(10,text(n.text))).all([withBackgroundColor(white)])])}))})})})}))};return function(n){return promiseComponent(c.then(function(s){var u=s.filter(function(e){return e.user===n.user})[0];var c=m(function(e){return e+" this story"},{imageUrl:n.imageUrl,name:n.name,text:"by "+u.firstName+" "+u.lastName,description:$(n.text).text()});return l.then(function(s){return e.then(function(e){return f.then(function(l){return stack({gutterSize:d},[r(i(grid({handleSurplusWidth:giveToSecond},[alignTBM({middle:image({src:n.imageUrl||"./content/man.png",minWidth:300,chooseHeight:0})}),alignTBM({middle:padding({left:30,right:30},stack({gutterSize:d/2},[paragraph(n.name,150).all([a.h1]),linkTo("#!user/"+u.user,paragraph(l.find("Story By (include a space)")+u.firstName+" "+u.lastName).all([a.h2])),n.storyType?text(l.find("Story Category (include a space)")+n.storyType).all([a.h3]):nothing,promiseComponent(o.storyTag.find({story:n._id}).then(function(e){return e.length>0?sideBySide({handleSurplusWidth:giveToSecond},[text(l.find("Story Tags (include a space)")).all([a.h3]),grid({gutterSize:d/2,useFullWidth:true},e.map(function(e){return text(e.tag).all([a.h3])}))]):nothing}))]))}).all([withMinWidth(300,true)])]))),i(stack({},[div.all([componentName("story-detail-text"),function(e){var t=$(n.text);t.find("div").css("position","initial");t.appendTo(e.$el);t.find("img").css("max-width","100%").attr("width","").attr("height","");e.updateDimensions()}])])),i(grid({gutterSize:d},[c(p.facebook),c(p.twitter)])),i(v(n)),i(y(n)),i(e||s&&s._id===n.user?alignLRM({left:sideBySide({gutterSize:d},[linkTo("#!editStory/"+n._id,g(black,text(l.find("Story Edit")).all([a.bebasNeue]))),g(black,text(l.find("Story Delete")).all([a.bebasNeue])).all([link,clickThis(function(){return t({onYes:function(){o.story.remove({_id:n._id}).then(function(){window.location.hash="#!";window.location.reload()})}})})])])}):nothing)])})})})}))}});define("confirmEmailView",["auth","bodyColumn","confettiBackground","fonts","holibirthdayRow"],function(e,t,n,i,r){return function(o){var a=Stream.once(text("Confirming Email...").all([i.h1]));e.confirmEmail(o).then(function(){a.push(text("Confirmed!  You may now log in.").all([i.h1]))},function(){a.push(text("Invalid token.").all([i.h1]))});return n(t(r(componentStream(a))))}});define("homeViewP",["bar","bodyColumn","colors","confettiBackground","dailyTheme","db","fonts","separatorSize","siteCopyItemsP","storiesP","storyPaginate","storyRowP"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h=function(e,t){return border(n.holibirthdayDarkRed,{top:5,radius:5},padding(10,alignTBM({middle:stack({},[paragraph(e,150).all([a.bebasNeue,$css("text-align","center"),withFontColor(white)]),a.fa(t).all([$css("text-align","center"),$css("font-size","60px"),withFontColor(white)])])})).all([withBackgroundColor(n.holibirthdayRed)]))};return l.then(function(e){return u.then(function(o){o.sort(function(e,t){return new Date(t.createDate).getTime()-new Date(e.createDate).getTime()});var l=function(e,t){return border(black,1,withBackgroundImage({src:e.imageUrl||"./content/man.png"},t.all([withBackgroundColor(color({a:.5})),withFontColor(white)])))};var u=t(image({src:"/content/banner.png",chooseHeight:1}));var f=t(grid({handleSurplusWidth:evenSplitSurplusWidth,gutterSize:s},[alignLRM({middle:linkTo("#!editStory",h(e.find("Home Share Your Story"),"bullhorn"))}),alignLRM({middle:linkTo("#!myHolibirthday",h(e.find("Home Claim Your Holibirthday"),"gift"))}),alignLRM({middle:linkTo("#!contacts",h(e.find("Home Find Friends"),"users"))})]));var p=paragraph(e.find("Home Tagline")).all([a.bebasNeue,$css("text-align","center"),$css("font-size",30)]);var m=i(t(r));var g=t(c({perPage:5,pageS:Stream.once(0)},o.map(d)));return stack({gutterSize:s*2},[stack({gutterSize:s*2},[u,p]),stack({gutterSize:s},[f]),stack({gutterSize:s},[m,alignLRM({middle:linkTo("#!browseStories",text(e.find("Home Stories")).all([a.h1]))}),g,alignLRM({middle:linkTo("#!browseStories",text(e.find("Home Browse Stories")).all([withFontColor(n.linkBlue),$css("text-decoration","underline")]))})])])})})});define("leaderboardsView",["bodyColumn","colors","confettiBackground","db","fonts","holibirthdayRow","separatorSize"],function(e,t,n,i,r,o,a){return promiseComponent(i.pointsTotal.find({}).then(function(s){return i.profile.find({$or:s.map(function(e){return e.user})}).then(function(i){return stack({gutterSize:a},[n(e(o(stack({gutterSize:a},[paragraph("Holibirthday Leaderboards").all([r.h1,r.ralewayThinBold])])))),e(alignLRM({middle:stack({gutterSize:a,collapseGutters:true},s.sort(function(e,t){return t.amount-e.amount}).map(function(e){var n=i.filter(function(t){return t.user===e.user})[0];return n?linkTo("#!user/"+n.user,sideBySide({gutterSize:a,handleSurplusWidth:giveToSecond},[alignTBM({middle:text(""+e.amount).all([withFontColor(t.darkGreen),r.ralewayThinBold,r.h2])}).all([withMinWidth(100,true)]),alignTBM({middle:paragraph(n.firstName+" "+n.lastName).all([r.ralewayThinBold,r.h2])})])):nothing}))}))])})}))});define("gafyColors",[],function(){return[{name:"Black",color:color({r:0,g:0,b:0})},{name:"White",color:color({r:255,g:255,b:255})},{name:"Toasted Oatmeal",color:color({r:242,g:238,b:226})},{name:"Light Grey",color:color({r:204,g:204,b:204})},{name:"Grey",color:color({r:188,g:188,b:178})},{name:"Brown",color:color({r:129,g:86,b:30})},{name:"Dark Brown",color:color({r:100,g:65,b:17})},{name:"Yellow",color:color({r:254,g:255,b:1})},{name:"Gold",color:color({r:252,g:206,b:0})},{name:"Dark Gold",color:color({r:251,g:166,b:24})},{name:"Old Gold",color:color({r:176,g:137,b:8})},{name:"Orange",color:color({r:237,g:104,b:35})},{name:"Texas Orange",color:color({r:187,g:94,b:25})},{name:"Deep Orange",color:color({r:234,g:82,b:35})},{name:"Red",color:color({r:220,g:27,b:54})},{name:"Mid Red",color:color({r:180,g:3,b:19})},{name:"Dark Red",color:color({r:193,g:4,b:0})},{name:"Fuchsia",color:color({r:172,g:4,b:125})},{name:"Maroon",color:color({r:129,g:2,b:55})},{name:"Magenta",color:color({r:188,g:38,b:163})},{name:"Flesh",color:color({r:251,g:201,b:150})},{name:"Natural",color:color({r:230,g:205,b:177})},{name:"Tan",color:color({r:213,g:149,b:87})},{name:"Pink",color:color({r:251,g:138,b:190})},{name:"Hot Pink",color:color({r:197,g:10,b:117})},{name:"Burgundy",color:color({r:135,g:3,b:26})},{name:"Lime",color:color({r:163,g:254,b:161})},{name:"Spring Green",color:color({r:8,g:164,b:91})},{name:"Kelly Green",color:color({r:4,g:108,b:81})},{name:"Olive Green",color:color({r:114,g:116,b:75})},{name:"Dark Green",color:color({r:6,g:58,b:37})},{name:"Light Blue",color:color({r:9,g:158,b:216})},{name:"Turquoise",color:color({r:70,g:181,b:200})},{name:"Ocean Blue",color:color({r:6,g:169,b:202})},{name:"Columbia Blue",color:color({r:163,g:209,b:232})},{name:"Aqua",color:color({r:7,g:151,b:138})},{name:"Royal Blue",color:color({r:48,g:74,b:171})},{name:"Dark Royal",color:color({r:1,g:0,b:204})},{name:"Navy",color:color({r:14,g:9,b:91})},{name:"Light Purple",color:color({r:177,g:129,b:229})},{name:"Purple",color:color({r:68,g:2,b:108})},{name:"Violet",color:color({r:120,g:89,b:169})},{name:"Purple Grape",color:color({r:143,g:55,b:168})},{name:"Silver Shimmer",color:color({r:204,g:204,b:204})},{name:"Gold Shimmer",color:color({r:208,g:159,b:7})},{name:"Vegas Gold",color:color({r:230,g:204,b:104})},{name:"Neon Yellow",color:color({r:240,g:236,b:69})},{name:"Neon Orange",color:color({r:247,g:176,b:0})},{name:"Neon Pink",color:color({r:237,g:108,b:201})},{name:"Neon Magenta",color:color({r:231,g:6,b:126})},{name:"Neon Red",color:color({r:249,g:90,b:84})},{name:"Neon Blue",color:color({r:14,g:122,b:233})},{name:"Neon Green",color:color({r:104,g:211,b:53})},{name:"Neon Purple",color:color({r:100,g:67,b:136})},{name:"Metallic Black",color:color({r:98,g:95,b:92})},{name:"Metallic Red",color:color({r:243,g:104,b:107})},{name:"Metallic Magenta",color:color({r:201,g:103,b:189})},{name:"Metallic Orange",color:color({r:236,g:133,b:121})},{name:"Metallic Yellow",color:color({r:221,g:206,b:105})},{name:"Metallic Blue",color:color({r:66,g:149,b:181})},{name:"Metallic Marine",color:color({r:76,g:76,b:175})},{name:"Metallic Purple",color:color({r:122,g:106,b:142})},{name:"Metallic Fuchsia",color:color({r:169,g:101,b:136})},{name:"Metallic Green",color:color({r:35,g:175,b:156})}]});define("browseStoriesView",["bodyColumn","categories","confettiBackground","db","fonts","holibirthdayRow","separatorSize","storiesP","storyPaginate","storyRowP"],function(e,t,n,i,r,o,a,s,l,u){var c=function(){return true};var d=function(){return false};var h=Stream.once("");var f=Stream.once(c);return promiseComponent(s.then(function(s){s.sort(function(e,t){return new Date(t.createDate).getTime()-new Date(e.createDate).getTime()});return stack({gutterSize:a},[n(e(o(stack({gutterSize:a/2},[text(h.map(function(e){return e+"Stories"})).all([r.h1]),padding({left:a},stack({gutterSize:a/2},[text("All Stories").all([r.h3,link,clickThis(function(){h.push("");f.push(c)})]),text("Category").all([r.h3]),grid({gutterSize:a},t.filter(function(e){return s.filter(function(t){return t.storyType===e.toLowerCase()}).length>0}).map(function(e){return text(e).all([r.bebasNeue,link,clickThis(function(){h.push(e+" ");f.push(function(t){return t.storyType===e.toLowerCase()})})])})),text("Tag").all([r.h3]),promiseComponent(i.uniqueTag.find({}).then(function(e){return grid({gutterSize:a},e.map(function(e){return text(e.tag).all([r.bebasNeue,link,clickThis(function(){h.push(e.tag+" ");f.push(d);i.storyTag.find({tag:e.tag}).then(function(e){f.push(function(t){return e.filter(function(e){return e.story===t._id}).length>0})})})])}))}))]))])))),componentStream(f.map(function(t){return e(l({perPage:10,pageS:Stream.once(0)},s.filter(t).map(u)))}))])}))});define("storyRowP",["fonts","holibirthdayRow","profilesP","separatorSize"],function(e,t,n,i){return function(r){return promiseComponent(n.then(function(n){var o=n.filter(function(e){return e.user===r.user})[0];var a=[];var s=0;var l=0;var u=100;var c=$(r.text);while(l<u&&s<c.length){var d=$(c[s]);var h=d.text().length;l+=h;s+=1;a.push(paragraph(d.html()||""))}return linkTo("#!story/"+r._id,t(stack({gutterSize:i},[paragraph(r.name).all([e.h2]),stack({gutterSize:16,collapseGutters:true},a),linkTo("#!user/"+o.user,text("by "+o.firstName+" "+o.lastName).all([e.ralewayThinBold]))]).all([withMinWidth(300,true)]),r.imageUrl||"./content/man.png"))}))}});define("categories",[],function(){return["Birthday","Holiday","Childhood","Family","College","High School","Workplace","Catharsis","Humor"]});define("daysByMonth",[],function(){return{January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31}});define("famousBirthdaysDisplay",["bodyColumn","fonts","separatorSize"],function(e,t,n){return function(i){return i.length>0?e(stack({gutterSize:n},[text("People with the Same Birthday").all([t.h1,t.ralewayThinBold]),grid({gutterSize:n,handleSurplusWidth:evenSplitSurplusWidth},i.map(function(e){return linkTo("https://www.google.com/search?q="+encodeURIComponent(e.name),stack({gutterSize:n},[text(e.name).all([t.ralewayThinBold,$css("text-align","center")]),alignLRM({middle:image({src:e.imageUrl,minWidth:200})})])).all([$prop("target","_blank")])}))])):nothing}});define("gafy",[],function(){return{colorsForDesignAndStyle:function(e,t){var n={};var i=function(e){n[e.name]=e};if(e.colors){e.colors.map(i)}if(t.colors){t.colors.map(i)}var r=[];for(var o in n){r.push(n[o])}return r},stylesForDesign:function(e,t){if(!e||!e.filter||!t||!t.styles||!t.styles.filter){return[]}return e.filter(function(e){return t.styles.filter(function(t){return e._id===t}).length>0})}}});define("cartView",["bodyColumn","cart","confettiBackground","db","fonts","formatPrice","gafyColors","holibirthdayRow","separatorSize","submitButton"],function(e,t,n,i,r,o,a,s,l,u){return promiseComponent(i.gafyDesign.find().then(function(c){return i.gafyStyle.find().then(function(i){var d=function(e,n){var s=c.filter(function(t){return t._id===e.designId})[0];var u=i.filter(function(t){return t._id===e.styleId})[0];return sideBySide({handleSurplusWidth:giveToFirst},[linkTo("#!design/"+e.designId,grid({minColumnWidth:10,gutterSize:l},[alignLRM({left:image({src:s.imageUrl,minHeight:200,chooseWidth:0})}),alignLRM({left:image({src:u.imageUrl,minHeight:200,chooseWidth:0})}),stack({gutterSize:l},[text(a[e.color].name+" "+s.designDescription+" "+u.styleDescription).all([r.ralewayThinBold]),alignLRM({left:div.all([withBackgroundColor(a[e.color].color),withMinWidth(50),withMinHeight(50)])}),text("Size: "+e.size).all([r.ralewayThinBold])])])),stack({},[alignLRM({right:text(o(u.price)).all([r.ralewayThinBold,$css("font-size",30)])}),alignLRM({right:text("(Remove Item)").all([$css("font-size",15),link,clickThis(function(){t.removeItem(n);window.location.reload()})])})])])};return stack({gutterSize:l},[n(e(s(text("Shopping Cart").all([r.ralewayThinBold,$css("font-size",40)])))),e(stack({gutterSize:l},[stack({gutterSize:l},t.items.map(d)),alignLRM({right:text("Total: "+o(t.items.reduce(function(e,t){return e+i.filter(function(e){return e._id===t.styleId})[0].price},0))).all([r.ralewayThinBold,$css("font-size",30)])}),alignLRM({right:sideBySide({gutterSize:l},[linkTo("#!gifts",u(black,sideBySide({gutterSize:l},[r.fa("shopping-cart"),text("Continue Shopping")]))),linkTo("#!checkout",u(black,sideBySide({gutterSize:l},[r.fa("tag"),text("Check Out")])))])})]))])})}))});define("storiesP",["db"],function(e){return e.story.find()});define("checkoutView",["auth","bar","bodyColumn","cart","colors","confettiBackground","db","fonts","formatPrice","forms","gafyColors","meP","prettyForms","profileP","separatorSize","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m){return promiseComponent(a.gafyDesign.find().then(function(u){return a.gafyStyle.find().then(function(g){var v=Stream.once("none");var y=function(e,t){var n=u.filter(function(t){return t._id===e.designId})[0];var i=g.filter(function(t){return t._id===e.styleId})[0];return padding({top:p,bottom:p},alignLRM({left:sideBySide({gutterSize:p},[alignLRM({left:image({src:n.imageUrl,minHeight:50,chooseWidth:0})}),alignLRM({left:image({src:i.imageUrl,minHeight:50,chooseWidth:0})}),alignLRM({left:div.all([withBackgroundColor(c[e.color].color),withMinWidth(50),withMinHeight(50)])}),alignTBM({middle:text(e.size+" "+c[e.color].name+" "+n.designDescription+" "+i.styleDescription).all([s.ralewayThinBold])})]),right:text(l(i.price)).all([s.ralewayThinBold,$css("font-size",20)])})).all([withBackgroundColor(multiplyColor(t%2?1:1.1)(r.pageBackgroundColor))])};return d.then(function(r){return f.then(function(u){var d={};var f={firstName:Stream.once(""),lastName:Stream.once(""),line1:Stream.once(""),line2:Stream.once(""),city:Stream.once(""),state:Stream.once(""),zip:Stream.once(""),country:Stream.once("")};var b=Stream.combineObject(f);b.onValue(function(e){d.address=e});var w={user:Stream.once(r&&r._id||"000000000000000000000000"),email:Stream.once(u&&u.email||""),number:Stream.once(""),cvc:Stream.once(""),exp_month:Stream.once(""),exp_year:Stream.once("")};var _=Stream.combineObject(w);var x=o(alignLRM({middle:n(sideBySide({handleSurplusWidth:giveToSecond},[alignTBM({middle:image({src:"./content/man.png",minWidth:300,chooseHeight:0})}),padding({left:30,right:30,top:50,bottom:50},text("Checkout").all([s.ralewayThinBold,$css("font-size",40)]))]))}));var C=i.items.reduce(function(e,t){return e+g.filter(function(e){return e._id===t.styleId})[0].price},0);var k=n(stack({},[stack({},i.items.map(y)),t.horizontal(1,black),t.horizontal(p/2),alignLRM({right:text("Total: "+l(C)).all([s.ralewayThinBold,$css("font-size",20)])})]));var S=stack({gutterSize:p},[text("Shipping Address").all([s.ralewayThinBold,$css("font-size",30)]),sideBySide({handleSurplusWidth:evenSplitSurplusWidth,gutterSize:p},[h.input({name:"First Name",fieldName:"firstName",type:"text",stream:f.firstName}),h.input({name:"Last Name",fieldName:"lastName",type:"text",stream:f.lastName})]),h.input({name:"Line 1",fieldName:"address1",type:"text",stream:f.line1}),h.input({name:"Line 2",fieldName:"address2",type:"text",stream:f.line2}),sideBySide({handleSurplusWidth:evenSplitSurplusWidth,gutterSize:p},[h.input({name:"City",fieldName:"city",type:"text",stream:f.city}),h.input({name:"State",fieldName:"state",type:"text",stream:f.state}),h.input({name:"Zip",fieldName:"zip",type:"text",stream:f.zip}),h.input({name:"Country",fieldName:"country",type:"text",stream:f.country})])]);var T=stack({gutterSize:p},[text("Billing Information").all([s.ralewayThinBold,$css("font-size",30)]),h.input({name:"Email",fieldName:"email",type:"text",stream:w.email}),h.input({name:"Card Number",type:"text",stream:w.number}),sideBySide({handleSurplusWidth:evenSplitSurplusWidth,gutterSize:p},[h.input({name:"CVC",type:"text",stream:w.cvc}),h.input({name:"Exp Month",type:"text",stream:w.exp_month}),h.input({name:"Exp Year",type:"text",stream:w.exp_year})])]);var N=promiseComponent(e.StripeP.then(function(e){var t=Stream.once(false);var r=Stream.once(false);var o=Stream.once(false);return n(stack({gutterSize:p},[sideBySide({handleSurplusWidth:evenSplitSurplusWidth,gutterSize:p},[S,T]),componentStream(r.map(function(e){return e?alignLRM({right:text("Please fill out all fields")}):nothing})),componentStream(o.map(function(e){return e?alignLRM({right:text("Could not charge card")}):nothing})),alignLRM({right:m(black,text("Place Order")).all([link,clickThis(function(){r.push(false);o.push(false);v.push(Math.random().toString().substring(2));var n=b.lastValue();var s=_.lastValue();var l=i.items.map(function(e){return{user:s.user,orderBatch:v.lastValue(),customerEmailAddress:s.email,firstName:n.firstName,lastName:n.lastName,addressLine1:n.line1,addressLine2:n.line2,addressCity:n.city,addressState:n.state,addressZip:n.zip,addressCountry:n.country,designNumber:e.designNumber,designDescription:e.designDescription,printLocation:e.printLocation,styleNumber:e.styleNumber,styleDescription:e.styleDescription,color:c[e.color].name,size:e.size,quantity:1,shippingMethod:"shipping method goes here"}});var u=["customerEmailAddress","firstName","lastName","addressLine1","addressLine2","addressCity","addressState","addressZip","addressCountry","designNumber","designDescription","printLocation","styleNumber","styleDescription","color","size","quantity","shippingMethod"];for(var d=0;d<l.length;d++){var h=l[d];for(var f=0;f<u.length;f++){if(h[u[f]].length===0){r.push(true);t.push(false);return}}}var p=function(){e.card.createToken({number:s.number,cvc:s.cvc,exp_month:s.exp_month,exp_year:s.exp_year},function(e,n){if(e!==200){o.push(true);t.push(false);return}a.stripePayment.insert({user:s.user,email:s.email,orderBatch:v.lastValue(),amount:C,stripeToken:n.id}).then(function(){while(i.items.length>0){i.removeItem(0)}window.location.hash="#!orderSuccess/"+v.lastValue();window.location.reload()},function(){o.push(true);t.push(false)})})};var m=function(e){if(e===l.length){p()}a.gafyOrder.insert(l[e]).then(function(){m(e+1)})};if(!t.lastValue()){t.push(true);m(0)}})])})]))}));return stack({gutterSize:p},[x,k,N])})})})}))});define("meP",["domain"],function(e){return function(){var t=Q.defer();$.get(e+"/auth/me").then(function(e){t.resolve(e)},function(){t.resolve()});return t.promise}()});define("formLayouts",[],function(){
return{stack:function(e){return function(t,n){e.fields.map(function(e){t[e]=t[e]||undefined});return e.formBuilder(t,function(t,i){return stack(e.stackConfig,[stack(e.stackConfig||{},e.fields.map(function(e){return i[e]})),n(t,i)])})}}}});define("contactUsView",["bodyColumn","confettiBackground","db","fonts","holibirthdayRow","meP","prettyForms","separatorSize","submitButton"],function(e,t,n,i,r,o,a,s,l){var u=Stream.once("");var c=Stream.once("");var d=Stream.once("");var h=Stream.once("");return stack({gutterSize:s},[t(e(r(text("Contact Us").all([i.h1])))),e(a.input({name:"Name",stream:u})),e(a.input({name:"Email",stream:c})),e(a.textarea({name:"Message",stream:d,fieldName:"contactUsMessage"})),e(componentStream(h.map(text))),e(alignLRM({left:l(black,text("Submit").all([i.bebasNeue])).all([link,clickThis(function(e,t){var i=t();h.push("sending");n.contactUsMessage.insert({name:u.lastValue(),email:c.lastValue(),message:d.lastValue()}).then(function(){h.push("sent")}).always(i)})])}))])});define("paginate",[],function(){});define("causesView",["bodyColumn","confettiBackground","fonts","holibirthdayRow","separatorSize","siteCopyItemsP"],function(e,t,n,i,r,o){return promiseComponent(o.then(function(o){return stack({gutterSize:r},[t(e(i(stack({gutterSize:r},[text(o.find("Causes Title")).all([n.ralewayThinBold,n.h1]),linkTo("#!donate",text(o.find("Causes Donate Now")).all([n.ralewayThinBold,n.h2]))]),o.find("Causes Image")))),e(paragraph(o.find("Causes")))])}))});define("storeView",["bar","bodyColumn","cart","colors","confettiBackground","db","fonts","formatPrice","gafy","gafyColors","gafyDesignRow","gafyDesignSmall","gafyStyleSmall","holibirthdayRow","meP","opacityGridSelect","separatorSize","siteCopyItemsP"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v){return promiseComponent(o.gafyDesign.find().then(function(o){return v.then(function(s){return p.then(function(l){return stack({gutterSize:g},[r(t(f(stack({gutterSize:g,collapseGutters:true},[text(s.find("Gifts Title")).all([a.ralewayThinBold,a.h1]),linkTo("#!cart",n.items.length>0?text(s.find("Gifts Cart")+" ("+n.items.length+")").all([a.ralewayThinBold,a.h1]):nothing),linkTo(l?"#!wishlist"+"/"+l._id:"#!wishlist",n.wishlistItems.length>0?text(s.find("Gifts Wishlist")+" ("+n.wishlistItems.length+")").all([a.ralewayThinBold,a.h1]):nothing)])))),t(text("Choose a Design").all([a.h1,a.ralewayThinBold])),t(stack({gutterSize:g},intersperse(o.map(function(e){return linkTo("#!design/"+e._id,c(e))}),e.horizontal(1).all([withMinHeight(1,true),withBackgroundColor(i.middleGray)]))))])})})}))});define("gafyDesignView",["bar","bodyColumn","cart","colors","confettiBackground","db","fonts","forms","gafy","gafyColors","gafyDesignRow","gafyDesignSmall","gafyStyleSmall","holibirthdayRow","opacityGridSelect","separatorSize","socialMedia","socialMediaButton","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y){return function(e){return promiseComponent(o.gafyDesign.findOne({_id:e}).then(function(e){return o.gafyStyle.find().then(function(i){var o=Stream.splitObject({style:null,color:null,size:null});var d=Stream.combineObject(o);var f=Stream.once(false);d.map(function(){f.push(false)});var b=v(function(e){return e+" this Design"});var w=t(sideBySide({gutterSize:m},[b(g.facebook),b(g.twitter)]));return stack({gutterSize:m},[linkTo("#!gifts",r(t(c(e)))),t(stack({gutterSize:m},[w,text("Style").all([a.h1,a.ralewayThinBold]),p(o.style,l.stylesForDesign(i,e).map(function(e){return{component:h(e),value:e}})),text("Color").all([a.h1,a.ralewayThinBold]),componentStream(o.style.map(function(t){return t?p(o.color,l.colorsForDesignAndStyle(e,t).map(function(e){var t=u.filter(function(t){return t.name===e})[0];return{component:stack({},[alignLRM({middle:div.all([withBackgroundColor(t.color),withMinWidth(50),withMinHeight(50)])}),text(t.name),text(rgbColorString(t.color))]),value:u.indexOf(t)}})):text("Choose a style")})),text("Size").all([a.h1,a.ralewayThinBold]),componentStream(o.style.map(function(e){return e?s.selectBox({name:"size",options:e.sizes,stream:o.size}):text("Choose a style")})),componentStream(f.map(function(e){return e?alignLRM({right:paragraph("You must choose a design, a style, a color, and a size",280)}):nothing})),alignLRM({right:sideBySide({gutterSize:m},[y(black,sideBySide({gutterSize:m},[a.fa("cart-plus"),text("Add to Wishlist")])).all([link,clickThis(function(){var t=d.lastValue();if(!t.style||!t.color||!t.size){f.push(true)}else{var i={designId:e._id,styleId:t.style._id,designNumber:e.designNumber,designDescription:e.designDescription,printLocation:e.printLocation,styleNumber:t.style.styleNumber,styleDescription:t.style.styleDescription,color:t.color,size:t.size};n.addWishlistItem(i);window.location.hash="#!wishlist";window.location.reload()}})]),y(black,sideBySide({gutterSize:m},[a.fa("shopping-cart"),text("Add to Cart")])).all([link,clickThis(function(){var t=d.lastValue();if(!t.style||!t.color||!t.size){f.push(true)}else{var i={designId:e._id,styleId:t.style._id,designNumber:e.designNumber,designDescription:e.designDescription,printLocation:e.printLocation,styleNumber:t.style.styleNumber,styleDescription:t.style.styleDescription,color:t.color,size:t.size};n.addItem(i);window.location.hash="#!cart";window.location.reload()}})])])})]))])})}))}});define("profileViewP",["adminP","bar","bodyColumn","colors","confettiBackground","db","fonts","holibirthdayRow","holibirthdayView","meP","months","profilesP","separatorSize","siteCopyItemsP","socialMedia","socialMediaButton","storiesP","storyRowP","submitButton","writeOnImage"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y,b){return function(c){var w=c.indexOf("/");var _=w===-1?c:c.substring(0,w);var x=Stream.once(w!==-1);$("body").on("click",function(){x.push(false)});var C=false;x.map(function(e){if(C){ignoreHashChange=true;window.location.hash="#!user/"+_+(e?"/certificate":"")}C=true});var k=function(e){return function(t){return div.all([child(t),wireChildren(function(t,n){t.minWidth.push(0);t.minHeight.push(0);return[{top:Stream.combine([n.top,n.scroll],function(t,n){return e.top(t-n)}),left:Stream.combine([n.left,n.leftAccum],function(t,n){return e.left(t+n)}),width:windowWidth,height:windowHeight}]})])}};var S=k({top:function(e){return-e},left:function(e){return-e}})(overlays([nothing.all([withBackgroundColor(color({a:.5}))]),padding({all:h},l(_))]).all([$css("transition","opacity 0.5s"),function(e){x.map(function(t){e.$el.css("z-index",t?1e3:-1);e.$el.css("display",t?"":"none")})}]));return promiseComponent(o.holibirthday.findOne({user:_}).then(function(l){return u.then(function(u){return e.then(function(e){return d.then(function(c){return f.then(function(d){var f=c.filter(function(e){return e.user===_})[0];var w=o.pointsChange.find({user:_});var C=w.then(function(e){return e.reduce(function(e,t){return e+t.amount},0)});var k=r(n(stack({},[s(grid({gutterSize:h,useFullWidth:true,handleSurplusWidth:giveToFirst},[alignTBM({middle:stack({gutterSize:h/2,collapseGutters:true},[paragraph(f.firstName+" "+f.lastName).all([a.ralewayThinBold,$css("font-size",40)]),f.birthday?text(d.find("Profile Born On (include space)")+moment(f.birthday).utc().format("MMMM Do")).all([a.ralewayThinBold,$css("font-size",20)]):nothing,promiseComponent(C.then(function(e){return text(d.find("Profile Holibirthday Points (include space)")+e).all([a.ralewayThinBold,$css("font-size",20)])})),u?promiseComponent(o.contactOtherUser.findOne({user:u._id,otherUser:_}).then(function(e){if(e){return nothing}else if(u._id===_){return linkTo("#!contacts",text(d.find("Profile My Contacts")).all([a.ralewayThinBold,$css("font-size",20)]))}return text(d.find("Profile Add Contact")).all([a.ralewayThinBold,$css("font-size",20),link,clickThis(function(e,t){t();o.contactOtherUser.insert({user:u._id,otherUser:_}).then(function(){window.location.hash="#!contacts";window.location.reload()})})])})):nothing])}),keepAspectRatio(f.holibirther&&l?image({src:b({width:308,height:200},"./content/certificate-new-thumbnail.png",[{center:{x:133,y:75},text:f.firstName+" "+f.lastName,font:"bold 9px Raleway Thin"},{center:{x:86,y:89},text:moment(new Date(l.date)).utc().format("MMMM Do"),font:"bold 9px Raleway Thin"},{center:{x:141,y:100},text:moment(f.birthday).utc().format("MMMM Do"),font:"bold 9px Raleway Thin"},{center:{x:170,y:158},text:moment(l.updateDate.birthday).utc().format("MMMM Do"),font:"bold 9px Raleway Thin"}]),useNativeSize:true}).all([link,clickThis(function(e){x.push(true);e.stopPropagation()})]):u&&u._id===_?linkTo("#!myHolibirthday",alignTBM({middle:y(white,text(d.find("Profile Claim a Holibirthday")).all([a.bebasNeue]))}).all([a.ralewayThinBold])):nothing)]),f.imageUrl||"./content/man.png")])));var T=n(paragraph(f.bio));var N=promiseComponent(g.then(function(e){var t=e.filter(function(e){return e.user===_});return n(stack({gutterSize:h},t.map(v))).all([withMinWidth(0),withMinHeight(0)])}));var D=f.holibirther&&l?d.find("Profile Holiborn On (include space)")+moment(new Date(l.date)).utc().format("MMMM Do"):f.birthday?d.find("Profile Born On (include space)")+moment(f.birthday).utc().format("MMMM Do"):"Holibirthday";var M=m(function(e){return e+(u&&u._id===f.user?" your profile":" this profile")},{imageUrl:f.imageUrl,name:f.firstName+" "+f.lastName,text:D,description:$(f.bio).text()});var E=n(grid({gutterSize:h},[M(p.facebook),M(p.twitter)]));var R=promiseComponent(w.then(function(e){return C.then(function(r){return r===0?nothing:n(stack({gutterSize:h},[t.horizontal(1,i.middleGray),linkTo("#!leaderboards",paragraph(d.find("Profile Holibirthday Points / View Leaderboards")).all([a.ralewayThinBold,$css("font-size",40)])),stack({gutterSize:h},e.map(function(e){return sideBySide({handleSurplusWidth:giveToNth(1),gutterSize:h},[alignTBM({middle:text(e.amount>=0?"+"+e.amount:e.amount).all([withFontColor(e.amount>=0?i.darkGreen:i.darkRed),a.ralewayThinBold,$css("font-size","30")])}),alignTBM({middle:paragraph(e.reason).all([a.ralewayThinBold,$css("font-size","30")])})])})),t.horizontal(1,i.middleGray),sideBySide({gutterSize:h},[alignTBM({middle:text(r>=0?""+r:r).all([withFontColor(r>=0?i.darkGreen:i.darkRed),a.ralewayThinBold,$css("font-size","30")])}),alignTBM({middle:text(d.find("Profile Holibirthday Points Total")).all([a.ralewayThinBold,$css("font-size","30")])})])]))})}));var A=e||u&&u._id===f.user?alignLRM({middle:linkTo("#!editProfile/"+_,y(black,text(d.find("Profile Edit")).all([a.bebasNeue])))}):nothing;return stack({gutterSize:h},[k,T,E,N,R,A,S])})})})})}))}});define("colors",[],function(){return{pageBackgroundColor:color({r:242,g:243,b:244}),linkBlue:color({r:26,g:13,b:171}),darkGray:color({r:209,g:210,b:212}),middleGray:color({r:153,g:153,b:153}),holibirthdayRed:color({r:237,g:28,b:36}),holibirthdayDarkRed:color({r:190,g:30,b:45}),darkGreen:color({g:100}),darkRed:color({r:100})}});define("donateSuccess",["bodyColumn","confettiBackground","fonts","holibirthdayRow","separatorSize","siteCopyItemsP"],function(e,t,n,i,r,o){return function(a){return promiseComponent(o.then(function(o){return stack({gutterSize:r},[t(e(i(text(o.find("Causes Title")).all([n.ralewayThinBold,$css("font-size",40)]),o.find("Causes Image")))),e(stack({gutterSize:r},[text("Thank you for donating!").all([n.h1]),text("Your donation id is "+a)].map(function(e){return e.all([n.ralewayThinBold])})))])}))}});define("storyEditViewP",["bodyColumn","categories","colors","confettiBackground","db","fonts","forms","holibirthdayRow","meP","prettyForms","separatorSize","signInForm","signInStream","siteCopyItemsP"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f){return function(d){return promiseComponent(f.then(function(f){return Q.all([d._id?r.storyTag.find({story:d._id}):[]]).then(function(p){var m=p[0];var g=Stream.splitObject(d);var v=Stream.combineObject(g);var y=Stream.once(m);var b=[];var w=e(padding(20,stack({gutterSize:c},[paragraph(f.find("Edit Story Title")).all([o.bebasNeue,$css("font-size","60px")]),paragraph(f.find("Edit Story Smaller Title")).all([o.ralewayThinBold,$css("font-size","30px")]),paragraph(f.find("Edit Story Instructions").split("\n").join("<br>")).all([o.ralewayThinBold])])));var _=[o.ralewayThinBold,$css("font-size",30),$css("font-weight","bold")];var x=e(padding(20,stack({gutterSize:c},[u.input({name:f.find("Edit Story Title Field"),fieldName:"name",stream:g.name,labelAll:_}),u.textarea({name:f.find("Edit Story Body Field"),fieldName:"text",stream:g.text,labelAll:_}),stack({},[text(f.find("Edit Story Category Field")).all([o.ralewayThinBold]).all(_),u.radios({fieldName:"storyType",stream:g.storyType,labelAll:_,options:t.map(function(e){return{name:e,value:e.toLowerCase()}})})]),promiseComponent(r.uniqueTag.find({}).then(function(e){var t=Stream.once("");var i=function(){var e=t.lastValue().replace(",","").toLowerCase();var n=y.lastValue().slice(0);if(e.length>0&&n.filter(function(t){return t.tag===e}).length===0){n.push({tag:e});y.push(n)}t.push("")};return stack({},[text(f.find("Edit Story Tags Field")).all(_),border(white,{all:1},stack({},[componentStream(y.map(function(e){return grid({},e.map(function(t,n){return padding({all:c/2},sideBySide({gutterSize:c/4},[text(t.tag).all([o.bebasNeue]),alignTBM({middle:o.fa("close").all([$css("opacity","0.8"),link,clickThis(function(){e=e.slice(0);b.push(e.splice(n,1)[0]);y.push(e)})])})]))}))})),padding({all:c/2},sideBySide({gutterSize:c/2,handleSurplusWidth:giveToSecond},[text(f.find("Edit Story Add Tag")).all([o.bebasNeue]),dropdownPanel(a.inputBox(t,"text","tag",[o.bebasNeue],true).all([keyupThis(function(e){if(e.keyCode===188){i()}}),keydownThis(function(n){if(n.keyCode===13){i();n.stopPropagation();return false}if(n.keyCode===9){var r=t.lastValue();var o=e.filter(function(e){return e.tag.indexOf(r)!==-1&&y.lastValue().filter(function(t){return t.tag===e.tag}).length===0})[0];if(o){if(r===o.tag){i()}else{t.push(o.tag)}}else{i()}n.stopPropagation();return false}})]),border(white,{all:1},componentStream(t.map(function(r){return stack({},e.filter(function(e){return r!==""&&e.tag.indexOf(r)!==-1&&y.lastValue().filter(function(t){return t.tag===e.tag}).length===0}).map(function(e){return padding({all:c/2},text(e.tag)).all([o.bebasNeue,link,clickThis(function(){t.push(e.tag);i()}),hoverThis(function(e,t){var i=colorString(n.holibirthdayRed);var r=colorString(white);t.$el.css("background-color",e?r:i).css("color",e?i:r)})])}))}))).all([withBackgroundColor(n.holibirthdayRed)]),t.map(function(e){return e.length>0}),{transition:"none"})]))]))])})),u.imageUpload({name:f.find("Edit Story Image URL Field"),labelAll:_,stream:g.imageUrl}),paragraph(f.find("Edit Story Submit Instructions")).all([o.ralewayThinBold]),alignLRM({left:u.submit(white,f.find("Edit Story Submit Story"),function(){var e=v.lastValue();var t=function(e){return Q.all(y.lastValue().map(function(t){t.story=e._id;if(!t._id){return r.storyTag.insert(t)}return t}).concat(b.filter(function(e){return e._id}).map(function(e){return r.storyTag.remove(e)})))};if(e._id){return r.story.update({_id:e._id},e).then(function(){return t(e).then(function(){window.location.hash="#!story/"+e._id;window.location.reload()})})}else{return r.story.insert(e).then(function(e){return t(e).then(function(){window.location.hash="#!story/"+e._id;window.location.reload()})})}})})]))).all([withBackgroundColor(n.holibirthdayRed),withFontColor(white)]);return l.then(function(t){if(t){return stack({},[form.all([child(stack({},[stack({},[w,x].map(function(e){return padding({top:10},e)}))])),wireChildren(passThroughToFirst)])])}return stack({gutterSize:c},[i(e(s(text(f.find("Edit Story Title")).all([o.h1])))),e(paragraph(f.find("Edit Story Must Sign In")).all([o.bebasNeue,$css("font-size","30px"),link,clickThis(function(e){h.push(true);e.stopPropagation()})]))])})})}))}});define("defaultFormFor",["fonts","formFor"],function(e,t){var n=[e.h3];var i={};schema.map(function(e){i[e.name]=t[e.name](n)});return i});define("signInStream",[],function(){return Stream.once(false)});define("dailyTheme",["colors","db","fonts","holibirthdayRow","meP","prettyForms","separatorSize","signInStream","siteCopyItemsP","submitButton"],function(e,t,n,i,r,o,a,s,l,u){return promiseComponent(t.dailyTheme.findOne({}).then(function(c){return l.then(function(l){if(!c){return i(stack({gutterSize:a},[paragraph(l.find("Daily Theme Placeholder")).all([n.ralewayThinBold,n.h1])]))}switch(c.type){case"featuredStory":return t.story.findOne({_id:c.storyId}).then(function(e){return t.profile.findOne({user:e.user}).then(function(t){return linkTo("#!story/"+e._id,i(stack({gutterSize:a},[paragraph(e.name).all([n.ralewayThinBold,n.h1]),linkTo("#!user/"+t.user,paragraph(t.firstName+" "+t.lastName).all([n.ralewayThinBold,n.h3])),paragraph(c.storyText).all([n.ralewayThinBold])]),e.imageUrl))})});case"poll":var d=Stream.create();var h=Stream.once(null);return promiseComponent(t.dailyThemePollResponse.find({dailyTheme:c._id}).then(function(f){var p=Stream.once(f);return componentStream(p.map(function(f){r.then(function(e){if(e){var t=f.filter(function(t){return t.user===e._id})[0];if(t){h.push(t)}}});var m=50;var g=c.pollChoices.map(function(e){return f.filter(function(t){return t.choice===e}).length});var v=Math.max(1,g.reduce(function(e,t){return e+t},0));var y=g.map(function(e){return e/v});var b=c.pollChoices.map(function(e,t){return{name:e,percentage:y[t],total:g[t]}});b.sort(function(e,t){return t.percentage-e.percentage});var w=border(white,{all:1},padding({all:a},sideBySide({gutterSize:a,handleSurplusWidth:giveToSecond},[stack({gutterSize:a},b.map(function(e){return alignTBM({middle:paragraph(e.name).all([n.ralewayThinBold])}).all([withMinHeight(m,true)])})),stack({gutterSize:a},b.map(function(t){return withBackground(div.all([child(nothing.all([withBackgroundColor(e.holibirthdayDarkRed)])),wireChildren(function(e,n){e.minWidth.push(0);e.minHeight.push(0);return[{top:Stream.once(0),left:Stream.once(0),width:n.width.map(function(e){return e*t.percentage}),height:n.height}]})]),alignTBM({middle:padding({all:10},text(Math.round(t.percentage*100)+"% ("+t.total+")").all([n.ralewayThinBold]))}).all([withMinHeight(m,true)]))}))])));var _=stack({gutterSize:a},[o.radios({options:c.pollChoices.map(function(e){return{name:e,value:e}}),stream:d}),promiseComponent(r.then(function(e){if(e){return alignLRM({left:u(white,text(l.find("Daily Theme Poll Vote / Abstain")).all([n.bebasNeue])).all([link,clickThis(function(){t.dailyThemePollResponse.insert({user:e._id,dailyTheme:c._id,choice:d.lastValue()}).then(function(e){h.push(e);p.push(f.concat([e]))})})])})}else{return alignLRM({left:u(white,text(l.find("Daily Theme Poll Sign In")).all([n.bebasNeue,link,clickThis(function(e){s.push(true);e.stopPropagation()})]))})}}))]);return i(stack({gutterSize:a},[paragraph(c.pollTitle).all([n.h1]),paragraph(c.pollDescription).all([n.h2]),componentStream(h.map(function(e){if(e){return w}else{return _}}))]),c.pollImage)}))}));case"someText":return i(stack({gutterSize:a},[paragraph(c.someTextTitle).all([n.h1]),paragraph(c.someTextText).all([n.h3])]),c.someTextImage);default:return i(stack({gutterSize:a},[paragraph(l.find("Daily Theme Placeholder")).all([n.ralewayThinBold,n.h1])]))}})}))});define("gridSelect",[],function(){return function(e,t){return function(n,i,r){return grid(e,i.map(function(e,o){var a=t(e.component);return toggleComponent([a.selected.all([link,clickThis(function(){if(r){var t=n.lastValue()||[];var i=t.indexOf(e.value);if(i!==-1){var o=t.slice(0);o.splice(i,1);n.push(o)}}})]),a.deselected.all([link,clickThis(function(){if(r){var t=n.lastValue()||[];var i=t.indexOf(e.value);if(i===-1){n.push(t.concat([e.value]))}}else{n.push(e.value)}})])],n.map(function(e){if(r){return e.filter(function(e){return e===i[o].value}).length>0?0:1}else{return e===i[o].value?0:1}}))}))}}});define("giftDetailView",["bar","bodyColumn","cart","colors","confettiBackground","fonts","formatPrice","prettyForms","separatorSize","submitButton"],function(e,t,n,i,r,o,a,s,l,u){return function(e){var c=storeItems[e];var d={storeItem:Stream.once(e),color:Stream.once(0),size:Stream.once(0)};var h=Stream.combineObject(d);var f=alignTBM({middle:image({src:c.imageSrc,minWidth:250,chooseHeight:0})});var p=sideBySide({handleSurplusWidth:giveToFirst},[stack({gutterSize:l},[text(c.name).all([o.ralewayThinBold,$css("font-size",40)]),text("Style: "+c.style).all([o.ralewayThinBold,$css("font-size",20)]),text(c.description).all([o.ralewayThinBold,$css("font-size",20)])]),text(a(c.price)).all([o.ralewayThinBold,$css("font-size",20)])]);var m=r(t(grid({handleSurplusWidth:giveToSecond},[f,padding({left:30,right:30,top:50,bottom:50},p).all([withMinWidth(300,true)])])));var g=Stream.once(false);var v=multiplyColor(.5)(i.pageBackgroundColor);var y=t(border(v,{all:1,radius:5},sideBySide({handleSurplusWidth:giveToFirst},[grid({minColumnWidth:150,gutterSize:l,outerGutter:true},c.colors.map(function(e,t){return stack({},[alignLRM({middle:image({src:e.src,minWidth:100})})]).all([link,clickThis(function(){d.color.push(t);g.push(false)})])})),padding({top:l,right:l},o.fa("close").all([$css("font-size",40),withFontColor(v),link,clickThis(function(){g.push(false)}),withMinWidth(31,true)]))])).all([withBackgroundColor(i.pageBackgroundColor)]));var b=function(e){return e.map(function(e){return alignLRM({middle:e})})};var w=t(stack({gutterSize:l},[grid({minColumnWidth:350,handleSurplusWidth:evenSplitSurplusWidth},[stack({gutterSize:l},b([text("Choose Color").all([o.bebasNeue,$css("font-size",40)]),text(d.color.map(function(e){return c.colors[e].name})).all([o.ralewayThinBold,$css("font-size",30)]),alignLRM({left:image({src:d.color.map(function(e){return c.colors[e].src}),minWidth:100}).all([link,clickThis(function(){g.push(true)})])})])),stack({gutterSize:l},b([text("Choose Size").all([o.bebasNeue,$css("font-size",40)]),s.radios({name:"Category",fieldName:"storyType",stream:d.size,options:c.sizes.map(function(e,t){return{name:e,value:t}})}),image({src:c.sizeImageSrc,useNativeSize:true})])),stack({gutterSize:l,align:"middle"},b([text("Price").all([o.bebasNeue,$css("font-size",40)]),text(a(c.price)).all([o.ralewayThinBold,$css("font-size",30)])]))]),alignLRM({middle:u(black,sideBySide({gutterSize:l},[o.fa("shopping-cart"),text("Add to Cart")])).all([link,clickThis(function(){n.addItem(h.lastValue());window.location.hash="#!cart";window.location.reload()})])}),modalDialog(g,.5)(y)]));return stack({gutterSize:l},[m,w])}});define("holibirthdayRow",["domain","separatorSize"],function(e,t){return function(n,i){return adjustMinSize({mw:function(e){return Math.max(300,e)},mh:function(e){return Math.max(240,e)}})(padding({all:t},grid({handleSurplusWidth:giveToNth(1),bottomToTop:true,gutterSize:t},[keepAspectRatioCorner({top:true})(image({src:i||e+"/content/man.png",minWidth:300})),alignTBM({middle:stack({},[n,nothing.all([withMinWidth(300,true)])])})])))}});define("writeOnImage",[],function(){return function(e,t,n){var i=Stream.create();var r=document.createElement("canvas");var o=$(r);o.appendTo($("body")).prop("width",e.width).prop("height",e.height);var a=r.getContext("2d");var s=function(e,t,n){a.font=n;var i=a.measureText(t).width;a.fillText(t,e.x-i/2,e.y)};var l=new Image;l.onload=function(){a.drawImage(l,0,0);n.map(function(e){if(e.center){s(e.center,e.text,e.font)}});setTimeout(function(){i.push(r.toDataURL());o.remove()})};l.src=t;return i}});define("orderSuccess",["bodyColumn","confettiBackground","fonts","separatorSize"],function(e,t,n,i){var r=t(alignLRM({middle:e(sideBySide({handleSurplusWidth:giveToSecond},[alignTBM({middle:image({src:"./content/man.png",minWidth:300,chooseHeight:0})}),padding({left:30,right:30,top:50,bottom:50},text("Checkout").all([n.ralewayThinBold,$css("font-size",40)]))]))}));return function(t){return stack({gutterSize:i},[r,e(stack({gutterSize:i},[text("Order Placed").all([n.h1]),text("Thank you for placing an order with Holibirthday"),text("Your order number is "+t)].map(function(e){return e.all([n.ralewayThinBold])})))])}});define("donateView",["auth","bodyColumn","confettiBackground","db","fonts","holibirthdayRow","meP","prettyForms","profileP","separatorSize","siteCopyItemsP","submitButton"],function(e,t,n,i,r,o,a,s,l,u,c,d){return promiseComponent(c.then(function(s){return a.then(function(a){return l.then(function(l){return e.StripeP.then(function(e){var c=Stream.once(false);var d=Stream.once(false);var h={user:Stream.once(a&&a._id||"000000000000000000000000"),amount:Stream.once(20),email:Stream.once(l&&l.email||""),number:Stream.once(""),cvc:Stream.once(""),exp_month:Stream.once(""),exp_year:Stream.once("")};var f=Stream.combineObject(h);var p=function(){var t=f.lastValue();var n=Q.defer();e.card.createToken({number:t.number,cvc:t.cvc,exp_month:t.exp_month,exp_year:t.exp_year},function(e,r){if(!t.email){d.push(true);return n.resolve()}if(e!==200){c.push(true);return n.resolve()}i.stripeDonation.insert({user:t.user,email:t.email,amount:Math.round(t.amount*100),stripeToken:r.id}).then(function(e){window.location.hash="#!donateSuccess/"+e._id;window.location.reload()},function(){c.push(true);return n.resolve()})});return n.promise};return stack({gutterSize:u},[n(t(o(stack({gutterSize:u},[text(s.find("Causes Title")).all([r.ralewayThinBold,r.h1])]),s.find("Causes Image")))),alignLRM({middle:paragraph('<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="MXHBEA3FTW5DN"><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"><img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"></form>')})])})})})}))});define("ckeditorP",[],function(){$("body").append('<script src="./ckeditor/ckeditor.js"></script>');return function(){var e=Q.defer();var t=setInterval(function(){if(window.CKEDITOR){e.resolve(window.CKEDITOR);clearInterval(t)}},100);return e.promise}});define("gafyColorsForDesignAndStyle",[],function(){return function(e,t){var n={};var i=function(e){n[e.name]=e};e.colors.map(i);t.colors.map(i);var r=[];for(var o in n){r.push(n[o])}return r}});define("siteCopyItem",[],function(){return function(e){return siteCopyItems}});define("pageRoutes",["meP","profileViewP","storiesP"],function(e,t,n){var i=function(e,t){var n=Q.defer();require([e],function(e){if(!t){n.resolve(e)}else{n.resolve(e.apply(null,t))}});return n.promise};return routeToFirst([matchStrings([{string:"#!admin",router:routeToComponentF(function(){return promiseComponent(i("adminView"))})},{string:"#!browseStories",router:routeToComponentF(function(){return promiseComponent(i("browseStoriesView"))})},{string:"#!register",router:routeToComponentF(function(){return promiseComponent(i("registerView"))})},{string:"#!confirmEmail/",router:routeMatchRest(function(e){return promiseComponent(i("confirmEmailView",[e]))})},{string:"#!resetPassword/",router:routeMatchRest(function(e){return promiseComponent(i("resetPasswordView",[e]))})},{string:"#!optOutEmails",router:routeMatchRest(function(e){return promiseComponent(i("optOutEmailsView",[e]))})},{string:"#!design/",router:routeMatchRest(function(e){return promiseComponent(i("gafyDesignView",[e]))})},{string:"#!gifts",router:routeToComponentF(function(){return promiseComponent(i("storeView"))})},{string:"#!cart",router:routeToComponentF(function(){return promiseComponent(i("cartView"))})},{string:"#!wishlist/",router:routeMatchRest(function(e){return promiseComponent(i("wishlistView",[e]))})},{string:"#!wishlist",router:routeToComponentF(function(){return promiseComponent(i("wishlistView",[]))})},{string:"#!checkout",router:routeToComponentF(function(){return promiseComponent(i("checkoutView"))})},{string:"#!orderSuccess/",router:routeMatchRest(function(e){return promiseComponent(i("orderSuccess",[e]))})},{string:"#!myHolibirthday",router:routeToComponentF(function(){return promiseComponent(i("myHolibirthdayView"))})},{string:"#!contacts",router:routeToComponentF(function(){return promiseComponent(i("contactsView"))})},{string:"#!leaderboards",router:routeToComponentF(function(){return promiseComponent(i("leaderboardsView"))})},{string:"#!causes",router:routeToComponentF(function(){return promiseComponent(i("causesView"))})},{string:"#!donateSuccess/",router:routeMatchRest(function(e){return promiseComponent(i("donateSuccess",[e]))})},{string:"#!donate",router:routeToComponentF(function(){return promiseComponent(i("donateView"))})},{string:"#!story/",router:routeMatchRest(function(e){return n.then(function(t){var n=t.filter(function(t){return t._id===e})[0];return promiseComponent(i("storyDetailViewP",[n,true]))})})},{},{string:"#!user/",router:routeMatchRest(function(e){return t(e)})},{string:"#!editProfile/",router:routeMatchRest(function(e){return promiseComponent(i("profileEditViewP",[e]))})},{string:"#!editStory/",router:routeMatchRest(function(e){return n.then(function(t){var n=t.filter(function(t){return t._id===e})[0];return promiseComponent(i("storyEditViewP",[n]))})})},{string:"#!editStory",router:routeToComponentF(function(){return promiseComponent(e.then(function(e){return i("storyEditViewP",[{user:e&&e._id||"",name:"",text:"",imageUrl:"./content/man.png",storyType:"",isPublic:true}])}))})},{string:"#!holibirthday/",router:routeMatchRest(function(e){return promiseComponent(i("holibirthdayView",[e]))})},{string:"#!contactUs",router:routeToComponentF(function(){return promiseComponent(i("contactUsView"))})},{string:"#!privacyPolicy",router:routeToComponentF(function(){return promiseComponent(i("privacyPolicyView"))})}]),routeToComponentF(function(){return promiseComponent(i("homeViewP"))})])});define("bodyColumn",["separatorSize"],function(e){var t=1070;var n=870;return function(i,r){return alignLRM({middle:padding({left:e,right:e},i).all([withMinWidth(r?n:t,true)])}).all([componentName("body-column")])}});define("opacityGridSelect",["gridSelect","separatorSize"],function(e,t){return e({gutterSize:t},function(e){return{selected:border(black,{all:1},padding({all:5},e).all([withBackgroundColor(white)])),deselected:padding({all:6},e)}})});