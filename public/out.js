(function($,window,document,undefined){var pluginName="slotMachine",defaults={active:0,delay:200,auto:false,spins:5,randomize:null,complete:null,stopHidden:true,direction:"up"};var FX_FAST="slotMachineBlurFast",FX_NORMAL="slotMachineBlurMedium",FX_SLOW="slotMachineBlurSlow",FX_GRADIENT="slotMachineGradient",FX_STOP=FX_GRADIENT;$(document).ready(function(){var slotMachineBlurFilterFastString='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterFast">'+'<feGaussianBlur stdDeviation="5" />'+"</filter>"+"</svg>#slotMachineBlurFilterFast";var slotMachineBlurFilterMediumString='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterMedium">'+'<feGaussianBlur stdDeviation="3" />'+"</filter>"+"</svg>#slotMachineBlurFilterMedium";var slotMachineBlurFilterSlowString='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<filter id="slotMachineBlurFilterSlow">'+'<feGaussianBlur stdDeviation="1" />'+"</filter>"+"</svg>#slotMachineBlurFilterSlow";var slotMachineFadeMaskString='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0">'+'<mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox">'+'<linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0">'+'<stop stop-color="white" stop-opacity="0" offset="0"></stop>'+'<stop stop-color="white" stop-opacity="1" offset="0.25"></stop>'+'<stop stop-color="white" stop-opacity="1" offset="0.75"></stop>'+'<stop stop-color="white" stop-opacity="0" offset="1"></stop>'+"</linearGradient>"+'<rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect>'+"</mask>"+"</svg>#slotMachineFadeMask";$("body").append("<style>"+"."+FX_FAST+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url("data:image/svg+xml;utf8,'+slotMachineBlurFilterFastString+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}'+"."+FX_NORMAL+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url("data:image/svg+xml;utf8,'+slotMachineBlurFilterMediumString+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}'+"."+FX_SLOW+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url("data:image/svg+xml;utf8,'+slotMachineBlurFilterSlowString+'");filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}'+"."+FX_GRADIENT+"{"+"-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );"+'mask: url("data:image/svg+xml;utf8,'+slotMachineFadeMaskString+'");'+"}"+"</style>")});if(typeof $.easing.easeOutBounce!=="function"){$.extend($.easing,{easeOutBounce:function(x,t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}else{return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}}})}function Timer(fn,delay){var startTime,self=this,timer,_fn=fn,_args=arguments,_delay=delay;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(timer)};this.pause=function(){if(this.running){delay-=(new Date).getTime()-startTime;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;startTime=(new Date).getTime();timer=setTimeout(function(){_fn.apply(self,Array.prototype.slice.call(_args,2,_args.length))},delay);this.onresume()}};this.reset=function(){this.cancel();this.running=true;delay=_delay;timer=setTimeout(function(){_fn.apply(self,Array.prototype.slice.call(_args,2,_args.length))},_delay)};this.add=function(extraDelay){this.pause();delay+=extraDelay;this.resume()};this.resume()}function SlotMachine(element,options){this.element=element;this.settings=$.extend({},defaults,options);this.defaults=defaults;this.name=pluginName;this.$slot=$(element);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.isStopping=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$container=this.$tiles.wrapAll('<div class="slotMachineContainer" />').parent();this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this._direction={selected:this.settings.direction==="down"?"down":"up",up:{initial:this.getTileOffset(this.active),first:0,last:this.getTileOffset(this.$tiles.length),to:this._maxTop,firstToLast:this.getTileOffset(this.$tiles.length),lastToFirst:0},down:{initial:this.getTileOffset(this.active),first:this.getTileOffset(this.$tiles.length),last:0,to:this._minTop,firstToLast:this.getTileOffset(this.$tiles.length),lastToFirst:0},get:function(param){return this[this.selected][param]}};this.$container.css("margin-top",this._direction.get("initial"));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}SlotMachine.prototype.getTileOffset=function(index){var offset=0;for(var i=0;i<index;i++){offset+=this.$tiles.eq(i).outerHeight()}return-offset+this._minTop};SlotMachine.prototype.getVisibleTile=function(){var firstTileHeight=this.$tiles.first().height(),containerMarginTop=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(containerMarginTop/firstTileHeight))-1};SlotMachine.prototype.setRandomize=function(rnd){if(typeof rnd==="number"){this.settings.randomize=function(){return rnd}}else{this.settings.randomize=rnd}};SlotMachine.prototype.getRandom=function(cantBeTheCurrent){var rnd,removePrevious=cantBeTheCurrent||false;do{rnd=Math.floor(Math.random()*this.$tiles.length)}while(removePrevious&&rnd===this.active&&rnd>=0);return rnd};SlotMachine.prototype.getCustom=function(){var choosen;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var index=this.settings.randomize.apply(this,[this.active]);if(index<0||index>=this.$tiles.length){index=0}choosen=index}else{choosen=this.getRandom()}return choosen};SlotMachine.prototype._getPrev=function(){var prevIndex=this.active-1<0?this.$tiles.length-1:this.active-1;return prevIndex};SlotMachine.prototype._getNext=function(){var nextIndex=this.active+1<this.$tiles.length?this.active+1:0;return nextIndex};SlotMachine.prototype.getPrev=function(){return this._direction.selected==="up"?this._getPrev():this._getNext()};SlotMachine.prototype.getNext=function(){return this._direction.selected==="up"?this._getNext():this._getPrev()};SlotMachine.prototype.setDirection=function(direction){if(this.isRunning){return}this._direction.selected=direction==="down"?"down":"up";return this._direction[this._direction.selected]};SlotMachine.prototype._setAnimationFX=function(FX_SPEED,fade){var self=this;setTimeout(function(){self.$tiles.removeClass([FX_FAST,FX_NORMAL,FX_SLOW].join(" ")).addClass(FX_SPEED);if(fade!==true||FX_SPEED===FX_STOP){self.$slot.add(self.$tiles).removeClass(FX_GRADIENT)}else{self.$slot.add(self.$tiles).addClass(FX_GRADIENT)}},this.settings.delay/4)};SlotMachine.prototype._resetPosition=function(){this.$container.css("margin-top",this._direction.get("initial"))};SlotMachine.prototype.isVisible=function(){var above=this.$slot.offset().top>$(window).scrollTop()+$(window).height(),below=$(window).scrollTop()>this.$slot.height()+this.$slot.offset().top;return!above&&!below};SlotMachine.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};SlotMachine.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};SlotMachine.prototype.shuffle=function(spins,onComplete){var self=this;if(onComplete!==undefined){this._oncompleteStack[1]=onComplete}this.isRunning=true;var delay=this.settings.delay;if(this.futureActive===null){var rnd=this.getCustom();this.futureActive=rnd}if(typeof spins==="number"){switch(spins){case 1:case 2:this._setAnimationFX(FX_SLOW,true);break;case 3:case 4:this._setAnimationFX(FX_NORMAL,true);delay/=1.5;break;default:this._setAnimationFX(FX_FAST,true);delay/=2}}else{this._setAnimationFX(FX_FAST,true);delay/=2}if(!this.isVisible()&&this.settings.stopHidden===true){spins=0;self.stop()}else{this.$container.animate({marginTop:this._direction.get("to")},delay,"linear",function(){self.$container.css("margin-top",self._direction.get("first"));if(spins-1<=0){self.stop()}else{self.shuffle(spins-1)}})}return this.futureActive};SlotMachine.prototype.stop=function(showGradient){if(!this.isRunning){return}else if(this.isStopping){return this.futureActive}var self=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(FX_SLOW,showGradient===undefined?true:showGradient);this.isRunning=true;this.isStopping=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this._direction.get("firstToLast"))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",this._direction.get("lastToFirst"))}}this.active=this.futureActive;var delay=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},delay,"easeOutBounce",function(){self.isStopping=false;self.isRunning=false;self.futureActive=null;if(typeof self._oncompleteStack[0]==="function"){self._oncompleteStack[0].apply(self,[self.active])}if(typeof self._oncompleteStack[1]==="function"){self._oncompleteStack[1].apply(self,[self.active])}});setTimeout(function(){self._setAnimationFX(FX_STOP,false)},delay/1.75);return this.active};SlotMachine.prototype.auto=function(){var self=this;this._timer=new Timer(function(){if(typeof self.settings.randomize!=="function"){self.futureActive=self.getNext()}self.isRunning=true;if(!self.isVisible()&&self.settings.stopHidden===true){setTimeout(function(){self._timer.reset()},500)}else{self.shuffle(self.settings.spins,function(){self._timer.reset()})}},this.settings.auto)};function _getInstance(element,options){var machine;if(!$.data(element[0],"plugin_"+pluginName)){machine=new SlotMachine(element,options);$.data(element[0],"plugin_"+pluginName,machine)}else{machine=$.data(element[0],"plugin_"+pluginName)}return machine}$.fn[pluginName]=function(options){if(this.length===1){return _getInstance(this,options)}else{var $els=this;return $.map($els,function(el,index){var $el=$els.eq(index);return _getInstance($el,options)})}}})(jQuery,window,document);if(!window.localStorage){Object.defineProperty(window,"localStorage",new function(){var aKeys=[],oStorage={};Object.defineProperty(oStorage,"getItem",{value:function(sKey){return sKey?this[sKey]:null},writable:false,configurable:false,enumerable:false});Object.defineProperty(oStorage,"key",{value:function(nKeyId){return aKeys[nKeyId]},writable:false,configurable:false,enumerable:false});Object.defineProperty(oStorage,"setItem",{value:function(sKey,sValue){if(!sKey){return}document.cookie=escape(sKey)+"="+escape(sValue)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},writable:false,configurable:false,enumerable:false});Object.defineProperty(oStorage,"length",{get:function(){return aKeys.length},configurable:false,enumerable:false});Object.defineProperty(oStorage,"removeItem",{value:function(sKey){if(!sKey){return}document.cookie=escape(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},writable:false,configurable:false,enumerable:false});this.get=function(){var iThisIndx;for(var sKey in oStorage){iThisIndx=aKeys.indexOf(sKey);if(iThisIndx===-1){oStorage.setItem(sKey,oStorage[sKey])}else{aKeys.splice(iThisIndx,1)}delete oStorage[sKey]}for(aKeys;aKeys.length>0;aKeys.splice(0,1)){oStorage.removeItem(aKeys[0])}for(var aCouple,iKey,nIdx=0,aCouples=document.cookie.split(/\s*;\s*/);nIdx<aCouples.length;nIdx++){aCouple=aCouples[nIdx].split(/\s*=\s*/);if(aCouple.length>1){oStorage[iKey=unescape(aCouple[0])]=unescape(aCouple[1]);aKeys.push(iKey)}}return oStorage};this.configurable=false;this.enumerable=true})}!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3);
}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe});if(!document)var document={cookie:""};var ObjectId=function(){var increment=Math.floor(Math.random()*16777216);var pid=Math.floor(Math.random()*65536);var machine=Math.floor(Math.random()*16777216);var setMachineCookie=function(){var cookieList=document.cookie.split("; ");for(var i in cookieList){var cookie=cookieList[i].split("=");var cookieMachineId=parseInt(cookie[1],10);if(cookie[0]=="mongoMachineId"&&cookieMachineId&&cookieMachineId>=0&&cookieMachineId<=16777215){machine=cookieMachineId;break}}document.cookie="mongoMachineId="+machine+";expires=Tue, 19 Jan 2038 05:00:00 GMT;path=/"};if(typeof localStorage!="undefined"){try{var mongoMachineId=parseInt(localStorage["mongoMachineId"]);if(mongoMachineId>=0&&mongoMachineId<=16777215){machine=Math.floor(localStorage["mongoMachineId"])}localStorage["mongoMachineId"]=machine}catch(e){setMachineCookie()}}else{setMachineCookie()}function ObjId(){if(!(this instanceof ObjectId)){return new ObjectId(arguments[0],arguments[1],arguments[2],arguments[3]).toString()}if(typeof arguments[0]=="object"){this.timestamp=arguments[0].timestamp;this.machine=arguments[0].machine;this.pid=arguments[0].pid;this.increment=arguments[0].increment}else if(typeof arguments[0]=="string"&&arguments[0].length==24){this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))}else if(arguments.length==4&&arguments[0]!=null){this.timestamp=arguments[0];this.machine=arguments[1];this.pid=arguments[2];this.increment=arguments[3]}else{this.timestamp=Math.floor((new Date).valueOf()/1e3);this.machine=machine;this.pid=pid;this.increment=increment++;if(increment>16777215){increment=0}}}return ObjId}();ObjectId.prototype.getDate=function(){return new Date(this.timestamp*1e3)};ObjectId.prototype.toArray=function(){var strOid=this.toString();var array=[];var i;for(i=0;i<12;i++){array[i]=parseInt(strOid.slice(i*2,i*2+2),16)}return array};ObjectId.prototype.toString=function(){if(this.timestamp===undefined||this.machine===undefined||this.pid===undefined||this.increment===undefined){return"Invalid ObjectId"}var timestamp=this.timestamp.toString(16);var machine=this.machine.toString(16);var pid=this.pid.toString(16);var increment=this.increment.toString(16);return"00000000".substr(0,8-timestamp.length)+timestamp+"000000".substr(0,6-machine.length)+machine+"0000".substr(0,4-pid.length)+pid+"000000".substr(0,6-increment.length)+increment};(function(definition){"use strict";if(typeof bootstrap==="function"){bootstrap("promise",definition)}else if(typeof exports==="object"&&typeof module==="object"){module.exports=definition()}else if(typeof define==="function"&&define.amd){define(definition)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=definition}}else if(typeof window!=="undefined"||typeof self!=="undefined"){var global=typeof window!=="undefined"?window:self;var previousQ=global.Q;global.Q=definition();global.Q.noConflict=function(){global.Q=previousQ;return this}}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}})(function(){"use strict";var hasStacks=false;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine();var qFileName;var noop=function(){};var nextTick=function(){var head={task:void 0,next:null};var tail=head;var flushing=false;var requestTick=void 0;var isNodeJS=false;var laterQueue=[];function flush(){var task,domain;while(head.next){head=head.next;task=head.task;head.task=void 0;domain=head.domain;if(domain){head.domain=void 0;domain.enter()}runSingle(task,domain)}while(laterQueue.length){task=laterQueue.pop();runSingle(task)}flushing=false}function runSingle(task,domain){try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}nextTick=function(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestTick()}};if(typeof process==="object"&&process.toString()==="[object process]"&&process.nextTick){isNodeJS=true;requestTick=function(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestTick=setImmediate.bind(window,flush)}else{requestTick=function(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick;channel.port1.onmessage=flush;flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0);requestPortTick()}}else{requestTick=function(){setTimeout(flush,0)}}nextTick.runAfter=function(task){laterQueue.push(task);if(!flushing){flushing=true;requestTick()}};return nextTick}();var call=Function.call;function uncurryThis(f){return function(){return call.apply(f,arguments)}}var array_slice=uncurryThis(Array.prototype.slice);var array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(arguments.length===1){do{if(index in this){basis=this[index++];break}if(++index>=length){throw new TypeError}}while(1)}for(;index<length;index++){if(index in this){basis=callback(basis,this[index],index)}}return basis});var array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++){if(this[i]===value){return i}}return-1});var array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this;var collect=[];array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0);return collect});var object_create=Object.create||function(prototype){function Type(){}Type.prototype=prototype;return new Type};var object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty);var object_keys=Object.keys||function(object){var keys=[];for(var key in object){if(object_hasOwnProperty(object,key)){keys.push(key)}}return keys};var object_toString=uncurryThis(Object.prototype.toString);function isObject(value){return value===Object(value)}function isStopIteration(exception){return object_toString(exception)==="[object StopIteration]"||exception instanceof QReturnValue}var QReturnValue;if(typeof ReturnValue!=="undefined"){QReturnValue=ReturnValue}else{QReturnValue=function(value){this.value=value}}var STACK_JUMP_SEPARATOR="From previous event:";function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&typeof error==="object"&&error!==null&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){var stacks=[];for(var p=promise;!!p;p=p.source){if(p.stack){stacks.unshift(p.stack)}}stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){var lines=stackString.split("\n");var desiredLines=[];for(var i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line){desiredLines.push(line)}}return desiredLines.join("\n")}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1){return[attempt1[1],Number(attempt1[2])]}var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2){return[attempt2[1],Number(attempt2[2])]}var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3){return[attempt3[1],Number(attempt3[2])]}}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber){return false}var fileName=fileNameAndLineNumber[0];var lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&lineNumber<=qEndingLine}function captureLine(){if(!hasStacks){return}try{throw new Error}catch(e){var lines=e.stack.split("\n");var firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2];var fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber){return}qFileName=fileNameAndLineNumber[0];return fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack)}return callback.apply(callback,arguments)}}function Q(value){if(value instanceof Promise){return value}if(isPromiseAlike(value)){return coerce(value)}else{return fulfill(value)}}Q.resolve=Q;Q.nextTick=nextTick;Q.longStackSupport=false;if(typeof process==="object"&&process&&process.env&&process.env.Q_DEBUG){Q.longStackSupport=true}Q.defer=defer;function defer(){var messages=[],progressListeners=[],resolvedPromise;var deferred=object_create(defer.prototype);var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){messages.push(args);if(op==="when"&&operands[1]){progressListeners.push(operands[1])}}else{Q.nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})}};promise.valueOf=function(){if(messages){return promise}var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue)){resolvedPromise=nearerValue}return nearerValue};promise.inspect=function(){if(!resolvedPromise){return{state:"pending"}}return resolvedPromise.inspect()};if(Q.longStackSupport&&hasStacks){try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}}function become(newPromise){resolvedPromise=newPromise;promise.source=newPromise;array_reduce(messages,function(undefined,message){Q.nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0);messages=void 0;progressListeners=void 0}deferred.promise=promise;deferred.resolve=function(value){if(resolvedPromise){return}become(Q(value))};deferred.fulfill=function(value){if(resolvedPromise){return}become(fulfill(value))};deferred.reject=function(reason){if(resolvedPromise){return}become(reject(reason))};deferred.notify=function(progress){if(resolvedPromise){return}array_reduce(progressListeners,function(undefined,progressListener){Q.nextTick(function(){progressListener(progress)})},void 0)};return deferred}defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error){self.reject(error)}else if(arguments.length>2){self.resolve(array_slice(arguments,1))}else{self.resolve(value)}}};Q.Promise=promise;Q.promise=promise;function promise(resolver){if(typeof resolver!=="function"){throw new TypeError("resolver must be a function.")}var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}promise.race=race;promise.all=all;promise.reject=reject;promise.resolve=Q;Q.passByCopy=function(object){return object};Promise.prototype.passByCopy=function(){return this};Q.join=function(x,y){return Q(x).join(y)};Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y){return x}else{throw new Error("Can't join: not the same: "+x+" "+y)}})};Q.race=race;function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;i<len;i++){Q(answerPs[i]).then(resolve,reject)}})}Promise.prototype.race=function(){return this.then(Q.race)};Q.makePromise=Promise;function Promise(descriptor,fallback,inspect){if(fallback===void 0){fallback=function(op){return reject(new Error("Promise does not support operation: "+op))}}if(inspect===void 0){inspect=function(){return{state:"unknown"}}}var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op]){result=descriptor[op].apply(promise,args)}else{result=fallback.call(promise,op,args)}}catch(exception){result=reject(exception)}if(resolve){resolve(result)}};promise.inspect=inspect;if(inspect){var inspected=inspect();if(inspected.state==="rejected"){promise.exception=inspected.reason}promise.valueOf=function(){var inspected=inspect();if(inspected.state==="pending"||inspected.state==="rejected"){return promise}return inspected.value}}return promise}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.then=function(fulfilled,rejected,progressed){var self=this;var deferred=defer();var done=false;function _fulfilled(value){try{return typeof fulfilled==="function"?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if(typeof rejected==="function"){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return typeof progressed==="function"?progressed(value):value}Q.nextTick(function(){self.promiseDispatch(function(value){if(done){return}done=true;deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done){return}done=true;deferred.resolve(_rejected(exception))}])});self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue;var threw=false;try{newValue=_progressed(value)}catch(e){threw=true;if(Q.onerror){Q.onerror(e)}else{throw e}}if(!threw){deferred.notify(newValue)}}]);return deferred.promise};Q.tap=function(promise,callback){return Q(promise).tap(callback)};Promise.prototype.tap=function(callback){callback=Q(callback);return this.then(function(value){return callback.fcall(value).thenResolve(value)})};Q.when=when;function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}Promise.prototype.thenResolve=function(value){return this.then(function(){return value})};Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)};Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})};Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)};Q.nearer=nearer;function nearer(value){if(isPromise(value)){var inspected=value.inspect();if(inspected.state==="fulfilled"){return inspected.value}}return value}Q.isPromise=isPromise;function isPromise(object){return object instanceof Promise}Q.isPromiseAlike=isPromiseAlike;function isPromiseAlike(object){return isObject(object)&&typeof object.then==="function"}Q.isPending=isPending;function isPending(object){return isPromise(object)&&object.inspect().state==="pending"}Promise.prototype.isPending=function(){return this.inspect().state==="pending"};Q.isFulfilled=isFulfilled;function isFulfilled(object){return!isPromise(object)||object.inspect().state==="fulfilled"}Promise.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};Q.isRejected=isRejected;function isRejected(object){return isPromise(object)&&object.inspect().state==="rejected"}Promise.prototype.isRejected=function(){return this.inspect().state==="rejected"};var unhandledReasons=[];var unhandledRejections=[];var reportedUnhandledRejections=[];var trackUnhandledRejections=true;function resetUnhandledRejections(){unhandledReasons.length=0;unhandledRejections.length=0;if(!trackUnhandledRejections){trackUnhandledRejections=true}}function trackRejection(promise,reason){if(!trackUnhandledRejections){return}if(typeof process==="object"&&typeof process.emit==="function"){Q.nextTick.runAfter(function(){if(array_indexOf(unhandledRejections,promise)!==-1){process.emit("unhandledRejection",reason,promise);reportedUnhandledRejections.push(promise)}})}unhandledRejections.push(promise);if(reason&&typeof reason.stack!=="undefined"){unhandledReasons.push(reason.stack)}else{unhandledReasons.push("(no stack) "+reason)}}function untrackRejection(promise){if(!trackUnhandledRejections){return}var at=array_indexOf(unhandledRejections,promise);if(at!==-1){if(typeof process==="object"&&typeof process.emit==="function"){
Q.nextTick.runAfter(function(){var atReport=array_indexOf(reportedUnhandledRejections,promise);if(atReport!==-1){process.emit("rejectionHandled",unhandledReasons[at],promise);reportedUnhandledRejections.splice(atReport,1)}})}unhandledRejections.splice(at,1);unhandledReasons.splice(at,1)}}Q.resetUnhandledRejections=resetUnhandledRejections;Q.getUnhandledReasons=function(){return unhandledReasons.slice()};Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections();trackUnhandledRejections=false};resetUnhandledRejections();Q.reject=reject;function reject(reason){var rejection=Promise({when:function(rejected){if(rejected){untrackRejection(this)}return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});trackRejection(rejection,reason);return rejection}Q.fulfill=fulfill;function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(name===null||name===void 0){return value.apply(void 0,args)}else{return value[name].apply(value,args)}},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();Q.nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}});return deferred.promise}Q.master=master;function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}Q.spread=spread;function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)};Q.async=async;function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(typeof StopIteration==="undefined"){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done){return Q(result.value)}else{return when(result.value,callback,errback)}}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception)){return Q(exception.value)}else{return reject(exception)}}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments);var callback=continuer.bind(continuer,"next");var errback=continuer.bind(continuer,"throw");return callback()}}Q.spawn=spawn;function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}Q["return"]=_return;function _return(value){throw new QReturnValue(value)}Q.promised=promised;function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}Q.dispatch=dispatch;function dispatch(object,op,args){return Q(object).dispatch(op,args)}Promise.prototype.dispatch=function(op,args){var self=this;var deferred=defer();Q.nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)});return deferred.promise};Q.get=function(object,key){return Q(object).dispatch("get",[key])};Promise.prototype.get=function(key){return this.dispatch("get",[key])};Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])};Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])};Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])};Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])};Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])};Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])};Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])};Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])};Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])};Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])};Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])};Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])};Q.fbind=function(object){var promise=Q(object);var args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Promise.prototype.fbind=function(){var promise=this;var args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Q.keys=function(object){return Q(object).dispatch("keys",[])};Promise.prototype.keys=function(){return this.dispatch("keys",[])};Q.all=all;function all(promises){var err=new Error;return when(promises,function(promises){var pendingCount=0;var deferred=defer();array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&(snapshot=promise.inspect()).state==="fulfilled"){promises[index]=snapshot.value}else{++pendingCount;when(promise,function(value){promises[index]=value;if(--pendingCount===0){deferred.resolve(promises)}},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})}},void 0);if(pendingCount===0){deferred.resolve(promises)}return deferred.promise})}Promise.prototype.all=function(){return all(this)};Q.any=any;function any(promises){if(promises.length===0){return Q.resolve()}var deferred=Q.defer();var pendingCount=0;array_reduce(promises,function(prev,current,index){var promise=promises[index];pendingCount++;when(promise,onFulfilled,onRejected,onProgress);function onFulfilled(result){deferred.resolve(result)}function onRejected(){pendingCount--;if(pendingCount===0){deferred.reject(new Error("Can't get fulfillment value from any promise, all "+"promises were rejected."))}}function onProgress(progress){deferred.notify({index:index,value:progress})}},undefined);return deferred.promise}Promise.prototype.any=function(){return any(this)};Q.allResolved=deprecate(allResolved,"allResolved","allSettled");function allResolved(promises){return when(promises,function(promises){promises=array_map(promises,Q);return when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}Promise.prototype.allResolved=function(){return allResolved(this)};Q.allSettled=allSettled;function allSettled(promises){return Q(promises).allSettled()}Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){promise=Q(promise);function regardless(){return promise.inspect()}return promise.then(regardless,regardless)}))})};Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)};Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)};Q.progress=progress;function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)};Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)};Promise.prototype.fin=Promise.prototype["finally"]=function(callback){if(!callback||typeof callback.apply!=="function"){throw new Error("Can't apply finally callback")}callback=Q(callback);return this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})};Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)};Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){Q.nextTick(function(){makeStackTraceLong(error,promise);if(Q.onerror){Q.onerror(error)}else{throw error}})};var promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if(typeof process==="object"&&process&&process.domain){onUnhandledError=process.domain.bind(onUnhandledError)}promise.then(void 0,onUnhandledError)};Q.timeout=function(object,ms,error){return Q(object).timeout(ms,error)};Promise.prototype.timeout=function(ms,error){var deferred=defer();var timeoutId=setTimeout(function(){if(!error||"string"===typeof error){error=new Error(error||"Timed out after "+ms+" ms");error.code="ETIMEDOUT"}deferred.reject(error)},ms);this.then(function(value){clearTimeout(timeoutId);deferred.resolve(value)},function(exception){clearTimeout(timeoutId);deferred.reject(exception)},deferred.notify);return deferred.promise};Q.delay=function(object,timeout){if(timeout===void 0){timeout=object;object=void 0}return Q(object).delay(timeout)};Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();setTimeout(function(){deferred.resolve(value)},timeout);return deferred.promise})};Q.nfapply=function(callback,args){return Q(callback).nfapply(args)};Promise.prototype.nfapply=function(args){var deferred=defer();var nodeArgs=array_slice(args);nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)};Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(callback).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);args.unshift(this);return Q.denodeify.apply(void 0,args)};Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());function bound(){return callback.apply(thisp,arguments)}Q(bound).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nbind=function(){var args=array_slice(arguments,0);args.unshift(this);return Q.nbind.apply(void 0,args)};Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)};Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nodeify=nodeify;function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}Promise.prototype.nodeify=function(nodeback){if(nodeback){this.then(function(value){Q.nextTick(function(){nodeback(null,value)})},function(error){Q.nextTick(function(){nodeback(error)})})}else{return this}};Q.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var qEndingLine=captureLine();return Q});var requirejs,require,define;(function(ba){function G(b){return"[object Function]"===K.call(b)}function H(b){return"[object Array]"===K.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function T(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1);}}function t(b,c){return fa.call(b,c)}function n(b,c){return t(b,c)&&b[c]}function A(b,c){for(var d in b)if(t(b,d)&&c(b[d],d))break}function U(b,c,d,e){c&&A(c,function(c,i){if(d||!t(b,i))e&&"object"===typeof c&&c&&!H(c)&&!G(c)&&!(c instanceof RegExp)?(b[i]||(b[i]={}),U(b[i],c,d,e)):b[i]=c});return b}function u(b,c){return function(){return c.apply(b,arguments)}}function ca(b){throw b}function da(b){if(!b)return b;var c=ba;v(b.split("."),function(b){c=c[b]});return c}function B(b,c,d,e){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=e;d&&(c.originalError=d);return c}function ga(b){function c(a,j,b){var f,l,c,d,h,e,g,i,j=j&&j.split("/"),p=k.map,m=p&&p["*"];if(a){a=a.split("/");l=a.length-1;k.nodeIdCompat&&Q.test(a[l])&&(a[l]=a[l].replace(Q,""));"."===a[0].charAt(0)&&j&&(l=j.slice(0,j.length-1),a=l.concat(a));l=a;for(c=0;c<l.length;c++)if(d=l[c],"."===d)l.splice(c,1),c-=1;else if(".."===d&&!(0===c||1===c&&".."===l[2]||".."===l[c-1])&&0<c)l.splice(c-1,2),c-=2;a=a.join("/")}if(b&&p&&(j||m)){l=a.split("/");c=l.length;a:for(;0<c;c-=1){h=l.slice(0,c).join("/");if(j)for(d=j.length;0<d;d-=1)if(b=n(p,j.slice(0,d).join("/")))if(b=n(b,h)){f=b;e=c;break a}!g&&(m&&n(m,h))&&(g=n(m,h),i=c)}!f&&g&&(f=g,e=i);f&&(l.splice(0,e,f),a=l.join("/"))}return(f=n(k.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(j){if(j.getAttribute("data-requiremodule")===a&&j.getAttribute("data-requirecontext")===h.contextName)return j.parentNode.removeChild(j),!0})}function p(a){var j=n(k.paths,a);if(j&&H(j)&&1<j.length)return j.shift(),h.require.undef(a),h.makeRequire(null,{skipMap:!0})([a]),!0}function g(a){var j,c=a?a.indexOf("!"):-1;-1<c&&(j=a.substring(0,c),a=a.substring(c+1,a.length));return[j,a]}function i(a,j,b,f){var l,d,e=null,i=j?j.name:null,k=a,p=!0,m="";a||(p=!1,a="_@r"+(K+=1));a=g(a);e=a[0];a=a[1];e&&(e=c(e,i,f),d=n(q,e));a&&(e?m=d&&d.normalize?d.normalize(a,function(a){return c(a,i,f)}):-1===a.indexOf("!")?c(a,i,f):a:(m=c(a,i,f),a=g(m),e=a[0],m=a[1],b=!0,l=h.nameToUrl(m)));b=e&&!d&&!b?"_unnormalized"+(O+=1):"";return{prefix:e,name:m,parentMap:j,unnormalized:!!b,url:l,originalName:k,isDefine:p,id:(e?e+"!"+m:m)+b}}function r(a){var j=a.id,b=n(m,j);b||(b=m[j]=new h.Module(a));return b}function s(a,j,b){var f=a.id,c=n(m,f);if(t(q,f)&&(!c||c.defineEmitComplete))"defined"===j&&b(q[f]);else if(c=r(a),c.error&&"error"===j)b(c.error);else c.on(j,b)}function w(a,b){var c=a.requireModules,f=!1;if(b)b(a);else if(v(c,function(b){if(b=n(m,b))b.error=a,b.events.error&&(f=!0,b.emit("error",a))}),!f)e.onError(a)}function x(){R.length&&(v(R,function(a){var b=a[0];"string"===typeof b&&(h.defQueueMap[b]=!0);C.push(a)}),R=[])}function y(a){delete m[a];delete V[a]}function F(a,b,c){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,v(a.depMaps,function(f,d){var e=f.id,h=n(m,e);h&&(!a.depMatched[d]&&!c[e])&&(n(b,e)?(a.defineDep(d,q[e]),a.check()):F(h,b,c))}),c[f]=!0)}function D(){var a,b,c=(a=1e3*k.waitSeconds)&&h.startTime+a<(new Date).getTime(),f=[],l=[],e=!1,i=!0;if(!W){W=!0;A(V,function(a){var h=a.map,g=h.id;if(a.enabled&&(h.isDefine||l.push(a),!a.error))if(!a.inited&&c)p(g)?e=b=!0:(f.push(g),d(g));else if(!a.inited&&(a.fetched&&h.isDefine)&&(e=!0,!h.prefix))return i=!1});if(c&&f.length)return a=B("timeout","Load timeout for modules: "+f,null,f),a.contextName=h.contextName,w(a);i&&v(l,function(a){F(a,{},{})});if((!c||b)&&e)if((z||ea)&&!X)X=setTimeout(function(){X=0;D()},50);W=!1}}function E(a){t(q,a[0])||r(i(a[0],null,!0)).init(a[1],a[2])}function I(a){var a=a.currentTarget||a.srcElement,b=h.onScriptLoad;a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=h.onScriptError;(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function J(){var a;for(x();C.length;){a=C.shift();if(null===a[0])return w(B("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));E(a)}h.defQueueMap={}}var W,Z,h,L,X,k={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},m={},V={},$={},C=[],q={},S={},aa={},K=1,O=1;L={require:function(a){return a.require?a.require:a.require=h.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?q[a.map.id]=a.exports:a.exports=q[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return n(k.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};Z=function(a){this.events=n($,a.id)||{};this.map=a;this.shim=n(k.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Z.prototype={init:function(a,b,c,f){f=f||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&(c=u(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=f.ignore;f.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;h.startTime=(new Date).getTime();var a=this.map;if(this.shim)h.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,h.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var f=this.exports,l=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(l)){if(this.events.error&&this.map.isDefine||e.onError!==ca)try{f=h.execCb(c,l,b,f)}catch(d){a=d}else f=h.execCb(c,l,b,f);this.map.isDefine&&void 0===f&&((b=this.module)?f=b.exports:this.usingExports&&(f=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}else f=l;this.exports=f;if(this.map.isDefine&&!this.ignore&&(q[c]=f,e.onResourceLoad))e.onResourceLoad(h,this.map,this.depMaps);y(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else t(h.defQueueMap,c)||this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=i(a.prefix);this.depMaps.push(d);s(d,"defined",u(this,function(f){var l,d;d=n(aa,this.map.id);var g=this.map.name,P=this.map.parentMap?this.map.parentMap.name:null,p=h.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(f.normalize&&(g=f.normalize(g,function(a){return c(a,P,!0)})||""),f=i(a.prefix+"!"+g,this.map.parentMap),s(f,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),d=n(m,f.id)){this.depMaps.push(f);if(this.events.error)d.on("error",u(this,function(a){this.emit("error",a)}));d.enable()}}else d?(this.map.url=h.nameToUrl(d),this.load()):(l=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=u(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];A(m,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)});w(a)}),l.fromText=u(this,function(f,c){var d=a.name,g=i(d),P=M;c&&(f=c);P&&(M=!1);r(g);t(k.config,b)&&(k.config[d]=k.config[b]);try{e.exec(f)}catch(m){return w(B("fromtexteval","fromText eval for "+b+" failed: "+m,m,[b]))}P&&(M=!0);this.depMaps.push(g);h.completeLoad(d);p([d],l)}),f.load(a.name,p,l,k))}));h.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){V[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,u(this,function(a,b){var c,f;if("string"===typeof a){a=i(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=n(L,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;s(a,"defined",u(this,function(a){this.undefed||(this.defineDep(b,a),this.check())}));this.errback?s(a,"error",u(this,this.errback)):this.events.error&&s(a,"error",u(this,function(a){this.emit("error",a)}))}c=a.id;f=m[c];!t(L,c)&&(f&&!f.enabled)&&h.enable(a,this)}));A(this.pluginMaps,u(this,function(a){var b=n(m,a.id);b&&!b.enabled&&h.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};h={config:k,contextName:b,registry:m,defined:q,urlFetched:S,defQueue:C,defQueueMap:{},Module:Z,makeModuleMap:i,nextTick:e.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=k.shim,c={paths:!0,bundles:!0,config:!0,map:!0};A(a,function(a,b){c[b]?(k[b]||(k[b]={}),U(k[b],a,!0,!0)):k[b]=a});a.bundles&&A(a.bundles,function(a,b){v(a,function(a){a!==b&&(aa[a]=b)})});a.shim&&(A(a.shim,function(a,c){H(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn)a.exportsFn=h.makeShimExports(a);b[c]=a}),k.shim=b);a.packages&&v(a.packages,function(a){var b,a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(k.paths[b]=a.location);k.pkgs[b]=a.name+"/"+(a.main||"main").replace(ha,"").replace(Q,"")});A(m,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=i(b,null,!0))});if(a.deps||a.callback)h.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ba,arguments));return b||a.exports&&da(a.exports)}},makeRequire:function(a,j){function g(c,d,p){var k,n;j.enableBuildCallback&&(d&&G(d))&&(d.__requireJsBuild=!0);if("string"===typeof c){if(G(d))return w(B("requireargs","Invalid require call"),p);if(a&&t(L,c))return L[c](m[a.id]);if(e.get)return e.get(h,c,a,g);k=i(c,a,!1,!0);k=k.id;return!t(q,k)?w(B("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):q[k]}J();h.nextTick(function(){J();n=r(i(null,a));n.skipMap=j.skipMap;n.init(c,d,p,{enabled:!0});D()});return g}j=j||{};U(g,{isBrowser:z,toUrl:function(b){var d,e=b.lastIndexOf("."),j=b.split("/")[0];if(-1!==e&&(!("."===j||".."===j)||1<e))d=b.substring(e,b.length),b=b.substring(0,e);return h.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return t(q,i(b,a,!1,!0).id)},specified:function(b){b=i(b,a,!1,!0).id;return t(q,b)||t(m,b)}});a||(g.undef=function(b){x();var c=i(b,a,!0),e=n(m,b);e.undefed=!0;d(b);delete q[b];delete S[c.url];delete $[b];T(C,function(a,c){a[0]===b&&C.splice(c,1)});delete h.defQueueMap[b];e&&(e.events.defined&&($[b]=e.events),y(b))});return g},enable:function(a){n(m,a.id)&&r(a).enable()},completeLoad:function(a){var b,c,d=n(k.shim,a)||{},e=d.exports;for(x();C.length;){c=C.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);E(c)}h.defQueueMap={};c=n(m,a);if(!b&&!t(q,a)&&c&&!c.inited){if(k.enforceDefine&&(!e||!da(e)))return p(a)?void 0:w(B("nodefine","No define call for "+a,null,[a]));E([a,d.deps||[],d.exportsFn])}D()},nameToUrl:function(a,b,c){var d,g,i;(d=n(k.pkgs,a))&&(a=d);if(d=n(aa,a))return h.nameToUrl(d,b,c);if(e.jsExtRegExp.test(a))d=a+(b||"");else{d=k.paths;a=a.split("/");for(g=a.length;0<g;g-=1)if(i=a.slice(0,g).join("/"),i=n(d,i)){H(i)&&(i=i[0]);a.splice(0,g,i);break}d=a.join("/");d+=b||(/^data\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+d}return k.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+k.urlArgs):d},load:function(a,b){e.load(h,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||ia.test((a.currentTarget||a.srcElement).readyState))N=null,a=I(a),h.completeLoad(a.id)},onScriptError:function(a){var b=I(a);if(!p(b.id))return w(B("scripterror","Script error for: "+b.id,a,[b.id]))}};h.require=h.makeRequire();return h}var e,x,y,D,I,E,N,J,r,O,ja=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ka=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ha=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ea=!z&&"undefined"!==typeof importScripts,ia=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},s={},R=[],M=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs))return;s=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(s=require,require=void 0);e=requirejs=function(b,c,d,p){var g,i="_";!H(b)&&"string"!==typeof b&&(g=b,H(c)?(b=c,c=d,d=p):b=[]);g&&g.context&&(i=g.context);(p=n(F,i))||(p=F[i]=e.s.newContext(i));g&&p.configure(g);return p.require(b,c,d)};e.config=function(b){return e(b)};e.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=e);e.version="2.1.20";e.jsExtRegExp=/^\/|:|\?|\.js$/;e.isBrowser=z;x=e.s={contexts:F,newContext:ga};e({});v(["toUrl","undef","defined","specified"],function(b){e[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0]))y=x.head=D.parentNode;e.onError=ca;e.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};e.load=function(b,c,d){var p=b&&b.config||{},g;if(z){g=e.createNode(p,c,d);if(p.onNodeCreated)p.onNodeCreated(g,p,c,d);g.setAttribute("data-requirecontext",b.contextName);g.setAttribute("data-requiremodule",c);g.attachEvent&&!(g.attachEvent.toString&&0>g.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,g.attachEvent("onreadystatechange",b.onScriptLoad)):(g.addEventListener("load",b.onScriptLoad,!1),g.addEventListener("error",b.onScriptError,!1));g.src=d;J=g;D?y.insertBefore(g,D):y.appendChild(g);J=null;return g}if(ea)try{importScripts(d),b.completeLoad(c)}catch(i){b.onError(B("importscripts","importScripts failed for "+c+" at "+d,i,[c]))}};z&&!s.skipDataMain&&T(document.getElementsByTagName("script"),function(b){y||(y=b.parentNode);if(I=b.getAttribute("data-main"))return r=I,s.baseUrl||(E=r.split("/"),r=E.pop(),O=E.length?E.join("/")+"/":"./",s.baseUrl=O),r=r.replace(Q,""),e.jsExtRegExp.test(r)&&(r=I),s.deps=s.deps?s.deps.concat(r):[r],!0});define=function(b,c,d){var e,g;"string"!==typeof b&&(d=c,c=b,b=null);H(c)||(d=c,c=null);!c&&G(d)&&(c=[],d.length&&(d.toString().replace(ja,"").replace(ka,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(M){if(!(e=J))N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return N=b}),e=N;e&&(b||(b=e.getAttribute("data-requiremodule")),g=F[e.getAttribute("data-requirecontext")])}g?(g.defQueue.push([b,c,d]),g.defQueueMap[b]=!0):R.push([b,c,d])};define.amd={jQuery:!0};e.exec=function(b){return eval(b)};e(s)}})(this);function waitForWebfonts(fonts,callback){var maxTime=5*1e3;var startTime=(new Date).getTime();var loadedFonts=0;var callbackIsRun=false;for(var i=0,l=fonts.length;i<l;++i){(function(font){var node=document.createElement("span");node.innerHTML="giItT1WQy@!-/#";node.style.position="absolute";node.style.left="-10000px";node.style.top="-10000px";node.style.fontSize="300px";node.style.fontFamily="initial";node.style.fontVariant="normal";node.style.fontStyle="normal";node.style.fontWeight="normal";node.style.letterSpacing="0";document.body.appendChild(node);var width=node.offsetWidth;node.style.fontFamily=font;var interval;function checkFont(){if(node&&((new Date).getTime()-startTime>maxTime||node.offsetWidth!=width)){++loadedFonts;node.parentNode.removeChild(node);node=null;if(interval){clearInterval(interval)}}if(loadedFonts>=fonts.length){if(loadedFonts==fonts.length){if(!callbackIsRun){callback()}callbackIsRun=true;return true}}}setTimeout(function(){if(!checkFont()){interval=setInterval(checkFont,50)}})})(fonts[i])}}(function(){var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toStr=objProto.toString;var symbolValueOf;if(typeof Symbol==="function"){symbolValueOf=Symbol.prototype.valueOf}var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={"boolean":1,number:1,string:1,undefined:1};var base64Regex=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;var hexRegex=/^[A-Fa-f0-9]+$/;var is={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return typeof value!=="undefined"};is.empty=function(value){var type=toStr.call(value);var key;if(type==="[object Array]"||type==="[object Arguments]"||type==="[object String]"){return value.length===0}if(type==="[object Object]"){for(key in value){if(owns.call(value,key)){return false}}return true}return!value};is.equal=function equal(value,other){if(value===other){return true}var type=toStr.call(value);var key;if(type!==toStr.call(other)){return false}if(type==="[object Object]"){for(key in value){if(!is.equal(value[key],other[key])||!(key in other)){return false}}for(key in other){if(!is.equal(value[key],other[key])||!(key in value)){return false}}return true}if(type==="[object Array]"){key=value.length;if(key!==other.length){return false}while(--key){if(!is.equal(value[key],other[key])){return false}}return true}if(type==="[object Function]"){return value.prototype===other.prototype}if(type==="[object Date]"){return value.getTime()===other.getTime()}return false};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is.nil=is["null"]=function(value){return value===null};is.undef=is.undefined=function(value){return typeof value==="undefined"};is.args=is.arguments=function(value){var isStandardArguments=toStr.call(value)==="[object Arguments]";var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=function(value){return toStr.call(value)==="[object Array]"};is.args.empty=function(value){return is.args(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.bool(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.bool=is["boolean"]=function(value){return toStr.call(value)==="[object Boolean]"};is["false"]=function(value){return is.bool(value)&&Boolean(Number(value))===false};is["true"]=function(value){return is.bool(value)&&Boolean(Number(value))===true};is.date=function(value){return toStr.call(value)==="[object Date]"};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return toStr.call(value)==="[object Error]"};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;return isAlert||toStr.call(value)==="[object Function]"};is.number=function(value){return toStr.call(value)==="[object Number]"};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.integer=is["int"]=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0;
};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return toStr.call(value)==="[object Object]"};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return toStr.call(value)==="[object RegExp]"};is.string=function(value){return toStr.call(value)==="[object String]"};is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))};is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))};is.symbol=function(value){return typeof Symbol==="function"&&toStr.call(value)==="[object Symbol]"&&typeof symbolValueOf.call(value)==="symbol"};window.is=is})();(function(){var is=window.is||require("is");var Type={name:"Type",check:function(obj,typeError){if(!(is.object(obj)&&is.fn(obj.check)&&is.string(obj.name)&&is.array(obj.args))){typeError()}return obj}};var checkTypesWith=function(f){return function(t,obj){if(!t.check){debugger}return t.check(obj,function(){return f(t,obj)})}};var hasType=checkTypesWith(function(t,o){var oName=is.fn(o)?"function":JSON.stringify(o);message="hasType error: "+oName+" is not a "+t.name;console.warn(message)});var id=function(obj){return obj};var Bottom=hasType(Type,{name:"Bottom",check:function(obj){return obj},args:[]});var String=hasType(Type,{name:"String",check:function(obj,hasTypeError){if(!is.string(obj)){hasTypeError()}return obj},args:[]});var Number=hasType(Type,{name:"Number",check:function(obj,hasTypeError){if(!is.number(obj)){hasTypeError()}return obj},args:[]});var Boolean=hasType(Type,{name:"Boolean",check:function(obj,hasTypeError){if(!is.boolean(obj)){hasTypeError()}return obj},args:[]});var or=function(tys){return hasType(Type,{name:"or("+tys.reduce(function(a,t){return a+t.name+",\n"},"")+")",check:function(obj,hasTypeError){var newObj=obj;var matches=[];var tryIndex=function(i,data){if(i===tys.length){return hasTypeError()}newObj=tys[i].check(obj,function(data){return tryIndex(i+1,data)},data)};tryIndex(0);return newObj},args:tys})};var List=hasType(Type,{name:"Array",check:function(obj,hasTypeError){if(!is.array(obj)){hasTypeError()}return obj},args:[]});var list=function(ty){return hasType(Type,{name:"array("+ty.name+")",check:function(obj,hasTypeError){if(!is.array(obj)){hasTypeError();return obj}if(ty){return obj.map(function(v){return ty.check(v,hasTypeError)})}return obj},args:[ty]})};var promise=function(ty){ty=ty||Bottom;return hasType(Type,{name:"promise("+ty.name+")",check:function(obj,hasTypeError){var error=false;if(!is.fn(obj.then)){hasTypeError();error=true;return obj}return obj.then(function(result){return ty.check(result,hasTypeError)})},args:[ty]})};var stream=function(ty){return hasType(Type,{name:"stream("+(ty?ty.name:"")+")",check:function(obj,hasTypeError){instance(Bacon.EventStream,"stream").check(obj,hasTypeError);if(ty){return obj.map(function(v){return ty.check(v,hasTypeError)})}else{return obj}},args:[ty]})};var object=function(desc){var name="object(";var tys=[];for(var key in desc){name+=key+", ";tys.push(desc[key])}name+=")";return hasType(Type,{name:name,check:function(obj,hasTypeError){if(!is.object(obj)){hasTypeError()}for(var key in desc){if(is.fn(desc[key])){obj[key]=desc[key]().check(obj[key],hasTypeError)}else{obj[key]=desc[key].check(obj[key],hasTypeError)}}return obj},args:tys})};var enumeration=function(options){return hasType(Type,{name:"enumeration("+options.reduce(function(s,o){return s+o+" "})+")",check:function(obj,hasTypeError){var matchesOne=false;options.map(function(o){if(o===obj){matchesOne=true}});if(!matchesOne){hasTypeError()}return obj},args:[]})};var oneOf=function(defs){var tagProp="_tag";var ty={check:function(obj,hasTypeError){return def[obj[tagProp]].check(obj,hasTypeError)}};var name="oneOf(";var args=[];for(var key in defs){name+=key+", ";ty[key]=function(obj){obj=obj||{};obj[tagProp]=key};args.push(defs[key])}name+=")";ty.name=name;ty.args=args;return hasType(Type,ty)};var cases=function(obj,cs){var tagProp="_tag";return cs[obj[tagProp]](obj)};var instance=function(klass,name){return hasType(Type,{name:"instance("+name+")",check:function(obj,hasTypeError){if(!(obj instanceof klass)){hasTypeError()}return obj},args:[]})};var func=function(hasTypes,outputType){if(hasTypes&&!is.array(hasTypes)){hasTypes=[hasTypes]}return hasType(Type,{name:"func(["+(hasTypes?hasTypes.reduce(function(s,t){return s+t.name+", "},""):"")+"], "+(outputType?outputType.name:"")+")",check:function(obj,hasTypeError,executionData){executionData=executionData||{};if(!is.fn(obj)){hasTypeError()}var checkResult=function(args,result){if(outputType){if(is.fn(outputType)){return outputType.apply(window,args).check(result,function(resultResult){return hasTypeError({args:args,result:result,resultResult:resultResult})},executionData.resultResult)}else{return outputType.check(result,function(resultResult){return hasTypeError({args:args,result:result,resultResult:resultResult})},executionData.resultResult)}}else{return result}};var checkArgs=function(args){if(hasTypes){for(var i=0;i<hasTypes.length;i++){args[i]=hasTypes[i].check(args[i],function(){hasTypeError({args:args})})}}if(executionData.result){return checkResult(args,executionData.result)}var result=obj.apply(null,args);return checkResult(args,result)};if(executionData.args){return checkArgs(executionData.args)}return function(){var args=arguments;return checkArgs(args)}},args:[]})};var _exports={Type:Type,checkTypesWith:checkTypesWith,hasType:hasType,bottom:Bottom,string:String,number:Number,bool:Boolean,or:or,List:List,list:list,promise:promise,stream:stream,object:object,enumeration:enumeration,oneOf:oneOf,cases:cases,instance:instance,func:func};var exportTo=function(obj){for(var key in _exports){obj[key]=_exports[key]}};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){exportTo(global)}else{exportTo(window)}})();var JQuery=instance($,"JQuery");var Point2D=object({x:number,y:number});var Context=object({$el:JQuery,scroll:stream(number),top:stream(number),left:stream(number),width:stream(number),height:stream(number)});var Instance=object({$el:JQuery,minWidth:stream(number),minHeight:stream(number),destroy:func()});var Component=object({create:func([Context],Instance),and:function(){return func([or([func([Instance],func([],promise())),func([Instance],func()),func([Instance],Bottom)])],Component)},all:function(){return func([list(or([func([Instance],func([],promise())),func([Instance],func()),func([Instance],Bottom)]))],Component)}});var Stream={create:function(){var ended=false;var valueD=Q.defer();var lastValue;var listeners=[];var pushValue=function(v){valueD.resolve(v);if(!ended&&lastValue!==v){lastValue=v;listeners.map(function(f){return f(v)})}};return{lastValue:function(){return lastValue},map:function(f){var stream=Stream.create();if(lastValue!==undefined){stream.push(f(lastValue))}listeners.push(function(v){stream.push(f(v))});return stream},reduce:function(f,v){var stream=Stream.once(v);if(lastValue!==undefined){stream.push(f(stream.lastValue(),lastValue))}listeners.push(function(v){stream.push(f(stream.lastValue(),v))});return stream},filter:function(f){var stream=Stream.create();if(lastValue!==undefined){f(lastValue,stream.push)}listeners.push(function(v){f(v,stream.push)});return stream},onValue:function(f){return this.map(function(v){f(v);return true})},promise:valueD.promise,prop:function(str){return this.map(function(v){return v[str]})},end:function(){ended=true},push:pushValue,pushAll:function(s){this.onValue(function(v){s.push(v)})},test:function(){var args=arguments;var err=new Error;setTimeout(function(){if(lastValue===undefined){args;err;debugger}},5e3);return this}}},once:function(v){var stream=Stream.create();stream.push(v);return stream},never:function(){return Stream.create()},combine:function(streams,f){var arr=[];var stream=Stream.create();var running=false;var err=new Error;var tryRunF=function(){if(!running){running=true;setTimeout(function(){err;running=false;for(var i=0;i<streams.length;i++){if(arr[i]===undefined){return}}stream.push(f.apply(null,arr))})}};streams.reduce(function(i,stream){stream.onValue(function(v){arr[i]=v;tryRunF()});return i+1},0);return stream},all:function(streams,f){return this.combine(streams,function(){f.apply(null,arguments);return true})},combineObject:function(streamsObject){var keys=Object.keys(streamsObject);var obj={};var stream=Stream.create();var running=false;var tryRunF=function(){if(!running){running=true;setTimeout(function(){running=false;for(var i=0;i<keys.length;i++){var key=keys[i];if(obj[key]===undefined){return}}stream.push($.extend({},obj))})}};keys.map(function(key,i){streamsObject[key].onValue(function(v){obj[key]=v;tryRunF()})});return stream},splitObject:function(obj){var keys=Object.keys(obj);var streams={};keys.map(function(key){streams[key]=Stream.once(obj[key])});return streams},fromPromise:function(p,initialValue){var stream=Stream.never();if(initialValue){stream.push(initialValue)}p.then(function(v){stream.push(v)});return stream}};var child=function(component){if(!component||!component.create){console.error("faulty component")}return function(i){i.child(component)}};var children=function(components){components.map(function(component){if(!component||!component.create){console.error("faulty component")}});return function(i){i.children(components)}};var wireChildren=function(f){return function(i){i.wireChildren=f}};var component=function(build){var comp={create:function(context){var instance=this.build(context);instance.wireChildren=instance.wireChildren||function(){};var childComponents=instance.childComponentPs;var childContexts=[];var childInstances=childComponents.map(function(childComponent){if($.isArray(childComponent)){var ctxs=[];var is=childComponent.map(function(c){var ctx=instance.newCtx();ctxs.push(ctx);return c.create(ctx)});childContexts.push(ctxs);return is}else{var ctx=instance.newCtx();childContexts.push(ctx);return childComponent.create(ctx)}});instance.childInstances=childInstances;var resultContexts=instance.wireChildren.apply(null,[instance,context].concat(childInstances))||[];var applyResult=function(resultContext,childInstance,childContext){resultContext=resultContext||{};if(resultContext.top){resultContext.top.pushAll(childContext.top)}if(resultContext.left){resultContext.left.pushAll(childContext.left)}if(resultContext.width){resultContext.width.pushAll(childContext.width)}if(resultContext.height){resultContext.height.pushAll(childContext.height)}if(resultContext.backgroundColor){resultContext.backgroundColor.pushAll(childContext.backgroundColor)}if(resultContext.fontColor){resultContext.fontColor.pushAll(childContext.fontColor)}};for(var i=0;i<childInstances.length;i++){var resultContext=resultContexts[i]||{};var childInstance=childInstances[i];var childContext=childContexts[i];if($.isArray(childInstance)){for(var j=0;j<childInstance.length;j++){applyResult(resultContext[j],childInstance[j],childContext[j])}}else{applyResult(resultContext,childInstance,childContext)}}return instance},build:build,and:function(f){var that=this;var c=$.extend({},that);c.build=function(context){var i=that.build(context);var destroyF=f(i,context);var destroy=i.destroy;if(destroyF){i.destroy=function(){var p=destroyF();if(p){p.then(function(){destroy.apply(i)})}else{destroy.apply(i)}}}return i};return c},all:function(fs){return fs.reduce(function(c,f){return c.and(f)},this)}};return comp};var findOptimalHeight=function($el,w){var $sandbox=$(".sandbox");var $clone=$el.clone();$clone.css("height","").css("width",w).appendTo($sandbox);var height=parseInt($clone.css("height"));$clone.remove();return height};var findMinWidth=function($el){var $sandbox=$(".sandbox");var $clone=$el.clone();$clone.css("width","").css("height","").appendTo($sandbox);var width=parseInt($clone.css("width"));$clone.remove();return width};var findMinHeight=function($el){var $sandbox=$(".sandbox");var $clone=$el.clone();$clone.css("width","").css("height","").appendTo($sandbox);var height=parseInt($clone.css("height"));$clone.remove();return height};var updateDomFuncs=[];var updateDomFunc=function(func){if(updateDomFuncs.length===0){setTimeout(function(){updateDomFuncs.map(function(f){f()});updateDomFuncs=[];updateWindowWidth()})}updateDomFuncs.push(func)};var el=function(name){return component(function(context){var minWidth=Stream.never();var minHeight=Stream.never();var updateMinHeight=function(){var mh=findMinHeight(i.$el);i.minWidth.push(mw);i.minHeight.push(mh)};var $el=$(document.createElement(name));$el.css("position","absolute");$el.css("visibility","hidden");context.$el.append($el);context.top.onValue(function(t){updateDomFunc(function(){$el.css("top",px(t))})});context.left.onValue(function(l){updateDomFunc(function(){$el.css("left",px(l))})});context.width.onValue(function(w){updateDomFunc(function(){$el.css("width",px(w))})});context.height.onValue(function(h){updateDomFunc(function(){$el.css("height",px(h))})});Stream.combine([context.width,context.height,context.top,context.left],function(){updateDomFunc(function(){$el.css("visibility","")})});context.backgroundColor.onValue(function(bgcolor){$el.css("background-color",bgcolor)});context.fontColor.onValue(function(bgcolor){$el.css("color",bgcolor)});var childComponentPs=[];var scrollStream=Stream.combine([context.scroll,context.top],function(scroll,top){return scroll-top});var topAccumStream=Stream.combine([context.topAccum,context.top],function(a,b){return a+b});var newCtx=function(ctx){return{$el:$el,scroll:scrollStream,topAccum:topAccumStream,top:Stream.never(),left:Stream.never(),width:Stream.never(),height:Stream.never(),backgroundColor:Stream.once("rgba(0,0,0,0)"),fontColor:Stream.once("inherit")}};return{$el:$el,optimalWidth:0,minWidth:minWidth,minHeight:minHeight,newCtx:newCtx,childComponentPs:childComponentPs,child:function(component){childComponentPs.push(component)},children:function(components){childComponentPs.push(components)},destroy:function(){minWidth.end();minHeight.end();var allInstances=this.childInstances||[];for(var i=0;i<allInstances.length;i++){var instance=allInstances[i];if($.isArray(instance)){var instances=instance;instances.map(function(i){i.destroy()})}else{instance.destroy()}}this.$el.remove()},updateDimensions:function(){return function(onlyNonzero){var mw=findMinWidth(this.$el);var mh=findMinHeight(this.$el);if(!onlyNonzero||mw!==0){this.minWidth.push(mw)}if(!onlyNonzero||mh!==0){this.minHeight.push(mh)}}}()}})};var a=el("a");var button=el("button");var div=el("div");var form=el("form");var img=el("img");var input=el("input");var li=el("li");var option=el("option");var select=el("select");var textarea=el("textarea");var ul=el("ul");var rootContext=function(){return{$el:$("body"),top:Stream.once(0),topAccum:Stream.once(0),left:Stream.once(0),scroll:windowScroll,width:windowWidth,height:Stream.never(),backgroundColor:Stream.once("white"),fontColor:Stream.once("black")}};var rootComponent=function(component){var context=rootContext();var instance=component.create(context);instance.minHeight.pushAll(context.height);return instance};var passThroughToFirst=function(instance,context,i){i.minHeight.pushAll(instance.minHeight);i.minWidth.pushAll(instance.minWidth);return[{width:context.width,height:context.height,top:Stream.once(0),left:Stream.once(0)}]};var unit=function(unit){return function(number){return number+unit}};var px=unit("px");var url=function(str){return'url("'+str+'")'};var color=function(c){return $.extend({r:0,g:0,b:0,a:1},c)};var multiplyColor=function(amount){return function(c){return{r:Math.min(255,c.r*amount),g:Math.min(255,c.g*amount),b:Math.min(255,c.b*amount),a:c.a}}};var desaturate=function(amount){return function(c){var average=(c.r+c.g+c.b)/3;var coAmount=1-amount;return{r:coAmount*c.r+amount*average,g:coAmount*c.g+amount*average,b:coAmount*c.b+amount*average,a:c.a}}};var colorString=function(c){return"rgba("+Math.floor(c.r)+","+Math.floor(c.g)+","+Math.floor(c.b)+","+c.a+")"};var rgbColorString=function(c){return"rgb("+Math.floor(c.r)+","+Math.floor(c.g)+","+Math.floor(c.b)+")"};var transparent=color({a:0});var black=color({r:0,g:0,b:0});var white=color({r:255,g:255,b:255});var $$=function(func){return function(){var args=Array.prototype.slice.call(arguments);return function(i){i.$el[func].apply(i.$el,args);setTimeout(function(){i.updateDimensions(true)})}}};var $addClass=$$("addClass");var $css=$$("css");var $attr=$$("attr");var $prop=$$("prop");var chooseHeightFromWidth=function(instance,context){var choosingHeight=false;context.width.onValue(function(w){if(!choosingHeight){choosingHeight=true;setTimeout(function(){var optimalHeight=findOptimalHeight(instance.$el,w);instance.minHeight.push(optimalHeight);choosingHeight=false})}})};var $html=function(html,setWidth){return function(instance,context){instance.$el.html(html);chooseHeightFromWidth(instance,context);if(setWidth){instance.updateDimensions()}}};var windowWidth=Stream.never();var windowHeight=Stream.never();var updateWindowWidth=function(){windowWidth.push(document.body.clientWidth)};var updateWindowHeight=function(){windowHeight.push(window.innerHeight)};$(updateWindowWidth);$(updateWindowHeight);$(window).on("resize",function(){updateWindowWidth();updateWindowHeight()});var windowResize=Stream.once(null);$(window).on("resize",function(e){windowResize.push(e)});var windowScroll=Stream.never();$(window).on("scroll",function(){windowScroll.push(window.scrollY)});windowScroll.push(window.scrollY);var windowHash=Stream.never();$(window).on("hashchange",function(){windowHash.push(location.hash)});windowHash.push(location.hash);var withMinWidth=function(mw,end){return function(i){i.minWidth.push(mw);if(end){i.minWidth.end()}}};var withMinHeight=function(mh,end){return function(i){i.minHeight.push(mh);if(end){i.minHeight.end()}}};var adjustMinHeight=function(f){return function(c){return div.all([child(c),wireChildren(function(instance,context,i){i.minWidth.pushAll(instance.minWidth);i.minHeight.map(function(mh){return f(mh)}).pushAll(instance.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height}]})])}};var withBackgroundColor=function(bc){return function(i,context){context.backgroundColor.push(colorString(bc))}};var withFontColor=function(fc){return function(i,context){context.fontColor.push(colorString(fc))}};var link=$css("cursor","pointer");var componentName=function(name){return function(i){i.$el.addClass(name)}};var onThis=function(event){return function(handler){return function(i){var disabled=false;i.$el.on(event,function(ev){if(!disabled){return handler(ev,function(){disabled=true;return function(){disabled=false}})}})}}};var changeThis=onThis("change");var clickThis=onThis("click");var inputPropertychangeThis=onThis("input propertychange");var keydownThis=onThis("keydown");var keyupThis=onThis("keyup");var mousedownThis=onThis("mousedown");var mouseoverThis=onThis("mouseover");var mouseoutThis=onThis("mouseout");var mouseupThis=onThis("mouseup");var submitThis=onThis("click");var image=function(config){var srcStream=config.src&&config.src.map?config.src:Stream.once(config.src);return img.all([function(i,context){srcStream.map(function(src){i.$el.prop("src",src)});i.minWidth.push(config.minWidth||config.chooseWidth||0);i.minHeight.push(config.minHeight||config.chooseHeight||0);i.$el.css("display","none");i.$el.on("load",function(){i.$el.css("display","");var nativeWidth=findMinWidth(i.$el);var nativeHeight=findMinHeight(i.$el);var aspectRatio=nativeWidth/nativeHeight;var minWidth,minHeight;if(config.useNativeSize!==undefined){i.minWidth.push(nativeWidth);i.minHeight.push(nativeHeight)}if(config.minWidth!==undefined){minWidth=config.minWidth;minHeight=minWidth/aspectRatio;i.minWidth.push(minWidth);i.minHeight.push(minHeight)}else if(config.minHeight!==undefined){minHeight=config.minHeight;minWidth=minHeight*aspectRatio;i.minWidth.push(minWidth);i.minHeight.push(minHeight)}if(config.chooseWidth!==undefined){context.height.map(function(height){return Math.max(config.chooseWidth,height*aspectRatio)}).pushAll(i.minWidth)}if(config.chooseHeight!==undefined){context.width.map(function(width){return Math.max(config.chooseHeight,width/aspectRatio)}).pushAll(i.minHeight)}})}])};var linkTo=function(href,c){return a.all([$prop("href",href),child(c),wireChildren(passThroughToFirst)])};var nothing=div.all([componentName("nothing"),withMinHeight(0),withMinWidth(0)]);var text=function(text){if(!(text.map&&text.push)){text=Stream.once(text)}return div.all([componentName("text"),function(instance,context){chooseHeightFromWidth(instance,context);text.onValue(function(t){instance.$el.html(t);instance.minWidth.push(findMinWidth(instance.$el))})}])};var faIcon=function(str){return text('<i class="fa fa-'+str+'"></i>')};var paragraph=function(text,minWidth){if(!(text.map&&text.push)){text=Stream.once(text)}minWidth=minWidth||0;return div.all([componentName("paragraph"),function(instance,context){chooseHeightFromWidth(instance,context);text.onValue(function(t){instance.$el.html(t);var w=context.width.lastValue();if(w){var optimalHeight=findOptimalHeight(instance.$el,w);instance.minHeight.push(optimalHeight)}})},withMinWidth(minWidth,true)])};var ignoreSurplusWidth=function(_,cols){return cols};var ignoreSurplusHeight=function(_,rows){return rows};var evenSplitSurplusWidth=function(gridWidth,positions){var lastPosition=positions[positions.length-1];var surplusWidth=gridWidth-(lastPosition.left+lastPosition.width);var widthPerCol=surplusWidth/positions.length;positions.map(function(position,i){position.width+=widthPerCol;position.left+=i*widthPerCol});return positions};var justifySurplusWidth=function(gridWidth,positions){var lastPosition=positions[positions.length-1];var surplusWidth=gridWidth-(lastPosition.left+lastPosition.width);positions.map(function(position,i){for(var index=0;index<i;index++){position.left+=surplusWidth/(positions.length-1)}});return positions};var justifyAndCenterSurplusWidth=function(gridWidth,positions){var lastPosition=positions[positions.length-1];var surplusWidth=gridWidth-(lastPosition.left+lastPosition.width);positions.map(function(position,i){position.left+=i*surplusWidth/positions.length+surplusWidth/(2*positions.length)});return positions};var superSurplusWidth=function(gridWidth,positions){var lastPosition=positions[positions.length-1];var surplusWidth=gridWidth-(lastPosition.left+lastPosition.width);if(positions.length===1){if(surplusWidth<positions[0].width){return evenSplitSurplusWidth(gridWidth,positions)}else{return positions}}if(positions.length===2){return justifyAndCenterSurplusWidth(gridWidth,positions)}return justifySurplusWidth(gridWidth,positions)};var giveToNth=function(n){return function(gridWidth,positions){var lastPosition=positions[positions.length-1];var surplusWidth=gridWidth-(lastPosition.left+lastPosition.width);positions.map(function(position,i){if(i===n||i===positions.length-1&&n>=positions.length){position.width+=surplusWidth}else if(i>n){position.left+=surplusWidth}});return positions}};var giveToFirst=giveToNth(0);var giveToSecond=giveToNth(1);var giveToThird=giveToNth(2);var evenSplitSurplusHeight=function(gridHeight,rows,config){};var sideBySide=function(config,cs){config.gutterSize=config.gutterSize||0;config.handleSurplusWidth=config.handleSurplusWidth||ignoreSurplusWidth;return div.all([componentName("sideBySide"),children(cs),wireChildren(function(instance,context,is){var allMinWidths=Stream.combine(is.map(function(i){return i.minWidth}),function(){var args=Array.prototype.slice.call(arguments);return args});allMinWidths.onValue(function(mws){instance.minWidth.push(mws.reduce(function(a,mw){return a+mw},config.gutterSize*(is.length-1)))});var contexts=is.map(function(){return{top:Stream.once(0),left:Stream.never(),width:Stream.never(),height:context.height}});Stream.all([context.width,allMinWidths],function(width,mws){var left=0;var positions=mws.map(function(mw,index){var position={left:left+config.gutterSize*index,width:mw};left+=mw;return position});positions=config.handleSurplusWidth(width,positions);positions.map(function(position,index){var ctx=contexts[index];ctx.left.push(position.left);ctx.width.push(position.width)})});Stream.combine(is.map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,b){return Math.max(a,b)},0)}).pushAll(instance.minHeight);return[contexts]})])};var intersperse=function(arr,v){var result=[];arr.map(function(el){result.push(el);result.push(v)});result.pop();return result};var stackTwo=function(options,cs){options.gutterSize=options.gutterSize||0;options.align=options.align||"left";return div.all([componentName("stack"),children(cs),wireChildren(function(instance,context,is){var i1=is[0];var i2=is[1];var gutterSize=options.gutterSize;var contexts=[];instance.minHeight.push(0);instance.minWidth.push(0);Stream.combine([i1.minHeight,i2.minHeight],function(mh1,mh2){return mh1+mh2+gutterSize}).pushAll(instance.minHeight);Stream.combine([i1.minWidth,i2.minWidth],function(mw1,mw2){return Math.max(mw1,mw2)}).pushAll(instance.minWidth);return[[{top:Stream.once(0),left:Stream.once(0),width:context.width,height:i1.minHeight},{top:i1.minHeight.map(function(mh){return mh+gutterSize}),left:Stream.once(0),width:context.width,height:i2.minHeight}]]})])};var stack=function(options,cs){options.gutterSize=options.gutterSize||0;options.collapseGutters=options.collapseGutters||false;options.align=options.align||"left";return div.all([componentName("stack"),children(cs),wireChildren(function(instance,context,is){var gutterSize=options&&options.gutterSize||0;var totalMinHeightStream=function(is){if(is.length===0){return Stream.once(0)}return Stream.combine(is.map(function(i,index){var iMinHeight;if(options&&options.mhs&&options.mhs[index]){var optionMinHeight=options.mhs[index](context);return Stream.combine([i.minHeight,optionMinHeight],function(a,b){return Math.max(a,b)})}else{return i.minHeight}return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);var mh=args.reduce(function(a,b){return a+b+(options.collapseGutters&&b===0?0:gutterSize)},-gutterSize);return mh})};var contexts=[];is.reduce(function(is,i,index){var top=totalMinHeightStream(is).map(function(t){return t===0?t:t+(options.collapseGutters&&t===0?0:gutterSize)});var iMinHeight;if(options&&options.mhs&&options.mhs[is.length]){var optionMinHeight=options.mhs[is.length](context);iMinHeight=Stream.combine([i.minHeight,optionMinHeight],function(a,b){return Math.max(a,b)})}else{iMinHeight=i.minHeight}contexts.push({top:top,left:Stream.once(0),width:context.width,height:iMinHeight});is.push(i);return is},[]);totalMinHeightStream(is).pushAll(instance.minHeight);Stream.combine(is.map(function(i){return i.minWidth}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,b){return Math.max(a,b)},0)}).pushAll(instance.minWidth);return[contexts]})])};var padding=function(amount,c){var top=amount.all||0,bottom=amount.all||0,left=amount.all||0,right=amount.all||0;if($.isNumeric(amount)){top=bottom=left=right=amount}else{for(var key in amount){var lcKey=key.toLowerCase();if(lcKey.indexOf("top")!==-1){top=amount[key]}if(lcKey.indexOf("bottom")!==-1){bottom=amount[key]}if(lcKey.indexOf("left")!==-1){left=amount[key]}if(lcKey.indexOf("right")!==-1){right=amount[key]}}}return div.all([componentName("padding"),child(c),wireChildren(function(instance,context,i){i.minWidth.map(function(mw){return mw+left+right},"padding min width").pushAll(instance.minWidth);i.minHeight.map(function(mh){return mh+top+bottom},"padding min height").pushAll(instance.minHeight);return[{top:Stream.once(top,"padding top"),left:Stream.once(left,"padding left"),width:context.width.map(function(w){return w-left-right},"padding width"),height:context.height.map(function(h){return h-top-bottom},"padding height")}]})])};var alignLRM=function(lrm){return div.all([componentName("alignLRM"),child(lrm.middle||nothing),child(lrm.left||nothing),child(lrm.right||nothing),wireChildren(function(instance,context,mI,lI,rI){var headerHeight=Stream.combine([mI,lI,rI].map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);var height=args.reduce(function(h,mh){return Math.max(h,mh)},0);return height});headerHeight.pushAll(instance.minHeight);Stream.combine([mI,lI,rI].map(function(i){return i.minWidth}),function(){var args=Array.prototype.slice.call(arguments);var height=args.reduce(function(w,mw){return w+mw},0);return height}).pushAll(instance.minWidth);var minAvailableRequested=function(available,requested){return Stream.combine([available,requested],function(a,r){return Math.min(a,r)})};var mWidth=minAvailableRequested(context.width,mI.minWidth);var lWidth=minAvailableRequested(context.width,lI.minWidth);var rWidth=minAvailableRequested(context.width,rI.minWidth);return[{top:Stream.once(0),left:Stream.combine([context.width,mWidth],function(width,mw){return(width-mw)/2}),width:mWidth,height:context.height},{top:Stream.once(0),left:Stream.once(0),width:lWidth,height:context.height},{top:Stream.once(0),left:Stream.combine([context.width,rWidth],function(width,rMW){return width-rMW}),width:rWidth,height:context.height}]})])};var alignTBM=function(tbm){tbm.middle=tbm.middle||nothing;tbm.bottom=tbm.bottom||nothing;tbm.top=tbm.top||nothing;return div.all([componentName("alignTBM"),child(tbm.middle),child(tbm.bottom),child(tbm.top),wireChildren(function(instance,context,mI,bI,tI){var minWidth=Stream.combine([mI,bI,tI].map(function(i){return i.minWidth}),function(){var args=Array.prototype.slice.call(arguments);var width=args.reduce(function(w,mw){return Math.max(w,mw)},0);return width},"alignTBM min width");minWidth.pushAll(instance.minWidth);Stream.combine([mI,bI,tI].map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);var height=args.reduce(function(h,mh){return h+mh},0);return height},"alignTBM min height").pushAll(instance.minHeight);
return[{top:Stream.combine([context.height,mI.minHeight],function(height,mh){return(height-mh)/2},"alignTBM top.top"),left:Stream.once(0),width:context.width,height:mI.minHeight},{top:Stream.combine([context.height,bI.minHeight],function(height,mh){return height-mh},"alignTBM bottom.top"),left:Stream.once(0),width:context.width,height:bI.minHeight},{top:Stream.once(0),left:Stream.once(0),width:context.width,height:tI.minHeight}]})])};var invertOnHover=function(c){var invert=Stream.once(false,"invert");var choose=function(stream1,stream2){return Stream.combine([invert,stream1,stream2],function(i,v1,v2){return i?v2:v1},"choose stream")};return div.all([componentName("invert-on-hover"),child(c.and($css("transition","background-color 0.2s linear, color 0.1s linear"))),wireChildren(function(instance,context,i){i.minHeight.pushAll(instance.minHeight);i.minWidth.pushAll(instance.minWidth);return[{backgroundColor:choose(context.backgroundColor,context.fontColor),fontColor:choose(context.fontColor,context.backgroundColor),top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height}]}),mouseoverThis(function(){invert.push(true)}),mouseoutThis(function(){invert.push(false)})])};var border=function(color,amount,c){var left=amount.left||amount.all||0;var right=amount.right||amount.all||0;var top=amount.top||amount.all||0;var bottom=amount.bottom||amount.all||0;var radius=amount.radius||0;var colorstring=colorString(color);return div.all([componentName("border"),child(div.all([componentName("border-child"),$css("border-left",px(left)+" solid "+colorstring),$css("border-right",px(right)+" solid "+colorstring),$css("border-top",px(top)+" solid "+colorstring),$css("border-bottom",px(bottom)+" solid "+colorstring),$css("border-radius",px(radius)),child(c),wireChildren(passThroughToFirst)])),wireChildren(function(instance,context,i){i.minWidth.map(function(mw){return mw+left+right}).pushAll(instance.minWidth);i.minHeight.map(function(mh){return mh+top+bottom}).pushAll(instance.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:context.width.map(function(w){return w-left-right}),height:context.height.map(function(h){return h-top-bottom})}]})])};var componentStream=function(cStream){var i;return div.all([componentName("use-component-stream"),function(instance,context){var ctx=instance.newCtx();ctx.top.push(0);ctx.left.push(0);context.width.pushAll(ctx.width);context.height.pushAll(ctx.height);var localCStream=Stream.create();cStream.pushAll(localCStream);localCStream.map(function(c){var instanceC=function(c){if(i){i.destroy()}i=c.create(ctx);i.$el.css("transition","inherit");i.minWidth.pushAll(instance.minWidth);i.minHeight.pushAll(instance.minHeight)};if(c.then){c.then(function(c){instanceC(c)},function(error){console.error("child components failed to load");console.log(error)})}else{instanceC(c)}});return function(){localCStream.end();if(i){i.destroy()}}}])};var promiseComponent=function(cP){var stream=Stream.once(nothing);cP.then(function(c){stream.push(c)});return componentStream(stream)};var toggleComponent=function(cs,indexStream){return componentStream(indexStream.map(function(i){return cs[i]}))};var modalDialog=function(stream,transition){var open=Stream.once(false);stream.pushAll(open);transition=transition||0;return function(c){return div.all([$css("z-index",100),componentName("toggle-height"),child(c),wireChildren(function(instance,context,i){instance.minWidth.push(0);instance.minHeight.push(0);var $el=i.$el;$el.css("position","fixed");$el.css("transition","opacity "+transition+"s");$el.css("display","none");open.onValue(function(on){if(on){$el.css("display","");setTimeout(function(){$el.css("opacity",1)},100)}else{$el.css("opacity",0);setTimeout(function(){$el.css("display","none")},transition*1e3)}});return[{width:i.minWidth,height:i.minHeight,left:Stream.combine([windowWidth,i.minWidth],function(windowWidth,minWidth){return(windowWidth-minWidth)/2}),top:Stream.combine([windowHeight,i.minHeight],function(windowHeight,minHeight){return Math.max(0,(windowHeight-minHeight)/2)})}]})])}};var toggleHeight=function(stream){var open=Stream.once(false);stream.pushAll(open);return function(c){return div.all([$css("overflow","hidden"),componentName("toggle-height"),child(c),wireChildren(function(instance,context,i){i.minWidth.pushAll(instance.minWidth);Stream.combine([i.minHeight,open],function(mh,onOff){return onOff?mh:0}).pushAll(instance.minHeight);return[{top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height}]})])}};var dropdownPanel=function(source,panel,onOff,config){config=config||{};config.transition=config.transition||"0.5s";return div.all([componentName("dropdown-panel"),child(panel),child(source),wireChildren(function(instance,context,iPanel,iSource){iSource.minWidth.pushAll(instance.minWidth);iSource.minHeight.pushAll(instance.minHeight);iPanel.$el.css("transition","top "+config.transition);return[{width:context.width,height:iPanel.minHeight,top:Stream.combine([onOff,iPanel.minHeight,context.height],function(on,mh,h){return on?h:h-mh}),left:Stream.once(0)},{width:context.width,height:context.height,top:Stream.once(0),left:Stream.once(0)}]})])};var fixedHeaderBody=function(config,header,body){config.transition=config.transition||"0.5s";return div.all([componentName("fixedHeaderBody"),child(body),child(header),wireChildren(function(instance,ctx,bodyI,headerI){headerI.$el.css("position","fixed");setTimeout(function(){headerI.$el.css("transition","height "+config.transition);bodyI.$el.css("transition","top "+config.transition)});Stream.combine([bodyI,headerI].map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,i){return a+i},0)}).pushAll(instance.minHeight);Stream.combine([bodyI,headerI].map(function(i){return i.minWidth}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,i){return Math.max(a,i)},0)}).pushAll(instance.minWidth);return[{top:headerI.minHeight,left:Stream.once(0),width:ctx.width,height:bodyI.minHeight},{top:Stream.once(0),left:Stream.once(0),width:ctx.width,height:headerI.minHeight}]})])};var stickyHeaderBody=function(body1,header,body2){return div.all([componentName("stickyHeaderBody"),child(body1),child(body2),child(header),wireChildren(function(instance,context,body1I,body2I,headerI){Stream.combine([body1I,body2I,headerI].map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,i){return a+i},0)}).pushAll(instance.minHeight);var fixedNow=false;return[{top:Stream.once(0),left:Stream.once(0),width:context.width,height:body1I.minHeight},{top:Stream.combine([body1I.minHeight,headerI.minHeight],function(a,b){return a+b}),left:Stream.once(0),width:context.width,height:body2I.minHeight},{top:Stream.combine([body1I.minHeight,context.scroll,context.topAccum],function(mh,scroll,topAccum){var $header=headerI.$el;mh=Math.floor(mh);if(mh>scroll+topAccum){$header.css("position","absolute");$header.css("transition","");if(fixedNow){window.scrollTo(0,mh+topAccum)}fixedNow=false;return mh}else if(mh<scroll+topAccum){$header.css("position","fixed");setTimeout(function(){$header.css("transition","inherit")},20);if(!fixedNow){window.scrollTo(0,mh+topAccum)}fixedNow=true;return topAccum}}),left:Stream.once(0),width:context.width,height:headerI.minHeight}]})])};var grid=function(config,cs){config.gutterSize=config.gutterSize||0;config.handleSurplusWidth=config.handleSurplusWidth||ignoreSurplusWidth;config.handleSurplusHeight=config.handleSurplusHeight||ignoreSurplusHeight;return padding(config.outerGutter?config.gutterSize:0,div.all([componentName("grid"),children(cs),wireChildren(function(instance,context,is){if(is.length===0){instance.minWidth.push(0);instance.minHeight.push(0)}var minWidths=Stream.combine(is.map(function(i){return i.minWidth}),function(){return Array.prototype.slice.call(arguments)});var minHeights=Stream.combine(is.map(function(i){return i.minHeight}),function(){return Array.prototype.slice.call(arguments)});minWidths.map(function(mws){return mws.reduce(function(a,mw){return Math.max(a,mw)},0)}).pushAll(instance.minWidth);var contexts=is.map(function(i){return{top:Stream.never(),left:Stream.never(),width:Stream.never(),height:Stream.never()}});var rowsStream=Stream.combine([context.width,minWidths],function(gridWidth,mws){var blankRow=function(){return{cells:[],contexts:[],height:0}};var rowsAndCurrentRow=is.reduce(function(a,i,index){var rows=a.rows;var currentRow=a.currentRow;var mw=mws[index];var widthUsedThisRow=currentRow.cells.reduce(function(a,b){return a+b+config.gutterSize},-config.gutterSize);var widthNeeded=Math.min(mw,gridWidth);if(widthNeeded>0&&widthNeeded+widthUsedThisRow>gridWidth){rows.push(currentRow);currentRow=blankRow()}currentRow.cells.push(widthNeeded);currentRow.contexts.push(contexts[index]);return{rows:rows,currentRow:currentRow}},{rows:[],currentRow:blankRow()});var rows=rowsAndCurrentRow.rows;rows.push(rowsAndCurrentRow.currentRow);rows.map(function(row,i){var widthUsed=0;var positions=row.cells.map(function(widthNeeded){var position={left:widthUsed,width:widthNeeded};widthUsed+=widthNeeded+config.gutterSize;return position});positions=config.handleSurplusWidth(gridWidth,positions,config,i);positions.map(function(position,index){var ctx=row.contexts[index];ctx.width.push(position.width)})});return rows});var rowsWithHeights=Stream.combine([minHeights,rowsStream],function(mhs,rows){var index=0;rows.map(function(row){row.height=0;row.cells.map(function(cell,i){row.height=Math.max(row.height,mhs[index+i])});index+=row.cells.length});instance.minHeight.push(rows.map(function(r){return r.height}).reduce(function(a,b){return a+b+config.gutterSize},-config.gutterSize));return rows});Stream.all([context.width,context.height,rowsWithHeights],function(gridWidth,gridHeight,rows){var top=0;rows=config.handleSurplusHeight(gridHeight,rows,config);rows.map(function(row,i){var widthUsed=0;var positions=row.cells.map(function(widthNeeded){var position={top:top,left:widthUsed,width:widthNeeded,height:row.height};widthUsed+=widthNeeded+config.gutterSize;return position});positions=config.handleSurplusWidth(gridWidth,positions,config,i);positions.map(function(position,index){var ctx=row.contexts[index];ctx.top.push(position.top);ctx.left.push(position.left);ctx.width.push(position.width);ctx.height.push(position.height)});top+=row.height+config.gutterSize})});return[contexts]})]))};var backgroundImagePosition={fit:"fit",fill:"fill"};var withMinHeightStream=function(getMinHeightStream,c){return div.all([componentName("with-min-height-stream"),child(c),wireChildren(function(instance,context,i){getMinHeightStream(i,context).pushAll(instance.minHeight);i.minWidth.pushAll(instance.minWidth);return[{top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height}]})])};var extendToWindowBottom=function(c,distanceStream){distanceStream=distanceStream||Stream.once(0);return withMinHeightStream(function(instance,context){return Stream.combine([instance.minHeight,context.top,context.topAccum,distanceStream,windowResize],function(mh,t,ta,distance){return Math.max(mh,window.innerHeight-t-ta-distance)})},c)};var overlays=function(cs){return div.all([children(cs),wireChildren(function(instance,context,is){var chooseLargest=function(streams){return Stream.combine(streams,function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,v){return Math.max(a,v)},0)})};chooseLargest(is.map(function(i){return i.minHeight})).test().pushAll(instance.minHeight);chooseLargest(is.map(function(i){return i.minWidth})).test().pushAll(instance.minWidth);return[is.map(function(i){return{top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height}})]})])};var withBackground=function(background,c){return div.all([componentName("with-background"),child(background),child(c),wireChildren(function(instance,context,bI,cI){cI.minWidth.pushAll(instance.minWidth);cI.minHeight.pushAll(instance.minHeight);var ctx={top:Stream.once(0),left:Stream.once(0),width:context.width,height:context.height};return[ctx,ctx]})])};var withBackgroundImage=function(config,c){var imgAspectRatio=Stream.once(config.aspectRatio||1);if(!config.src.map){config.src=Stream.once(config.src)}return div.all([componentName("with-background-image"),$css("overflow","hidden"),child(img.all([$css("visibility","hidden"),function(i,context){i.minWidth.push(0);i.minHeight.push(0);config.src.map(function(src){i.$el.prop("src",src)});i.$el.on("load",function(){var nativeWidth=findMinWidth(i.$el);var nativeHeight=findMinHeight(i.$el);var aspectRatio=nativeWidth/nativeHeight;imgAspectRatio.push(aspectRatio)});Stream.all([context.width,context.height],function(){i.$el.css("visibility","")})}])),child(c),wireChildren(function(instance,context,imgI,cI){cI.minWidth.pushAll(instance.minWidth);cI.minHeight.pushAll(instance.minHeight);var ctx=instance.newCtx();context.top.push(0);context.left.push(0);context.width.pushAll(ctx.width);context.height.pushAll(ctx.height);var imgCtx=instance.newCtx();imgCtx.top.push(0);imgCtx.left.push(0);Stream.all([imgAspectRatio,context.width,context.height],function(aspectRatio,ctxWidth,ctxHeight){var ctxAspectRatio=ctxWidth/ctxHeight;if(aspectRatio<ctxAspectRatio){imgCtx.width.push(ctxWidth);imgCtx.height.push(ctxWidth/aspectRatio)}else{imgCtx.width.push(ctxHeight*aspectRatio);imgCtx.height.push(ctxHeight)}});return[imgCtx,ctx]})])};var table=function(config,css){config=config||{};var gutterSize=(config.paddingSize||0)*2;return div.all(css.map(function(cs){return children(cs)})).all([componentName("table"),wireChildren(function(){var args=Array.prototype.slice.call(arguments);var instance=args[0];var context=args[1];var iss=args.slice(2);var maxMWs=Stream.combine(iss.reduce(function(a,is){a.push(Stream.combine(is.map(function(i){return i.minWidth}),function(){return Array.prototype.slice.call(arguments)}));return a},[]),function(){var rowMWs=Array.prototype.slice.call(arguments);return rowMWs.reduce(function(a,rowMWs){return rowMWs.map(function(mw,i){return Math.max(a[i]||0,mw)})},[])});maxMWs.map(function(maxMWs){var mw=maxMWs.reduce(function(a,mw){return a+mw+gutterSize},-gutterSize);instance.minWidth.push(mw)});var rowMinHeights=iss.reduce(function(a,is){a.push(Stream.combine(is.map(function(i){return i.minHeight}),function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(a,mh){return Math.max(a,mh)},0)}));return a},[]);Stream.combine(rowMinHeights,function(){var mhs=Array.prototype.slice.call(arguments);var mh=mhs.reduce(function(a,mh){return a+mh+gutterSize},-gutterSize);instance.minHeight.push(mh)});return rowMinHeights.map(function(mh,i){return iss[i].map(function(_,index){return{width:maxMWs.map(function(maxMWs){return maxMWs[index]}),height:rowMinHeights[i],top:Stream.combine(rowMinHeights.slice(0,i).concat([Stream.once(0)]),function(){var mhs=Array.prototype.slice.call(arguments);return mhs.reduce(function(a,mh){return a+mh+gutterSize},-gutterSize)}),left:maxMWs.map(function(maxMWs){return maxMWs.reduce(function(a,mw,mwI){return a+(mwI<index?mw+gutterSize:0)},0)})}})})})])};var tabs=function(list,stream){var whichTab=stream||Stream.once(0);return stack({},[sideBySide({},list.map(function(item,index){return alignTBM({bottom:toggleComponent([item.tab.left,item.tab.right,item.tab.selected],whichTab.map(function(i){if(index<i){return 0}if(index>i){return 1}return 2})).all([link,clickThis(function(){whichTab.push(index)})])})})),componentStream(whichTab.map(function(i){return list[i].content}))])};var matchStrings=function(stringsAndRouters){return function(str){for(var i=0;i<stringsAndRouters.length;i++){var stringAndRouter=stringsAndRouters[i];if(str.indexOf(stringAndRouter.string)===0){return stringAndRouter.router(str.substring(stringAndRouter.string.length))}}}};var routeToComponent=function(component){return function(){return component}};var routeToComponentF=function(componentF){return function(){return componentF()}};var routeToFirst=function(routers){return function(str){for(var i=0;i<routers.length;i++){var result=routers[i](str);if(result){return result}}}};var routeMatchRest=function(f){return function(str){return Q(str).then(f)}};var route=function(router){var i;return div.all([child(div.all([componentName("route"),function(instance,context){windowHash.onValue(function(hash){if(i){i.destroy()}Q.all([router(hash)]).then(function(cs){var c=cs[0];i=c.create(context);i.$el.css("transition","inherit");i.minWidth.pushAll(instance.minWidth);i.minHeight.pushAll(instance.minHeight)},function(error){console.error("child components failed to load");console.log(error)})})}])),wireChildren(passThroughToFirst)])};(function(){var globalHandlers=[console.error,function(){debugger}];var Err={handleWith:function(errHandler){return function(func){return function(err,val){if(err!==null&&typeof err!=="undefined"){return errHandler(err)}else{return func(val,function(result){return errHandler(null,result)})}}}},reportError:function(err){globalHandlers.map(function(globalHandler){globalHandler(err)})},handle:function(func){return Err.handleWith(Err.reportError)(func)},addLogger:function(f){globalHandlers.push(f)}};if(typeof exports==="undefined"){window.Err=Err}else{module.exports=Err}})();(function(){var file=function(accept){return{name:"file",accept:accept||"*"}};var editorType={id:{name:"id"},string:{name:"string"},paragraph:{name:"paragraph"},html:{name:"html"},password:{name:"password"},number:{name:"number"},date:{name:"date"},bool:{name:"bool"},foreignKey:function(name,nameField){return{name:"foreignKey",table:name,nameField:nameField}},enumeration:function(options){return{name:"enumeration",options:options}},oneOf:function(options){return{name:"oneOf",options:options}},file:file,image:file("image/*"),listOf:function(editorType){return{name:"listOf",editorType:editorType}}};if(typeof exports==="undefined"){window.editorType=editorType}else{module.exports=editorType}})();(function(){var genType=function(ObjectId,sanitizeHtml){return{string:{title:"String",fromString:function(str){return sanitizeHtml?sanitizeHtml(str):str}},id:{title:"Object ID",fromString:function(str){return new ObjectId(str)}},json:{title:"JSON object",fromString:function(str){return str}},number:{title:"Number",fromString:function(str){return str}},date:{title:"Date",fromString:function(str){return str&&new Date(str)}},bool:{title:"Boolean",fromString:function(str){return str}}}};if(typeof exports==="undefined"){window.type=genType(ObjectId)}else{var ObjectID=require("mongodb").ObjectID;var sanitizeHtml=require("sanitize-html");module.exports=genType(ObjectID,sanitizeHtml)}})();(function(){var genSchema=function(editorType,Err,type,ObjectId){var always=function(user,doc,db,next){return next(true)};var never=function(user,doc,db,next){return next(false)};var ifAdmin=function(user,doc,db,next){if(!user){return next(false)}return db.admin.findOne({user:user._id},function(admin){return next(admin)})};var ifOwner=function(userProp){return function(user,doc,db,next){if(!user){return next(false)}if(!doc){return next(false)}return next(ObjectId.equal(user._id,doc[userProp]))}};var ifLoggedIn=function(user,doc,db,next){return next(user)};var any=function(constraints){if(typeof exports!=="undefined"){var async=require("async");return function(user,doc,db,next){return async.map(constraints,function(constraint,next){return constraint(user,doc,db,function(v){return next(null,v)})},function(err,results){return next(results.reduce(function(a,r){return a||r},false))})}}};var schema=[{name:"upload",fields:[{name:"_id",type:type.id},{name:"creator",type:type.id}],mayFind:always,mayInsert:ifOwner("creator"),mayUpdate:ifOwner("creator"),mayRemove:never},{name:"profile",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"firstName",type:type.string,editorType:editorType.string,displayName:"First Name"},{name:"lastName",type:type.string,editorType:editorType.string,displayName:"Last Name"},{name:"email",type:type.string,editorType:editorType.string,displayName:"Email"},{name:"birthday",type:type.date,editorType:editorType.date,displayName:"Birthday"},{name:"bio",type:type.string,editorType:editorType.html,displayName:"Bio"},{name:"imageUrl",type:type.string,editorType:editorType.image,displayName:"Profile Picture"},{name:"holibirther",type:type.bool,editorType:editorType.bool,displayName:"I am a Holibirther"},{name:"knowAHolibirther",type:type.bool,editorType:editorType.bool,displayName:"I know a Holibirther"},{name:"receiveMarketingEmails",type:type.bool,editorType:editorType.bool,displayName:"I wish to receive emails from Holibirthday"}],mayFind:always,mayInsert:never,mayUpdate:any([ifOwner("user"),ifAdmin]),mayRemove:never},{name:"user",fields:[{name:"_id",type:type.id},{name:"email",type:type.id},{name:"emailConfirmationToken",type:type.string},{name:"passwordEncrypted",type:type.string},{name:"facebookId",type:type.string}],mayFind:never,mayInsert:never,mayUpdate:never,mayRemove:never},{name:"admin",fields:[{name:"_id",type:type.id},{name:"user",type:type.id}],mayFind:ifOwner("user"),mayInsert:never,mayUpdate:never,mayRemove:never},{name:"holibirthday",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"month",type:type.number,editorType:editorType.number,displayName:"Holibirth-month"},{name:"day",type:type.number,editorType:editorType.number,displayName:"Holibirth-day"},{name:"date",type:type.date,editorType:editorType.date,displayName:"Holibirthdate"},{name:"createDate",type:type.date}],mayFind:always,mayInsert:ifOwner("user"),mayUpdate:ifOwner("user"),mayRemove:ifOwner("user")},{name:"pointsChange",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"amount",type:type.number},{name:"reason",type:type.string},{name:"createDate",type:type.date}],mayFind:always,mayInsert:never,mayUpdate:never,mayRemove:never},{name:"pointsTotal",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"amount",type:type.number},{name:"createDate",type:type.date}],mayFind:always,mayInsert:never,mayUpdate:never,mayRemove:never},{name:"storyLike",fields:[{name:"_id",type:type.id},{name:"user",type:type.user},{name:"story",type:type.story}],mayFind:always,mayInsert:ifOwner("user"),mayUpdate:never,mayRemove:never},{name:"story",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"name",type:type.string},{name:"text",type:type.string},{name:"storyType",type:type.string},{name:"imageUrl",type:type.string},{name:"imageWidth",type:type.number},{name:"isPublic",type:type.bool},{name:"createDate",type:type.date},{name:"updateDate",type:type.date}],storyType:{best:"best",worst:"worst",forgotmenot:"forgotmenot",blog:"blog"},mayFind:always,mayInsert:function(user,doc,db,next){if(doc.storyType==="blog"){if(!user){return next(false)}return db.admin.findOne({user:user._id},function(admin){return next(admin)})}return next(user)},mayUpdate:any([ifAdmin,ifOwner("user")]),mayRemove:any([ifAdmin,ifOwner("user")])},{name:"comment",fields:[{name:"_id",type:type.id},{name:"story",type:type.id},{name:"user",type:type.id},{name:"text",type:type.string},{name:"createDate",type:type.string},{name:"updateDate",type:type.string}],mayFind:always,mayInsert:ifOwner("user"),mayUpdate:ifOwner("user"),mayRemove:any([ifAdmin,ifOwner("user")])},{name:"dailyTheme",fields:[{name:"_id",type:type.id},{name:"createDate",type:type.date},{name:"updateDate",type:type.date},{name:"type",type:type.string,options:{featuredStory:"featuredStory",featuredGift:"featuredGift",poll:"poll",someText:"someText"},displayName:"Type",editorType:editorType.enumeration([{name:"Featured Story",value:"featuredStory"},{name:"Featured Gift",value:"featuredGift"},{name:"Poll",value:"poll"},{name:"Some Text",value:"someText"}])},{name:"storyId",type:type.id,displayName:"Story",editorType:editorType.foreignKey("story","name")},{name:"storyText",type:type.string,displayName:"Description",editorType:editorType.html},{name:"giftId",type:type.number,displayName:"Gift",editorType:{name:"gift"}},{name:"giftText",type:type.string,displayName:"Description",editorType:editorType.html},{name:"pollTitle",type:type.string,displayName:"Title",editorType:editorType.string},{name:"pollDescription",type:type.string,displayName:"Description",editorType:editorType.html},{name:"pollChoices",type:type.json,displayName:"Choices",editorType:editorType.listOf(editorType.string)},{name:"pollImage",type:type.string,displayName:"Picture",editorType:editorType.image},{name:"someTextTitle",type:type.string,displayName:"Title",editorType:editorType.string},{name:"someTextText",type:type.string,displayName:"Text",editorType:editorType.html},{name:"someTextImage",type:type.string,displayName:"Picture",editorType:editorType.image}],mayFind:always,mayInsert:ifAdmin,mayUpdate:ifAdmin,mayRemove:ifAdmin},{name:"dailyThemePollResponse",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"dailyTheme",type:type.id},{name:"choice",type:type.number},{name:"createDate",type:type.date}],mayFind:always,mayInsert:ifLoggedIn,mayUpdate:never,mayRemove:never},{name:"gafyStyle",fields:[{name:"_id",type:type.id},{name:"styleNumber",type:type.string,editorType:editorType.string,displayName:"Style Number"},{name:"styleDescription",type:type.string,editorType:editorType.string,displayName:"Style Description"},{name:"imageUrl",type:type.string,displayName:"Style Picture",editorType:editorType.image},{name:"sizesImageUrl",type:type.string,displayName:"Sizes Chart Picture",editorType:editorType.image},{name:"sizes",type:type.json,editorType:editorType.listOf(editorType.string),displayName:"Sizes"},{name:"colors",type:type.json,editorType:{name:"gafyColor"},displayName:"Colors"},{name:"price",type:type.json,editorType:editorType.number,displayName:"Price"}],mayFind:always,mayInsert:ifAdmin,mayUpdate:ifAdmin,mayRemove:ifAdmin},{name:"gafyDesign",fields:[{name:"_id",type:type.id},{name:"designNumber",type:type.string,displayName:"Design Number",editorType:editorType.string},{name:"designDescription",type:type.string,displayName:"Design Description",editorType:editorType.string},{name:"printLocation",type:type.string,displayName:"Print Location",editorType:editorType.string},{name:"imageUrl",type:type.string,displayName:"Design Image",editorType:editorType.image},{name:"styles",type:type.json,displayName:"Styles",editorType:{name:"gafyStyle"}},{name:"colors",type:type.json,displayName:"Colors",editorType:{name:"gafyColor"}},{name:"month",type:type.string,displayName:"Month / Timeless",editorType:editorType.oneOf(["Timeless","January","February","March","April","May","June","July","August","September","October","November","December"])}],mayFind:always,mayInsert:ifAdmin,mayUpdate:ifAdmin,mayRemove:ifAdmin},{name:"contactUsMessage",fields:[{name:"_id",type:type.id},{name:"name",type:type.string},{name:"email",type:type.string},{name:"message",type:type.string}],mayFind:never,mayInsert:always,mayUpdate:never,mayRemove:never},{name:"siteCopyItem",fields:[{name:"_id",type:type.id},{name:"uniqueName",type:type.string},{name:"value",type:type.string}],mayFind:always,mayInsert:ifAdmin,mayUpdate:ifAdmin,mayRemove:ifAdmin,options:[{name:"Home Tagline",multiline:false},{name:"Home Share Your Story",multiline:false},{name:"Home Claim Your Holibirthday",multiline:false},{name:"Home Find Friends",multiline:false},{name:"Edit Story Title",multiline:false},{name:"Edit Story Smaller Title",multiline:false},{name:"Edit Story Instructions",multiline:true},{name:"Edit Story Submit Instructions",multiline:true},{name:"Order Confirmation Email: From",multiline:false},{name:"Order Confirmation Email: From Name",multiline:false},{name:"Order Confirmation Email: Subject",multiline:false},{name:"Order Confirmation Email: Text ( {{orderNumber}} includes order number)",multiline:true},{name:"Header Gifts",multiline:true},{name:"Header Cart",multiline:true},{name:"Header Wishlist",multiline:true},{name:"Header My Profile",multiline:true},{name:"Header Sign In",multiline:true},{name:"Header Sign Out",multiline:true},{name:"Header Register",multiline:true},{name:"Header Admin",multiline:true}]},{name:"gafyOrder",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"orderBatch",type:type.string},{name:"customerEmailAddress",type:type.string},{name:"firstName",type:type.string},{name:"lastName",type:type.string},{name:"addressLine1",type:type.string},{name:"addressLine2",type:type.string},{name:"addressCity",type:type.string},{name:"addressState",type:type.string},{name:"addressZip",type:type.string},{name:"addressCountry",type:type.string},{name:"designNumber",type:type.string},{name:"designDescription",type:type.string},{name:"printLocation",type:type.string},{name:"styleNumber",type:type.string},{name:"styleDescription",type:type.string},{name:"color",type:type.string},{name:"size",type:type.string},{name:"quantity",type:type.number},{name:"shippingMethod",type:type.string}],mayFind:never,mayInsert:always,mayUpdate:never,mayRemove:never},{name:"stripePayment",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"email",type:type.string},{name:"orderBatch",type:type.string},{name:"amount",type:type.number},{name:"stripeToken",type:type.string}],mayFind:never,mayInsert:always,mayUpdate:never,mayRemove:never},{name:"stripeDonation",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"email",type:type.string},{name:"amount",type:type.number},{name:"stripeToken",type:type.string}],mayFind:never,mayInsert:always,mayUpdate:never,mayRemove:never},{name:"gafyWishlist",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"items",type:type.json}],mayFind:always,mayInsert:ifOwner("user"),mayUpdate:ifOwner("user"),mayRemove:ifOwner("user")},{name:"sendEmail",fields:[{name:"_id",type:type.id},{name:"constraintSource",type:type.string},{name:"monthGT",type:type.number},{name:"dayGT",type:type.number},{name:"monthLT",type:type.number},{name:"dayLT",type:type.number},{name:"from",type:type.string},{name:"fromName",type:type.string},{name:"subject",type:type.string},{name:"text",type:type.string}],mayFind:never,mayInsert:ifAdmin,mayUpdate:never,mayRemove:never},{name:"famousBirthday",fields:[{name:"_id",type:type.id},{name:"name",type:type.string,displayName:"Name",editorType:editorType.string},{name:"birthday",type:type.date,displayName:"Birthday (year is ignored)",editorType:editorType.date},{name:"description",type:type.string,displayName:"Description",editorType:editorType.paragraph},{name:"imageUrl",type:type.string,displayName:"Image",editorType:editorType.image}],mayFind:always,mayInsert:ifAdmin,mayUpdate:ifAdmin,mayRemove:ifAdmin},{name:"contactOtherUser",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"otherUser",type:type.id}],mayFind:ifOwner("user"),mayInsert:ifOwner("user"),mayUpdate:ifOwner("user"),mayRemove:ifOwner("user")},{name:"contactCustom",fields:[{name:"_id",type:type.id},{name:"user",type:type.id},{name:"name",type:type.string,displayName:"Name",editorType:editorType.string},{name:"birthday",type:type.date,displayName:"Birthday",editorType:editorType.date},{name:"email",type:type.string,displayName:"Email",editorType:editorType.string}],mayFind:ifOwner("user"),mayInsert:ifOwner("user"),mayUpdate:ifOwner("user"),mayRemove:ifOwner("user")}];schema.map(function(table){schema[table.name]=table;table.fields.map(function(field){table.fields[field.name]=field})});if(typeof exports!=="undefined"){var async=require("async");var middleware=function(){var pipeline=[];return{use:function(func){pipeline.push(func)},invoke:function(){var args=Array.prototype.slice.call(arguments);var index=args.length-1;var next=args.splice(index,1)[0];async.map(pipeline,function(func,next){thisArgs=args.slice();thisArgs.push(next);func.apply(null,thisArgs)},next)}}};schema.map(function(table){
table.findMiddleware=middleware();table.insertMiddleware=middleware();table.updateMiddleware=middleware();table.removeMiddleware=middleware();table.postFindMiddleware=middleware();table.postInsertMiddleware=middleware();table.postUpdateMiddleware=middleware();table.postRemoveMiddleware=middleware()})}return schema};if(typeof exports==="undefined"){ObjectId.equal=function(id1,id2){return id1&&id2&&id1.toString()===id2.toString()};window.schema=genSchema(window.editorType,window.Err,window.type,ObjectId)}else{var ObjectID=require("mongodb").ObjectID;ObjectID.equal=function(id1,id2){return id1&&id2&&id1.toString()===id2.toString()};var editorType=require("./editorType");var Err=require("./Err");var type=require("./type");module.exports=genSchema(editorType,Err,type,ObjectID)}})();$(function(){waitForWebfonts(["BebasNeue","CelebrationTime","FontAwesome","Open Sans","Raleway Thin"],function(){$("body").append('<script src="app.js"></script>')})});